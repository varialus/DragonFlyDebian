diff -ur -x debian a/cddl/contrib/opensolaris/head/thread.h b/cddl/contrib/opensolaris/head/thread.h
--- a/cddl/contrib/opensolaris/head/thread.h	2009-07-09 16:22:05.000000000 -0400
+++ b/cddl/contrib/opensolaris/head/thread.h	2010-07-27 20:09:06.102102259 -0400
@@ -30,7 +30,10 @@
 #pragma ident	"%Z%%M%	%I%	%E% SMI"
 
 #include <pthread.h>
+/* On GNU libc, non-POSIX facilities are in <pthread.h> */
+#ifndef __GLIBC__
 #include <pthread_np.h>
+#endif
 #include <assert.h>
 
 /*
diff -ur -x debian a/sys/cddl/compat/opensolaris/sys/sysmacros.h b/sys/cddl/compat/opensolaris/sys/sysmacros.h
--- a/sys/cddl/compat/opensolaris/sys/sysmacros.h	2009-02-28 11:21:25.000000000 -0500
+++ b/sys/cddl/compat/opensolaris/sys/sysmacros.h	2010-07-27 20:09:06.103115289 -0400
@@ -103,7 +103,7 @@
  * High order bit is 31 (or 63 in _LP64 kernel).
  */
 static __inline int
-highbit(ulong_t i)
+highbit(unsigned long i)
 {
 	register int h = 1;
 
diff -ur -x debian a/sys/cddl/compat/opensolaris/sys/time.h b/sys/cddl/compat/opensolaris/sys/time.h
--- a/sys/cddl/compat/opensolaris/sys/time.h	2008-11-17 15:49:29.000000000 -0500
+++ b/sys/cddl/compat/opensolaris/sys/time.h	2010-07-27 20:09:06.104125719 -0400
@@ -29,7 +29,12 @@
 #ifndef _OPENSOLARIS_SYS_TIME_H_
 #define	_OPENSOLARIS_SYS_TIME_H_
 
+/* GNU libc has <sys/time.h> but no <time.h> */
+#ifdef __GLIBC__
+#include_next <time.h>
+#else
 #include_next <sys/time.h>
+#endif
 
 #define SEC		1
 #define MILLISEC	1000
