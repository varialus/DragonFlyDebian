
See #594940  

--- a/sys/modules/drm/Makefile
+++ b/sys/modules/drm/Makefile
@@ -4,9 +4,6 @@
 	drm \
 	i915 \
 	mach64 \
-	mga \
-	r128 \
-	radeon \
 	savage \
 	sis \
 	tdfx \
--- a/sys/modules/Makefile
+++ b/sys/modules/Makefile
@@ -37,7 +37,6 @@
 	ath \
 	ath_pci \
 	${_auxio} \
-	bce \
 	bfe \
 	bge \
 	${_bxe} \
@@ -56,7 +55,6 @@
 	cc \
 	cd9660 \
 	cd9660_iconv \
-	${_ce} \
 	${_ciss} \
 	${_cm} \
 	${_cmx} \
@@ -64,14 +62,11 @@
 	coda5 \
 	${_coff} \
 	${_coretemp} \
-	${_cp} \
 	${_cpuctl} \
 	${_cpufreq} \
 	${_crypto} \
 	${_cryptodev} \
 	${_cs} \
-	${_ctau} \
-	${_cxgb} \
 	cxgbe \
 	${_cyclic} \
 	dc \
@@ -94,13 +89,11 @@
 	${_ex} \
 	${_exca} \
 	${_ext2fs} \
-	fatm \
 	fdc \
 	fdescfs \
 	${_fe} \
 	firewire \
 	firmware \
-	fxp \
 	gem \
 	geom \
 	${_glxiic} \
@@ -141,14 +134,10 @@
 	ip_mroute_mod \
 	${_ips} \
 	${_ipw} \
-	${_ipwfw} \
 	iscsi \
 	isp \
-	ispfw \
 	${_iwi} \
-	${_iwifw} \
 	${_iwn} \
-	${_iwnfw} \
 	${_ixgb} \
 	${_ixgbe} \
 	jme \
@@ -203,7 +192,6 @@
 	${_mthca} \
 	mvs \
 	mwl \
-	mwlfw \
 	mxge \
 	my \
 	${_ncp} \
@@ -252,14 +240,12 @@
 	puc \
 	${_qlxgb} \
 	ral \
-	ralfw \
 	${_random} \
 	rc4 \
 	${_rdma} \
 	re \
 	reiserfs \
 	rl \
-	runfw \
 	${_s3} \
 	${_safe} \
 	${_sbni} \
@@ -269,7 +255,6 @@
 	sdhci \
 	sem \
 	send \
-	sf \
 	${_sfxge} \
 	sge \
 	siba_bwn \
@@ -278,7 +263,6 @@
 	sis \
 	sk \
 	${_smbfs} \
-	sn \
 	${_snc} \
 	snp \
 	${_sound} \
@@ -293,7 +277,6 @@
 	${_sym} \
 	${_syscons} \
 	sysvipc \
-	ti \
 	tl \
 	tmpfs \
 	${_tpm} \
@@ -302,7 +285,6 @@
 	twe \
 	tws \
 	tx \
-	txp \
 	uart \
 	ubsec \
 	udf \
@@ -330,7 +312,6 @@
 	wlan_wep \
 	wlan_xauth \
 	${_wpi} \
-	${_wpifw} \
 	${_x86bios} \
 	${_xe} \
 	xfs \
--- a/sys/modules/sound/driver/Makefile
+++ b/sys/modules/sound/driver/Makefile
@@ -1,7 +1,7 @@
 # $DragonFlyBSD$
 
-SUBDIR=		ad1816 als4000 atiixp cs4281 csa ds1 emu10k1 emu10kx
-SUBDIR+=	envy24 envy24ht es137x ess fm801 hda ich maestro maestro3
+SUBDIR=		ad1816 als4000 atiixp cs4281 emu10k1 emu10kx
+SUBDIR+=	envy24 envy24ht es137x ess fm801 hda ich maestro
 SUBDIR+=	neomagic sb16 sb8 sbc solo spicds t4dwave via8233
 SUBDIR+=	via82c686 vibes driver uaudio
 
--- a/sys/modules/usb/Makefile
+++ b/sys/modules/usb/Makefile
@@ -27,11 +27,11 @@
 
 SUBDIR = usb
 SUBDIR += ehci musb ohci uhci xhci uss820dci ${_at91dci} ${_atmegadci}
-SUBDIR += rum run uath upgt usie ural zyd ${_urtw}
+SUBDIR += run upgt usie ural ${_urtw}
 SUBDIR += atp uhid ukbd ums udbp ufm uep
 SUBDIR += ucom u3g uark ubsa ubser uchcom ucycom ufoma uftdi ugensa uipaq ulpt \
 	  umct umcs umodem umoscom uplcom uslcom uvisor uvscom
-SUBDIR += uether aue axe cdce cue kue mos rue udav uhso ipheth
+SUBDIR += uether aue axe cdce cue mos rue udav uhso ipheth
 SUBDIR += usfs umass urio
 SUBDIR += quirk template
 
--- /dev/null
+++ b/sys/conf/DEBIAN
@@ -0,0 +1,4 @@
+# Common options to all Debian GNU/kDragonFlyBSD kernels
+
+# Disable binary blobs
+include		WITHOUT_SOURCELESS
--- /dev/null
+++ b/sys/conf/WITHOUT_SOURCELESS
@@ -0,0 +1,7 @@
+#
+# WITHOUT_SOURCELESS -- Disable drivers that include sourceless code.
+#
+# $DragonFlyBSD$
+
+include WITHOUT_SOURCELESS_HOST
+include WITHOUT_SOURCELESS_UCODE
--- /dev/null
+++ b/sys/conf/WITHOUT_SOURCELESS_HOST
@@ -0,0 +1,10 @@
+#
+# WITHOUT_SOURCELESS_HOST -- Disable drivers that include sourceless
+# native code for host CPU.
+#
+# $DragonFlyBSD$
+
+nodevice	hpt27xx
+nodevice	hptmv
+nodevice	hptrr
+nodevice	nve
--- /dev/null
+++ b/sys/conf/WITHOUT_SOURCELESS_UCODE
@@ -0,0 +1,41 @@
+#
+# WITHOUT_SOURCELESS_UCODE -- Disable drivers that include sourceless
+# microcode.
+#
+# $DragonFlyBSD$
+
+nodevice	adw
+nodevice	bce
+nodevice	fatm
+nodevice	fxp
+nodevice	ispfw
+nodevice	mwlfw
+nodevice	ralfw
+nodevice	runfw
+nodevice	sf
+nodevice	sn
+nodevice	ti
+nodevice	txp
+nodevice	ce
+nodevice	cp
+nodevice	ctau
+nodevice	ipwfw
+nodevice	iwifw
+nodevice	iwnfw
+nodevice	wpifw
+
+# drm
+nodevice	mga
+nodevice	r128
+nodevice	radeon
+
+# sound
+nodevice	csa
+nodevice	ds1
+nodevice	maestro3
+
+# usb
+nodevice	rum
+nodevice	uath
+nodevice	zyd
+nodevice	kue
