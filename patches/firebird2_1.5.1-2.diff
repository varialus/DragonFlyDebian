
  Status: in BTS

  config.guess
  control.in

diff -ur firebird2-1.5.1.old/debian/control.in firebird2-1.5.1/debian/control.in
--- firebird2-1.5.1.old/debian/control.in	2004-08-12 01:43:50.000000000 +0200
+++ firebird2-1.5.1/debian/control.in	2004-08-12 17:58:45.000000000 +0200
@@ -3,11 +3,11 @@
 Priority: optional
 Maintainer: Debian Firebird Group <pkg-firebird-general@lists.alioth.debian.org>
 Uploaders: Daniel Urban <daniel@sente.pl>
-Build-Depends: debhelper (>> 3.0.0), docbook-to-man, autoconf, libtool, libncurses5-dev, bison
+Build-Depends: debhelper (>> 3.0.0), docbook-to-man, autoconf, libtool, libncurses5-dev, bison, type-handling (>= 0.2.1)
 Standards-Version: 3.6.1
 
 Package: firebird2-super-server
-Architecture: i386
+Architecture: @arches@
 Depends: ${shlibs:Depends}, firebird2-server-common
 Provides: firebird2-server
 Conflicts: firebird2-server, firebird-server
@@ -30,7 +30,7 @@
  License v.1.0 on 25 July, 2000. 
 	   
 Package: firebird2-classic-server
-Architecture: i386
+Architecture: @arches@
 Depends: ${shlibs:Depends}, firebird2-server-common
 Provides: firebird2-server
 Conflicts: firebird2-server, firebird-server
@@ -53,7 +53,7 @@
  License v.1.0 on 25 July, 2000. 
 
 Package: libfirebird2-super
-Architecture: i386
+Architecture: @arches@
 Depends: ${shlibs:Depends}
 Provides: libfirebird2, libfirebird
 Conflicts: libfirebird2, libfirebird
@@ -61,7 +61,7 @@
  Please see the firebird2-super-server package for a full description.
 
 Package: libfirebird2-classic
-Architecture: i386
+Architecture: @arches@
 Depends: ${shlibs:Depends}
 Provides: libfirebird2, libfirebird
 Conflicts: libfirebird2, libfirebird
@@ -69,7 +69,7 @@
  Please see the firebird2-classic-server package for a full description.
 
 Package: firebird2-server-common
-Architecture: i386
+Architecture: @arches@
 Depends: ${shlibs:Depends}
 Recommends: firebird2-server
 Conflicts: firebird-common
@@ -92,7 +92,7 @@
  License v.1.0 on 25 July, 2000.
 
 Package: firebird2-utils-super
-Architecture: i386
+Architecture: @arches@
 Depends: ${shlibs:Depends}, firebird2-server-common
 Conflicts: firebird-utils
 Description: Utilities for Firebird - a RDBMS based on InterBase 6.0 code
@@ -105,7 +105,7 @@
  about Firebird in general. 
 
 Package: firebird2-utils-classic
-Architecture: i386
+Architecture: @arches@
 Depends: ${shlibs:Depends}, firebird2-server-common
 Conflicts: firebird-utils
 Description: Utilities for Firebird - a RDBMS based on InterBase 6.0 code
@@ -118,7 +118,7 @@
  about Firebird in general. 
 
 Package: firebird2-dev
-Architecture: i386
+Architecture: @arches@
 Depends: libfirebird2
 Suggests: firebird2-examples
 Conflicts: firebird-dev
@@ -129,7 +129,7 @@
  about Firebird in general.
 
 Package: firebird2-examples
-Architecture: i386
+Architecture: @arches@
 Description: Examples for Firebird - a RDBMS based on InterBase 6.0 code
  The examples included in this package are provided as samples and are also
  used by Firebird's testing suite (TCS). The examples are in the form 
diff -ur firebird2-1.5.1.old/debian/rules firebird2-1.5.1/debian/rules
--- firebird2-1.5.1.old/debian/rules	2004-08-12 01:35:56.000000000 +0200
+++ firebird2-1.5.1/debian/rules	2004-08-12 17:58:45.000000000 +0200
@@ -77,7 +77,7 @@
 build-super-server: configure-super
 	echo Starting build-super-server
 	dh_testdir
-	$(MAKE) > make-super.log 2>&1
+	$(MAKE)
 
 	# moving to SuperServer target
 	rm -rf ./debian/firebird2-super
@@ -87,7 +87,7 @@
 build-classic-server: configure-classic
 	echo Starting build-classic-server
 	dh_testdir
-	$(MAKE) > make-classic.log 2>&1
+	$(MAKE)
 
 	# moving to ClassicServer target
 	rm -rf ./debian/firebird2-classic
@@ -119,7 +119,10 @@
 	    src/extern/editline/config.log \
 	    src/extern/editline/config.h \
 	    src/extern/editline/config.status 
-	    
+
+	cat debian/control.in \
+	| sed "s/@arches@/`type-handling i386 any`/g" \
+	> debian/control
 	
 	#chmod -f 644 src/*.fdb
 	rm -f src/*.fdb src/*.lnk src/indicator.* src/Makefile
diff -ur firebird2-1.5.1.old/builds/posix/make.rules firebird2-1.5.1/builds/posix/make.rules
--- firebird2-1.5.1.old/builds/posix/make.rules	2003-07-19 08:19:03.000000000 +0200
+++ firebird2-1.5.1/builds/posix/make.rules	2004-08-12 17:58:45.000000000 +0200
@@ -91,16 +91,16 @@
 ifdef UseLibToolForLink
 
 
-    LIB_LINK= libtool $(CC(
-    STATICLIB_LINK = libtool $(CC) -all-static
+    LIB_LINK= libtool $(CXX)
+    STATICLIB_LINK = libtool $(CXX) -all-static
 #    LIB_LINK_OPTIONS = -version-info 0:0:0 -release 1.5.0.0 -rpath /usr/lib
     LIB_LINK_OPTIONS += -version-info 0:0:0 -release 1.5.0.0 $(LIB_LINK_RPATH)$(FirebirdInstallPrefix)/lib
 
-    EXE_LINK = libtool $(CC)
-    STATICEXE_LINK = libtool $(CC) -all-static
+    EXE_LINK = libtool $(CXX)
+    STATICEXE_LINK = libtool $(CXX) -all-static
 else
 
-    LIB_LINK= $(CC)
+    LIB_LINK= $(CXX)
     STATICLIB_LINK= ar cruvs
 #    LIB_LINK_OPTIONS = -soname libgds.$(SHRLIB_EXT) -rpath /usr/lib
 #    LIB_LINK_OPTIONS = -soname libgds.$(SHRLIB_EXT).2 -rpath /usr/lib
diff -ur firebird2-1.5.1.old/configure.in firebird2-1.5.1/configure.in
--- firebird2-1.5.1.old/configure.in	2004-08-12 01:35:56.000000000 +0200
+++ firebird2-1.5.1/configure.in	2004-08-12 17:58:45.000000000 +0200
@@ -56,7 +56,7 @@
     SHRLIB_EXT=so
     ;;
 
-  x86_64*-*-linux-*)
+  x86_64*-*-linux* | x86_64*-*-gnu* | x86_64*-*-k*bsd*-gnu)
     MAKEFILE_PREFIX=linux_amd64
     INSTALL_PREFIX=linux
     PLATFORM=LINUX
@@ -68,7 +68,7 @@
     CPU_TYPE=amd64
     ;;
 
-  sparc*-*-linux-*)
+  sparc*-*-linux* | sparc*-*-gnu* | sparc*-*-k*bsd*-gnu)
     MAKEFILE_PREFIX=linux_sparc32
     INSTALL_PREFIX=linux
     PLATFORM=LINUX
@@ -78,7 +78,7 @@
     SHRLIB_EXT=so
     ;;
 
-  *-*-linux*)
+  *-*-linux* | *-*-gnu* | *-*-k*bsd*-gnu)
     MAKEFILE_PREFIX=linux
     PLATFORM=LINUX
     AC_DEFINE(LINUX)
@@ -381,7 +381,6 @@
 if test "$EDITLINE_FLG" = "Y"; then
   AC_SUBST(EDITLINE_A, -leditline)
 fi
-AC_CHECK_LIB(stdc++, main,,, $LIBS)
 
 dnl kkuznetsov: Solaris always check for -lnsl
 if test "$PLATFORM" = "solx86" -o "$PLATFORM" = "SOLARIS"; then
diff -ur firebird2-1.5.1.old/src/common/classes/locks.h firebird2-1.5.1/src/common/classes/locks.h
--- firebird2-1.5.1.old/src/common/classes/locks.h	2004-07-01 18:04:17.000000000 +0200
+++ firebird2-1.5.1/src/common/classes/locks.h	2004-08-12 17:58:45.000000000 +0200
@@ -29,17 +29,15 @@
 #include "firebird.h"
 
 #ifdef MULTI_THREAD
-#ifdef WIN_NT
+#if defined(WIN_NT)
 // It is relatively easy to avoid using this header. Maybe do the same stuff like
 // in thd.h ? This is Windows platform maintainers choice
 #include <windows.h>
-#else
-#ifndef SOLARIS
-#include <pthread.h>
-#else
+#elif defined(SOLARIS)
 #include <thread.h>
 #include <synch.h>
-#endif
+#else
+#include <pthread.h>
 #endif
 #endif /* MULTI_THREAD */
 
@@ -77,7 +75,7 @@
 
 /* Process-local spinlock. Used to manage memory heaps in threaded environment. */
 // Pthreads version of the class
-#if !defined(SOLARIS) && !defined(DARWIN) && !defined(FREEBSD)
+#if !defined(SOLARIS) && !defined(DARWIN) && !defined(FREEBSD) && !defined(_POSIX_THREAD_IS_GNU_PTH)
 class Spinlock {
 private:
 	pthread_spinlock_t spinlock;
@@ -124,7 +122,7 @@
 			system_call_failed::raise();
 	}
 };
-#else  // DARWIN and FREEBSD
+#else  // DARWIN, FREEBSD and gnu pth
 class Spinlock {
 private:
 	pthread_mutex_t mlock;
diff -ur firebird2-1.5.1.old/src/extern/editline/configure firebird2-1.5.1/src/extern/editline/configure
--- firebird2-1.5.1.old/src/extern/editline/configure	2004-05-23 20:24:25.000000000 +0200
+++ firebird2-1.5.1/src/extern/editline/configure	2004-08-12 17:58:45.000000000 +0200
@@ -894,7 +894,7 @@
   *-*-freebsd*)
 	ABI="elf"
 	;;
-  *-*-linux*)
+  *-*-linux* | *-*-gnu* | *-*-k*bsd*-gnu)
 	ABI="elf"
 	;;
   *-*-netbsd*)
diff -ur firebird2-1.5.1.old/src/extern/editline/configure.in firebird2-1.5.1/src/extern/editline/configure.in
--- firebird2-1.5.1.old/src/extern/editline/configure.in	2004-05-23 20:24:25.000000000 +0200
+++ firebird2-1.5.1/src/extern/editline/configure.in	2004-08-12 17:58:45.000000000 +0200
@@ -32,7 +32,7 @@
   *-*-freebsd*)
 	ABI="elf"
 	;;
-  *-*-linux*)
+  *-*-linux* | *-*-gnu* | *-*-k*bsd*-gnu)
 	ABI="elf"
 	;;
   *-*-netbsd*)
diff -ur firebird2-1.5.1.old/src/extern/editline/sys.h firebird2-1.5.1/src/extern/editline/sys.h
--- firebird2-1.5.1.old/src/extern/editline/sys.h	2004-05-23 20:24:25.000000000 +0200
+++ firebird2-1.5.1/src/extern/editline/sys.h	2004-08-12 17:58:45.000000000 +0200
@@ -124,11 +124,8 @@
 extern int	fflush(FILE *);
 extern int	tolower(int);
 extern int	toupper(int);
-extern int	errno, sys_nerr;
-extern char	*sys_errlist[];
 extern void	perror(const char *);
 #  include <string.h>
-#  define strerror(e)	sys_errlist[e]
 # endif
 # ifdef SABER
 extern ptr_t    memcpy(ptr_t, const ptr_t, size_t);
diff -ur firebird2-1.5.1.old/src/jrd/gds.cpp firebird2-1.5.1/src/jrd/gds.cpp
--- firebird2-1.5.1.old/src/jrd/gds.cpp	2004-02-06 05:56:28.000000000 +0100
+++ firebird2-1.5.1/src/jrd/gds.cpp	2004-08-12 17:58:45.000000000 +0200
@@ -182,12 +182,6 @@
 
 extern "C" {
 
-#if !(defined VMS || defined WIN_NT || defined LINUX || defined FREEBSD || defined NETBSD || defined DARWIN )
-extern int errno;
-extern SCHAR *sys_errlist[];
-extern int sys_nerr;
-#endif
-
 #ifndef PRINTF
 #define PRINTF 			ib_printf
 #endif
@@ -337,8 +331,6 @@
 #define ib_printf	(*_libgds_printf)
 #define ib_fopen	(*_libgds_fopen)
 #define ib_fclose	(*_libgds_fclose)
-#define sys_nerr	(*_libgds_sys_nerr)
-#define sys_errlist	(*_libgds_sys_errlist)
 #define malloc		(*_libgds_malloc)
 #define gettimeofday(*_libgds_gettimeofday)
 #define ctime		(*_libgds_ctime)
@@ -371,8 +363,6 @@
 extern int ib_printf();
 extern IB_FILE *ib_fopen();
 extern int ib_fclose();
-extern int sys_nerr;
-extern SCHAR *sys_errlist[];
 extern void *malloc();
 extern int gettimeofday();
 extern SCHAR *ctime();
@@ -966,14 +956,7 @@
 		break;
 
 	case gds_arg_unix:
-		if (code > 0 && code < sys_nerr && (p = (TEXT*)sys_errlist[code]))
-			strcpy(s, p);
-		else if (code == 60)
-			strcpy(s, "connection timed out");
-		else if (code == 61)
-			strcpy(s, "connection refused");
-		else
-			sprintf(s, "unknown unix error %ld", code);	/* TXNN */
+		sprintf(s, "%s", strerror (code));
 		break;
 
 	case gds_arg_dos:
diff -ur firebird2-1.5.1.old/src/jrd/isc_sync.cpp firebird2-1.5.1/src/jrd/isc_sync.cpp
--- firebird2-1.5.1.old/src/jrd/isc_sync.cpp	2004-04-06 09:51:12.000000000 +0200
+++ firebird2-1.5.1/src/jrd/isc_sync.cpp	2004-08-12 17:59:06.000000000 +0200
@@ -136,8 +136,20 @@
 #endif
 
 #define FTOK_KEY	15
-#define PRIV		0666
 #define LOCAL_SEMAPHORES 4
+#define FILE_PERM	0666
+#if defined(SEM_R) && defined(SEM_A)
+#define SEM_PERM	SEM_R | SEM_A | (SEM_R>>3) | (SEM_A>>3) \
+			| (SEM_R>>6) | (SEM_A>>6)
+#else
+#define SEM_PERM	FILE_PERM
+#endif
+#if defined(SHM_R) && defined(SHM_W)
+#define SHM_PERM	SHM_R | SHM_W | (SHM_R>>3) | (SHM_W>>3) \
+			| (SHM_R>>6) | (SHM_W>>6)
+#else
+#define SHM_PERM	FILE_PERM
+#endif
 
 #ifndef GDS_RELAY
 #define GDS_RELAY	"/bin/gds_relay"
@@ -2381,7 +2393,7 @@
 
 /* Create the shared memory region if it doesn't already exist. */
 
-	if ((shmid = shmget(key, length, IPC_CREAT | PRIV)) == -1)
+	if ((shmid = shmget(key, length, IPC_CREAT | SHM_PERM)) == -1)
 #ifdef SUPERSERVER
 		if (errno == EINVAL) {
 			/* There are two cases when shmget() returns EINVAL error:
@@ -2428,7 +2440,7 @@
 			   way to get shmid is to attach to the segment with zero
 			   length
 			 */
-			if ((shmid = shmget(key, 0, PRIV)) == -1) {
+			if ((shmid = shmget(key, 0, SHM_PERM)) == -1) {
 				error(status_vector, "shmget", errno);
 				ib_fclose(fp);
 				return NULL;
@@ -2446,7 +2458,7 @@
 			   we use IPC_EXCL flag to get an error if by some miracle
 			   the sagment with the same key is already exists
 			 */
-			if ((shmid = shmget(key, length, IPC_CREAT | IPC_EXCL | PRIV)) ==
+			if ((shmid = shmget(key, length, IPC_CREAT | IPC_EXCL | SHM_PERM)) ==
 				-1) {
 				error(status_vector, "shmget", errno);
 				ib_fclose(fp);
@@ -2491,7 +2503,7 @@
 				return NULL;
 			}
 
-			if ((shmid = shmget(key, length, IPC_CREAT | IPC_EXCL | PRIV)) ==
+			if ((shmid = shmget(key, length, IPC_CREAT | IPC_EXCL | SHM_PERM)) ==
 				-1) {
 				error(status_vector, "shmget", errno);
 				ib_fclose(fp);
@@ -2500,7 +2512,7 @@
 		}
 		else {
 			length = buf.shm_segsz;
-			if ((shmid = shmget(key, length, PRIV)) == -1) {
+			if ((shmid = shmget(key, length, SHM_PERM)) == -1) {
 				error(status_vector, "shmget", errno);
 				ib_fclose(fp);
 				return NULL;
@@ -2521,7 +2533,7 @@
 
 		/* Now remap with the new-found length */
 
-		if ((shmid = shmget(key, length, PRIV)) == -1) {
+		if ((shmid = shmget(key, length, SHM_PERM)) == -1) {
 			error(status_vector, "shmget", errno);
 			ib_fclose(fp);
 			return NULL;
@@ -4176,7 +4188,7 @@
 /* Produce shared memory key for file */
 
 	if ((key = ftok(filename, FTOK_KEY)) == -1) {
-		if ((fd = open(filename, O_RDWR | O_CREAT | O_TRUNC, PRIV)) == -1) {
+		if ((fd = open(filename, O_RDWR | O_CREAT | O_TRUNC, FILE_PERM)) == -1) {
 			error(status_vector, "open", errno);
 			return 0L;
 		}
@@ -4208,7 +4220,7 @@
  *
  **************************************/
 	// Open semaphore set
-	SLONG semid = semget(key, 0, PRIV);
+	SLONG semid = semget(key, 0, SEM_PERM);
 	if (semid == -1) {
 		error(status_vector, "semget", errno);
 		return -1;
@@ -4251,7 +4263,7 @@
 	SLONG semid;
 	do {
 		// Try to open existing semaphore set
-		semid = semget(key, 0, PRIV);
+		semid = semget(key, 0, SEM_PERM);
 		if (semid == -1) {
 			if (errno != ENOENT) {
 				error(status_vector, "semget", errno);
@@ -4278,8 +4290,8 @@
 		}
 		
 		// Try to create new semaphore set
-		semid = semget(key, semaphores, IPC_CREAT | IPC_EXCL | PRIV);
-		if (semid != -1) 
+		semid = semget(key, 1, IPC_CREAT | IPC_EXCL | SEM_PERM);
+		if (semid != -1)
 			return semid;
 		else
 			if (errno != EEXIST) {
diff -ur firebird2-1.5.1.old/src/jrd/shrinit.cpp firebird2-1.5.1/src/jrd/shrinit.cpp
--- firebird2-1.5.1.old/src/jrd/shrinit.cpp	2003-02-24 21:54:12.000000000 +0100
+++ firebird2-1.5.1/src/jrd/shrinit.cpp	2004-08-12 17:58:45.000000000 +0200
@@ -70,8 +70,6 @@
 void (*_libgds_rewind) () = 0;
 int (*_libgds_fseek) () = 0;
 int (*_libgds__flsbuf) () = 0;
-SCHAR(**_libgds_sys_errlist) = 0;
-int *_libgds_sys_nerr = 0;
 void *(*_libgds_malloc) () = 0;
 int (*_libgds_gettimeofday) () = 0;
 SCHAR *(*_libgds_ctime) () = 0;
diff -ur firebird2-1.5.1.old/src/lock/lock.cpp firebird2-1.5.1/src/lock/lock.cpp
--- firebird2-1.5.1.old/src/lock/lock.cpp	2004-03-29 06:35:49.000000000 +0200
+++ firebird2-1.5.1/src/lock/lock.cpp	2004-08-12 17:58:45.000000000 +0200
@@ -338,14 +338,12 @@
 
 
 #ifdef SHLIB_DEFS
-#define sys_errlist	(*_libgds_sys_errlist)
 #define waitpid		(*_libgds_waitpid)
 #define execl		(*_libgds_execl)
 #define _exit		(*_libgds__exit)
 #define statistics	(*_libgds_stat)
 #define chmod		(*_libgds_chmod)
 
-extern SCHAR *sys_errlist[];
 extern int waitpid();
 extern int execl();
 extern void _exit();
@@ -2067,7 +2065,7 @@
 
 #if !(defined WIN_NT)
 	if (errno > 0)
-		ib_fprintf(ib_stderr, "--%s\n", sys_errlist[errno]);
+		ib_fprintf(ib_stderr, "--%s\n", strerror (errno));
 #endif
 
 #ifdef DEV_BUILD
diff -ur firebird2-1.5.1.old/src/utilities/analyse.cpp firebird2-1.5.1/src/utilities/analyse.cpp
--- firebird2-1.5.1.old/src/utilities/analyse.cpp	2003-02-07 04:43:25.000000000 +0100
+++ firebird2-1.5.1/src/utilities/analyse.cpp	2004-08-12 17:58:45.000000000 +0200
@@ -47,8 +47,6 @@
 #include "jrd.h"
 #include "ods.h"
 
-extern SCHAR *sys_errlist[];
-
 static void analyse(int, SCHAR *, PAG, int);
 static SLONG get_long(void);
 static void db_error(int);
@@ -290,7 +288,7 @@
  *
  **************************************/
 
-	ib_printf(sys_errlist[status]);
+	ib_printf(strerror (status));
 	abort();
 }
 
diff -ur firebird2-1.5.1.old/src/utilities/dba.epp firebird2-1.5.1/src/utilities/dba.epp
--- firebird2-1.5.1.old/src/utilities/dba.epp	2004-04-30 06:59:31.000000000 +0200
+++ firebird2-1.5.1/src/utilities/dba.epp	2004-08-12 17:58:45.000000000 +0200
@@ -1520,7 +1520,7 @@
 	tddba->page_number = -1;
 
 #ifndef VMS
-	FPRINTF(tddba->sw_outfile, "%s\n", sys_errlist[status]);
+	FPRINTF(tddba->sw_outfile, "%s\n", strerror (status));
 #else
 	if ((p = strerror(status)) || (p = strerror(EVMSERR, status)))
 		FPRINTF(tddba->sw_outfile, "%s\n", p);
diff -ur firebird2-1.5.1.old/src/utilities/dba_full.epp firebird2-1.5.1/src/utilities/dba_full.epp
--- firebird2-1.5.1.old/src/utilities/dba_full.epp	2003-04-16 12:18:35.000000000 +0200
+++ firebird2-1.5.1/src/utilities/dba_full.epp	2004-08-12 17:58:45.000000000 +0200
@@ -63,8 +63,6 @@
 
 #if (defined WIN_NT)
 #include <stdlib.h>
-#else
-extern SCHAR *sys_errlist[];
 #endif
 
 typedef struct dba_rel {
@@ -1122,7 +1120,7 @@
 	tddba = GET_THREAD_DATA;
 
 #ifndef VMS
-	FPRINTF(tddba->sw_outfile, "%s\n", sys_errlist[status]);
+	FPRINTF(tddba->sw_outfile, "%s\n", strerror (status));
 #else
 	if ((p = strerror(status)) || (p = strerror(EVMSERR, status)))
 		FPRINTF(tddba->sw_outfile, "%s\n", p);
diff -ur firebird2-1.5.1.old/src/utilities/rebuild.cpp firebird2-1.5.1/src/utilities/rebuild.cpp
--- firebird2-1.5.1.old/src/utilities/rebuild.cpp	2003-02-14 03:14:41.000000000 +0100
+++ firebird2-1.5.1/src/utilities/rebuild.cpp	2004-08-12 17:58:45.000000000 +0200
@@ -56,8 +56,6 @@
 
 IB_FILE *dbg_file;
 
-extern SCHAR *sys_errlist[];
-
 static void checksum(RBDB, ULONG, ULONG, UCHAR);
 static USHORT compute_checksum(RBDB, PAG);
 static void db_error(int);
@@ -536,7 +534,7 @@
  *
  **************************************/
 
-	ib_printf(sys_errlist[status]);
+	ib_printf(strerror (status));
 	exit(FINI_ERROR);
 }
 
diff -ur firebird2-1.5.1.old/src/utilities/sbc_print.cpp firebird2-1.5.1/src/utilities/sbc_print.cpp
--- firebird2-1.5.1.old/src/utilities/sbc_print.cpp	2003-04-16 12:18:36.000000000 +0200
+++ firebird2-1.5.1/src/utilities/sbc_print.cpp	2004-08-12 17:58:45.000000000 +0200
@@ -69,10 +69,6 @@
 
 #define DEFAULT_SIZE	8192
 
-#if !(defined WIN_NT)
-extern SCHAR *sys_errlist[];
-#endif
-
 static void cache_init(void);
 static void db_get_sbc(SCHAR *, SCHAR *, SLONG *, SSHORT *);
 
@@ -490,7 +486,7 @@
 	SCHAR *p;
 
 #ifndef VMS
-	ib_printf(sys_errlist[status]);
+	ib_printf(strerror (status));
 #else
 	if ((p = strerror(status)) || (p = strerror(EVMSERR, status)))
 		ib_printf("%s\n", p);
