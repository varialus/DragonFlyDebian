---
 dumpfs.ufs/Makefile |   14 +++++++++-----
 dumpfs.ufs/dumpfs.c |    1 +
 2 files changed, 10 insertions(+), 5 deletions(-)

--- a/dumpfs.ufs/dumpfs.c
+++ b/dumpfs.ufs/dumpfs.c
@@ -68,6 +68,7 @@ static const char rcsid[] =
 #include <fcntl.h>
 #include <fstab.h>
 #include <libufs.h>
+#include <time.h>
 #include <stdint.h>
 #include <stdio.h>
 #include <stdlib.h>
--- a/dumpfs.ufs/Makefile
+++ b/dumpfs.ufs/Makefile
@@ -1,9 +1,13 @@
 #	@(#)Makefile	8.1 (Berkeley) 6/5/93
 # $FreeBSD: src/sbin/dumpfs/Makefile,v 1.9.34.1 2010/02/10 00:26:20 kensmith Exp $
 
-PROG=	dumpfs
-DPADD=	${LIBUFS}
-LDADD=	-lufs
-MAN=	dumpfs.8
+PROG = dumpfs.ufs
+SRCS = dumpfs.c
+WARNS = 0
+MAN = dumpfs.8:dumpfs.ufs.8
+
+LDADD += -L../libufs/ -lufs -lbsd
+INCLUDES = -I../libufs
+
+include ../Makefile.common
 
-.include <bsd.prog.mk>
