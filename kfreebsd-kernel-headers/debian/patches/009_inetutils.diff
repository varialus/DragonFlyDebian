diff -ur sys.orig/net/if_dl.h sys/net/if_dl.h
--- sys.orig/net/if_dl.h	2004-11-30 01:05:19.000000000 +0100
+++ sys/net/if_dl.h	2004-11-30 01:16:42.000000000 +0100
@@ -59,13 +59,13 @@
  * Structure of a Link-Level sockaddr:
  */
 struct sockaddr_dl {
-	u_char	sdl_len;	/* Total length of sockaddr */
-	u_char	sdl_family;	/* AF_LINK */
-	u_short	sdl_index;	/* if != 0, system given index for interface */
-	u_char	sdl_type;	/* interface type */
-	u_char	sdl_nlen;	/* interface name length, no trailing 0 reqd. */
-	u_char	sdl_alen;	/* link level address length */
-	u_char	sdl_slen;	/* link layer selector length */
+	unsigned char	sdl_len;	/* Total length of sockaddr */
+	unsigned char	sdl_family;	/* AF_LINK */
+	unsigned short	sdl_index;	/* if != 0, system given index for interface */
+	unsigned char	sdl_type;	/* interface type */
+	unsigned char	sdl_nlen;	/* interface name length, no trailing 0 reqd. */
+	unsigned char	sdl_alen;	/* link level address length */
+	unsigned char	sdl_slen;	/* link layer selector length */
 	char	sdl_data[46];	/* minimum work area, can be larger;
 				   contains both if name and ll address */
 };
diff -ur sys.orig/net/if_var.h sys/net/if_var.h
--- sys.orig/net/if_var.h	2004-10-31 00:01:43.000000000 +0200
+++ sys/net/if_var.h	2004-11-30 01:16:42.000000000 +0100
@@ -33,6 +33,9 @@
 #ifndef	_NET_IF_VAR_H_
 #define	_NET_IF_VAR_H_
 
+#include <sys/types.h>
+#include <net/if.h>
+
 /*
  * Structures defining a network interface, providing a packet
  * transport mechanism (ala level 0 of the PUP protocols).
diff -ur sys.orig/netinet/in_var.h sys/netinet/in_var.h
--- sys.orig/netinet/in_var.h	2004-08-16 20:32:07.000000000 +0200
+++ sys/netinet/in_var.h	2004-11-30 01:16:42.000000000 +0100
@@ -34,7 +34,9 @@
 #define _NETINET_IN_VAR_H_
 
 #include <sys/queue.h>
+#include <net/if_var.h>		/* ifaddr */
 #include <sys/fnv_hash.h>
+#include <netinet/in.h>		/* in_addr */
 
 /*
  * Interface address, Internet version.  One of these structures
diff -ur sys.orig/netinet/ip_var.h sys/netinet/ip_var.h
--- sys.orig/netinet/ip_var.h	2004-09-23 18:38:53.000000000 +0200
+++ sys/netinet/ip_var.h	2004-11-30 01:16:42.000000000 +0100
@@ -34,6 +34,8 @@
 #define	_NETINET_IP_VAR_H_
 
 #include <sys/queue.h>
+#include <sys/types.h>		/* u_char, u_short */
+#include <netinet/in.h>		/* in_addr */
 
 /*
  * Overlay for ip header used by other protocols (tcp, udp).
diff -ur sys.orig/netinet6/in6.h sys/netinet6/in6.h
--- sys.orig/netinet6/in6.h	2004-04-07 22:46:15.000000000 +0200
+++ sys/netinet6/in6.h	2004-11-30 01:16:42.000000000 +0100
@@ -61,13 +61,15 @@
  *	@(#)in.h	8.3 (Berkeley) 1/3/94
  */
 
-#ifndef __KAME_NETINET_IN_H_INCLUDED_
+#ifndef _NETINET_IN_H
 #error "do not include netinet6/in6.h directly, include netinet/in.h.  see RFC2553"
 #endif
 
 #ifndef _NETINET6_IN6_H_
 #define _NETINET6_IN6_H_
 
+#include <sys/types.h>
+
 /*
  * Identification of the network protocol stack
  * for *BSD-current/release: http://www.kame.net/dev/cvsweb.cgi/kame/COVERAGE
@@ -122,7 +124,6 @@
 	} __u6_addr;			/* 128-bit IP6 address */
 };
 
-#define s6_addr   __u6_addr.__u6_addr8
 #ifdef _KERNEL	/* XXX nonstandard */
 #define s6_addr8  __u6_addr.__u6_addr8
 #define s6_addr16 __u6_addr.__u6_addr16
@@ -242,11 +243,6 @@
 #ifdef _KERNEL
 #define IN6_ARE_ADDR_EQUAL(a, b)			\
     (bcmp(&(a)->s6_addr[0], &(b)->s6_addr[0], sizeof(struct in6_addr)) == 0)
-#else
-#if __BSD_VISIBLE
-#define IN6_ARE_ADDR_EQUAL(a, b)			\
-    (memcmp(&(a)->s6_addr[0], &(b)->s6_addr[0], sizeof(struct in6_addr)) == 0)
-#endif
 #endif
 
 #ifdef _KERNEL			/* non standard */
diff -ur sys.orig/netinet6/in6_var.h sys/netinet6/in6_var.h
--- sys.orig/netinet6/in6_var.h	2004-11-30 01:05:19.000000000 +0100
+++ sys/netinet6/in6_var.h	2004-11-30 01:16:42.000000000 +0100
@@ -64,6 +64,9 @@
 #ifndef _NETINET6_IN6_VAR_H_
 #define _NETINET6_IN6_VAR_H_
 
+#include <sys/types.h>		/* time_t */
+#include <netinet/in_var.h>	/* ifaddr */
+
 /*
  * Interface address, Internet version.  One of these structures
  * is allocated for each interface with an Internet address.
diff -ur sys.orig/sys/fnv_hash.h sys/sys/fnv_hash.h
--- sys.orig/sys/fnv_hash.h	2001-03-20 03:10:18.000000000 +0100
+++ sys/sys/fnv_hash.h	2004-11-30 01:16:42.000000000 +0100
@@ -8,6 +8,8 @@
  * $FreeBSD: sys/sys/fnv_hash.h,v 1.2 2001/03/20 02:10:18 peter Exp $
  */
 
+#include <sys/types.h>
+
 typedef u_int32_t Fnv32_t;
 typedef u_int64_t Fnv64_t;
 
@@ -58,7 +60,7 @@
 fnv_64_str(const char *str, Fnv64_t hval)
 {
 	const u_int8_t *s = (const u_int8_t *)str;
-	u_register_t c;		 /* 32 bit on i386, 64 bit on alpha,ia64 */
+	unsigned long int c;	 /* 32 bit on i386, 64 bit on alpha,ia64 */
 
 	while ((c = *s++) != 0) {
 		hval *= FNV_64_PRIME;
