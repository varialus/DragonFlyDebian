diff -Nur gcc-3.3-3.3.5.old/debian/control gcc-3.3-3.3.5/debian/control
--- gcc-3.3-3.3.5.old/debian/control	2005-05-02 13:24:28.000000000 +0200
+++ gcc-3.3-3.3.5/debian/control	2005-05-02 14:03:35.000000000 +0200
@@ -4,7 +4,7 @@
 Maintainer: Debian GCC maintainers <debian-gcc@lists.debian.org>
 Uploaders: Matthias Klose <doko@debian.org>, Gerhard Tonn <gt@debian.org>
 Standards-Version: 3.6.1
-Build-Depends: libc6.1-dev (>= 2.3.2.ds1-16) [alpha ia64] | libc0.3-dev [hurd-i386] | libc1-dev [freebsd-i386] | libc12-dev (>= 2.0.ds1-1) [netbsd-i386] | libc6-dev (>= 2.3.2.ds1-16), libc6-dev-sparc64 [sparc], libc6-dev-s390x [s390], libunwind7-dev (>= 0.98.3-3) [ia64], libatomic-ops-dev [ia64], m4, autoconf2.13, automake1.4 | automake (<< 1.5), libtool, autotools-dev, gawk, dejagnu (>= 1.4.3) [!hurd-i386], expect (>= 5.38.0) [!hurd-i386], bzip2, binutils (>= 2.15-5) | binutils-multiarch (>= 2.15-5), binutils-hppa64 [hppa], debhelper (>= 3.0.25), gperf (>= 2.7-3), bison (>= 1:1.875a-1) | bison (<< 1:1.50), flex-old | flex (<< 2.5.31), gettext, texinfo (>= 4.3), zlib1g-dev, libgc-dev [!avr !freebsd-i386], xlibs-dev, gnat-3.3 [!arm !hurd-i386 !m68k !freebsd-i386 !netbsd-i386] | gnat-3.2 [!arm !hurd-i386 !m68k !freebsd-i386 !netbsd-i386] | gnat [i386 powerpc sparc], libncurses5-dev, libgmp3-dev, tetex-bin, locales [!netbsd-i386 !hurd-i386 !hurd-i386], procps [!hurd-i386], help2man, sharutils, realpath (>= 1.9.12)
+Build-Depends: libc-dev, libc6-dev-sparc64 [sparc], libc6-dev-s390x [s390], libunwind7-dev (>= 0.98.3-3) [ia64], libatomic-ops-dev [ia64], m4, autoconf2.13, automake1.4 | automake (<< 1.5), libtool, autotools-dev, gawk, dejagnu (>= 1.4.3) [!hurd-i386 !kfreebsd-i386 !knetbsd-i386], expect (>= 5.38.0) [!hurd-i386 !kfreebsd-i386 !knetbsd-i386], bzip2, binutils (>= 2.15-5) | binutils-multiarch (>= 2.15-5), binutils-hppa64 [hppa], debhelper (>= 3.0.25), gperf (>= 2.7-3), bison (>= 1:1.875a-1) | bison (<< 1:1.50), flex-old | flex (<< 2.5.31), gettext, texinfo (>= 4.3), zlib1g-dev, libgc-dev [!avr], xlibs-dev, gnat-3.3 [!arm !hurd-i386 !m68k !kfreebsd-i386 !knetbsd-i386] | gnat-3.2 [!arm !hurd-i386 !m68k !kfreebsd-i386 !knetbsd-i386] | gnat [i386 powerpc sparc], libncurses5-dev, libgmp3-dev, tetex-bin, locales [!netbsd-i386 !hurd-i386 !kfreebsd-i386 !knetbsd-i386 !hurd-i386], procps [!hurd-i386 !kfreebsd-i386 !knetbsd-i386], help2man, sharutils, realpath (>= 1.9.12)
 Build-Depends-Indep: doxygen (>= 1.3.7), graphviz (>= 2.0)
 
 Package: gcc-3.3-base
@@ -40,10 +40,10 @@
 Architecture: any
 Section: devel
 Priority: standard
-Depends: gcc-3.3-base (>= 1:3.3.5-12), libgcc1 (>= 1:3.3.4-3), ${shlibs:Depends}, cpp-3.3 (>= 1:3.3.5-12), cpp-3.3 (<< 1:3.3.6), binutils (>= 2.15-5)
-Recommends: libc6-dev (>= 2.3.2.ds1-16)
+Depends: gcc-3.3-base (>= 1:3.3.5-12+kbsd), libgcc1 (>= 1:3.3.4-3), ${shlibs:Depends}, cpp-3.3 (>= 1:3.3.5-12+kbsd), cpp-3.3 (<< 1:3.3.6), binutils (>= 2.15-5)
+Recommends: libc-dev
 Conflicts: gcc-3.2 (<= 1:3.2.3-0pre8)
-Suggests: gcc-3.3-doc (>= 1:3.3.5-12)
+Suggests: gcc-3.3-doc (>= 1:3.3.5-12+kbsd)
 Provides: c-compiler
 Description: The GNU C compiler
  This is the GNU C compiler, a fairly portable optimizing compiler for C.
@@ -52,7 +52,7 @@
 Architecture: hppa
 Section: devel
 Priority: optional
-Depends: gcc-3.3-base (>= 1:3.3.5-12), gcc-3.3-base (<< 1:3.3.6), libc6-dev (>= 2.3.2.ds1-12), ${shlibs:Depends}
+Depends: gcc-3.3-base (>= 1:3.3.5-12+kbsd), gcc-3.3-base (<< 1:3.3.6), libc6-dev (>= 2.3.2.ds1-12), ${shlibs:Depends}
 Conflicts: gcc-3.4-hppa64 (<= 3.4.1-3), gcc-3.5-hppa64 (<= 3.5-0pre1)
 Description: The GNU C compiler (cross compiler for hppa64)
  This is the GNU C compiler, a fairly portable optimizing compiler for C.
@@ -61,7 +61,7 @@
 Architecture: any
 Section: interpreters
 Priority: standard
-Depends: gcc-3.3-base (>= 1:3.3.5-12), gcc-3.3-base (<< 1:3.3.6), ${shlibs:Depends}
+Depends: gcc-3.3-base (>= 1:3.3.5-12+kbsd), gcc-3.3-base (<< 1:3.3.6), ${shlibs:Depends}
 Description: The GNU C preprocessor
  A macro processor that is used automatically by the GNU C compiler
  to transform programs before actual compilation.
@@ -73,7 +73,7 @@
 Architecture: all
 Section: doc
 Priority: optional
-Depends: gcc-3.3-base (>= 1:3.3.5-12)
+Depends: gcc-3.3-base (>= 1:3.3.5-12+kbsd)
 Replaces: cpp (<= 1:2.93.12)
 Description: Documentation for the GNU C preprocessor (cpp)
  Documentation for the GNU C preprocessor in info format.
@@ -82,17 +82,17 @@
 Architecture: any
 Section: devel
 Priority: standard
-Depends: gcc-3.3-base (>= 1:3.3.5-12), ${shlibs:Depends}, gcc-3.3 (>= 1:3.3.5-12), gcc-3.3 (<< 1:3.3.6), libstdc++5-3.3-dev (>= 1:3.3.5-12)
+Depends: gcc-3.3-base (>= 1:3.3.5-12+kbsd), ${shlibs:Depends}, gcc-3.3 (>= 1:3.3.5-12+kbsd), gcc-3.3 (<< 1:3.3.6), libstdc++5-3.3-dev (>= 1:3.3.5-12+kbsd)
 Replaces: gcc (<= 2.7.2.3-3)
 Provides: c++-compiler
-Suggests: gcc-3.3-doc (>= 1:3.3.5-12)
+Suggests: gcc-3.3-doc (>= 1:3.3.5-12+kbsd)
 Description: The GNU C++ compiler
  This is the GNU C++ compiler, a fairly portable optimizing compiler for C++.
 
 Package: protoize
 Architecture: any
 Priority: optional
-Depends: gcc-3.3-base (>= 1:3.3.5-12), ${shlibs:Depends}, gcc-3.3 (>= 1:3.3.5-12), gcc-3.3 (<< 1:3.3.6)
+Depends: gcc-3.3-base (>= 1:3.3.5-12+kbsd), ${shlibs:Depends}, gcc-3.3 (>= 1:3.3.5-12+kbsd), gcc-3.3 (<< 1:3.3.6)
 Description: Create/remove ANSI prototypes from C code
  "protoize" can be used to add prototypes to a program, thus converting
  the program to ANSI C in one respect.  The companion program "unprotoize"
@@ -102,8 +102,8 @@
 Package: gobjc-3.3
 Architecture: any
 Priority: optional
-Depends: gcc-3.3-base (>= 1:3.3.5-12), ${shlibs:Depends}, libobjc1 (>= 1:3.3.5-12), gcc-3.3 (>= 1:3.3.5-12), gcc-3.3 (<< 1:3.3.6)
-Suggests: gcc-3.3-doc (>= 1:3.3.5-12)
+Depends: gcc-3.3-base (>= 1:3.3.5-12+kbsd), ${shlibs:Depends}, libobjc1 (>= 1:3.3.5-12+kbsd), gcc-3.3 (>= 1:3.3.5-12+kbsd), gcc-3.3 (<< 1:3.3.6)
+Suggests: gcc-3.3-doc (>= 1:3.3.5-12+kbsd)
 Provides: objc-compiler
 Recommends: libgc-dev
 Description: The GNU Objective-C compiler
@@ -115,7 +115,7 @@
 Section: libs
 Architecture: any
 Priority: optional
-Depends: gcc-3.3-base (>= 1:3.3.5-12), ${shlibs:Depends}
+Depends: gcc-3.3-base (>= 1:3.3.5-12+kbsd), ${shlibs:Depends}
 Description: Runtime library for GNU Objective-C applications
  Library needed for GNU ObjC applications linked against the shared library.
 
@@ -123,14 +123,14 @@
 Section: libs
 Architecture: any
 Priority: optional
-Depends: gcc-3.3-base (>= 1:3.3.5-12), ${shlibs:Depends}
+Depends: gcc-3.3-base (>= 1:3.3.5-12+kbsd), ${shlibs:Depends}
 Description: Runtime library for GNU Objective-C applications (64bit)
  Library needed for GNU ObjC applications linked against the shared library.
 
 Package: g77-3.3
 Architecture: any
 Priority: optional
-Depends: gcc-3.3-base (>= 1:3.3.5-12), libg2c0-dev (>= 1:3.3.5-12), ${shlibs:Depends}, gcc-3.3 (>= 1:3.3.5-12), gcc-3.3 (<< 1:3.3.6)
+Depends: gcc-3.3-base (>= 1:3.3.5-12+kbsd), libg2c0-dev (>= 1:3.3.5-12+kbsd), ${shlibs:Depends}, gcc-3.3 (>= 1:3.3.5-12+kbsd), gcc-3.3 (<< 1:3.3.6)
 Provides: fortran77-compiler
 Suggests: g77-3.3-doc
 Description: The GNU Fortran 77 compiler
@@ -142,7 +142,7 @@
 Architecture: all
 Section: doc
 Priority: optional
-Depends: gcc-3.3-base (>= 1:3.3.5-12)
+Depends: gcc-3.3-base (>= 1:3.3.5-12+kbsd)
 Replaces: g77 (<= 1:2.91.58-3)
 Description: Documentation for the GNU Fortran compiler (g77)
  Documentation for the GNU Fortran 77 compiler in info format.
@@ -151,7 +151,7 @@
 Section: libs
 Architecture: any
 Priority: optional
-Depends: gcc-3.3-base (>= 1:3.3.5-12), ${shlibs:Depends}
+Depends: gcc-3.3-base (>= 1:3.3.5-12+kbsd), ${shlibs:Depends}
 Description: Runtime library for GNU Fortran 77 applications
  Library needed for GNU Fortran 77 applications linked against the
  shared library.
@@ -160,7 +160,7 @@
 Section: libdevel
 Architecture: any
 Priority: optional
-Depends: gcc-3.3-base (>= 1:3.3.5-12), libg2c0 (>= 1:3.3.5-12), ${shlibs:Depends}
+Depends: gcc-3.3-base (>= 1:3.3.5-12+kbsd), libg2c0 (>= 1:3.3.5-12+kbsd), ${shlibs:Depends}
 Conflicts: g77-2.95 (<= 1:2.95.4-19), g77-3.0 (<= 1:3.0.4-16), g77-3.2 (<= 1:3.2.3-9), g77-3.3 (<= 1:3.3.4-3)
 Description: GNU Fortran 77 library development
  Headers and static libraries for g2c.
@@ -169,7 +169,7 @@
 Section: libs
 Architecture: any
 Priority: optional
-Depends: gcc-3.3-base (>= 1:3.3.5-12), ${shlibs:Depends}
+Depends: gcc-3.3-base (>= 1:3.3.5-12+kbsd), ${shlibs:Depends}
 Description: Runtime library for GNU Fortran 77 applications (64bit)
  Library needed for GNU Fortran 77 applications linked against the
  shared library.
@@ -177,9 +177,9 @@
 Package: gcj-3.3
 Architecture: any
 Priority: optional
-Depends: gcc-3.3-base (>= 1:3.3.5-12), ${shlibs:Depends}, libgcj4-common (>= 1:3.3.5-12), java-common, g++-3.3 (>= 1:3.3.5-12), g++-3.3 (<< 1:3.3.6)
-Recommends: fastjar, gij-3.3 (>= 1:3.3.5-12), libgcj4-dev (>= 1:3.3.5-12)
-Suggests: libgcj4-awt (>= 1:3.3.5-12)
+Depends: gcc-3.3-base (>= 1:3.3.5-12+kbsd), ${shlibs:Depends}, libgcj4-common (>= 1:3.3.5-12+kbsd), java-common, g++-3.3 (>= 1:3.3.5-12+kbsd), g++-3.3 (<< 1:3.3.6)
+Recommends: fastjar, gij-3.3 (>= 1:3.3.5-12+kbsd), libgcj4-dev (>= 1:3.3.5-12+kbsd)
+Suggests: libgcj4-awt (>= 1:3.3.5-12+kbsd)
 Provides: java-compiler
 Description: The GNU compiler for Java(TM)
  GCJ is a front end to the GCC compiler which can natively compile both
@@ -189,8 +189,8 @@
 Package: gij-3.3
 Priority: optional
 Architecture: any
-Depends: gcc-3.3-base (>= 1:3.3.5-12), ${shlibs:Depends}
-Suggests: fastjar, gcj-3.3 (>= 1:3.3.5-12), libgcj4-awt (>= 1:3.3.5-12)
+Depends: gcc-3.3-base (>= 1:3.3.5-12+kbsd), ${shlibs:Depends}
+Suggests: fastjar, gcj-3.3 (>= 1:3.3.5-12+kbsd), libgcj4-awt (>= 1:3.3.5-12+kbsd)
 Conflicts: libgcj2 (<= 1:3.0.3-1)
 Replaces: libgcj2 (<= 1:3.0.3-1)
 Provides: java-virtual-machine, java1-runtime
@@ -233,7 +233,7 @@
 Section: libs
 Architecture: any
 Priority: optional
-Depends: libgcj4 (>= 1:3.3.5-12), ${shlibs:Depends}
+Depends: libgcj4 (>= 1:3.3.5-12+kbsd), ${shlibs:Depends}
 Conflicts: libgcj4 (<< 3.3.4-5)
 Replaces: libgcj4 (<< 3.3.4-5)
 Description: AWT peer runtime libraries for use with gcj
@@ -254,7 +254,7 @@
 Section: libdevel
 Architecture: any
 Priority: optional
-Depends: gcj-3.3 (>= 1:3.3.5-12), libgcj4 (>= 1:3.3.5-12), libgcj4-common (>= 1:3.3.5-12), libgcj4-awt (>= 1:3.3.5-12), libc6-dev (>= 2.3.2.ds1-16), zlib1g-dev, ${shlibs:Depends}
+Depends: gcj-3.3 (>= 1:3.3.5-12+kbsd), libgcj4 (>= 1:3.3.5-12+kbsd), libgcj4-common (>= 1:3.3.5-12+kbsd), libgcj4-awt (>= 1:3.3.5-12+kbsd), libc-dev, zlib1g-dev, ${shlibs:Depends}
 Conflicts: libgcj2-dev, libgcj3-dev, libgcj0-dev, libgcj0
 Provides: libgcj-dev
 Description: Java development headers and static library for use with gcj
@@ -272,7 +272,7 @@
  Replacement for Suns .jar creation program.  It is written in C
  instead of java and is tons faster.  It is currently not complete.
 
-Package: libffi2
+Package: libffi
 Section: libs
 Architecture: any
 Priority: optional
@@ -282,7 +282,7 @@
  allows code written in one language to call code written in another
  language.
 
-Package: lib64ffi2
+Package: lib64ffi
 Section: libs
 Architecture: any
 Priority: optional
@@ -292,11 +292,11 @@
  allows code written in one language to call code written in another
  language.
 
-Package: libffi2-dev
+Package: libffi-dev
 Section: libdevel
 Architecture: any
 Priority: optional
-Depends: gcc-3.3-base, libffi2 (>= 1:3.3.5-12), libc6-dev (>= 2.3.2.ds1-16)
+Depends: gcc-3.3-base, libffi (>= 1:3.3.5-12+kbsd), libc-dev
 Conflicts: libffi1-dev
 Description: Foreign Function Interface library (development files)
  This package contains the headers and static library files necessary for
@@ -310,7 +310,7 @@
 Architecture: any
 Section: base
 Priority: required
-Depends: gcc-3.3-base (>= 1:3.3.5-12), ${shlibs:Depends}
+Depends: gcc-3.3-base (>= 1:3.3.5-12+kbsd), ${shlibs:Depends}
 Description: The GNU Standard C++ Library v3
  This package contains an additional runtime library for C++ programs
  built with the GNU compiler.
@@ -323,7 +323,7 @@
 Architecture: any
 Section: base
 Priority: important
-Depends: gcc-3.3-base (>= 1:3.3.5-12), ${shlibs:Depends}
+Depends: gcc-3.3-base (>= 1:3.3.5-12+kbsd), ${shlibs:Depends}
 Conflicts: libstdc++5 (<= 1:3.3-0pre9)
 Description: The GNU Standard C++ Library v3 (64bit)
  This package contains an additional runtime library for C++ programs
@@ -337,7 +337,7 @@
 Architecture: any
 Section: libdevel
 Priority: standard
-Depends: gcc-3.3-base (>= 1:3.3.5-12), libstdc++5 (>= 1:3.3.5-12), libc6-dev (>= 2.3.2.ds1-16), g++-3.3 (>= 1:3.3.5-12)
+Depends: gcc-3.3-base (>= 1:3.3.5-12+kbsd), libstdc++5 (>= 1:3.3.5-12+kbsd), libc-dev, g++-3.3 (>= 1:3.3.5-12+kbsd)
 Conflicts: libg++27-dev, libg++272-dev (<< 2.7.2.8-1), libstdc++2.8-dev, libg++2.8-dev, libstdc++2.9-dev, libstdc++2.9-glibc2.1-dev, libstdc++2.10-dev (<< 1:2.95.3-2), libstdc++3.0-dev, libstdc++5-dev (<= 1:3.2.3-0pre3)
 Suggests: libstdc++5-3.3-doc, stl-manual
 Provides: libstdc++-dev
@@ -354,7 +354,7 @@
 Architecture: any
 Section: libdevel
 Priority: extra
-Depends: gcc-3.3-base (>= 1:3.3.5-12), libstdc++5, libstdc++5-3.3-dev
+Depends: gcc-3.3-base (>= 1:3.3.5-12+kbsd), libstdc++5, libstdc++5-3.3-dev
 Description: The GNU Standard C++ Library v3 (shared library subset kit)
  This is used to develop subsets of the libstdc++ shared libraries for
  use on custom installation floppies and in embedded systems.
@@ -365,7 +365,7 @@
 Architecture: any
 Section: libdevel
 Priority: extra
-Depends: gcc-3.3-base (>= 1:3.3.5-12), libstdc++5, libstdc++5-3.3-dev
+Depends: gcc-3.3-base (>= 1:3.3.5-12+kbsd), libstdc++5, libstdc++5-3.3-dev
 Conflicts: libstdc++5-dbg
 Description: The GNU Standard C++ Library v3 (debugging files)
  This package contains the shared library of libstdc++ compiled with
@@ -375,7 +375,7 @@
 Architecture: all
 Section: doc
 Priority: optional
-Depends: gcc-3.3-base (>= 1:3.3.5-12)
+Depends: gcc-3.3-base (>= 1:3.3.5-12+kbsd)
 Replaces: libstdc++3.0-doc
 Description: The GNU Standard C++ Library v3 (documentation files)
  This package contains documentation files for the GNU stdc++ library.
@@ -388,7 +388,7 @@
 Package: gnat-3.3
 Architecture: any
 Priority: optional
-Depends: gcc-3.3-base (>= 1:3.3.5-12), ${shlibs:Depends}, gcc-3.3 (>= 1:3.3.5-12), gcc-3.3 (<< 1:3.3.6)
+Depends: gcc-3.3-base (>= 1:3.3.5-12+kbsd), ${shlibs:Depends}, gcc-3.3 (>= 1:3.3.5-12+kbsd), gcc-3.3 (<< 1:3.3.6)
 Suggests: gnat-3.3-doc, ada-reference-manual
 Provides: ada-compiler
 Conflicts: gnat, gnat-3.1, gnat-3.2
@@ -401,7 +401,7 @@
 Section: libs
 Architecture: any
 Priority: optional
-Depends: gcc-3.3-base (>= 1:3.3.5-12), ${shlibs:Depends}
+Depends: gcc-3.3-base (>= 1:3.3.5-12+kbsd), ${shlibs:Depends}
 Description: Runtime library for GNU Ada applications
  Library needed for GNU Ada applications linked against the shared library.
 
@@ -409,7 +409,7 @@
 Section: libs
 Architecture: any
 Priority: optional
-Depends: gcc-3.3-base (>= 1:3.3.5-12), ${shlibs:Depends}
+Depends: gcc-3.3-base (>= 1:3.3.5-12+kbsd), ${shlibs:Depends}
 Description: Runtime library for GNU Ada applications
  Library needed for GNU Ada applications linked against the shared library.
 
@@ -417,7 +417,7 @@
 Architecture: all
 Section: doc
 Priority: optional
-Depends: gcc-3.3-base (>= 1:3.3.5-12)
+Depends: gcc-3.3-base (>= 1:3.3.5-12+kbsd)
 Suggests: gnat-3.3
 Description: Documentation for the GNU Ada compiler (gnat)
  Documentation for the GNU Ada compiler in info format.
@@ -425,9 +425,9 @@
 Package: gpc-2.1-3.3
 Architecture: any
 Priority: optional
-Depends: gcc-3.3-base (>= 1:3.3.5-12), ${shlibs:Depends}, gcc-3.3 (>= 1:3.3.5-12), gcc-3.3 (<< 1:3.3.6)
+Depends: gcc-3.3-base (>= 1:3.3.5-12+kbsd), ${shlibs:Depends}, gcc-3.3 (>= 1:3.3.5-12+kbsd), gcc-3.3 (<< 1:3.3.6)
 Recommends: libgmp3-dev, libncurses5-dev
-Suggests: gpc-2.1-3.3-doc (>= 2:3.3.5.20040516-12)
+Suggests: gpc-2.1-3.3-doc (>= 2:3.3.5.-12+kbsd)
 Provides: pascal-compiler
 Description: The GNU Pascal compiler
  This is the GNU Pascal compiler, which compiles Pascal on platforms supported
@@ -440,7 +440,7 @@
 Architecture: all
 Section: doc
 Priority: optional
-Depends: gcc-3.3-base (>= 1:3.3.5-12)
+Depends: gcc-3.3-base (>= 1:3.3.5-12+kbsd)
 Replaces: gpc (<= 2.91.58-3)
 Suggests: gpc-2.1-3.3
 Description: Documentation for the GNU Pascal compiler (gpc)
@@ -452,7 +452,7 @@
 Package: treelang-3.3
 Architecture: any
 Priority: optional
-Depends: gcc-3.3-base (>= 1:3.3.5-12), ${shlibs:Depends}, gcc-3.3 (>= 1:3.3.5-12), gcc-3.3 (<< 1:3.3.6)
+Depends: gcc-3.3-base (>= 1:3.3.5-12+kbsd), ${shlibs:Depends}, gcc-3.3 (>= 1:3.3.5-12+kbsd), gcc-3.3 (<< 1:3.3.6)
 Description: The GNU Treelang compiler
  Treelang is a sample language, useful only to help people understand how
  to implement a new language front end to GCC. It is not a useful
@@ -463,7 +463,7 @@
 Package: gcc-3.3-soft-float
 Architecture: arm
 Priority: optional
-Depends: gcc-3.3-base (>= 1:3.3.5-12), ${shlibs:Depends}, gcc-3.3 (>= 1:3.3.5-12), gcc-3.3 (<< 1:3.3.6)
+Depends: gcc-3.3-base (>= 1:3.3.5-12+kbsd), ${shlibs:Depends}, gcc-3.3 (>= 1:3.3.5-12+kbsd), gcc-3.3 (<< 1:3.3.6)
 Replaces: gcc-soft-float-ss (<< 1:3.3.6)
 Description: The soft-floating-point gcc libraries (arm)
  These are versions of basic static libraries such as libgcc.a compiled
@@ -472,7 +472,7 @@
 Package: fixincludes
 Architecture: any
 Priority: optional
-Depends: gcc-3.3-base (>= 1:3.3.5-12), ${shlibs:Depends}, gcc-3.3 (>= 1:3.3.5-12), gcc-3.3 (<< 1:3.3.6)
+Depends: gcc-3.3-base (>= 1:3.3.5-12+kbsd), ${shlibs:Depends}, gcc-3.3 (>= 1:3.3.5-12+kbsd), gcc-3.3 (<< 1:3.3.6)
 Description: Fix non-ANSI header files
  FixIncludes was created to fix non-ANSI system header files. Many
  system manufacturers supply proprietary headers that are not ANSI compliant.
@@ -485,7 +485,7 @@
 Architecture: all
 Section: doc
 Priority: optional
-Depends: gcc-3.3-base (>= 1:3.3.5-12)
+Depends: gcc-3.3-base (>= 1:3.3.5-12+kbsd)
 Conflicts: gcc-docs (<< 2.95.2)
 Replaces: gcc (<=2.7.2.3-4.3), gcc-docs (<< 2.95.2)
 Description: Documentation for the GNU compilers (gcc, gobjc, g++)
@@ -494,7 +494,7 @@
 Package: gcc-3.3-nof
 Architecture: powerpc
 Priority: optional
-Depends: gcc-3.3-base (>= 1:3.3.5-12), ${shlibs:Depends}, gcc-3.3 (>= 1:3.3.5-12), gcc-3.3 (<< 1:3.3.6)
+Depends: gcc-3.3-base (>= 1:3.3.5-12+kbsd), ${shlibs:Depends}, gcc-3.3 (>= 1:3.3.5-12+kbsd), gcc-3.3 (<< 1:3.3.6)
 Conflicts: gcc-3.2-nof
 Description: The no-floating-point gcc libraries (powerpc)
  These are versions of basic static libraries such as libgcc.a compiled
diff -Nur gcc-3.3-3.3.5.old/debian/patches/autoreconf.dpatch gcc-3.3-3.3.5/debian/patches/autoreconf.dpatch
--- gcc-3.3-3.3.5.old/debian/patches/autoreconf.dpatch	2005-05-02 13:24:27.000000000 +0200
+++ gcc-3.3-3.3.5/debian/patches/autoreconf.dpatch	2005-05-02 14:02:23.000000000 +0200
@@ -14,7 +14,10 @@
     -patch)
         patch $pdir -f --no-backup-if-mismatch -p0 < $0
 	for i in libf2c libjava/libltdl libobjc libstdc++-v3 zlib; do
-		(cd ${dir}/${i} ; autoreconf --force)
+		(cd ${dir}/${i} ; `which autoreconf2.50 || which autoreconf` --force)
+	done
+	for i in . boehm-gc ; do
+		cp -f /usr/share/misc/config.* ${dir}/${i}/
 	done
         ;;
     -unpatch)
@@ -38,3 +41,129 @@
      lt_cv_deplibs_check_method=pass_all ;;
    *)
      # glibc up to 2.1.1 does not perform some relocations on ARM
+@@ -687,7 +687,7 @@
+   lt_cv_file_magic_test_file=`echo /lib/libc.so* /lib/libc-*.so`
+   ;;
+ 
+-netbsd*)
++netbsd* | knetbsd*-gnu)
+   if echo __ELF__ | $CC -E - | grep __ELF__ > /dev/null; then
+     [lt_cv_deplibs_check_method='match_pattern /lib[^/\.]+\.so\.[0-9]+\.[0-9]+$']
+   else
+diff -ur ../src.old/ltcf-c.sh ./ltcf-c.sh
+--- ../src.old/ltcf-c.sh	2002-08-14 04:39:52.000000000 +0200
++++ ./ltcf-c.sh	2003-12-18 21:30:48.000000000 +0100
+@@ -185,7 +185,7 @@
+     whole_archive_flag_spec='-all_load $convenience'
+     ;;
+ 
+-  netbsd*)
++  netbsd* | knetbsd*-gnu)
+     if echo __ELF__ | $CC -E - | grep __ELF__ >/dev/null; then
+       archive_cmds='$LD -Bshareable $libobjs $deplibs $linker_flags -o $lib'
+       wlarc=
+@@ -456,7 +456,7 @@
+     link_all_deplibs=yes
+     ;;
+ 
+-  netbsd*)
++  netbsd* | knetbsd*-gnu)
+     if echo __ELF__ | $CC -E - | grep __ELF__ >/dev/null; then
+       archive_cmds='$LD -Bshareable -o $lib $libobjs $deplibs $linker_flags'  # a.out
+     else
+diff -ur ../src.old/ltcf-cxx.sh ./ltcf-cxx.sh
+--- ../src.old/ltcf-cxx.sh	2003-02-20 02:12:47.000000000 +0100
++++ ./ltcf-cxx.sh	2003-12-18 21:31:18.000000000 +0100
+@@ -404,7 +404,7 @@
+         ;;
+     esac
+     ;;
+-  netbsd*)
++  netbsd* | knetbsd*-gnu)
+     # NetBSD uses g++ - do we need to do anything?
+     ;;
+   osf3*)
+diff -ur ../src.old/ltcf-gcj.sh ./ltcf-gcj.sh
+--- ../src.old/ltcf-gcj.sh	2003-02-20 01:36:49.000000000 +0100
++++ ./ltcf-gcj.sh	2003-12-18 21:31:47.000000000 +0100
+@@ -178,7 +178,7 @@
+       $CC $output_objdir/$soname-exp '$lt_cv_cc_dll_switch' -Wl,-e,'$dll_entry' -o $output_objdir/$soname '$ltdll_obj'$libobjs $deplibs $compiler_flags'
+     ;;
+ 
+-  netbsd*)
++  netbsd* | knetbsd*-gnu)
+     if echo __ELF__ | $CC -E - | grep __ELF__ >/dev/null; then
+       archive_cmds='$LD -Bshareable $libobjs $deplibs $linker_flags -o $lib'
+       wlarc=
+@@ -433,7 +433,7 @@
+     link_all_deplibs=yes
+     ;;
+ 
+-  netbsd*)
++  netbsd* | knetbsd*-gnu)
+     if echo __ELF__ | $CC -E - | grep __ELF__ >/dev/null; then
+       archive_cmds='$LD -Bshareable -o $lib $libobjs $deplibs $linker_flags'  # a.out
+     else
+diff -ur ../src.old/ltconfig ./ltconfig
+--- ../src.old/ltconfig	2003-02-20 03:10:02.000000000 +0100
++++ ./ltconfig	2003-12-18 21:33:54.000000000 +0100
+@@ -1152,6 +1152,17 @@
+   hardcode_into_libs=yes
+   ;;
+ 
++k*bsd*-gnu)
++  version_type=linux
++  need_lib_prefix=no
++  need_version=no
++  library_names_spec='${libname}${release}.so$versuffix ${libname}${release}.so${major} ${libname}.so'
++  soname_spec='${libname}${release}.so$major'
++  shlibpath_var=LD_LIBRARY_PATH
++  shlibpath_overrides_runpath=yes
++  hardcode_into_libs=yes
++  ;;
++
+ hpux9* | hpux10* | hpux11*)
+   # Give a soname corresponding to the major version so that dld.sl refuses to
+   # link against other versions.
+--- ltcf-c.sh~	2004-01-13 05:20:39.000000000 +0100
++++ ltcf-c.sh	2004-01-13 05:28:22.000000000 +0100
+@@ -409,7 +409,7 @@
+     ;;
+ 
+   # FreeBSD 3 and greater uses gcc -shared to do shared libraries.
+-  freebsd*)
++  freebsd* | kfreebsd*-gnu)
+     archive_cmds='$CC -shared -o $lib $libobjs $deplibs $compiler_flags'
+     hardcode_libdir_flag_spec='-R$libdir'
+     hardcode_direct=yes
+--- ltcf-cxx.sh~	2004-01-13 05:20:39.000000000 +0100
++++ ltcf-cxx.sh	2004-01-13 05:29:15.000000000 +0100
+@@ -241,7 +241,7 @@
+     # C++ shared libraries reported to be fairly broken before switch to ELF
+     ld_shlibs=no
+     ;;
+-  freebsd*)
++  freebsd* | kfreebsd*-gnu)
+     # FreeBSD 3 and later use GNU C++ and GNU ld with standard ELF
+     # conventions
+     ld_shlibs=yes
+@@ -743,7 +743,7 @@
+           ;;
+       esac
+       ;;
+-    freebsd*)
++    freebsd* | kfreebsd*-gnu)
+       # FreeBSD uses GNU C++
+       ;;
+     gnu*)
+--- ltcf-gcj.sh~	2004-01-13 05:20:39.000000000 +0100
++++ ltcf-gcj.sh	2004-01-13 05:29:34.000000000 +0100
+@@ -402,7 +402,7 @@
+     ;;
+ 
+   # FreeBSD 3 and greater uses gcc -shared to do shared libraries.
+-  freebsd*)
++  freebsd* | kfreebsd*-gnu)
+     archive_cmds='$CC -shared -o $lib $libobjs $deplibs $compiler_flags'
+     hardcode_libdir_flag_spec='-R$libdir'
+     hardcode_direct=yes
diff -Nur gcc-3.3-3.3.5.old/debian/patches/kbsd-gnu.dpatch gcc-3.3-3.3.5/debian/patches/kbsd-gnu.dpatch
--- gcc-3.3-3.3.5.old/debian/patches/kbsd-gnu.dpatch	1970-01-01 01:00:00.000000000 +0100
+++ gcc-3.3-3.3.5/debian/patches/kbsd-gnu.dpatch	2005-05-02 13:25:12.000000000 +0200
@@ -0,0 +1,408 @@
+#! /bin/sh -e
+
+# All lines beginning with `# DPATCH:' are a description of the patch.
+# DP: GNU/k*BSD
+
+dir=
+if [ $# -eq 3 -a "$2" = '-d' ]; then
+    pdir="-d $3"
+    dir="$3/"
+elif [ $# -ne 1 ]; then
+    echo >&2 "`basename $0`: script expects -patch|-unpatch as argument"
+    exit 1
+fi
+case "$1" in
+    -patch)
+        patch $pdir -f --no-backup-if-mismatch -p1 < $0
+        #cd ${dir}gcc && autoconf
+        ;;
+    -unpatch)
+        patch $pdir -f --no-backup-if-mismatch -R -p1 < $0
+        #rm ${dir}gcc/configure
+        ;;
+    *)
+        echo >&2 "`basename $0`: script expects -patch|-unpatch as argument"
+        exit 1
+esac
+exit 0
+
+# append the patch here and adjust the -p? flag in the patch calls.
+
+diff -Nur src.old/gcc/config/i386/kfreebsd-gnu.h src/gcc/config/i386/kfreebsd-gnu.h
+--- src.old/gcc/config/i386/kfreebsd-gnu.h	1970-01-01 01:00:00.000000000 +0100
++++ src/gcc/config/i386/kfreebsd-gnu.h	2004-11-29 22:01:31.000000000 +0100
+@@ -0,0 +1,9 @@
++
++#undef LINK_SPEC
++#define LINK_SPEC "-m elf_i386_fbsd %{shared:-shared} \
++  %{!shared: \
++    %{!ibcs: \
++      %{!static: \
++	%{rdynamic:-export-dynamic} \
++	%{!dynamic-linker:-dynamic-linker /lib/ld.so.1}} \
++	%{static:-static}}}"
+diff -Nur src.old/gcc/config/i386/knetbsd-gnu.h src/gcc/config/i386/knetbsd-gnu.h
+--- src.old/gcc/config/i386/knetbsd-gnu.h	1970-01-01 01:00:00.000000000 +0100
++++ src/gcc/config/i386/knetbsd-gnu.h	2004-11-29 22:01:53.000000000 +0100
+@@ -0,0 +1,9 @@
++
++#undef LINK_SPEC
++#define LINK_SPEC "-m elf_i386 %{shared:-shared} \
++  %{!shared: \
++    %{!ibcs: \
++      %{!static: \
++	%{rdynamic:-export-dynamic} \
++	%{!dynamic-linker:-dynamic-linker /lib/ld.so.1}} \
++	%{static:-static}}}"
+diff -Nur src.old/gcc/config/i386/linux.h src/gcc/config/i386/linux.h
+--- src.old/gcc/config/i386/linux.h	2003-11-14 07:46:12.000000000 +0100
++++ src/gcc/config/i386/linux.h	2004-11-29 21:59:56.000000000 +0100
+@@ -267,28 +267,28 @@
+     else								\
+       break;								\
+ 									\
+-    new_cfa_ = sc_->esp;						\
++    new_cfa_ = sc_->sc_esp;						\
+     (FS)->cfa_how = CFA_REG_OFFSET;					\
+     (FS)->cfa_reg = 4;							\
+     (FS)->cfa_offset = new_cfa_ - (long) (CONTEXT)->cfa;		\
+ 									\
+     /* The SVR4 register numbering macros aren't usable in libgcc.  */	\
+     (FS)->regs.reg[0].how = REG_SAVED_OFFSET;				\
+-    (FS)->regs.reg[0].loc.offset = (long)&sc_->eax - new_cfa_;		\
++    (FS)->regs.reg[0].loc.offset = (long)&sc_->sc_eax - new_cfa_;		\
+     (FS)->regs.reg[3].how = REG_SAVED_OFFSET;				\
+-    (FS)->regs.reg[3].loc.offset = (long)&sc_->ebx - new_cfa_;		\
++    (FS)->regs.reg[3].loc.offset = (long)&sc_->sc_ebx - new_cfa_;		\
+     (FS)->regs.reg[1].how = REG_SAVED_OFFSET;				\
+-    (FS)->regs.reg[1].loc.offset = (long)&sc_->ecx - new_cfa_;		\
++    (FS)->regs.reg[1].loc.offset = (long)&sc_->sc_ecx - new_cfa_;		\
+     (FS)->regs.reg[2].how = REG_SAVED_OFFSET;				\
+-    (FS)->regs.reg[2].loc.offset = (long)&sc_->edx - new_cfa_;		\
++    (FS)->regs.reg[2].loc.offset = (long)&sc_->sc_edx - new_cfa_;		\
+     (FS)->regs.reg[6].how = REG_SAVED_OFFSET;				\
+-    (FS)->regs.reg[6].loc.offset = (long)&sc_->esi - new_cfa_;		\
++    (FS)->regs.reg[6].loc.offset = (long)&sc_->sc_esi - new_cfa_;		\
+     (FS)->regs.reg[7].how = REG_SAVED_OFFSET;				\
+-    (FS)->regs.reg[7].loc.offset = (long)&sc_->edi - new_cfa_;		\
++    (FS)->regs.reg[7].loc.offset = (long)&sc_->sc_edi - new_cfa_;		\
+     (FS)->regs.reg[5].how = REG_SAVED_OFFSET;				\
+-    (FS)->regs.reg[5].loc.offset = (long)&sc_->ebp - new_cfa_;		\
++    (FS)->regs.reg[5].loc.offset = (long)&sc_->sc_ebp - new_cfa_;		\
+     (FS)->regs.reg[8].how = REG_SAVED_OFFSET;				\
+-    (FS)->regs.reg[8].loc.offset = (long)&sc_->eip - new_cfa_;		\
++    (FS)->regs.reg[8].loc.offset = (long)&sc_->sc_eip - new_cfa_;		\
+     (FS)->retaddr_column = 8;						\
+     goto SUCCESS;							\
+   } while (0)
+diff -Nur src.old/gcc/config/kfreebsd-gnu.h src/gcc/config/kfreebsd-gnu.h
+--- src.old/gcc/config/kfreebsd-gnu.h	1970-01-01 01:00:00.000000000 +0100
++++ src/gcc/config/kfreebsd-gnu.h	2004-11-29 22:01:23.000000000 +0100
+@@ -0,0 +1,17 @@
++
++#undef TARGET_OS_CPP_BUILTINS    
++#define TARGET_OS_CPP_BUILTINS()		\
++  do						\
++    {						\
++	builtin_define ("__GLIBC__");		\
++	builtin_define ("__FreeBSD_kernel__");	\
++	builtin_define_std ("unix");		\
++	builtin_define ("__ELF__");		\
++	builtin_assert ("system=posix");	\
++	if (flag_pic)				\
++	  {					\
++	    builtin_define ("__PIC__");		\
++	    builtin_define ("__pic__");		\
++	  }					\
++    }						\
++  while (0)
+diff -Nur src.old/gcc/config/knetbsd-gnu.h src/gcc/config/knetbsd-gnu.h
+--- src.old/gcc/config/knetbsd-gnu.h	1970-01-01 01:00:00.000000000 +0100
++++ src/gcc/config/knetbsd-gnu.h	2004-11-29 22:01:44.000000000 +0100
+@@ -0,0 +1,18 @@
++
++#undef TARGET_OS_CPP_BUILTINS    
++#define TARGET_OS_CPP_BUILTINS()		\
++  do						\
++    {						\
++	builtin_define ("__GLIBC__");		\
++	builtin_define ("__NetBSD_kernel__");	\
++	builtin_define_std ("unix");		\
++	builtin_define ("__ELF__");		\
++	builtin_assert ("system=posix");	\
++	if (flag_pic)				\
++	  {					\
++	    builtin_define ("__PIC__");		\
++	    builtin_define ("__pic__");		\
++	  }					\
++    }						\
++  while (0)
++
+diff -Nur src.old/gcc/config.gcc src/gcc/config.gcc
+--- src.old/gcc/config.gcc	2004-04-29 06:42:47.000000000 +0200
++++ src/gcc/config.gcc	2004-11-29 22:01:03.000000000 +0100
+@@ -362,7 +362,7 @@
+ 
+ # Common parts for GNU/Linux, GNU/Hurd, OpenBSD, NetBSD, and FreeBSD systems.
+ case $machine in
+-*-*-linux*)
++*-*-linux* | *-*-k*bsd*-gnu)
+ 	xm_defines=POSIX
+ 	case $machine in
+ 	*-*-linux*ecoff* | *-*-linux*libc1* | *-*-linux*oldld* | *-*-linux*aout*)
+@@ -1173,15 +1173,24 @@
+ 		thread_file='single'
+ 	fi
+ 	;;
+-i[34567]86-*-linux*)	# Intel 80386's running GNU/Linux
++i[34567]86-*-linux* | i[34567]86-*-k*bsd*-gnu)
++			# Intel 80386's running GNU/Linux
+ 			# with ELF format using glibc 2
+ 			# aka GNU/Linux C library 6
+ 	tm_file="${tm_file} i386/unix.h i386/att.h dbxelf.h elfos.h svr4.h linux.h i386/linux.h"
++	case $machine in
++	*-*-kfreebsd*-gnu) tm_file="${tm_file} kfreebsd-gnu.h i386/kfreebsd-gnu.h" ;;
++	*-*-knetbsd*-gnu) tm_file="${tm_file} knetbsd-gnu.h i386/kfreebsd-gnu.h" ;;
++	esac
+ 	tmake_file="t-slibgcc-elf-ver t-linux i386/t-crtstuff"
+ 	;;
+ x86_64-*-linux*)
+ 	tm_file="${tm_file} i386/unix.h i386/att.h dbxelf.h elfos.h svr4.h linux.h \
+ 		 i386/x86-64.h i386/linux64.h"
++	case $machine in
++	*-*-kfreebsd*-gnu) tm_file="${tm_file} kfreebsd-gnu.h" ;;
++	*-*-knetbsd*-gnu) tm_file="${tm_file} knetbsd-gnu.h" ;;
++	esac
+ 	tmake_file="t-slibgcc-elf-ver t-linux i386/t-linux64"
+ 	;;
+ i[34567]86-*-gnu*)
+diff -Nur src.old/gcc/ginclude/stddef.h src/gcc/ginclude/stddef.h
+--- src.old/gcc/ginclude/stddef.h	2002-10-04 23:16:05.000000000 +0200
++++ src/gcc/ginclude/stddef.h	2004-11-29 21:59:56.000000000 +0100
+@@ -78,6 +78,8 @@
+ #define _WCHAR_T
+ #endif
+ #endif
++#endif /* defined(_ANSI_H_) || defined(_MACHINE_ANSI_H_) */
++
+ /* Undef _FOO_T_ if we are supposed to define foo_t.  */
+ #if defined (__need_ptrdiff_t) || defined (_STDDEF_H_)
+ #undef _PTRDIFF_T_
+@@ -91,7 +93,7 @@
+ #undef _WCHAR_T_
+ #undef _BSD_WCHAR_T_
+ #endif
+-#endif /* defined(_ANSI_H_) || defined(_MACHINE_ANSI_H_) */
++
+ 
+ /* Sequent's header files use _PTRDIFF_T_ in some conflicting way.
+    Just ignore it.  */
+diff -Nur src.old/libstdc++-v3/acinclude.m4 src/libstdc++-v3/acinclude.m4
+--- src.old/libstdc++-v3/acinclude.m4	2004-11-29 21:58:20.000000000 +0100
++++ src/libstdc++-v3/acinclude.m4	2004-11-29 21:59:56.000000000 +0100
+@@ -1206,7 +1206,7 @@
+   dnl Default to "generic"
+   if test x$enable_clocale_flag = xno; then
+     case x${target_os} in
+-      xlinux* | xgnu*)
++      xlinux* | xgnu* | xk*bsd*-gnu)
+ 	AC_EGREP_CPP([_GLIBCPP_ok], [
+         #include <features.h>
+         #if __GLIBC__ > 2 || (__GLIBC__ == 2 && __GLIBC_MINOR__ >= 2) 
+@@ -1394,7 +1394,7 @@
+       # compile most of libio for linux systems.
+       if test x$has_libio = x"yes"; then
+         case "$target" in
+-          *-*-linux*)
++          *-*-linux* | *-*-gnu* | *-*-k*bsd*-gnu)
+               AC_MSG_CHECKING([for glibc version >= 2.2])
+               AC_EGREP_CPP([ok], [
+             #include <features.h>
+diff -Nur src.old/libstdc++-v3/aclocal.m4 src/libstdc++-v3/aclocal.m4
+--- src.old/libstdc++-v3/aclocal.m4	2004-05-25 08:03:52.000000000 +0200
++++ src/libstdc++-v3/aclocal.m4	2004-11-29 21:59:56.000000000 +0100
+@@ -1218,7 +1218,7 @@
+   dnl Default to "generic"
+   if test x$enable_clocale_flag = xno; then
+     case x${target_os} in
+-      xlinux* | xgnu*)
++      xlinux* | xgnu* | xk*bsd*-gnu)
+ 	AC_EGREP_CPP([_GLIBCPP_ok], [
+         #include <features.h>
+         #if __GLIBC__ > 2 || (__GLIBC__ == 2 && __GLIBC_MINOR__ >= 2) 
+@@ -1406,7 +1406,7 @@
+       # compile most of libio for linux systems.
+       if test x$has_libio = x"yes"; then
+         case "$target" in
+-          *-*-linux*)
++          *-*-linux* | *-*-gnu* | *-*-k*bsd*-gnu)
+               AC_MSG_CHECKING([for glibc version >= 2.2])
+               AC_EGREP_CPP([ok], [
+             #include <features.h>
+diff -Nur src.old/libstdc++-v3/config/locale/gnu/c_locale.cc src/libstdc++-v3/config/locale/gnu/c_locale.cc
+--- src.old/libstdc++-v3/config/locale/gnu/c_locale.cc	2003-02-28 07:09:52.000000000 +0100
++++ src/libstdc++-v3/config/locale/gnu/c_locale.cc	2004-11-29 21:59:56.000000000 +0100
+@@ -40,6 +40,17 @@
+ 
+ namespace std 
+ {
++  extern "C" __typeof (strtol_l) __strtol_l;
++  extern "C" __typeof (strtoul_l) __strtoul_l;
++  extern "C" __typeof (strtoll_l) __strtoll_l;
++  extern "C" __typeof (strtoull_l) __strtoull_l;
++  extern "C" __typeof (strtof_l) __strtof_l;
++  extern "C" __typeof (strtod_l) __strtod_l;
++  extern "C" __typeof (strtold_l) __strtold_l;
++  extern "C" __typeof (newlocale) __newlocale;
++  extern "C" __typeof (freelocale) __freelocale;
++  extern "C" __typeof (duplocale) __duplocale;
++
+   template<>
+     void
+     __convert_to_v(const char* __s, long& __v, ios_base::iostate& __err, 
+diff -Nur src.old/libstdc++-v3/config/locale/gnu/collate_members.cc src/libstdc++-v3/config/locale/gnu/collate_members.cc
+--- src.old/libstdc++-v3/config/locale/gnu/collate_members.cc	2003-02-28 07:09:52.000000000 +0100
++++ src/libstdc++-v3/config/locale/gnu/collate_members.cc	2004-11-29 21:59:56.000000000 +0100
+@@ -38,6 +38,11 @@
+ 
+ namespace std
+ {
++  extern "C" __typeof (strcoll_l) __strcoll_l;
++  extern "C" __typeof (strxfrm_l) __strxfrm_l;
++  extern "C" __typeof (wcscoll_l) __wcscoll_l;
++  extern "C" __typeof (wcsxfrm_l) __wcsxfrm_l;
++
+   // These are basically extensions to char_traits, and perhaps should
+   // be put there instead of here.
+   template<>
+diff -Nur src.old/libstdc++-v3/config/locale/gnu/ctype_members.cc src/libstdc++-v3/config/locale/gnu/ctype_members.cc
+--- src.old/libstdc++-v3/config/locale/gnu/ctype_members.cc	2003-10-07 10:40:58.000000000 +0200
++++ src/libstdc++-v3/config/locale/gnu/ctype_members.cc	2004-11-29 21:59:56.000000000 +0100
+@@ -38,6 +38,11 @@
+ 
+ namespace std
+ {
++  extern "C" __typeof (wctype_l) __wctype_l;
++  extern "C" __typeof (towupper_l) __towupper_l;
++  extern "C" __typeof (towlower_l) __towlower_l;
++  extern "C" __typeof (iswctype_l) __iswctype_l;
++
+   // NB: The other ctype<char> specializations are in src/locale.cc and
+   // various /config/os/* files.
+   template<>
+diff -Nur src.old/libstdc++-v3/config/locale/gnu/messages_members.cc src/libstdc++-v3/config/locale/gnu/messages_members.cc
+--- src.old/libstdc++-v3/config/locale/gnu/messages_members.cc	2003-02-28 07:09:52.000000000 +0100
++++ src/libstdc++-v3/config/locale/gnu/messages_members.cc	2004-11-29 21:59:56.000000000 +0100
+@@ -38,6 +38,7 @@
+ 
+ namespace std
+ {
++  extern "C" __typeof (uselocale) __uselocale;
+   // Specializations.
+   template<>
+     string
+diff -Nur src.old/libstdc++-v3/config/locale/gnu/messages_members.h src/libstdc++-v3/config/locale/gnu/messages_members.h
+--- src.old/libstdc++-v3/config/locale/gnu/messages_members.h	2003-01-06 23:20:03.000000000 +0100
++++ src/libstdc++-v3/config/locale/gnu/messages_members.h	2004-11-29 21:59:56.000000000 +0100
+@@ -33,6 +33,8 @@
+ 
+ // Written by Benjamin Kosnik <bkoz@redhat.com>
+ 
++  extern "C" __typeof (uselocale) __uselocale;
++
+   // Non-virtual member functions.
+   template<typename _CharT>
+      messages<_CharT>::messages(size_t __refs)
+diff -Nur src.old/libstdc++-v3/config/locale/gnu/monetary_members.cc src/libstdc++-v3/config/locale/gnu/monetary_members.cc
+--- src.old/libstdc++-v3/config/locale/gnu/monetary_members.cc	2004-01-26 10:41:26.000000000 +0100
++++ src/libstdc++-v3/config/locale/gnu/monetary_members.cc	2004-11-29 21:59:56.000000000 +0100
+@@ -38,6 +38,8 @@
+ 
+ namespace std
+ {
++  extern "C" __typeof (nl_langinfo_l) __nl_langinfo_l;
++
+   // Construct and return valid pattern consisting of some combination of:
+   // space none symbol sign value
+   money_base::pattern
+diff -Nur src.old/libstdc++-v3/config/locale/gnu/numeric_members.cc src/libstdc++-v3/config/locale/gnu/numeric_members.cc
+--- src.old/libstdc++-v3/config/locale/gnu/numeric_members.cc	2003-02-28 07:09:52.000000000 +0100
++++ src/libstdc++-v3/config/locale/gnu/numeric_members.cc	2004-11-29 21:59:56.000000000 +0100
+@@ -38,6 +38,8 @@
+ 
+ namespace std
+ {
++  extern "C" __typeof (nl_langinfo_l) __nl_langinfo_l;
++
+   template<> 
+     void
+     numpunct<char>::_M_initialize_numpunct(__c_locale __cloc)
+diff -Nur src.old/libstdc++-v3/config/locale/gnu/time_members.cc src/libstdc++-v3/config/locale/gnu/time_members.cc
+--- src.old/libstdc++-v3/config/locale/gnu/time_members.cc	2003-02-28 07:09:52.000000000 +0100
++++ src/libstdc++-v3/config/locale/gnu/time_members.cc	2004-11-29 21:59:56.000000000 +0100
+@@ -39,6 +39,10 @@
+ 
+ namespace std
+ {
++  extern "C" __typeof (strftime_l) __strftime_l;
++  extern "C" __typeof (wcsftime_l) __wcsftime_l;
++  extern "C" __typeof (nl_langinfo_l) __nl_langinfo_l;
++
+   template<>
+     void
+     __timepunct<char>::
+diff -Nur src.old/libstdc++-v3/configure src/libstdc++-v3/configure
+--- src.old/libstdc++-v3/configure	2004-11-29 21:58:33.000000000 +0100
++++ src/libstdc++-v3/configure	2004-11-29 21:59:56.000000000 +0100
+@@ -2870,7 +2870,7 @@
+       # compile most of libio for linux systems.
+       if test x$has_libio = x"yes"; then
+         case "$target" in
+-          *-*-linux*)
++          *-*-linux* | *-*-gnu* | *-*-k*bsd*-gnu)
+               echo $ac_n "checking for glibc version >= 2.2""... $ac_c" 1>&6
+ echo "configure:2876: checking for glibc version >= 2.2" >&5
+               cat > conftest.$ac_ext <<EOF
+@@ -3004,7 +3004,7 @@
+ 
+       if test x$enable_clocale_flag = xno; then
+     case x${target_os} in
+-      xlinux* | xgnu*)
++      xlinux* | xgnu* | xk*bsd*-gnu)
+ 	cat > conftest.$ac_ext <<EOF
+ #line 3010 "configure"
+ #include "confdefs.h"
+@@ -4220,7 +4220,7 @@
+   # GLIBCPP_CHECK_MATH_SUPPORT
+ 
+   case "$target" in
+-    *-linux*)
++    *-linux* | *-k*bsd*-gnu | *-gnu*)
+       os_include_dir="os/gnu-linux"
+       for ac_hdr in nan.h ieeefp.h endian.h sys/isa_defs.h \
+         machine/endian.h machine/param.h sys/machine.h sys/types.h \
+diff -Nur src.old/libstdc++-v3/configure.in src/libstdc++-v3/configure.in
+--- src.old/libstdc++-v3/configure.in	2004-11-29 21:58:18.000000000 +0100
++++ src/libstdc++-v3/configure.in	2004-11-29 21:59:56.000000000 +0100
+@@ -117,7 +117,7 @@
+   # GLIBCPP_CHECK_MATH_SUPPORT
+ 
+   case "$target" in
+-    *-linux*)
++    *-linux* | *-k*bsd*-gnu | *-gnu*)
+       os_include_dir="os/gnu-linux"
+       AC_CHECK_HEADERS([nan.h ieeefp.h endian.h sys/isa_defs.h \
+         machine/endian.h machine/param.h sys/machine.h sys/types.h \
+diff -Nur src.old/libstdc++-v3/configure.target src/libstdc++-v3/configure.target
+--- src.old/libstdc++-v3/configure.target	2003-10-01 21:07:07.000000000 +0200
++++ src/libstdc++-v3/configure.target	2004-11-29 21:59:56.000000000 +0100
+@@ -151,6 +151,9 @@
+   mingw32*)
+     os_include_dir="os/mingw32"
+     ;;
++  k*bsd*-gnu)
++    os_include_dir="os/gnu-linux"
++    ;;
+   netbsd*)
+     os_include_dir="os/bsd/netbsd"
+     ;;
diff -Nur gcc-3.3-3.3.5.old/debian/rules.conf gcc-3.3-3.3.5/debian/rules.conf
--- gcc-3.3-3.3.5.old/debian/rules.conf	2005-05-02 13:24:28.000000000 +0200
+++ gcc-3.3-3.3.5/debian/rules.conf	2005-05-02 13:25:48.000000000 +0200
@@ -18,27 +18,11 @@
 endif
 
 # libc-dev dependencies
-libc_ver := 2.3.2.ds1-16
-ifeq ($(DEB_TARGET_ARCH), $(findstring $(DEB_TARGET_ARCH),alpha ia64))
-  LIBC_DEP = libc6.1-dev$(LS) (>= $(libc_ver))
-else
-  ifeq ($(DEB_TARGET_GNU_SYSTEM),gnu)
-    LIBC_DEP = libc0.3-dev$(LS)
-  else
-    ifeq ($(DEB_TARGET_GNU_SYSTEM),freebsd)
-      LIBC_DEP = libc1-dev$(LS)
-    else
-      ifeq ($(DEB_TARGET_ARCH),netbsd-i386)
-        LIBC_DEP = libc12-dev$(LS)
-      else
-        LIBC_DEP = libc6-dev$(LS) (>= $(libc_ver))
-      endif
-    endif
-  endif
-endif
+libc_ver := 2.3
+LIBC_DEP = libc-dev
 
 ifndef DEB_CROSS
-LIBC_BUILD_DEP = libc6.1-dev (>= $(libc_ver)) [alpha ia64] | libc0.3-dev [hurd-i386] | libc1-dev [freebsd-i386] | libc12-dev (>= 2.0.ds1-1) [netbsd-i386] | libc6-dev (>= $(libc_ver))
+LIBC_BUILD_DEP = libc-dev
 else
 # When building a cross compiler, the libc-dev build dependancy must be
 # sensitive to the target architecture; the host architecture is irrelevant.
diff -Nur gcc-3.3-3.3.5.old/debian/rules.defs gcc-3.3-3.3.5/debian/rules.defs
--- gcc-3.3-3.3.5.old/debian/rules.defs	2005-05-02 13:24:28.000000000 +0200
+++ gcc-3.3-3.3.5/debian/rules.defs	2005-05-02 13:26:30.000000000 +0200
@@ -76,8 +76,11 @@
   ifeq ($(TARGET_ALIAS),i386-gnu)
     TARGET_ALIAS := i586-gnu
   endif
-  ifeq ($(TARGET_ALIAS),i386-freebsd-gnu)
-    TARGET_ALIAS := i486-freebsd-gnu
+  ifeq ($(TARGET_ALIAS),i386-kfreebsd-gnu)
+    TARGET_ALIAS := i486-kfreebsd-gnu
+  endif
+  ifeq ($(TARGET_ALIAS),i386-knetbsd-gnu)
+    TARGET_ALIAS := i486-knetbsd-gnu
   endif
   ifeq ($(TARGET_ALIAS)-$(hammer_branch),powerpc-linux-yes)
     TARGET_ALIAS := powerpc64-linux
@@ -183,7 +186,7 @@
   with_java := yes
 endif
 
-java_no_archs := hurd-i386 mips mipsel freebsd-i386
+java_no_archs := hurd-i386 mips mipsel kfreebsd-i386 knetbsd-i386
 ifneq ($(DEB_TARGET_ARCH),i386)
   ifeq ($(DEB_TARGET_ARCH), $(findstring $(DEB_TARGET_ARCH),$(java_no_archs)))
     with_java := disabled for architecure $(DEB_TARGET_ARCH)
@@ -231,7 +234,7 @@
 # libffi -------------------
 ifeq ($(with_common_libs),yes)
   with_libffi := yes
-  no_ffi_archs := hurd-i386 freebsd-i386
+  no_ffi_archs := hurd-i386 kfreebsd-i386 knetbsd-i386
   ifneq ($(with_java),yes)
     ifneq ($(DEB_TARGET_ARCH),i386)
     ifeq ($(DEB_TARGET_ARCH), $(findstring $(DEB_TARGET_ARCH),$(no_ffi_archs)))
@@ -308,7 +311,7 @@
   with_pascal := no
 endif
 
-pascal_no_archs := 
+pascal_no_archs := kfreebsd-i386 knetbsd-i386
 #pascal_no_archs := netbsd-i386 arm
 ifneq ($(DEB_TARGET_ARCH),i386)
   ifeq ($(DEB_TARGET_ARCH),$(findstring $(DEB_TARGET_ARCH),$(pascal_no_archs)))
@@ -340,7 +343,7 @@
 with_objc_gc := yes
 
 # disable ObjC garbage collection library (needs libgc)
-libgc_no_archs := avr freebsd-i386
+libgc_no_archs := avr
 ifneq ($(DEB_TARGET_ARCH),i386)
   ifeq ($(DEB_TARGET_ARCH),$(findstring $(DEB_TARGET_ARCH),$(libgc_no_archs)))
     with_objc_gc := disabled for architecture $(DEB_TARGET_ARCH)
@@ -380,7 +383,7 @@
 endif
 
 with_libgnat := yes
-ada_no_archs := arm hurd-i386 m68k freebsd-i386 netbsd-i386
+ada_no_archs := arm hurd-i386 m68k kfreebsd-i386 knetbsd-i386
 ifneq ($(DEB_TARGET_ARCH),i386)
   ifeq ($(DEB_TARGET_ARCH), $(findstring $(DEB_TARGET_ARCH),$(ada_no_archs)))
     with_ada := disabled for architecure $(DEB_TARGET_ARCH)
@@ -465,7 +468,7 @@
 ifdef DEB_CROSS
   with_check := disabled for cross compiler package
 endif
-check_no_archs := hurd-i386
+check_no_archs := hurd-i386 kfreebsd-i386 knetbsd-i386
 ifneq ($(DEB_TARGET_ARCH),i386)
   ifeq ($(DEB_TARGET_ARCH), $(findstring $(DEB_TARGET_ARCH),$(check_no_archs)))
     with_check :=disabled for $(DEB_TARGET_ARCH)
diff -Nur gcc-3.3-3.3.5.old/debian/rules.parameters gcc-3.3-3.3.5/debian/rules.parameters
--- gcc-3.3-3.3.5.old/debian/rules.parameters	2005-05-02 13:24:28.000000000 +0200
+++ gcc-3.3-3.3.5/debian/rules.parameters	2005-05-02 14:03:35.000000000 +0200
@@ -1,10 +1,10 @@
 # configuration parameters taken from upstream source files
 VER		:= 3.3.5
 BASE_VERSION	:= 3.3
-SOURCE_VERSION	:= 1:3.3.5-12
-DEB_VERSION	:= 1:3.3.5-12
+SOURCE_VERSION	:= 1:3.3.5-12+kbsd
+DEB_VERSION	:= 1:3.3.5-12+kbsd
 GPC_BASE_VERSION	:= 2.1
-DEB_GPC_VERSION	:= 2:3.3.5.20040516-12
+DEB_GPC_VERSION	:= 2:3.3.5.-12+kbsd
 DEB_SOVERSION	:= 1:3.3.4-1
 DEB_FFI_SOVERSION	:= 1:3.3.4-1
 DEB_GCC_SOVERSION	:= 1:3.3.4-3
@@ -17,5 +17,5 @@
 GCJ_SONAME	:= 4
 GNAT_VERSION	:= 3.3
 GNAT_SONAME	:= 3.15
-FFI_SONAME	:= 2
-LIBC_DEP		:= libc6-dev (>= 2.3.2.ds1-16)
+FFI_SONAME	:= 
+LIBC_DEP		:= libc-dev
diff -Nur gcc-3.3-3.3.5.old/debian/rules.patch gcc-3.3-3.3.5/debian/rules.patch
--- gcc-3.3-3.3.5.old/debian/rules.patch	2005-05-02 13:24:28.000000000 +0200
+++ gcc-3.3-3.3.5/debian/rules.patch	2005-05-02 13:25:12.000000000 +0200
@@ -122,15 +122,18 @@
   endif
 endif
 
-ifeq ($(DEB_TARGET_ARCH),freebsd-i386)
+ifeq ($(DEB_TARGET_GNU_SYSTEM),knetbsd-gnu)
   debian_patches += cpu-default-i486
 endif
-ifeq ($(DEB_TARGET_ARCH),freebsd-i386-gnu)
+ifeq ($(DEB_TARGET_GNU_SYSTEM),kfreebsd-gnu)
   debian_patches += cpu-default-i486
 endif
 
-ifeq ($(DEB_TARGET_ARCH),netbsd-i386)
-  debian_patches += netbsd-all-gcc netbsd-archs-gcc
+ifeq ($(DEB_TARGET_GNU_SYSTEM),knetbsd-gnu)
+  debian_patches += kbsd-gnu
+endif
+ifeq ($(DEB_TARGET_GNU_SYSTEM),kfreebsd-gnu)
+  debian_patches += kbsd-gnu
 endif
 
 debian_patches += reporting # applied after gcc-cvs-updates
