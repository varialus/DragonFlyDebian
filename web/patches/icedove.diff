
* adds 38_kbsd.dpatch from iceape_1.1.11-1
* enlist 38_kbsd.dpatch in series
* alters 38_mips64_build.dpatch by version from iceape_1.1.11-1
* adds a snippet into 38_kbsd.dpatch (changes xpcom/glue/standalone/Makefile.in)
* regenerates configure (debian/patches/autoconf2.13-rerun)


diff -uN icedove-2.0.0.16/debian/patches/series icedove-2.0.0.16/debian/patches/series
--- icedove-2.0.0.16/debian/patches/series	2008-08-18 11:04:01.000000000 +0000
+++ icedove-2.0.0.16/debian/patches/series	2008-08-18 11:08:28.000000000 +0000
@@ -17,6 +17,7 @@
 38_arm_xpcom_optim.dpatch
 38_hppa_xpcom.dpatch
 38_ia64_align.dpatch
+38_kbsd.dpatch
 38_mips64_build.dpatch
 38_mips_xpcom.dpatch
 38_sparc64_unichar_alignment.dpatch
diff -uN icedove-2.0.0.16/debian/patches/38_kbsd.dpatch icedove-2.0.0.16/debian/patches/38_kbsd.dpatch
--- icedove-2.0.0.16/debian/patches/38_kbsd.dpatch	1970-01-01 00:00:00.000000000 +0000
+++ icedove-2.0.0.16/debian/patches/38_kbsd.dpatch	2008-08-18 11:03:14.000000000 +0000
@@ -0,0 +1,554 @@
+#! /bin/sh /usr/share/dpatch/dpatch-run
+## 38_kbsd.dpatch by Petr Salinger <Petr.Salinger@seznam.cz>
+##
+## All lines beginning with `## DP:' are a description of the patch.
+## DP: GNU/kFreeBSD support. bz#356011
+
+@DPATCH@
+
+diff -ur mozilla/xpcom/glue/standalone/Makefile.in mozilla/xpcom/glue/standalone/Makefile.in
+--- mozilla/xpcom/glue/standalone/Makefile.in	2008-08-18 10:58:40.000000000 +0000
++++ mozilla/xpcom/glue/standalone/Makefile.in	2008-08-18 10:58:40.000000000 +0000
+@@ -59,7 +59,7 @@
+ ifeq (WINNT,$(OS_ARCH))
+ LINKSRC = nsGlueLinkingWin.cpp
+ endif
+-ifneq (,$(filter AIX DragonFly FreeBSD Linux NetBSD OpenBSD SunOS,$(OS_ARCH)))
++ifneq (,$(filter AIX DragonFly FreeBSD Linux GNU_% GNU NetBSD OpenBSD SunOS,$(OS_ARCH)))
+ LINKSRC = nsGlueLinkingDlopen.cpp
+ endif
+ ifeq (OS2,$(OS_ARCH))
+diff -ur mozilla/directory/c-sdk/config/nsinstall.c mozilla/directory/c-sdk/config/nsinstall.c
+--- mozilla/directory/c-sdk/config/nsinstall.c	2002-03-27 11:06:18.000000000 +0100
++++ mozilla/directory/c-sdk/config/nsinstall.c	2006-11-20 23:14:53.000000000 +0100
+@@ -106,7 +106,7 @@
+ }
+ #endif /* NEXTSTEP */
+ 
+-#ifdef LINUX
++#if defined(LINUX) || defined(__GLIBC__) || defined(__GNU__)
+ #include <getopt.h>
+ #endif
+ 
+diff -ur mozilla/directory/c-sdk/ldap/libraries/libldap/Makefile.client mozilla/directory/c-sdk/ldap/libraries/libldap/Makefile.client
+--- mozilla/directory/c-sdk/ldap/libraries/libldap/Makefile.client	2002-03-26 22:53:26.000000000 +0100
++++ mozilla/directory/c-sdk/ldap/libraries/libldap/Makefile.client	2006-11-20 23:00:17.000000000 +0100
+@@ -161,7 +161,7 @@
+ EXTRA_LIBS += -L$(NSCP_DISTDIR)/lib
+ endif
+ 
+-ifeq ($(OS_ARCH), Linux)
++ifneq (,$(filter Linux GNU GNU_%, $(OS_ARCH)))
+ EXTRA_LIBS = -L$(NSCP_DISTDIR)/$(OBJDIR_NAME)/lib -l$(LBER_LIBNAME)
+ EXTRA_LIBS += -L$(NSCP_DISTDIR)/lib
+ endif
+@@ -237,7 +237,7 @@
+ ifeq ($(OS_ARCH), AIX)
+ 	$(LINK_LIB) ../liblber/$(OBJDIR_NAME)/*.a
+ else
+-ifeq ($(OS_ARCH), Linux)
++ifneq (,$(filter Linux GNU GNU_%, $(OS_ARCH)))
+ 	$(LINK_LIB) ../liblber/$(OBJDIR_NAME)/*.a
+ else
+ 	$(LINK_LIB) $(EXTRA_LIBS)
+diff -ur mozilla/directory/c-sdk/configure.in mozilla/directory/c-sdk/configure.in
+--- mozilla/directory/c-sdk/configure.in	2006-02-23 00:58:25.000000000 +0100
++++ mozilla/directory/c-sdk/configure.in	2006-11-20 23:08:37.000000000 +0100
+@@ -560,6 +560,7 @@
+     OS_TEST="${target_cpu}"
+     case "${target_os}" in
+         linux*)       OS_ARCH=Linux ;;
++        kfreebsd*-gnu) OS_ARCH=GNU_kFreeBSD ;;
+         solaris*)     OS_ARCH=SunOS OS_RELEASE=5 ;;
+         mingw*)     OS_ARCH=WINNT ;;
+         darwin*)    OS_ARCH=Darwin ;;
+@@ -1260,7 +1261,7 @@
+ 	esac
+     ;;
+ 
+-*-linux*)
++*-linux*|*-kfreebsd*-gnu)
+     if test -z "$USE_NSPR_THREADS"; then
+         USE_PTHREADS=1
+         IMPL_STRATEGY=_PTH
+@@ -1271,8 +1272,12 @@
+     AC_DEFINE(_SVID_SOURCE)
+     AC_DEFINE(_LARGEFILE64_SOURCE)
+     AC_DEFINE(HAVE_FCNTL_FILE_LOCKING)
+-    AC_DEFINE(LINUX)
+-    AC_DEFINE(linux)
++    case "${target_os}" in
++     linux*)
++        AC_DEFINE(LINUX)
++        AC_DEFINE(linux)
++        ;;
++    esac
+     LD='$(CC)'
+     CFLAGS="$CFLAGS -ansi -Wall"
+     CXXFLAGS="$CXXFLAGS -ansi -Wall"
+@@ -2186,7 +2191,7 @@
+ 	        _PTHREAD_LDFLAGS=
+ 	    fi
+ 	    ;;
+-    *-linux*)
++    *-linux*|*-kfreebsd*-gnu)
+         AC_DEFINE(_REENTRANT)
+         ;;
+     esac
+@@ -2262,7 +2267,7 @@
+         fi
+     fi
+     ;;
+-*-linux*)
++*-linux*|*-kfreebsd*-gnu)
+     if test -n "$USE_NSPR_THREADS"; then
+         AC_DEFINE(_PR_LOCAL_THREADS_ONLY)
+     fi
+diff -ur mozilla/directory/c-sdk/configure mozilla/directory/c-sdk/configure
+--- mozilla/directory/c-sdk/configure	2006-02-23 00:58:25.000000000 +0100
++++ mozilla/directory/c-sdk/configure	2006-11-20 23:08:42.000000000 +0100
+@@ -2753,6 +2753,7 @@
+     OS_TEST="${target_cpu}"
+     case "${target_os}" in
+         linux*)       OS_ARCH=Linux ;;
++        kfreebsd*-gnu) OS_ARCH=GNU_kFreeBSD ;;
+         solaris*)     OS_ARCH=SunOS OS_RELEASE=5 ;;
+         mingw*)     OS_ARCH=WINNT ;;
+         darwin*)    OS_ARCH=Darwin ;;
+@@ -3766,7 +3767,7 @@
+ 	esac
+     ;;
+ 
+-*-linux*)
++*-linux*|*-kfreebsd*-gnu)
+     if test -z "$USE_NSPR_THREADS"; then
+         USE_PTHREADS=1
+         IMPL_STRATEGY=_PTH
+@@ -3795,14 +3796,18 @@
+ #define HAVE_FCNTL_FILE_LOCKING 1
+ EOF
+ 
+-    cat >> confdefs.h <<\EOF
++    case "${target_os}" in
++     linux*)
++        cat >> confdefs.h <<\EOF
+ #define LINUX 1
+ EOF
+ 
+-    cat >> confdefs.h <<\EOF
++        cat >> confdefs.h <<\EOF
+ #define linux 1
+ EOF
+ 
++        ;;
++    esac
+     LD='$(CC)'
+     CFLAGS="$CFLAGS -ansi -Wall"
+     CXXFLAGS="$CXXFLAGS -ansi -Wall"
+@@ -5281,7 +5286,7 @@
+ 	        _PTHREAD_LDFLAGS=
+ 	    fi
+ 	    ;;
+-    *-linux*)
++    *-linux*|*-kfreebsd*-gnu)
+         cat >> confdefs.h <<\EOF
+ #define _REENTRANT 1
+ EOF
+@@ -5404,7 +5409,7 @@
+         fi
+     fi
+     ;;
+-*-linux*)
++*-linux*|*-kfreebsd*-gnu)
+     if test -n "$USE_NSPR_THREADS"; then
+         cat >> confdefs.h <<\EOF
+ #define _PR_LOCAL_THREADS_ONLY 1
+diff -urN mozilla/directory/c-sdk/ldap/include/portable.h mozilla/directory/c-sdk/ldap/include/portable.h
+--- mozilla/directory/c-sdk/ldap/include/portable.h	2003-09-17 05:18:10.000000000 +0200
++++ mozilla/directory/c-sdk/ldap/include/portable.h	2006-11-20 22:10:27.000000000 +0100
+@@ -116,7 +116,7 @@
+  * some systems don't have the BSD re_comp and re_exec routines
+  */
+ #ifndef NEED_BSDREGEX
+-#if ( defined( SYSV ) || defined( NETBSD ) || defined( freebsd ) || defined( linux ) || defined( DARWIN )) && !defined(sgi)
++#if ( defined( SYSV ) || defined( NETBSD ) || defined( freebsd ) || defined( linux ) || defined(__GNU__) || defined(__GLIBC__) || defined( DARWIN )) && !defined(sgi)
+ #define NEED_BSDREGEX
+ #endif
+ #endif
+@@ -145,7 +145,7 @@
+  * Is snprintf() part of the standard C runtime library?
+  */
+ #if !defined(HAVE_SNPRINTF)
+-#if defined(SOLARIS) || defined(LINUX) || defined(HPUX)
++#if defined(SOLARIS) || defined(LINUX) || defined(__GNU__) || defined(__GLIBC__) || defined(HPUX)
+ #define HAVE_SNPRINTF
+ #endif
+ #endif
+@@ -165,7 +165,7 @@
+  * for select()
+  */
+ #if !defined(WINSOCK) && !defined(_WINDOWS) && !defined(macintosh) && !defined(XP_OS2)
+-#if defined(hpux) || defined(LINUX) || defined(SUNOS4) || defined(XP_BEOS)
++#if defined(hpux) || defined(LINUX) || defined(__GNU__) || defined(__GLIBC__) || defined(SUNOS4) || defined(XP_BEOS)
+ #include <sys/time.h>
+ #else
+ #include <sys/select.h>
+@@ -252,15 +252,14 @@
+ #define HAVE_GETGRNAM_R
+ #endif
+ 
+-#if defined(SNI) || defined(LINUX1_2)
++#if defined(SNI) || defined(LINUX1_2) || defined(__GNU__) || defined(__GLIBC__)
+ int strcasecmp(const char *, const char *);
+ #ifdef SNI
+ int strncasecmp(const char *, const char *, int);
+-#endif /* SNI */
+-#ifdef LINUX1_2
++#else /* SNI */
+ int strncasecmp(const char *, const char *, size_t);
+-#endif /* LINUX1_2 */
+-#endif /* SNI || LINUX1_2 */
++#endif
++#endif /* SNI || LINUX1_2 || __GNU__ || __GLIBC__ */
+ 
+ #if defined(_WINDOWS) || defined(macintosh) || defined(XP_OS2) || defined(DARWIN)
+ #define GETHOSTBYNAME( n, r, b, l, e )  gethostbyname( n )
+@@ -276,7 +275,7 @@
+     defined(UNIXWARE) || defined(SUNOS4) || defined(SNI) || defined(BSDI) || \
+     defined(NCR) || defined(OSF1) || defined(NEC) || defined(VMS) || \
+     ( defined(HPUX10) && !defined(_REENTRANT)) || defined(HPUX11) || \
+-    defined(UnixWare) || defined(LINUX) || defined(NETBSD) || \
++    defined(UnixWare) || defined(LINUX) || defined(__GNU__) || defined(__GLIBC__) || defined(NETBSD) || \
+     defined(FREEBSD) || defined(OPENBSD) || \
+     (defined(AIX) && !defined(USE_REENTRANT_LIBC))
+ #define GETHOSTBYNAME( n, r, b, l, e )  gethostbyname( n )
+@@ -300,7 +299,7 @@
+ #define GETHOSTBYNAME( n, r, b, l, e )  gethostbyname_r( n, r, b, l, e )
+ #endif
+ #if defined(HPUX9) || defined(LINUX1_2) || defined(LINUX2_0) || \
+-    defined(LINUX2_1) || defined(SUNOS4) || defined(SNI) || \
++    defined(LINUX2_1) || defined(__GNU__) || defined(__GLIBC__) || defined(SUNOS4) || defined(SNI) || \
+     defined(SCOOS) || defined(BSDI) || defined(NCR) || \
+     defined(NEC) || ( defined(HPUX10) && !defined(_REENTRANT)) || \
+     (defined(AIX) && !defined(USE_REENTRANT_LIBC))
+@@ -320,7 +319,7 @@
+ #endif
+ #if defined(hpux9) || defined(LINUX1_2) || defined(SUNOS4) || defined(SNI) || \
+     defined(SCOOS) || defined(BSDI) || defined(NCR) || defined(VMS) || \
+-    defined(NEC) || defined(LINUX) || (defined(AIX) && !defined(USE_REENTRANT_LIBC))
++    defined(NEC) || defined(LINUX) || defined(__GNU__) || defined(__GLIBC__) || (defined(AIX) && !defined(USE_REENTRANT_LIBC))
+ #define STRTOK( s1, s2, l )		strtok( s1, s2 )
+ #else
+ #define HAVE_STRTOK_R
+diff -urN mozilla/directory/c-sdk/ldap/libraries/libldap/Makefile.in mozilla/directory/c-sdk/ldap/libraries/libldap/Makefile.in
+--- mozilla/directory/c-sdk/ldap/libraries/libldap/Makefile.in	2005-06-02 06:00:33.000000000 +0200
++++ mozilla/directory/c-sdk/ldap/libraries/libldap/Makefile.in	2006-11-20 22:10:27.000000000 +0100
+@@ -168,7 +168,7 @@
+ EXTRA_LIBS = -L$(dist_libdir) -l$(LBER_LIBNAME) $(OS_LIBS) -lc
+ endif
+ 
+-ifeq ($(OS_ARCH), Linux)
++ifneq (,$(filter Linux GNU GNU_%, $(OS_ARCH)))
+ EXTRA_LIBS = -L$(dist_libdir) -l$(LBER_LIBNAME)
+ endif
+ 
+@@ -286,7 +286,7 @@
+ ifdef SO_FILES_TO_REMOVE
+ 	-$(RM) $(SO_FILES_TO_REMOVE)
+ endif
+-ifneq (,$(filter AIX Linux HP-UX Darwin BeOS QNX NetBSD OSF1 OpenBSD, $(OS_ARCH)))
++ifneq (,$(filter AIX Linux GNU GNU_% HP-UX Darwin BeOS QNX NetBSD OSF1 OpenBSD, $(OS_ARCH)))
+ 	$(LINK_LIB) ../liblber/$(OBJDIR_NAME)/*.a
+ else
+ ifeq ($(OS_ARCH),OS2)
+diff -urN mozilla/directory/c-sdk/ldap/libraries/libprldap/ldappr-error.c mozilla/directory/c-sdk/ldap/libraries/libprldap/ldappr-error.c
+--- mozilla/directory/c-sdk/ldap/libraries/libprldap/ldappr-error.c	2003-03-25 14:57:38.000000000 +0100
++++ mozilla/directory/c-sdk/ldap/libraries/libprldap/ldappr-error.c	2006-11-20 22:10:27.000000000 +0100
+@@ -218,7 +218,7 @@
+ 
+ #if defined(__hpux) || defined(_AIX) || defined(OSF1) || defined(DARWIN) || \
+   defined(BEOS) || defined(FREEBSD) || defined(BSDI) || defined(VMS) || \
+-  defined(OPENBSD) || defined(NETBSD)
++  defined(OPENBSD) || defined(NETBSD) || defined(__FreeBSD_kernel__)
+ #define EDEADLOCK       -1
+ #endif
+ 
+diff -urN mozilla/security/coreconf/Linux.mk mozilla/security/coreconf/Linux.mk
+--- mozilla/security/coreconf/Linux.mk	2005-02-02 00:39:18.000000000 +0100
++++ mozilla/security/coreconf/Linux.mk	2006-11-20 22:16:26.000000000 +0100
+@@ -52,72 +52,46 @@
+ 
+ DEFAULT_COMPILER = gcc
+ 
+-ifeq ($(OS_TEST),m68k)
+-	OS_REL_CFLAGS	= -DLINUX1_2 -D_XOPEN_SOURCE
+-	CPU_ARCH	= m68k
++CPU_ARCH		= $(OS_TEST)
++
++ifeq ($(KERNEL),linux)
++	OS_REL_CFLAGS	= -D_XOPEN_SOURCE -DLINUX1_2
++	ARCH		= linux
+ else
++	OS_REL_CFLAGS	= -D_XOPEN_SOURCE
++	ARCH		= gnu
++endif
++
+ ifeq ($(OS_TEST),ppc64)
+-	OS_REL_CFLAGS	= -DLINUX1_2 -D_XOPEN_SOURCE
+ 	CPU_ARCH	= ppc
+ ifeq ($(USE_64),1)
+ 	ARCHFLAG	= -m64
+ endif
+ else
+-ifeq ($(OS_TEST),ppc)
+-	OS_REL_CFLAGS	= -DLINUX1_2 -D_XOPEN_SOURCE
+-	CPU_ARCH	= ppc
+-else
+ ifeq ($(OS_TEST),alpha)
+-        OS_REL_CFLAGS   = -D_ALPHA_ -DLINUX1_2 -D_XOPEN_SOURCE
+-	CPU_ARCH	= alpha
++        OS_REL_CFLAGS   += -D_ALPHA_
+ else
+-ifeq ($(OS_TEST),ia64)
+-	OS_REL_CFLAGS	= -DLINUX1_2 -D_XOPEN_SOURCE
+-	CPU_ARCH	= ia64
+-else
+ ifeq ($(OS_TEST),x86_64)
+-ifeq ($(USE_64),1)
+-	OS_REL_CFLAGS	= -DLINUX1_2 -D_XOPEN_SOURCE
+-	CPU_ARCH	= x86_64
+-else
+-	OS_REL_CFLAGS	= -DLINUX1_2 -Di386 -D_XOPEN_SOURCE
++ifneq ($(USE_64),1)
++	OS_REL_CFLAGS	+= -Di386
+ 	CPU_ARCH	= x86
+ 	ARCHFLAG	= -m32
+ endif
+ else
+-ifeq ($(OS_TEST),sparc)
+-	OS_REL_CFLAGS   = -DLINUX1_2 -D_XOPEN_SOURCE
+-	CPU_ARCH        = sparc
+-else
+ ifeq ($(OS_TEST),sparc64)
+-	OS_REL_CFLAGS   = -DLINUX1_2 -D_XOPEN_SOURCE
+ 	CPU_ARCH        = sparc
+ else
+ ifeq (,$(filter-out arm% sa110,$(OS_TEST)))
+-	OS_REL_CFLAGS   = -DLINUX1_2 -D_XOPEN_SOURCE
+ 	CPU_ARCH        = arm
+ else
+ ifeq ($(OS_TEST),parisc)
+-	OS_REL_CFLAGS   = -DLINUX1_2 -D_XOPEN_SOURCE
+ 	CPU_ARCH        = hppa
+ else
+ ifeq ($(OS_TEST),parisc64)
+-	OS_REL_CFLAGS   = -DLINUX1_2 -D_XOPEN_SOURCE
+ 	CPU_ARCH        = hppa
+ else
+-ifeq ($(OS_TEST),s390)
+-	OS_REL_CFLAGS   = -DLINUX1_2 -D_XOPEN_SOURCE
+-	CPU_ARCH        = s390
+-else
+-ifeq ($(OS_TEST),s390x)
+-	OS_REL_CFLAGS   = -DLINUX1_2 -D_XOPEN_SOURCE
+-	CPU_ARCH        = s390x
+-else
+-ifeq ($(OS_TEST),mips)
+-	OS_REL_CFLAGS   = -DLINUX1_2 -D_XOPEN_SOURCE
+-	CPU_ARCH        = mips
+-else
+-	OS_REL_CFLAGS	= -DLINUX1_2 -Di386 -D_XOPEN_SOURCE
++ifeq (,$(filter-out i686 i586 i486 i386,$(OS_TEST)))
++	OS_REL_CFLAGS	+= -Di386
+ 	CPU_ARCH	= x86
+ endif
+ endif
+@@ -127,17 +101,11 @@
+ endif
+ endif
+ endif
+-endif
+-endif
+-endif
+-endif
+-endif
+-endif
+ 
+ 
+ LIBC_TAG		= _glibc
+ 
+-ifeq ($(OS_RELEASE),2.0)
++ifeq ($(KERNEL)-$(OS_RELEASE),linux-2.0)
+ 	OS_REL_CFLAGS	+= -DLINUX2_0
+ 	MKSHLIB		= $(CC) -shared -Wl,-soname -Wl,$(@:$(OBJDIR)/%.so=%.so)
+ 	ifdef MAPFILE
+@@ -155,21 +123,22 @@
+ OS_PTHREAD = -lpthread 
+ endif
+ 
+-OS_CFLAGS		= $(DSO_CFLAGS) $(OS_REL_CFLAGS) $(ARCHFLAG) -ansi -Wall -pipe -DLINUX -Dlinux -D_POSIX_SOURCE -D_BSD_SOURCE -DHAVE_STRERROR
++OS_CFLAGS		= $(DSO_CFLAGS) $(OS_REL_CFLAGS) $(ARCHFLAG) -ansi -Wall -pipe -D_POSIX_SOURCE -D_BSD_SOURCE -DHAVE_STRERROR
++ifeq ($(KERNEL),linux)
++OS_CFLAGS		+= -DLINUX -Dlinux
++endif
+ OS_LIBS			= $(OS_PTHREAD) -ldl -lc
+ 
+ ifdef USE_PTHREADS
+ 	DEFINES		+= -D_REENTRANT
+ endif
+ 
+-ARCH			= linux
+-
+ DSO_CFLAGS		= -fPIC
+ DSO_LDOPTS		= -shared $(ARCHFLAG)
+ DSO_LDFLAGS		=
+ LDFLAGS			+= $(ARCHFLAG)
+ 
+-# INCLUDES += -I/usr/include -Y/usr/include/linux
++# INCLUDES += -I/usr/include
+ G++INCLUDES		= -I/usr/include/g++
+ 
+ #
+diff -urN mozilla/security/coreconf/Linux2.6.mk mozilla/security/coreconf/Linux2.6.mk
+--- mozilla/security/coreconf/Linux2.6.mk	2004-04-25 17:02:17.000000000 +0200
++++ mozilla/security/coreconf/Linux2.6.mk	2006-11-20 22:10:27.000000000 +0100
+@@ -39,7 +39,10 @@
+ 
+ DSO_LDOPTS      += -Wl,-z,defs
+ 
++ifeq ($(KERNEL), linux)
+ OS_REL_CFLAGS   += -DLINUX2_1
++endif
++
+ MKSHLIB         = $(CC) $(DSO_LDOPTS) -Wl,-soname -Wl,$(@:$(OBJDIR)/%.so=%.so)
+ 
+ ifdef MAPFILE
+diff -urN mozilla/security/coreconf/arch.mk mozilla/security/coreconf/arch.mk
+--- mozilla/security/coreconf/arch.mk	2005-10-11 01:30:12.000000000 +0200
++++ mozilla/security/coreconf/arch.mk	2006-11-20 22:10:27.000000000 +0100
+@@ -154,6 +154,14 @@
+     ifneq ($(words $(OS_RELEASE)),1)
+ 	OS_RELEASE := $(word 1,$(OS_RELEASE)).$(word 2,$(OS_RELEASE))
+     endif
++    KERNEL = linux
++endif
++
++# This check must be last.  Since all uses of OS_ARCH that follow affect only
++# userland, we can merge other Glibc systems with Linux here.
++ifneq (, $(filter GNU GNU_%, $(OS_ARCH)))
++OS_ARCH = Linux
++OS_RELEASE = 2.6
+ endif
+ 
+ #
+diff -urN mozilla/security/coreconf/config.mk mozilla/security/coreconf/config.mk
+--- mozilla/security/coreconf/config.mk	2004-04-25 17:02:17.000000000 +0200
++++ mozilla/security/coreconf/config.mk	2006-11-20 22:10:27.000000000 +0100
+@@ -63,7 +63,7 @@
+ #######################################################################
+ 
+ TARGET_OSES = FreeBSD BSD_OS NetBSD OpenUNIX OS2 QNX Darwin BeOS OpenBSD \
+-              OpenVMS AIX
++              OpenVMS AIX GNU GNU_%
+ 
+ ifeq (,$(filter-out $(TARGET_OSES),$(OS_TARGET)))
+ include $(CORE_DEPTH)/coreconf/$(OS_TARGET).mk
+diff -urN mozilla/security/nss/lib/freebl/unix_rand.c mozilla/security/nss/lib/freebl/unix_rand.c
+--- mozilla/security/nss/lib/freebl/unix_rand.c	2005-10-11 01:22:50.000000000 +0200
++++ mozilla/security/nss/lib/freebl/unix_rand.c	2006-11-20 22:10:26.000000000 +0100
+@@ -184,7 +184,8 @@
+ #endif
+ 
+ #if defined(SCO) || defined(UNIXWARE) || defined(BSDI) || defined(FREEBSD) \
+-    || defined(NETBSD) || defined(NTO) || defined(DARWIN) || defined(OPENBSD)
++    || defined(NETBSD) || defined(NTO) || defined(DARWIN) || defined(OPENBSD) \
++    || defined(__FreeBSD_kernel__) || defined(__NetBSD_kernel__)
+ #include <sys/times.h>
+ 
+ #define getdtablesize() sysconf(_SC_OPEN_MAX)
+diff -urN mozilla/security/nss/lib/ssl/sslmutex.c mozilla/security/nss/lib/ssl/sslmutex.c
+--- mozilla/security/nss/lib/ssl/sslmutex.c	2004-04-28 01:04:39.000000000 +0200
++++ mozilla/security/nss/lib/ssl/sslmutex.c	2006-11-20 22:10:27.000000000 +0100
+@@ -89,7 +89,7 @@
+     return SECSuccess;
+ }
+ 
+-#if defined(LINUX) || defined(AIX) || defined(VMS) || defined(BEOS) || defined(BSDI) || defined(NETBSD) || defined(OPENBSD)
++#if defined(LINUX) || defined(AIX) || defined(VMS) || defined(BEOS) || defined(BSDI) || defined(NETBSD) || defined(OPENBSD) || defined(__GLIBC__)
+ 
+ #include <unistd.h>
+ #include <fcntl.h>
+diff -urN mozilla/security/nss/lib/ssl/sslmutex.h mozilla/security/nss/lib/ssl/sslmutex.h
+--- mozilla/security/nss/lib/ssl/sslmutex.h	2004-04-28 01:04:39.000000000 +0200
++++ mozilla/security/nss/lib/ssl/sslmutex.h	2006-11-20 22:10:27.000000000 +0100
+@@ -79,7 +79,7 @@
+ 
+ typedef int    sslPID;
+ 
+-#elif defined(LINUX) || defined(AIX) || defined(VMS) || defined(BEOS) || defined(BSDI) || defined(NETBSD) || defined(OPENBSD)
++#elif defined(LINUX) || defined(AIX) || defined(VMS) || defined(BEOS) || defined(BSDI) || defined(NETBSD) || defined(OPENBSD) || defined(__GLIBC__)
+ 
+ #include <sys/types.h>
+ #include "prtypes.h"
+diff -urN mozilla/xpcom/reflect/xptcall/src/md/unix/Makefile.in mozilla/xpcom/reflect/xptcall/src/md/unix/Makefile.in
+--- mozilla/xpcom/reflect/xptcall/src/md/unix/Makefile.in	2006-11-20 22:20:44.000000000 +0100
++++ mozilla/xpcom/reflect/xptcall/src/md/unix/Makefile.in	2006-11-20 22:10:27.000000000 +0100
+@@ -70,7 +70,7 @@
+ # New code for Linux, et. al., with gcc
+ # Migrate other platforms here after testing
+ #
+-ifneq (,$(filter Linux,$(OS_ARCH)))
++ifneq (,$(filter Linux GNU_%,$(OS_ARCH)))
+ # Linux/x86-64
+ ifeq (x86_64,$(OS_TEST))
+ CPPSRCS		:= xptcinvoke_x86_64_linux.cpp xptcstubs_x86_64_linux.cpp
+diff -urN mozilla/xpcom/reflect/xptcall/src/md/unix/xptc_platforms_unixish_x86.h mozilla/xpcom/reflect/xptcall/src/md/unix/xptc_platforms_unixish_x86.h
+--- mozilla/xpcom/reflect/xptcall/src/md/unix/xptc_platforms_unixish_x86.h	2006-02-23 20:37:11.000000000 +0100
++++ mozilla/xpcom/reflect/xptcall/src/md/unix/xptc_platforms_unixish_x86.h	2006-11-20 22:10:27.000000000 +0100
+@@ -67,7 +67,7 @@
+ *
+ */
+ 
+-#if defined(LINUX)
++#if defined(LINUX) || (defined(__GLIBC__) && defined(__FreeBSD_kernel__))
+ 
+ #if (__GNUC__ == 2) && (__GNUC_MINOR__ <= 7)
+ /* Old gcc 2.7.x.x.  What does gcc 2.8.x do?? */
+diff -urN mozilla/configure.in mozilla/configure.in
+--- mozilla/configure.in	2006-11-20 22:20:44.000000000 +0100
++++ mozilla/configure.in	2006-11-20 22:10:27.000000000 +0100
+@@ -812,6 +812,7 @@
+     OS_TEST="${target_cpu}"
+     case "${target_os}" in
+         linux*)       OS_ARCH=Linux ;;
++        kfreebsd*-gnu) OS_ARCH=GNU_kFreeBSD ;;
+         solaris*)     OS_ARCH=SunOS OS_RELEASE=5 ;;
+         mingw*)       OS_ARCH=WINNT ;;
+         wince*)       OS_ARCH=WINCE ;;
+@@ -1261,7 +1262,7 @@
+     LIBXUL_LIBS='$(XPCOM_FROZEN_LDOPTS) $(DIST)/bin/XUL -lobjc'
+     ;;
+ 
+-*-linux*)
++*-linux*|*-kfreebsd*-gnu)
+     HOST_CFLAGS="$HOST_CFLAGS -DXP_UNIX"
+     HOST_NSPR_MDCPUCFG='\"md/_linux.cfg\"'
+     HOST_OPTIMIZE_FLAGS="${HOST_OPTIMIZE_FLAGS=-O3}"
+@@ -2169,7 +2170,7 @@
+ dnl = Flags to strip unused symbols from .so components
+ dnl ========================================================
+ case "$target" in
+-    *-linux*)
++    *-linux*|*-kfreebsd*-gnu)
+         MOZ_COMPONENTS_VERSION_SCRIPT_LDFLAGS='-Wl,--version-script -Wl,$(BUILD_TOOLS)/gnu-ld-scripts/components-version-script'
+         ;;
+     *-solaris*)
+@@ -2735,7 +2736,7 @@
+ 			fi
+ 			;;
+ 
+-	    *-*-linux*) 
++	    *-*-linux*|*-*-kfreebsd*-gnu) 
+ 			AC_DEFINE(_REENTRANT) 
+ 			;;
+ 
diff -uN icedove-2.0.0.16/debian/patches/38_mips64_build.dpatch icedove-2.0.0.16/debian/patches/38_mips64_build.dpatch
--- icedove-2.0.0.16/debian/patches/38_mips64_build.dpatch	2008-08-18 11:04:01.000000000 +0000
+++ icedove-2.0.0.16/debian/patches/38_mips64_build.dpatch	2008-08-18 11:01:28.000000000 +0000
@@ -8,40 +8,19 @@
 
 === security/coreconf/Linux.mk
 ==================================================================
----
- security/coreconf/Linux.mk |    4 ++++
- 1 file changed, 4 insertions(+)
-
-Index: mozilla/security/coreconf/Linux.mk
-===================================================================
---- mozilla.orig/security/coreconf/Linux.mk	2006-04-25 01:32:16.000000000 +0000
-+++ mozilla/security/coreconf/Linux.mk	2007-05-17 20:25:00.000000000 +0000
-@@ -100,16 +100,19 @@
- ifeq ($(OS_TEST),parisc)
- 	OS_REL_CFLAGS   = -DLINUX1_2 -D_XOPEN_SOURCE
- 	CPU_ARCH        = hppa
- else
+--- xulrunner/security/coreconf/Linux.mk	(revision 44)
++++ xulrunner/security/coreconf/Linux.mk	(local)
+@@ -78,6 +78,9 @@
  ifeq ($(OS_TEST),parisc64)
- 	OS_REL_CFLAGS   = -DLINUX1_2 -D_XOPEN_SOURCE
  	CPU_ARCH        = hppa
  else
 +ifeq ($(OS_TEST),mips64)
-+        CPU_ARCH        = mips
++	CPU_ARCH        = mips
 +else
- ifeq ($(OS_TEST),s390)
- 	OS_REL_CFLAGS   = -DLINUX1_2 -D_XOPEN_SOURCE
- 	CPU_ARCH        = s390
- else
- ifeq ($(OS_TEST),s390x)
- 	OS_REL_CFLAGS   = -DLINUX1_2 -D_XOPEN_SOURCE
- 	CPU_ARCH        = s390x
- else
-@@ -128,16 +131,17 @@
- endif
- endif
- endif
- endif
- endif
+ ifeq (,$(filter-out i686 i586 i486 i386,$(OS_TEST)))
+ 	OS_REL_CFLAGS	+= -Di386
+ 	CPU_ARCH	= x86
+@@ -87,6 +90,7 @@
  endif
  endif
  endif
@@ -49,8 +28,3 @@
  
  
  LIBC_TAG		= _glibc
- 
- ifeq ($(OS_RELEASE),2.0)
- 	OS_REL_CFLAGS	+= -DLINUX2_0
- 	MKSHLIB		= $(CC) -shared -Wl,-soname -Wl,$(@:$(OBJDIR)/%.so=%.so)
- 	ifdef MAPFILE
diff -uN t/icedove-2.0.0.16/debian/patches/autoconf2.13-rerun icedove-2.0.0.16/debian/patches/autoconf2.13-rerun
--- icedove-2.0.0.16/debian/patches/autoconf2.13-rerun	2008-08-18 11:04:01.000000000 +0000
+++ icedove-2.0.0.16/debian/patches/autoconf2.13-rerun	2008-08-18 11:07:58.000000000 +0000
@@ -1,17 +1,8 @@
----
- configure | 1733 +++++++++++++++++++++++++++++++++-----------------------------
- 1 file changed, 931 insertions(+), 802 deletions(-)
-
 Index: mozilla/configure
 ===================================================================
 --- mozilla.orig/configure
 +++ mozilla/configure
-@@ -55,16 +55,18 @@
-                           Use system libjpeg [installed at prefix PFX]"
- ac_help="$ac_help
-   --with-system-zlib[=PFX]
-                           Use system libz [installed at prefix PFX]"
- ac_help="$ac_help
+@@ -60,6 +60,8 @@
    --with-system-png[=PFX]
                            Use system libpng [installed at prefix PFX]"
  ac_help="$ac_help
@@ -20,17 +11,7 @@
    --with-java-include-path=dir   Location of Java SDK headers"
  ac_help="$ac_help
    --with-java-bin-path=dir   Location of Java binaries (java, javac, jar)"
- ac_help="$ac_help
-   --enable-default-toolkit=TK
-                           Select default toolkit
-                           Platform specific defaults:
-                             BeOS - beos
-@@ -955,17 +957,17 @@
- 
- 
- # Make sure we can run config.sub.
- if ${CONFIG_SHELL-/bin/sh} $ac_config_sub sun4 >/dev/null 2>&1; then :
- else { echo "configure: error: can not run $ac_config_sub" 1>&2; exit 1; }
+@@ -960,7 +962,7 @@
  fi
  
  echo $ac_n "checking host system type""... $ac_c" 1>&6
@@ -39,17 +20,7 @@
  
  host_alias=$host
  case "$host_alias" in
- NONE)
-   case $nonopt in
-   NONE)
-     if host_alias=`${CONFIG_SHELL-/bin/sh} $ac_config_guess`; then :
-     else { echo "configure: error: can not guess host type; you must specify one" 1>&2; exit 1; }
-@@ -976,17 +978,17 @@
- 
- host=`${CONFIG_SHELL-/bin/sh} $ac_config_sub $host_alias`
- host_cpu=`echo $host | sed 's/^\([^-]*\)-\([^-]*\)-\(.*\)$/\1/'`
- host_vendor=`echo $host | sed 's/^\([^-]*\)-\([^-]*\)-\(.*\)$/\2/'`
- host_os=`echo $host | sed 's/^\([^-]*\)-\([^-]*\)-\(.*\)$/\3/'`
+@@ -981,7 +983,7 @@
  echo "$ac_t""$host" 1>&6
  
  echo $ac_n "checking target system type""... $ac_c" 1>&6
@@ -58,17 +29,7 @@
  
  target_alias=$target
  case "$target_alias" in
- NONE)
-   case $nonopt in
-   NONE) target_alias=$host_alias ;;
-   *) target_alias=$nonopt ;;
-   esac ;;
-@@ -994,17 +996,17 @@
- 
- target=`${CONFIG_SHELL-/bin/sh} $ac_config_sub $target_alias`
- target_cpu=`echo $target | sed 's/^\([^-]*\)-\([^-]*\)-\(.*\)$/\1/'`
- target_vendor=`echo $target | sed 's/^\([^-]*\)-\([^-]*\)-\(.*\)$/\2/'`
- target_os=`echo $target | sed 's/^\([^-]*\)-\([^-]*\)-\(.*\)$/\3/'`
+@@ -999,7 +1001,7 @@
  echo "$ac_t""$target" 1>&6
  
  echo $ac_n "checking build system type""... $ac_c" 1>&6
@@ -77,17 +38,7 @@
  
  build_alias=$build
  case "$build_alias" in
- NONE)
-   case $nonopt in
-   NONE) build_alias=$host_alias ;;
-   *) build_alias=$nonopt ;;
-   esac ;;
-@@ -1064,22 +1066,22 @@
- WINDRES_VERSION=2.14.90
- W32API_VERSION=2.4
- GNOMEVFS_VERSION=2.0
- GNOMEUI_VERSION=2.2.0
- GCONF_VERSION=1.2.1
+@@ -1069,12 +1071,12 @@
  LIBGNOME_VERSION=2.0
  
  MISSING_X=
@@ -102,17 +53,7 @@
  if eval "test \"`echo '$''{'ac_cv_prog_AWK'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
-   if test -n "$AWK"; then
-   ac_cv_prog_AWK="$AWK" # Let the user override the test.
- else
-   IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
-   ac_dummy="$PATH"
-@@ -1167,17 +1169,17 @@
- fi
- 
- 
- for ac_prog in nsinstall 
- do
+@@ -1172,7 +1174,7 @@
  # Extract the first word of "$ac_prog", so it can be a program name with args.
  set dummy $ac_prog; ac_word=$2
  echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
@@ -121,17 +62,7 @@
  if eval "test \"`echo '$''{'ac_cv_path_NSINSTALL_BIN'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
-   case "$NSINSTALL_BIN" in
-   /*)
-   ac_cv_path_NSINSTALL_BIN="$NSINSTALL_BIN" # Let the user override the test with a path.
-   ;;
-   ?:/*)			 
-@@ -1209,17 +1211,17 @@
- 
- if test -z "$COMPILE_ENVIRONMENT"; then
- if test -z "$NSINSTALL_BIN" || test "$NSINSTALL_BIN" = ":"; then
-    for ac_prog in $PYTHON python
- do
+@@ -1214,7 +1216,7 @@
  # Extract the first word of "$ac_prog", so it can be a program name with args.
  set dummy $ac_prog; ac_word=$2
  echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
@@ -140,17 +71,7 @@
  if eval "test \"`echo '$''{'ac_cv_path_PYTHON'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
-   case "$PYTHON" in
-   /*)
-   ac_cv_path_PYTHON="$PYTHON" # Let the user override the test with a path.
-   ;;
-   ?:/*)			 
-@@ -1280,23 +1282,23 @@
-     echo "cross compiling from $host to $target"
-     cross_compiling=yes
- 
-     _SAVE_CC="$CC"
-     _SAVE_CFLAGS="$CFLAGS"
+@@ -1285,13 +1287,13 @@
      _SAVE_LDFLAGS="$LDFLAGS"
  
      echo $ac_n "checking for host c compiler""... $ac_c" 1>&6
@@ -166,17 +87,7 @@
  if eval "test \"`echo '$''{'ac_cv_prog_HOST_CC'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
-   if test -n "$HOST_CC"; then
-   ac_cv_prog_HOST_CC="$HOST_CC" # Let the user override the test.
- else
-   IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
-   ac_dummy="$PATH"
-@@ -1321,23 +1323,23 @@
- done
- test -n "$HOST_CC" || HOST_CC=""""
- 
-     if test -z "$HOST_CC"; then
-         { echo "configure: error: no acceptable c compiler found in \$PATH" 1>&2; exit 1; }
+@@ -1326,13 +1328,13 @@
      fi
      echo "$ac_t""$HOST_CC" 1>&6
      echo $ac_n "checking for host c++ compiler""... $ac_c" 1>&6
@@ -192,17 +103,7 @@
  if eval "test \"`echo '$''{'ac_cv_prog_HOST_CXX'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
-   if test -n "$HOST_CXX"; then
-   ac_cv_prog_HOST_CXX="$HOST_CXX" # Let the user override the test.
- else
-   IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
-   ac_dummy="$PATH"
-@@ -1376,17 +1378,17 @@
-     if test -z "$HOST_LDFLAGS"; then
-         HOST_LDFLAGS="$LDFLAGS"
-     fi
-     for ac_prog in $HOST_RANLIB ranlib
- do
+@@ -1381,7 +1383,7 @@
  # Extract the first word of "$ac_prog", so it can be a program name with args.
  set dummy $ac_prog; ac_word=$2
  echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
@@ -211,17 +112,7 @@
  if eval "test \"`echo '$''{'ac_cv_prog_HOST_RANLIB'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
-   if test -n "$HOST_RANLIB"; then
-   ac_cv_prog_HOST_RANLIB="$HOST_RANLIB" # Let the user override the test.
- else
-   IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
-   ac_dummy=":"
-@@ -1411,17 +1413,17 @@
- done
- test -n "$HOST_RANLIB" || HOST_RANLIB="ranlib"
- 
-     for ac_prog in $HOST_AR ar
- do
+@@ -1416,7 +1418,7 @@
  # Extract the first word of "$ac_prog", so it can be a program name with args.
  set dummy $ac_prog; ac_word=$2
  echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
@@ -230,17 +121,7 @@
  if eval "test \"`echo '$''{'ac_cv_prog_HOST_AR'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
-   if test -n "$HOST_AR"; then
-   ac_cv_prog_HOST_AR="$HOST_AR" # Let the user override the test.
- else
-   IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
-   ac_dummy=":"
-@@ -1446,50 +1448,50 @@
- done
- test -n "$HOST_AR" || HOST_AR="ar"
- 
-     CC="$HOST_CC"
-     CFLAGS="$HOST_CFLAGS"
+@@ -1451,16 +1453,16 @@
      LDFLAGS="$HOST_LDFLAGS"
  
      echo $ac_n "checking whether the host c compiler ($HOST_CC $HOST_CFLAGS $HOST_LDFLAGS) works""... $ac_c" 1>&6
@@ -260,14 +141,7 @@
    rm -rf conftest*
    ac_cv_prog_hostcc_works=1 echo "$ac_t""yes" 1>&6
  else
-   echo "configure: failed program was:" >&5
-   cat conftest.$ac_ext >&5
-   rm -rf conftest*
-   { echo "configure: error: installation or configuration problem: host compiler $HOST_CC cannot create executables." 1>&2; exit 1; } 
- fi
- rm -f conftest*
- 
-     CC="$HOST_CXX"
+@@ -1475,16 +1477,16 @@
      CFLAGS="$HOST_CXXFLAGS"
  
      echo $ac_n "checking whether the host c++ compiler ($HOST_CXX $HOST_CXXFLAGS $HOST_LDFLAGS) works""... $ac_c" 1>&6
@@ -287,17 +161,7 @@
    rm -rf conftest*
    ac_cv_prog_hostcxx_works=1 echo "$ac_t""yes" 1>&6
  else
-   echo "configure: failed program was:" >&5
-   cat conftest.$ac_ext >&5
-   rm -rf conftest*
-   { echo "configure: error: installation or configuration problem: host compiler $HOST_CXX cannot create executables." 1>&2; exit 1; } 
- fi
-@@ -1508,17 +1510,17 @@
-         ;;
-     esac
- 
-     for ac_prog in $CC "${target_alias}-gcc" "${target}-gcc"
- do
+@@ -1513,7 +1515,7 @@
  # Extract the first word of "$ac_prog", so it can be a program name with args.
  set dummy $ac_prog; ac_word=$2
  echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
@@ -306,17 +170,7 @@
  if eval "test \"`echo '$''{'ac_cv_prog_CC'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
-   if test -n "$CC"; then
-   ac_cv_prog_CC="$CC" # Let the user override the test.
- else
-   IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
-   ac_dummy="$PATH"
-@@ -1542,17 +1544,17 @@
- test -n "$CC" && break
- done
- test -n "$CC" || CC=":"
- 
-     unset ac_cv_prog_CC
+@@ -1547,7 +1549,7 @@
      # Extract the first word of "gcc", so it can be a program name with args.
  set dummy gcc; ac_word=$2
  echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
@@ -325,17 +179,7 @@
  if eval "test \"`echo '$''{'ac_cv_prog_CC'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
-   if test -n "$CC"; then
-   ac_cv_prog_CC="$CC" # Let the user override the test.
- else
-   IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
-   ac_dummy="$PATH"
-@@ -1572,17 +1574,17 @@
- else
-   echo "$ac_t""no" 1>&6
- fi
- 
- if test -z "$CC"; then
+@@ -1577,7 +1579,7 @@
    # Extract the first word of "cc", so it can be a program name with args.
  set dummy cc; ac_word=$2
  echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
@@ -344,17 +188,7 @@
  if eval "test \"`echo '$''{'ac_cv_prog_CC'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
-   if test -n "$CC"; then
-   ac_cv_prog_CC="$CC" # Let the user override the test.
- else
-   IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
-   ac_prog_rejected=no
-@@ -1623,17 +1625,17 @@
- fi
- 
-   if test -z "$CC"; then
-     case "`uname -s`" in
-     *win32* | *WIN32*)
+@@ -1628,7 +1630,7 @@
        # Extract the first word of "cl", so it can be a program name with args.
  set dummy cl; ac_word=$2
  echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
@@ -363,17 +197,7 @@
  if eval "test \"`echo '$''{'ac_cv_prog_CC'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
-   if test -n "$CC"; then
-   ac_cv_prog_CC="$CC" # Let the user override the test.
- else
-   IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
-   ac_dummy="$PATH"
-@@ -1655,33 +1657,33 @@
- fi
-  ;;
-     esac
-   fi
-   test -z "$CC" && { echo "configure: error: no acceptable cc found in \$PATH" 1>&2; exit 1; }
+@@ -1660,7 +1662,7 @@
  fi
  
  echo $ac_n "checking whether the C compiler ($CC $CFLAGS $LDFLAGS) works""... $ac_c" 1>&6
@@ -382,10 +206,7 @@
  
  ac_ext=c
  # CFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
- ac_cpp='$CPP $CPPFLAGS'
- ac_compile='${CC-cc} -c $CFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
- ac_link='${CC-cc} -o conftest${ac_exeext} $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
- cross_compiling=$ac_cv_prog_cc_cross
+@@ -1671,12 +1673,12 @@
  
  cat > conftest.$ac_ext << EOF
  
@@ -400,17 +221,7 @@
    ac_cv_prog_cc_works=yes
    # If we can't run a trivial program, we are probably using a cross compiler.
    if (./conftest; exit) 2>/dev/null; then
-     ac_cv_prog_cc_cross=no
-   else
-     ac_cv_prog_cc_cross=yes
-   fi
- else
-@@ -1697,31 +1699,31 @@
- ac_link='${CC-cc} -o conftest${ac_exeext} $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
- cross_compiling=$ac_cv_prog_cc_cross
- 
- echo "$ac_t""$ac_cv_prog_cc_works" 1>&6
- if test $ac_cv_prog_cc_works = no; then
+@@ -1702,12 +1704,12 @@
    { echo "configure: error: installation or configuration problem: C compiler cannot create executables." 1>&2; exit 1; }
  fi
  echo $ac_n "checking whether the C compiler ($CC $CFLAGS $LDFLAGS) is a cross-compiler""... $ac_c" 1>&6
@@ -425,8 +236,7 @@
  if eval "test \"`echo '$''{'ac_cv_prog_gcc'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
-   cat > conftest.c <<EOF
- #ifdef __GNUC__
+@@ -1716,7 +1718,7 @@
    yes;
  #endif
  EOF
@@ -435,17 +245,7 @@
    ac_cv_prog_gcc=yes
  else
    ac_cv_prog_gcc=no
- fi
- fi
- 
- echo "$ac_t""$ac_cv_prog_gcc" 1>&6
- 
-@@ -1730,17 +1732,17 @@
- else
-   GCC=
- fi
- 
- ac_test_CFLAGS="${CFLAGS+set}"
+@@ -1735,7 +1737,7 @@
  ac_save_CFLAGS="$CFLAGS"
  CFLAGS=
  echo $ac_n "checking whether ${CC-cc} accepts -g""... $ac_c" 1>&6
@@ -454,17 +254,7 @@
  if eval "test \"`echo '$''{'ac_cv_prog_cc_g'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
-   echo 'void f(){}' > conftest.c
- if test -z "`${CC-cc} -g -c conftest.c 2>&1`"; then
-   ac_cv_prog_cc_g=yes
- else
-   ac_cv_prog_cc_g=no
-@@ -1766,17 +1768,17 @@
-   fi
- fi
- 
-     for ac_prog in $CXX "${target_alias}-g++" "${target}-g++"
- do
+@@ -1771,7 +1773,7 @@
  # Extract the first word of "$ac_prog", so it can be a program name with args.
  set dummy $ac_prog; ac_word=$2
  echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
@@ -473,17 +263,7 @@
  if eval "test \"`echo '$''{'ac_cv_prog_CXX'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
-   if test -n "$CXX"; then
-   ac_cv_prog_CXX="$CXX" # Let the user override the test.
- else
-   IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
-   ac_dummy="$PATH"
-@@ -1802,17 +1804,17 @@
- test -n "$CXX" || CXX=":"
- 
-     unset ac_cv_prog_CXX
-     for ac_prog in $CCC c++ g++ gcc CC cxx cc++ cl
- do
+@@ -1807,7 +1809,7 @@
  # Extract the first word of "$ac_prog", so it can be a program name with args.
  set dummy $ac_prog; ac_word=$2
  echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
@@ -492,17 +272,7 @@
  if eval "test \"`echo '$''{'ac_cv_prog_CXX'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
-   if test -n "$CXX"; then
-   ac_cv_prog_CXX="$CXX" # Let the user override the test.
- else
-   IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
-   ac_dummy="$PATH"
-@@ -1834,33 +1836,33 @@
- fi
- 
- test -n "$CXX" && break
- done
- test -n "$CXX" || CXX="gcc"
+@@ -1839,7 +1841,7 @@
  
  
  echo $ac_n "checking whether the C++ compiler ($CXX $CXXFLAGS $LDFLAGS) works""... $ac_c" 1>&6
@@ -511,10 +281,7 @@
  
  ac_ext=C
  # CXXFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
- ac_cpp='$CXXCPP $CPPFLAGS'
- ac_compile='${CXX-g++} -c $CXXFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
- ac_link='${CXX-g++} -o conftest${ac_exeext} $CXXFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
- cross_compiling=$ac_cv_prog_cxx_cross
+@@ -1850,12 +1852,12 @@
  
  cat > conftest.$ac_ext << EOF
  
@@ -529,17 +296,7 @@
    ac_cv_prog_cxx_works=yes
    # If we can't run a trivial program, we are probably using a cross compiler.
    if (./conftest; exit) 2>/dev/null; then
-     ac_cv_prog_cxx_cross=no
-   else
-     ac_cv_prog_cxx_cross=yes
-   fi
- else
-@@ -1876,31 +1878,31 @@
- ac_link='${CC-cc} -o conftest${ac_exeext} $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
- cross_compiling=$ac_cv_prog_cc_cross
- 
- echo "$ac_t""$ac_cv_prog_cxx_works" 1>&6
- if test $ac_cv_prog_cxx_works = no; then
+@@ -1881,12 +1883,12 @@
    { echo "configure: error: installation or configuration problem: C++ compiler cannot create executables." 1>&2; exit 1; }
  fi
  echo $ac_n "checking whether the C++ compiler ($CXX $CXXFLAGS $LDFLAGS) is a cross-compiler""... $ac_c" 1>&6
@@ -554,8 +311,7 @@
  if eval "test \"`echo '$''{'ac_cv_prog_gxx'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
-   cat > conftest.C <<EOF
- #ifdef __GNUC__
+@@ -1895,7 +1897,7 @@
    yes;
  #endif
  EOF
@@ -564,17 +320,7 @@
    ac_cv_prog_gxx=yes
  else
    ac_cv_prog_gxx=no
- fi
- fi
- 
- echo "$ac_t""$ac_cv_prog_gxx" 1>&6
- 
-@@ -1909,17 +1911,17 @@
- else
-   GXX=
- fi
- 
- ac_test_CXXFLAGS="${CXXFLAGS+set}"
+@@ -1914,7 +1916,7 @@
  ac_save_CXXFLAGS="$CXXFLAGS"
  CXXFLAGS=
  echo $ac_n "checking whether ${CXX-g++} accepts -g""... $ac_c" 1>&6
@@ -583,17 +329,7 @@
  if eval "test \"`echo '$''{'ac_cv_prog_cxx_g'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
-   echo 'void f(){}' > conftest.cc
- if test -z "`${CXX-g++} -g -c conftest.cc 2>&1`"; then
-   ac_cv_prog_cxx_g=yes
- else
-   ac_cv_prog_cxx_g=no
-@@ -1940,81 +1942,30 @@
- else
-   if test "$GXX" = yes; then
-     CXXFLAGS="-O2"
-   else
-     CXXFLAGS=
+@@ -1945,57 +1947,6 @@
    fi
  fi
  
@@ -651,13 +387,7 @@
  
      case "$build:$target" in
        powerpc-apple-darwin8*:i?86-apple-darwin*)
-                                 CFLAGS=$_SAVE_CFLAGS
-         CXXFLAGS=$_SAVE_CXXFLAGS
-         ;;
-     esac
- 
-     for ac_prog in $RANLIB "${target_alias}-ranlib" "${target}-ranlib"
- do
+@@ -2009,7 +1960,7 @@
  # Extract the first word of "$ac_prog", so it can be a program name with args.
  set dummy $ac_prog; ac_word=$2
  echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
@@ -666,17 +396,7 @@
  if eval "test \"`echo '$''{'ac_cv_prog_RANLIB'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
-   if test -n "$RANLIB"; then
-   ac_cv_prog_RANLIB="$RANLIB" # Let the user override the test.
- else
-   IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
-   ac_dummy="$PATH"
-@@ -2039,17 +1990,17 @@
- done
- test -n "$RANLIB" || RANLIB=":"
- 
-     for ac_prog in $AR "${target_alias}-ar" "${target}-ar"
- do
+@@ -2044,7 +1995,7 @@
  # Extract the first word of "$ac_prog", so it can be a program name with args.
  set dummy $ac_prog; ac_word=$2
  echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
@@ -685,17 +405,7 @@
  if eval "test \"`echo '$''{'ac_cv_prog_AR'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
-   if test -n "$AR"; then
-   ac_cv_prog_AR="$AR" # Let the user override the test.
- else
-   IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
-   ac_dummy="$PATH"
-@@ -2074,17 +2025,17 @@
- done
- test -n "$AR" || AR=":"
- 
-     for ac_prog in $AS "${target_alias}-as" "${target}-as"
- do
+@@ -2079,7 +2030,7 @@
  # Extract the first word of "$ac_prog", so it can be a program name with args.
  set dummy $ac_prog; ac_word=$2
  echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
@@ -704,17 +414,7 @@
  if eval "test \"`echo '$''{'ac_cv_path_AS'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
-   case "$AS" in
-   /*)
-   ac_cv_path_AS="$AS" # Let the user override the test with a path.
-   ;;
-   ?:/*)			 
-@@ -2115,17 +2066,17 @@
- done
- test -n "$AS" || AS=":"
- 
-     for ac_prog in $LD "${target_alias}-ld" "${target}-ld"
- do
+@@ -2120,7 +2071,7 @@
  # Extract the first word of "$ac_prog", so it can be a program name with args.
  set dummy $ac_prog; ac_word=$2
  echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
@@ -723,17 +423,7 @@
  if eval "test \"`echo '$''{'ac_cv_prog_LD'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
-   if test -n "$LD"; then
-   ac_cv_prog_LD="$LD" # Let the user override the test.
- else
-   IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
-   ac_dummy="$PATH"
-@@ -2150,17 +2101,17 @@
- done
- test -n "$LD" || LD=":"
- 
-     for ac_prog in $STRIP "${target_alias}-strip" "${target}-strip"
- do
+@@ -2155,7 +2106,7 @@
  # Extract the first word of "$ac_prog", so it can be a program name with args.
  set dummy $ac_prog; ac_word=$2
  echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
@@ -742,17 +432,7 @@
  if eval "test \"`echo '$''{'ac_cv_prog_STRIP'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
-   if test -n "$STRIP"; then
-   ac_cv_prog_STRIP="$STRIP" # Let the user override the test.
- else
-   IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
-   ac_dummy="$PATH"
-@@ -2185,17 +2136,17 @@
- done
- test -n "$STRIP" || STRIP=":"
- 
-     for ac_prog in $WINDRES "${target_alias}-windres" "${target}-windres"
- do
+@@ -2190,7 +2141,7 @@
  # Extract the first word of "$ac_prog", so it can be a program name with args.
  set dummy $ac_prog; ac_word=$2
  echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
@@ -761,17 +441,7 @@
  if eval "test \"`echo '$''{'ac_cv_prog_WINDRES'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
-   if test -n "$WINDRES"; then
-   ac_cv_prog_WINDRES="$WINDRES" # Let the user override the test.
- else
-   IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
-   ac_dummy="$PATH"
-@@ -2223,17 +2174,17 @@
-     cat >> confdefs.h <<\EOF
- #define CROSS_COMPILE 1
- EOF
- 
- else
+@@ -2228,7 +2179,7 @@
      # Extract the first word of "gcc", so it can be a program name with args.
  set dummy gcc; ac_word=$2
  echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
@@ -780,17 +450,7 @@
  if eval "test \"`echo '$''{'ac_cv_prog_CC'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
-   if test -n "$CC"; then
-   ac_cv_prog_CC="$CC" # Let the user override the test.
- else
-   IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
-   ac_dummy="$PATH"
-@@ -2253,17 +2204,17 @@
- else
-   echo "$ac_t""no" 1>&6
- fi
- 
- if test -z "$CC"; then
+@@ -2258,7 +2209,7 @@
    # Extract the first word of "cc", so it can be a program name with args.
  set dummy cc; ac_word=$2
  echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
@@ -799,17 +459,7 @@
  if eval "test \"`echo '$''{'ac_cv_prog_CC'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
-   if test -n "$CC"; then
-   ac_cv_prog_CC="$CC" # Let the user override the test.
- else
-   IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
-   ac_prog_rejected=no
-@@ -2304,17 +2255,17 @@
- fi
- 
-   if test -z "$CC"; then
-     case "`uname -s`" in
-     *win32* | *WIN32*)
+@@ -2309,7 +2260,7 @@
        # Extract the first word of "cl", so it can be a program name with args.
  set dummy cl; ac_word=$2
  echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
@@ -818,17 +468,7 @@
  if eval "test \"`echo '$''{'ac_cv_prog_CC'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
-   if test -n "$CC"; then
-   ac_cv_prog_CC="$CC" # Let the user override the test.
- else
-   IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
-   ac_dummy="$PATH"
-@@ -2336,33 +2287,33 @@
- fi
-  ;;
-     esac
-   fi
-   test -z "$CC" && { echo "configure: error: no acceptable cc found in \$PATH" 1>&2; exit 1; }
+@@ -2341,7 +2292,7 @@
  fi
  
  echo $ac_n "checking whether the C compiler ($CC $CFLAGS $LDFLAGS) works""... $ac_c" 1>&6
@@ -837,10 +477,7 @@
  
  ac_ext=c
  # CFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
- ac_cpp='$CPP $CPPFLAGS'
- ac_compile='${CC-cc} -c $CFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
- ac_link='${CC-cc} -o conftest${ac_exeext} $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
- cross_compiling=$ac_cv_prog_cc_cross
+@@ -2352,12 +2303,12 @@
  
  cat > conftest.$ac_ext << EOF
  
@@ -855,17 +492,7 @@
    ac_cv_prog_cc_works=yes
    # If we can't run a trivial program, we are probably using a cross compiler.
    if (./conftest; exit) 2>/dev/null; then
-     ac_cv_prog_cc_cross=no
-   else
-     ac_cv_prog_cc_cross=yes
-   fi
- else
-@@ -2378,31 +2329,31 @@
- ac_link='${CC-cc} -o conftest${ac_exeext} $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
- cross_compiling=$ac_cv_prog_cc_cross
- 
- echo "$ac_t""$ac_cv_prog_cc_works" 1>&6
- if test $ac_cv_prog_cc_works = no; then
+@@ -2383,12 +2334,12 @@
    { echo "configure: error: installation or configuration problem: C compiler cannot create executables." 1>&2; exit 1; }
  fi
  echo $ac_n "checking whether the C compiler ($CC $CFLAGS $LDFLAGS) is a cross-compiler""... $ac_c" 1>&6
@@ -880,8 +507,7 @@
  if eval "test \"`echo '$''{'ac_cv_prog_gcc'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
-   cat > conftest.c <<EOF
- #ifdef __GNUC__
+@@ -2397,7 +2348,7 @@
    yes;
  #endif
  EOF
@@ -890,17 +516,7 @@
    ac_cv_prog_gcc=yes
  else
    ac_cv_prog_gcc=no
- fi
- fi
- 
- echo "$ac_t""$ac_cv_prog_gcc" 1>&6
- 
-@@ -2411,17 +2362,17 @@
- else
-   GCC=
- fi
- 
- ac_test_CFLAGS="${CFLAGS+set}"
+@@ -2416,7 +2367,7 @@
  ac_save_CFLAGS="$CFLAGS"
  CFLAGS=
  echo $ac_n "checking whether ${CC-cc} accepts -g""... $ac_c" 1>&6
@@ -909,17 +525,7 @@
  if eval "test \"`echo '$''{'ac_cv_prog_cc_g'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
-   echo 'void f(){}' > conftest.c
- if test -z "`${CC-cc} -g -c conftest.c 2>&1`"; then
-   ac_cv_prog_cc_g=yes
- else
-   ac_cv_prog_cc_g=no
-@@ -2447,17 +2398,17 @@
-   fi
- fi
- 
-     for ac_prog in $CCC c++ g++ gcc CC cxx cc++ cl
- do
+@@ -2452,7 +2403,7 @@
  # Extract the first word of "$ac_prog", so it can be a program name with args.
  set dummy $ac_prog; ac_word=$2
  echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
@@ -928,17 +534,7 @@
  if eval "test \"`echo '$''{'ac_cv_prog_CXX'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
-   if test -n "$CXX"; then
-   ac_cv_prog_CXX="$CXX" # Let the user override the test.
- else
-   IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
-   ac_dummy="$PATH"
-@@ -2479,33 +2430,33 @@
- fi
- 
- test -n "$CXX" && break
- done
- test -n "$CXX" || CXX="gcc"
+@@ -2484,7 +2435,7 @@
  
  
  echo $ac_n "checking whether the C++ compiler ($CXX $CXXFLAGS $LDFLAGS) works""... $ac_c" 1>&6
@@ -947,10 +543,7 @@
  
  ac_ext=C
  # CXXFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
- ac_cpp='$CXXCPP $CPPFLAGS'
- ac_compile='${CXX-g++} -c $CXXFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
- ac_link='${CXX-g++} -o conftest${ac_exeext} $CXXFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
- cross_compiling=$ac_cv_prog_cxx_cross
+@@ -2495,12 +2446,12 @@
  
  cat > conftest.$ac_ext << EOF
  
@@ -965,17 +558,7 @@
    ac_cv_prog_cxx_works=yes
    # If we can't run a trivial program, we are probably using a cross compiler.
    if (./conftest; exit) 2>/dev/null; then
-     ac_cv_prog_cxx_cross=no
-   else
-     ac_cv_prog_cxx_cross=yes
-   fi
- else
-@@ -2521,31 +2472,31 @@
- ac_link='${CC-cc} -o conftest${ac_exeext} $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
- cross_compiling=$ac_cv_prog_cc_cross
- 
- echo "$ac_t""$ac_cv_prog_cxx_works" 1>&6
- if test $ac_cv_prog_cxx_works = no; then
+@@ -2526,12 +2477,12 @@
    { echo "configure: error: installation or configuration problem: C++ compiler cannot create executables." 1>&2; exit 1; }
  fi
  echo $ac_n "checking whether the C++ compiler ($CXX $CXXFLAGS $LDFLAGS) is a cross-compiler""... $ac_c" 1>&6
@@ -990,8 +573,7 @@
  if eval "test \"`echo '$''{'ac_cv_prog_gxx'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
-   cat > conftest.C <<EOF
- #ifdef __GNUC__
+@@ -2540,7 +2491,7 @@
    yes;
  #endif
  EOF
@@ -1000,17 +582,7 @@
    ac_cv_prog_gxx=yes
  else
    ac_cv_prog_gxx=no
- fi
- fi
- 
- echo "$ac_t""$ac_cv_prog_gxx" 1>&6
- 
-@@ -2554,17 +2505,17 @@
- else
-   GXX=
- fi
- 
- ac_test_CXXFLAGS="${CXXFLAGS+set}"
+@@ -2559,7 +2510,7 @@
  ac_save_CXXFLAGS="$CXXFLAGS"
  CXXFLAGS=
  echo $ac_n "checking whether ${CXX-g++} accepts -g""... $ac_c" 1>&6
@@ -1019,17 +591,7 @@
  if eval "test \"`echo '$''{'ac_cv_prog_cxx_g'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
-   echo 'void f(){}' > conftest.cc
- if test -z "`${CXX-g++} -g -c conftest.cc 2>&1`"; then
-   ac_cv_prog_cxx_g=yes
- else
-   ac_cv_prog_cxx_g=no
-@@ -2585,71 +2536,20 @@
- else
-   if test "$GXX" = yes; then
-     CXXFLAGS="-O2"
-   else
-     CXXFLAGS=
+@@ -2590,61 +2541,10 @@
    fi
  fi
  
@@ -1092,17 +654,7 @@
  if eval "test \"`echo '$''{'ac_cv_prog_RANLIB'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
-   if test -n "$RANLIB"; then
-   ac_cv_prog_RANLIB="$RANLIB" # Let the user override the test.
- else
-   IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
-   ac_dummy="$PATH"
-@@ -2671,17 +2571,17 @@
-   echo "$ac_t""no" 1>&6
- fi
- 
-     for ac_prog in $AS as
- do
+@@ -2676,7 +2576,7 @@
  # Extract the first word of "$ac_prog", so it can be a program name with args.
  set dummy $ac_prog; ac_word=$2
  echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
@@ -1111,17 +663,7 @@
  if eval "test \"`echo '$''{'ac_cv_path_AS'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
-   case "$AS" in
-   /*)
-   ac_cv_path_AS="$AS" # Let the user override the test with a path.
-   ;;
-   ?:/*)			 
-@@ -2712,17 +2612,17 @@
- done
- test -n "$AS" || AS="$CC"
- 
-     for ac_prog in ar
- do
+@@ -2717,7 +2617,7 @@
  # Extract the first word of "$ac_prog", so it can be a program name with args.
  set dummy $ac_prog; ac_word=$2
  echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
@@ -1130,17 +672,7 @@
  if eval "test \"`echo '$''{'ac_cv_prog_AR'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
-   if test -n "$AR"; then
-   ac_cv_prog_AR="$AR" # Let the user override the test.
- else
-   IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
-   ac_dummy="$PATH"
-@@ -2747,17 +2647,17 @@
- done
- test -n "$AR" || AR=":"
- 
-     for ac_prog in ld
- do
+@@ -2752,7 +2652,7 @@
  # Extract the first word of "$ac_prog", so it can be a program name with args.
  set dummy $ac_prog; ac_word=$2
  echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
@@ -1149,17 +681,7 @@
  if eval "test \"`echo '$''{'ac_cv_prog_LD'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
-   if test -n "$LD"; then
-   ac_cv_prog_LD="$LD" # Let the user override the test.
- else
-   IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
-   ac_dummy="$PATH"
-@@ -2782,17 +2682,17 @@
- done
- test -n "$LD" || LD=":"
- 
-     for ac_prog in strip
- do
+@@ -2787,7 +2687,7 @@
  # Extract the first word of "$ac_prog", so it can be a program name with args.
  set dummy $ac_prog; ac_word=$2
  echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
@@ -1168,17 +690,7 @@
  if eval "test \"`echo '$''{'ac_cv_prog_STRIP'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
-   if test -n "$STRIP"; then
-   ac_cv_prog_STRIP="$STRIP" # Let the user override the test.
- else
-   IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
-   ac_dummy="$PATH"
-@@ -2817,17 +2717,17 @@
- done
- test -n "$STRIP" || STRIP=":"
- 
-     for ac_prog in windres
- do
+@@ -2822,7 +2722,7 @@
  # Extract the first word of "$ac_prog", so it can be a program name with args.
  set dummy $ac_prog; ac_word=$2
  echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
@@ -1187,17 +699,7 @@
  if eval "test \"`echo '$''{'ac_cv_prog_WINDRES'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
-   if test -n "$WINDRES"; then
-   ac_cv_prog_WINDRES="$WINDRES" # Let the user override the test.
- else
-   IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
-   ac_dummy="$PATH"
-@@ -2906,17 +2806,17 @@
-     if test "$GCC" != "yes"; then
-         # Check to see if we are really running in a msvc environemnt
-         _WIN32_MSVC=1
-         for ac_prog in midl
- do
+@@ -2911,7 +2811,7 @@
  # Extract the first word of "$ac_prog", so it can be a program name with args.
  set dummy $ac_prog; ac_word=$2
  echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
@@ -1206,17 +708,7 @@
  if eval "test \"`echo '$''{'ac_cv_prog_MIDL'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
-   if test -n "$MIDL"; then
-   ac_cv_prog_MIDL="$MIDL" # Let the user override the test.
- else
-   IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
-   ac_dummy="$PATH"
-@@ -2948,24 +2848,24 @@
-         ac_ext=c
- # CFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
- ac_cpp='$CPP $CPPFLAGS'
- ac_compile='${CC-cc} -c $CFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
- ac_link='${CC-cc} -o conftest${ac_exeext} $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
+@@ -2953,14 +2853,14 @@
  cross_compiling=$ac_cv_prog_cc_cross
  
          cat > conftest.$ac_ext <<EOF
@@ -1233,17 +725,7 @@
    :
  else
    echo "configure: failed program was:" >&5
-   cat conftest.$ac_ext >&5
-   rm -rf conftest*
-   { echo "configure: error: \$(CC) test failed.  You must have MS VC++ in your path to build." 1>&2; exit 1; } 
- fi
- rm -f conftest*
-@@ -2973,24 +2873,24 @@
-         ac_ext=C
- # CXXFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
- ac_cpp='$CXXCPP $CPPFLAGS'
- ac_compile='${CXX-g++} -c $CXXFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
- ac_link='${CXX-g++} -o conftest${ac_exeext} $CXXFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
+@@ -2978,14 +2878,14 @@
  cross_compiling=$ac_cv_prog_cxx_cross
  
          cat > conftest.$ac_ext <<EOF
@@ -1260,17 +742,7 @@
    :
  else
    echo "configure: failed program was:" >&5
-   cat conftest.$ac_ext >&5
-   rm -rf conftest*
-   { echo "configure: error: \$(CXX) test failed.  You must have MS VC++ in your path to build." 1>&2; exit 1; } 
- fi
- rm -f conftest*
-@@ -3036,17 +2936,17 @@
- 
-         # Check midl version
-         _MIDL_FULL_VERSION=`"${MIDL}" -v 2>&1 | sed -ne "$_MSVC_VER_FILTER"`
-         _MIDL_MAJOR_VERSION=`echo ${_MIDL_FULL_VERSION} | $AWK -F\. '{ print $1 }'`
-         _MIDL_MINOR_VERSION=`echo ${_MIDL_FULL_VERSION} | $AWK -F\. '{ print $2 }'`
+@@ -3041,7 +2941,7 @@
          _MIDL_REV_VERSION=`echo ${_MIDL_FULL_VERSION} | $AWK -F\. '{ print $3 }'`
           # Add flags if necessary
           echo $ac_n "checking for midl flags""... $ac_c" 1>&6
@@ -1279,17 +751,7 @@
           if test \( "$_MIDL_MAJOR_VERSION" -gt "6" \) -o \( "$_MIDL_MAJOR_VERSION" = "6" -a "$_MIDL_MINOR_VERSION" -gt "0" \) -o \( "$_MIDL_MAJOR_VERSION" = "6" -a "$_MIDL_MINOR_VERSION" = "00" -a "$_MIDL_REV_VERSION" -gt "359" \); then
               # Starting with MIDL version 6.0.359, the MIDL compiler
               # generates /Oicf /robust stubs by default, which is not
-              # compatible with versions of Windows older than Win2k.
-              # This switches us back to the old behaviour. When we drop
-              # support for Windows older than Win2k, we should remove
-              # this.
-              MIDL_FLAGS="${MIDL_FLAGS} -no_robust"
-@@ -3058,47 +2958,47 @@
-         
-         unset _MSVC_VER_FILTER
-         
-     else
-         # Check w32api version
+@@ -3063,9 +2963,9 @@
          _W32API_MAJOR_VERSION=`echo $W32API_VERSION | $AWK -F\. '{ print $1 }'`
          _W32API_MINOR_VERSION=`echo $W32API_VERSION | $AWK -F\. '{ print $2 }'`
          echo $ac_n "checking for w32api version >= $W32API_VERSION""... $ac_c" 1>&6
@@ -1301,11 +763,7 @@
  #include "confdefs.h"
  #include <w32api.h>
  int main() {
- #if (__W32API_MAJOR_VERSION < $_W32API_MAJOR_VERSION) || \
-                 (__W32API_MAJOR_VERSION == $_W32API_MAJOR_VERSION && \
-                  __W32API_MINOR_VERSION < $_W32API_MINOR_VERSION)
-                 #error "test failed."
-             #endif
+@@ -3077,7 +2977,7 @@
              
  ; return 0; }
  EOF
@@ -1314,15 +772,7 @@
    rm -rf conftest*
     res=yes 
  else
-   echo "configure: failed program was:" >&5
-   cat conftest.$ac_ext >&5
-   rm -rf conftest*
-    res=no 
- fi
- rm -f conftest*
-         echo "$ac_t""$res" 1>&6
-         if test "$res" != "yes"; then
-             { echo "configure: error: w32api version $W32API_VERSION or higher required." 1>&2; exit 1; }
+@@ -3093,7 +2993,7 @@
          fi
          # Check windres version
          echo $ac_n "checking for windres version >= $WINDRES_VERSION""... $ac_c" 1>&6
@@ -1331,17 +781,7 @@
          _WINDRES_VERSION=`${WINDRES} --version 2>&1 | grep -i windres 2>/dev/null | $AWK '{ print $3 }'`
          echo "$ac_t""$_WINDRES_VERSION" 1>&6
          _WINDRES_MAJOR_VERSION=`echo $_WINDRES_VERSION | $AWK -F\. '{ print $1 }'`
-         _WINDRES_MINOR_VERSION=`echo $_WINDRES_VERSION | $AWK -F\. '{ print $2 }'`
-         _WINDRES_RELEASE_VERSION=`echo $_WINDRES_VERSION | $AWK -F\. '{ print $3 }'`
-         WINDRES_MAJOR_VERSION=`echo $WINDRES_VERSION | $AWK -F\. '{ print $1 }'`
-         WINDRES_MINOR_VERSION=`echo $WINDRES_VERSION | $AWK -F\. '{ print $2 }'`
-         WINDRES_RELEASE_VERSION=`echo $WINDRES_VERSION | $AWK -F\. '{ print $3 }'`
-@@ -3115,72 +3015,72 @@
-     ;;
- esac
- 
- if test -n "$_WIN32_MSVC"; then
-     SKIP_PATH_CHECKS=1
+@@ -3120,7 +3020,7 @@
      SKIP_COMPILER_CHECKS=1
      SKIP_LIBRARY_CHECKS=1
      echo $ac_n "checking how to run the C preprocessor""... $ac_c" 1>&6
@@ -1350,14 +790,7 @@
  # On Suns, sometimes $CPP names a directory.
  if test -n "$CPP" && test -d "$CPP"; then
    CPP=
- fi
- if test -z "$CPP"; then
- if eval "test \"`echo '$''{'ac_cv_prog_CPP'+set}'`\" = set"; then
-   echo $ac_n "(cached) $ac_c" 1>&6
- else
-     # This must be in double quotes, not single quotes, because CPP may get
-   # substituted into the Makefile and "${CC-cc}" will confuse make.
-   CPP="${CC-cc} -E"
+@@ -3135,13 +3035,13 @@
    # On the NeXT, cc -E runs the code through the compiler's parser,
    # not just through cpp.
    cat > conftest.$ac_ext <<EOF
@@ -1373,10 +806,7 @@
  ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
  if test -z "$ac_err"; then
    :
- else
-   echo "$ac_err" >&5
-   echo "configure: failed program was:" >&5
-   cat conftest.$ac_ext >&5
+@@ -3152,13 +3052,13 @@
    rm -rf conftest*
    CPP="${CC-cc} -E -traditional-cpp"
    cat > conftest.$ac_ext <<EOF
@@ -1392,10 +822,7 @@
  ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
  if test -z "$ac_err"; then
    :
- else
-   echo "$ac_err" >&5
-   echo "configure: failed program was:" >&5
-   cat conftest.$ac_ext >&5
+@@ -3169,13 +3069,13 @@
    rm -rf conftest*
    CPP="${CC-cc} -nologo -E"
    cat > conftest.$ac_ext <<EOF
@@ -1411,17 +838,7 @@
  ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
  if test -z "$ac_err"; then
    :
- else
-   echo "$ac_err" >&5
-   echo "configure: failed program was:" >&5
-   cat conftest.$ac_ext >&5
-   rm -rf conftest*
-@@ -3198,27 +3098,27 @@
-   ac_cv_prog_CPP="$CPP"
- fi
- echo "$ac_t""$CPP" 1>&6
- 
- for ac_hdr in mmintrin.h
+@@ -3203,17 +3103,17 @@
  do
  ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
  echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
@@ -1442,17 +859,7 @@
  ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
  if test -z "$ac_err"; then
    rm -rf conftest*
-   eval "ac_cv_header_$ac_safe=yes"
- else
-   echo "$ac_err" >&5
-   echo "configure: failed program was:" >&5
-   cat conftest.$ac_ext >&5
-@@ -3239,41 +3139,41 @@
- fi
- done
- 
- fi
- 
+@@ -3244,10 +3144,10 @@
  if test "$CC" != "icc" -a -z "$_WIN32_MSVC"; then
      if test "x$CC" != xcc; then
    echo $ac_n "checking whether $CC and cc understand -c and -o together""... $ac_c" 1>&6
@@ -1465,11 +872,7 @@
  fi
  set dummy $CC; ac_cc="`echo $2 |
  		       sed -e 's/[^a-zA-Z0-9_]/_/g' -e 's/^[0-9]/_/'`"
- if eval "test \"`echo '$''{'ac_cv_prog_cc_${ac_cc}_c_o'+set}'`\" = set"; then
-   echo $ac_n "(cached) $ac_c" 1>&6
- else
-   echo 'foo(){}' > conftest.c
- # Make sure it works both with $CC and with simple cc.
+@@ -3259,16 +3159,16 @@
  # We do the test twice because some compilers refuse to overwrite an
  # existing .o file with -o, though they will create one.
  ac_try='${CC-cc} -c conftest.c -o conftest.o 1>&5'
@@ -1491,17 +894,7 @@
        then
          # cc works too.
          :
-       else
-         # cc exists but doesn't like -o.
-         eval ac_cv_prog_cc_${ac_cc}_c_o=no
-       fi
-     fi
-@@ -3299,72 +3199,72 @@
-         _OLDCC=$CC
-         _OLDCXX=$CXX
-         CC="${srcdir}/build/hcc '$CC'"
-         CXX="${srcdir}/build/hcpp '$CXX'"
-     fi
+@@ -3304,7 +3204,7 @@
  fi
  
  echo $ac_n "checking how to run the C preprocessor""... $ac_c" 1>&6
@@ -1510,14 +903,7 @@
  # On Suns, sometimes $CPP names a directory.
  if test -n "$CPP" && test -d "$CPP"; then
    CPP=
- fi
- if test -z "$CPP"; then
- if eval "test \"`echo '$''{'ac_cv_prog_CPP'+set}'`\" = set"; then
-   echo $ac_n "(cached) $ac_c" 1>&6
- else
-     # This must be in double quotes, not single quotes, because CPP may get
-   # substituted into the Makefile and "${CC-cc}" will confuse make.
-   CPP="${CC-cc} -E"
+@@ -3319,13 +3219,13 @@
    # On the NeXT, cc -E runs the code through the compiler's parser,
    # not just through cpp.
    cat > conftest.$ac_ext <<EOF
@@ -1533,10 +919,7 @@
  ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
  if test -z "$ac_err"; then
    :
- else
-   echo "$ac_err" >&5
-   echo "configure: failed program was:" >&5
-   cat conftest.$ac_ext >&5
+@@ -3336,13 +3236,13 @@
    rm -rf conftest*
    CPP="${CC-cc} -E -traditional-cpp"
    cat > conftest.$ac_ext <<EOF
@@ -1552,10 +935,7 @@
  ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
  if test -z "$ac_err"; then
    :
- else
-   echo "$ac_err" >&5
-   echo "configure: failed program was:" >&5
-   cat conftest.$ac_ext >&5
+@@ -3353,13 +3253,13 @@
    rm -rf conftest*
    CPP="${CC-cc} -nologo -E"
    cat > conftest.$ac_ext <<EOF
@@ -1571,17 +951,7 @@
  ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
  if test -z "$ac_err"; then
    :
- else
-   echo "$ac_err" >&5
-   echo "configure: failed program was:" >&5
-   cat conftest.$ac_ext >&5
-   rm -rf conftest*
-@@ -3379,35 +3279,35 @@
- fi
-   CPP="$ac_cv_prog_CPP"
- else
-   ac_cv_prog_CPP="$CPP"
- fi
+@@ -3384,7 +3284,7 @@
  echo "$ac_t""$CPP" 1>&6
  
  echo $ac_n "checking how to run the C++ preprocessor""... $ac_c" 1>&6
@@ -1590,12 +960,7 @@
  if test -z "$CXXCPP"; then
  if eval "test \"`echo '$''{'ac_cv_prog_CXXCPP'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
- else
-   ac_ext=C
- # CXXFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
- ac_cpp='$CXXCPP $CPPFLAGS'
- ac_compile='${CXX-g++} -c $CXXFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
- ac_link='${CXX-g++} -o conftest${ac_exeext} $CXXFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
+@@ -3397,12 +3297,12 @@
  cross_compiling=$ac_cv_prog_cxx_cross
    CXXCPP="${CXX-g++} -E"
    cat > conftest.$ac_ext <<EOF
@@ -1610,17 +975,7 @@
  ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
  if test -z "$ac_err"; then
    :
- else
-   echo "$ac_err" >&5
-   echo "configure: failed program was:" >&5
-   cat conftest.$ac_ext >&5
-   rm -rf conftest*
-@@ -3444,17 +3344,17 @@
- # SunOS /usr/etc/install
- # IRIX /sbin/install
- # AIX /bin/install
- # AIX 4 /usr/bin/installbsd, which doesn't work without a -g flag
- # AFS /usr/afsws/bin/install, which mishandles nonexistent args
+@@ -3449,7 +3349,7 @@
  # SVR4 /usr/ucb/install, which tries to use the nonexistent group "staff"
  # ./install, which can be erroneously created by make from ./install.sh.
  echo $ac_n "checking for a BSD compatible install""... $ac_c" 1>&6
@@ -1629,17 +984,7 @@
  if test -z "$INSTALL"; then
  if eval "test \"`echo '$''{'ac_cv_path_install'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
- else
-     IFS="${IFS= 	}"; ac_save_IFS="$IFS"; IFS=":"
-   for ac_dir in $PATH; do
-     # Account for people who put trailing slashes in PATH elements.
-     case "$ac_dir/" in
-@@ -3497,17 +3397,17 @@
- # It thinks the first close brace ends the variable substitution.
- test -z "$INSTALL_PROGRAM" && INSTALL_PROGRAM='${INSTALL}'
- 
- test -z "$INSTALL_SCRIPT" && INSTALL_SCRIPT='${INSTALL_PROGRAM}'
- 
+@@ -3502,7 +3402,7 @@
  test -z "$INSTALL_DATA" && INSTALL_DATA='${INSTALL} -m 644'
  
  echo $ac_n "checking whether ln -s works""... $ac_c" 1>&6
@@ -1648,17 +993,7 @@
  if eval "test \"`echo '$''{'ac_cv_prog_LN_S'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
-   rm -f conftestdata
- if ln -s X conftestdata 2>/dev/null
- then
-   rm -f conftestdata
-   ac_cv_prog_LN_S="ln -s"
-@@ -3522,17 +3422,17 @@
-   echo "$ac_t""no" 1>&6
- fi
- 
- for ac_prog in $PERL perl5 perl 
- do
+@@ -3527,7 +3427,7 @@
  # Extract the first word of "$ac_prog", so it can be a program name with args.
  set dummy $ac_prog; ac_word=$2
  echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
@@ -1667,17 +1002,7 @@
  if eval "test \"`echo '$''{'ac_cv_path_PERL'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
-   case "$PERL" in
-   /*)
-   ac_cv_path_PERL="$PERL" # Let the user override the test with a path.
-   ;;
-   ?:/*)			 
-@@ -3562,40 +3462,40 @@
- test -n "$PERL" && break
- done
- 
- if test -z "$PERL" || test "$PERL" = ":"; then
-     { echo "configure: error: perl not found in \$PATH" 1>&2; exit 1; }
+@@ -3567,7 +3467,7 @@
  fi
  
  echo $ac_n "checking for minimum required perl version >= $PERL_VERSION""... $ac_c" 1>&6
@@ -1686,9 +1011,7 @@
  _perl_version=`PERL_VERSION=$PERL_VERSION $PERL -e 'print "$]"; if ($] >= $ENV{PERL_VERSION}) { exit(0); } else { exit(1); }' 2>&5`
  _perl_res=$?
  echo "$ac_t""$_perl_version" 1>&6
- 
- if test "$_perl_res" != 0; then
-     { echo "configure: error: Perl $PERL_VERSION or higher is required." 1>&2; exit 1; }
+@@ -3577,7 +3477,7 @@
  fi
  
  echo $ac_n "checking for full perl installation""... $ac_c" 1>&6
@@ -1697,12 +1020,7 @@
  _perl_archlib=`$PERL -e 'use Config; if ( -d $Config{archlib} ) { exit(0); } else { exit(1); }' 2>&5`
  _perl_res=$?
  if test "$_perl_res" != 0; then
-     echo "$ac_t""no" 1>&6
-     { echo "configure: error: Cannot find Config.pm or \$Config{archlib}.  A full perl installation is required." 1>&2; exit 1; }
- else
-     echo "$ac_t""yes" 1>&6    
- fi
- 
+@@ -3590,7 +3490,7 @@
  # Extract the first word of "doxygen", so it can be a program name with args.
  set dummy doxygen; ac_word=$2
  echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
@@ -1711,17 +1029,7 @@
  if eval "test \"`echo '$''{'ac_cv_path_DOXYGEN'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
-   case "$DOXYGEN" in
-   /*)
-   ac_cv_path_DOXYGEN="$DOXYGEN" # Let the user override the test with a path.
-   ;;
-   ?:/*)			 
-@@ -3621,17 +3521,17 @@
-   echo "$ac_t""$DOXYGEN" 1>&6
- else
-   echo "$ac_t""no" 1>&6
- fi
- 
+@@ -3626,7 +3526,7 @@
  # Extract the first word of "whoami", so it can be a program name with args.
  set dummy whoami; ac_word=$2
  echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
@@ -1730,17 +1038,7 @@
  if eval "test \"`echo '$''{'ac_cv_path_WHOAMI'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
-   case "$WHOAMI" in
-   /*)
-   ac_cv_path_WHOAMI="$WHOAMI" # Let the user override the test with a path.
-   ;;
-   ?:/*)			 
-@@ -3657,17 +3557,17 @@
-   echo "$ac_t""$WHOAMI" 1>&6
- else
-   echo "$ac_t""no" 1>&6
- fi
- 
+@@ -3662,7 +3562,7 @@
  # Extract the first word of "autoconf", so it can be a program name with args.
  set dummy autoconf; ac_word=$2
  echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
@@ -1749,17 +1047,7 @@
  if eval "test \"`echo '$''{'ac_cv_path_AUTOCONF'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
-   case "$AUTOCONF" in
-   /*)
-   ac_cv_path_AUTOCONF="$AUTOCONF" # Let the user override the test with a path.
-   ;;
-   ?:/*)			 
-@@ -3693,17 +3593,17 @@
-   echo "$ac_t""$AUTOCONF" 1>&6
- else
-   echo "$ac_t""no" 1>&6
- fi
- 
+@@ -3698,7 +3598,7 @@
  # Extract the first word of "unzip", so it can be a program name with args.
  set dummy unzip; ac_word=$2
  echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
@@ -1768,17 +1056,7 @@
  if eval "test \"`echo '$''{'ac_cv_path_UNZIP'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
-   case "$UNZIP" in
-   /*)
-   ac_cv_path_UNZIP="$UNZIP" # Let the user override the test with a path.
-   ;;
-   ?:/*)			 
-@@ -3731,17 +3631,17 @@
-   echo "$ac_t""no" 1>&6
- fi
- 
- for ac_prog in zip
- do
+@@ -3736,7 +3636,7 @@
  # Extract the first word of "$ac_prog", so it can be a program name with args.
  set dummy $ac_prog; ac_word=$2
  echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
@@ -1787,17 +1065,7 @@
  if eval "test \"`echo '$''{'ac_cv_path_ZIP'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
-   case "$ZIP" in
-   /*)
-   ac_cv_path_ZIP="$ZIP" # Let the user override the test with a path.
-   ;;
-   ?:/*)			 
-@@ -3772,17 +3672,17 @@
- done
- 
- if test -z "$ZIP" || test "$ZIP" = ":"; then
-     { echo "configure: error: zip not found in \$PATH" 1>&2; exit 1; }
- fi
+@@ -3777,7 +3677,7 @@
  # Extract the first word of "makedepend", so it can be a program name with args.
  set dummy makedepend; ac_word=$2
  echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
@@ -1806,17 +1074,7 @@
  if eval "test \"`echo '$''{'ac_cv_path_SYSTEM_MAKEDEPEND'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
-   case "$SYSTEM_MAKEDEPEND" in
-   /*)
-   ac_cv_path_SYSTEM_MAKEDEPEND="$SYSTEM_MAKEDEPEND" # Let the user override the test with a path.
-   ;;
-   ?:/*)			 
-@@ -3807,17 +3707,17 @@
-   echo "$ac_t""$SYSTEM_MAKEDEPEND" 1>&6
- else
-   echo "$ac_t""no" 1>&6
- fi
- 
+@@ -3812,7 +3712,7 @@
  # Extract the first word of "xargs", so it can be a program name with args.
  set dummy xargs; ac_word=$2
  echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
@@ -1825,17 +1083,7 @@
  if eval "test \"`echo '$''{'ac_cv_path_XARGS'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
-   case "$XARGS" in
-   /*)
-   ac_cv_path_XARGS="$XARGS" # Let the user override the test with a path.
-   ;;
-   ?:/*)			 
-@@ -3870,17 +3770,17 @@
-         fi
-     fi
- 
-                 for ac_prog in pbbuild xcodebuild pbxbuild
- do
+@@ -3875,7 +3775,7 @@
  # Extract the first word of "$ac_prog", so it can be a program name with args.
  set dummy $ac_prog; ac_word=$2
  echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
@@ -1844,17 +1092,7 @@
  if eval "test \"`echo '$''{'ac_cv_path_PBBUILD'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
-   case "$PBBUILD" in
-   /*)
-   ac_cv_path_PBBUILD="$PBBUILD" # Let the user override the test with a path.
-   ;;
-   ?:/*)			 
-@@ -3920,17 +3820,17 @@
-           HAS_XCODE_2_1=1;
-         fi
-       ;;
-     esac
- 
+@@ -3925,7 +3825,7 @@
              # Extract the first word of "sdp", so it can be a program name with args.
  set dummy sdp; ac_word=$2
  echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
@@ -1863,17 +1101,7 @@
  if eval "test \"`echo '$''{'ac_cv_path_SDP'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
-   case "$SDP" in
-   /*)
-   ac_cv_path_SDP="$SDP" # Let the user override the test with a path.
-   ;;
-   ?:/*)			 
-@@ -4051,34 +3951,34 @@
-     CXXCPP="$CXXCPP -isysroot ${MACOS_SDK_DIR}"
- 
-     if test "$GCC_VERSION_FULL" = "4.0.0" ; then
-                                     LDFLAGS="$LDFLAGS -Wl,-syslibroot,${MACOS_SDK_DIR}"
-     fi
+@@ -4056,7 +3956,7 @@
    fi
  
    echo $ac_n "checking for valid compiler/Mac OS X SDK combination""... $ac_c" 1>&6
@@ -1882,8 +1110,7 @@
    ac_ext=C
  # CXXFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
  ac_cpp='$CXXCPP $CPPFLAGS'
- ac_compile='${CXX-g++} -c $CXXFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
- ac_link='${CXX-g++} -o conftest${ac_exeext} $CXXFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
+@@ -4065,7 +3965,7 @@
  cross_compiling=$ac_cv_prog_cxx_cross
  
    cat > conftest.$ac_ext <<EOF
@@ -1892,7 +1119,7 @@
  #include "confdefs.h"
  #include <new>
                   int main() { return 0; }
- int main() {
+@@ -4073,7 +3973,7 @@
  result=yes
  ; return 0; }
  EOF
@@ -1901,17 +1128,7 @@
    rm -rf conftest*
    result=no
  else
-   echo "configure: failed program was:" >&5
-   cat conftest.$ac_ext >&5
- fi
- rm -f conftest*
-   
-@@ -4093,17 +3993,17 @@
- 
- case "$host_os" in
- cygwin*|mingw*|mks*|msvc*)
-     for ac_prog in $MAKE make gmake
- do
+@@ -4098,7 +3998,7 @@
  # Extract the first word of "$ac_prog", so it can be a program name with args.
  set dummy $ac_prog; ac_word=$2
  echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
@@ -1920,17 +1137,7 @@
  if eval "test \"`echo '$''{'ac_cv_path_MAKE'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
-   case "$MAKE" in
-   /*)
-   ac_cv_path_MAKE="$MAKE" # Let the user override the test with a path.
-   ;;
-   ?:/*)			 
-@@ -4136,17 +4036,17 @@
- 
-     ;;
- *)
-     for ac_prog in $MAKE gmake make
- do
+@@ -4141,7 +4041,7 @@
  # Extract the first word of "$ac_prog", so it can be a program name with args.
  set dummy $ac_prog; ac_word=$2
  echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
@@ -1939,17 +1146,7 @@
  if eval "test \"`echo '$''{'ac_cv_path_MAKE'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
-   case "$MAKE" in
-   /*)
-   ac_cv_path_MAKE="$MAKE" # Let the user override the test with a path.
-   ;;
-   ?:/*)			 
-@@ -4204,17 +4104,17 @@
- 
- if test "$COMPILE_ENVIRONMENT"; then
- 
- # If we find X, set shell vars x_includes and x_libraries to the
- # paths, otherwise set no_x=yes.
+@@ -4209,7 +4109,7 @@
  # Uses ac_ vars as temps to allow command line to override cache and checks.
  # --without-x overrides everything else, but does not touch the cache.
  echo $ac_n "checking for X""... $ac_c" 1>&6
@@ -1958,17 +1155,7 @@
  
  # Check whether --with-x or --without-x was given.
  if test "${with_x+set}" = set; then
-   withval="$with_x"
-   :
- fi
- 
- # $have_x is `yes', `no', `disabled', or empty when we do not yet know.
-@@ -4266,22 +4166,22 @@
- fi
- 
- if test "$ac_x_includes" = NO; then
-   # Guess where to find include files, by looking for this one X11 .h file.
-   test -z "$x_direct_test_include" && x_direct_test_include=X11/Intrinsic.h
+@@ -4271,12 +4171,12 @@
  
    # First, try using that file with no special directory specified.
  cat > conftest.$ac_ext <<EOF
@@ -1983,17 +1170,7 @@
  ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
  if test -z "$ac_err"; then
    rm -rf conftest*
-   # We can compile using X headers with no special include directory.
- ac_x_includes=
- else
-   echo "$ac_err" >&5
-   echo "configure: failed program was:" >&5
-@@ -4340,24 +4240,24 @@
-   test -z "$x_direct_test_library" && x_direct_test_library=Xt
-   test -z "$x_direct_test_function" && x_direct_test_function=XtMalloc
- 
-   # See if we find them without any special options.
-   # Don't add to $LIBS permanently.
+@@ -4345,14 +4245,14 @@
    ac_save_LIBS="$LIBS"
    LIBS="-l$x_direct_test_library $LIBS"
  cat > conftest.$ac_ext <<EOF
@@ -2010,17 +1187,7 @@
    rm -rf conftest*
    LIBS="$ac_save_LIBS"
  # We can link X programs with no special library path.
- ac_x_libraries=
- else
-   echo "configure: failed program was:" >&5
-   cat conftest.$ac_ext >&5
-   rm -rf conftest*
-@@ -4453,50 +4353,50 @@
-   # It would also be nice to do this for all -L options, not just this one.
-   if test -n "$x_libraries"; then
-     X_LIBS="$X_LIBS -L$x_libraries"
-     # For Solaris; some versions of Sun CC require a space after -R and
-     # others require no space.  Words are not sufficient . . . .
+@@ -4458,17 +4358,17 @@
      case "`(uname -sr) 2>/dev/null`" in
      "SunOS 5"*)
        echo $ac_n "checking whether -R must be followed by a space""... $ac_c" 1>&6
@@ -2041,15 +1208,7 @@
    rm -rf conftest*
    ac_R_nospace=yes
  else
-   echo "configure: failed program was:" >&5
-   cat conftest.$ac_ext >&5
-   rm -rf conftest*
-   ac_R_nospace=no
- fi
- rm -f conftest*
-       if test $ac_R_nospace = yes; then
- 	echo "$ac_t""no" 1>&6
- 	X_LIBS="$X_LIBS -R$x_libraries"
+@@ -4484,14 +4384,14 @@
        else
  	LIBS="$ac_xsave_LIBS -R $x_libraries"
  	cat > conftest.$ac_ext <<EOF
@@ -2066,17 +1225,7 @@
    rm -rf conftest*
    ac_R_space=yes
  else
-   echo "configure: failed program was:" >&5
-   cat conftest.$ac_ext >&5
-   rm -rf conftest*
-   ac_R_space=no
- fi
-@@ -4518,39 +4418,39 @@
- 
-   if test "$ISC" = yes; then
-     X_EXTRA_LIBS="$X_EXTRA_LIBS -lnsl_s -linet"
-   else
-     # Martyn.Johnson@cl.cam.ac.uk says this is needed for Ultrix, if the X
+@@ -4523,7 +4423,7 @@
      # libraries were built with DECnet support.  And karl@cs.umb.edu says
      # the Alpha needs dnet_stub (dnet does not exist).
      echo $ac_n "checking for dnet_ntoa in -ldnet""... $ac_c" 1>&6
@@ -2085,7 +1234,7 @@
  ac_lib_var=`echo dnet'_'dnet_ntoa | sed 'y%./+-%__p_%'`
  if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
- else
+@@ -4531,7 +4431,7 @@
    ac_save_LIBS="$LIBS"
  LIBS="-ldnet  $LIBS"
  cat > conftest.$ac_ext <<EOF
@@ -2094,13 +1243,7 @@
  #include "confdefs.h"
  /* Override any gcc2 internal prototype to avoid an error.  */
  #ifdef __cplusplus
- extern "C"
- #endif
- /* We use char because int might match the return type of a gcc2
-     builtin and then its argument prototype would still apply.  */
- char dnet_ntoa();
- 
- int main() {
+@@ -4545,7 +4445,7 @@
  dnet_ntoa()
  ; return 0; }
  EOF
@@ -2109,17 +1252,7 @@
    rm -rf conftest*
    eval "ac_cv_lib_$ac_lib_var=yes"
  else
-   echo "configure: failed program was:" >&5
-   cat conftest.$ac_ext >&5
-   rm -rf conftest*
-   eval "ac_cv_lib_$ac_lib_var=no"
- fi
-@@ -4562,39 +4462,39 @@
-   echo "$ac_t""yes" 1>&6
-   X_EXTRA_LIBS="$X_EXTRA_LIBS -ldnet"
- else
-   echo "$ac_t""no" 1>&6
- fi
+@@ -4567,7 +4467,7 @@
  
      if test $ac_cv_lib_dnet_dnet_ntoa = no; then
        echo $ac_n "checking for dnet_ntoa in -ldnet_stub""... $ac_c" 1>&6
@@ -2128,7 +1261,7 @@
  ac_lib_var=`echo dnet_stub'_'dnet_ntoa | sed 'y%./+-%__p_%'`
  if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
- else
+@@ -4575,7 +4475,7 @@
    ac_save_LIBS="$LIBS"
  LIBS="-ldnet_stub  $LIBS"
  cat > conftest.$ac_ext <<EOF
@@ -2137,13 +1270,7 @@
  #include "confdefs.h"
  /* Override any gcc2 internal prototype to avoid an error.  */
  #ifdef __cplusplus
- extern "C"
- #endif
- /* We use char because int might match the return type of a gcc2
-     builtin and then its argument prototype would still apply.  */
- char dnet_ntoa();
- 
- int main() {
+@@ -4589,7 +4489,7 @@
  dnet_ntoa()
  ; return 0; }
  EOF
@@ -2152,17 +1279,7 @@
    rm -rf conftest*
    eval "ac_cv_lib_$ac_lib_var=yes"
  else
-   echo "configure: failed program was:" >&5
-   cat conftest.$ac_ext >&5
-   rm -rf conftest*
-   eval "ac_cv_lib_$ac_lib_var=no"
- fi
-@@ -4613,22 +4513,22 @@
- 
-     # msh@cis.ufl.edu says -lnsl (and -lsocket) are needed for his 386/AT,
-     # to get the SysV transport functions.
-     # chad@anasazi.com says the Pyramis MIS-ES running DC/OSx (SVR4)
-     # needs -lnsl.
+@@ -4618,12 +4518,12 @@
      # The nsl library prevents programs from opening the X display
      # on Irix 5.2, according to dickey@clark.net.
      echo $ac_n "checking for gethostbyname""... $ac_c" 1>&6
@@ -2177,17 +1294,7 @@
  #include "confdefs.h"
  /* System header to define __stub macros and hopefully few prototypes,
      which can conflict with char gethostbyname(); below.  */
- #include <assert.h>
- /* Override any gcc2 internal prototype to avoid an error.  */
- #ifdef __cplusplus
- extern "C"
- #endif
-@@ -4644,17 +4544,17 @@
- #if defined (__stub_gethostbyname) || defined (__stub___gethostbyname)
- choke me
- #else
- gethostbyname();
- #endif
+@@ -4649,7 +4549,7 @@
  
  ; return 0; }
  EOF
@@ -2196,17 +1303,7 @@
    rm -rf conftest*
    eval "ac_cv_func_gethostbyname=yes"
  else
-   echo "configure: failed program was:" >&5
-   cat conftest.$ac_ext >&5
-   rm -rf conftest*
-   eval "ac_cv_func_gethostbyname=no"
- fi
-@@ -4665,39 +4565,39 @@
-   echo "$ac_t""yes" 1>&6
-   :
- else
-   echo "$ac_t""no" 1>&6
- fi
+@@ -4670,7 +4570,7 @@
  
      if test $ac_cv_func_gethostbyname = no; then
        echo $ac_n "checking for gethostbyname in -lnsl""... $ac_c" 1>&6
@@ -2215,7 +1312,7 @@
  ac_lib_var=`echo nsl'_'gethostbyname | sed 'y%./+-%__p_%'`
  if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
- else
+@@ -4678,7 +4578,7 @@
    ac_save_LIBS="$LIBS"
  LIBS="-lnsl  $LIBS"
  cat > conftest.$ac_ext <<EOF
@@ -2224,13 +1321,7 @@
  #include "confdefs.h"
  /* Override any gcc2 internal prototype to avoid an error.  */
  #ifdef __cplusplus
- extern "C"
- #endif
- /* We use char because int might match the return type of a gcc2
-     builtin and then its argument prototype would still apply.  */
- char gethostbyname();
- 
- int main() {
+@@ -4692,7 +4592,7 @@
  gethostbyname()
  ; return 0; }
  EOF
@@ -2239,17 +1330,7 @@
    rm -rf conftest*
    eval "ac_cv_lib_$ac_lib_var=yes"
  else
-   echo "configure: failed program was:" >&5
-   cat conftest.$ac_ext >&5
-   rm -rf conftest*
-   eval "ac_cv_lib_$ac_lib_var=no"
- fi
-@@ -4717,22 +4617,22 @@
-     # lieder@skyler.mavd.honeywell.com says without -lsocket,
-     # socket/setsockopt and other routines are undefined under SCO ODT
-     # 2.0.  But -lsocket is broken on IRIX 5.2 (and is not necessary
-     # on later versions), says simon@lia.di.epfl.ch: it contains
-     # gethostby* variants that don't use the nameserver (or something).
+@@ -4722,12 +4622,12 @@
      # -lsocket must be given before -lnsl if both are needed.
      # We assume that if connect needs -lnsl, so does gethostbyname.
      echo $ac_n "checking for connect""... $ac_c" 1>&6
@@ -2264,17 +1345,7 @@
  #include "confdefs.h"
  /* System header to define __stub macros and hopefully few prototypes,
      which can conflict with char connect(); below.  */
- #include <assert.h>
- /* Override any gcc2 internal prototype to avoid an error.  */
- #ifdef __cplusplus
- extern "C"
- #endif
-@@ -4748,17 +4648,17 @@
- #if defined (__stub_connect) || defined (__stub___connect)
- choke me
- #else
- connect();
- #endif
+@@ -4753,7 +4653,7 @@
  
  ; return 0; }
  EOF
@@ -2283,17 +1354,7 @@
    rm -rf conftest*
    eval "ac_cv_func_connect=yes"
  else
-   echo "configure: failed program was:" >&5
-   cat conftest.$ac_ext >&5
-   rm -rf conftest*
-   eval "ac_cv_func_connect=no"
- fi
-@@ -4769,39 +4669,39 @@
-   echo "$ac_t""yes" 1>&6
-   :
- else
-   echo "$ac_t""no" 1>&6
- fi
+@@ -4774,7 +4674,7 @@
  
      if test $ac_cv_func_connect = no; then
        echo $ac_n "checking for connect in -lsocket""... $ac_c" 1>&6
@@ -2302,7 +1363,7 @@
  ac_lib_var=`echo socket'_'connect | sed 'y%./+-%__p_%'`
  if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
- else
+@@ -4782,7 +4682,7 @@
    ac_save_LIBS="$LIBS"
  LIBS="-lsocket $X_EXTRA_LIBS $LIBS"
  cat > conftest.$ac_ext <<EOF
@@ -2311,13 +1372,7 @@
  #include "confdefs.h"
  /* Override any gcc2 internal prototype to avoid an error.  */
  #ifdef __cplusplus
- extern "C"
- #endif
- /* We use char because int might match the return type of a gcc2
-     builtin and then its argument prototype would still apply.  */
- char connect();
- 
- int main() {
+@@ -4796,7 +4696,7 @@
  connect()
  ; return 0; }
  EOF
@@ -2326,17 +1381,7 @@
    rm -rf conftest*
    eval "ac_cv_lib_$ac_lib_var=yes"
  else
-   echo "configure: failed program was:" >&5
-   cat conftest.$ac_ext >&5
-   rm -rf conftest*
-   eval "ac_cv_lib_$ac_lib_var=no"
- fi
-@@ -4815,22 +4715,22 @@
- else
-   echo "$ac_t""no" 1>&6
- fi
- 
-     fi
+@@ -4820,12 +4720,12 @@
  
      # gomez@mi.uni-erlangen.de says -lposix is necessary on A/UX.
      echo $ac_n "checking for remove""... $ac_c" 1>&6
@@ -2351,17 +1396,7 @@
  #include "confdefs.h"
  /* System header to define __stub macros and hopefully few prototypes,
      which can conflict with char remove(); below.  */
- #include <assert.h>
- /* Override any gcc2 internal prototype to avoid an error.  */
- #ifdef __cplusplus
- extern "C"
- #endif
-@@ -4846,17 +4746,17 @@
- #if defined (__stub_remove) || defined (__stub___remove)
- choke me
- #else
- remove();
- #endif
+@@ -4851,7 +4751,7 @@
  
  ; return 0; }
  EOF
@@ -2370,17 +1405,7 @@
    rm -rf conftest*
    eval "ac_cv_func_remove=yes"
  else
-   echo "configure: failed program was:" >&5
-   cat conftest.$ac_ext >&5
-   rm -rf conftest*
-   eval "ac_cv_func_remove=no"
- fi
-@@ -4867,39 +4767,39 @@
-   echo "$ac_t""yes" 1>&6
-   :
- else
-   echo "$ac_t""no" 1>&6
- fi
+@@ -4872,7 +4772,7 @@
  
      if test $ac_cv_func_remove = no; then
        echo $ac_n "checking for remove in -lposix""... $ac_c" 1>&6
@@ -2389,7 +1414,7 @@
  ac_lib_var=`echo posix'_'remove | sed 'y%./+-%__p_%'`
  if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
- else
+@@ -4880,7 +4780,7 @@
    ac_save_LIBS="$LIBS"
  LIBS="-lposix  $LIBS"
  cat > conftest.$ac_ext <<EOF
@@ -2398,13 +1423,7 @@
  #include "confdefs.h"
  /* Override any gcc2 internal prototype to avoid an error.  */
  #ifdef __cplusplus
- extern "C"
- #endif
- /* We use char because int might match the return type of a gcc2
-     builtin and then its argument prototype would still apply.  */
- char remove();
- 
- int main() {
+@@ -4894,7 +4794,7 @@
  remove()
  ; return 0; }
  EOF
@@ -2413,17 +1432,7 @@
    rm -rf conftest*
    eval "ac_cv_lib_$ac_lib_var=yes"
  else
-   echo "configure: failed program was:" >&5
-   cat conftest.$ac_ext >&5
-   rm -rf conftest*
-   eval "ac_cv_lib_$ac_lib_var=no"
- fi
-@@ -4913,22 +4813,22 @@
- else
-   echo "$ac_t""no" 1>&6
- fi
- 
-     fi
+@@ -4918,12 +4818,12 @@
  
      # BSDI BSD/OS 2.1 needs -lipc for XOpenDisplay.
      echo $ac_n "checking for shmat""... $ac_c" 1>&6
@@ -2438,17 +1447,7 @@
  #include "confdefs.h"
  /* System header to define __stub macros and hopefully few prototypes,
      which can conflict with char shmat(); below.  */
- #include <assert.h>
- /* Override any gcc2 internal prototype to avoid an error.  */
- #ifdef __cplusplus
- extern "C"
- #endif
-@@ -4944,17 +4844,17 @@
- #if defined (__stub_shmat) || defined (__stub___shmat)
- choke me
- #else
- shmat();
- #endif
+@@ -4949,7 +4849,7 @@
  
  ; return 0; }
  EOF
@@ -2457,17 +1456,7 @@
    rm -rf conftest*
    eval "ac_cv_func_shmat=yes"
  else
-   echo "configure: failed program was:" >&5
-   cat conftest.$ac_ext >&5
-   rm -rf conftest*
-   eval "ac_cv_func_shmat=no"
- fi
-@@ -4965,39 +4865,39 @@
-   echo "$ac_t""yes" 1>&6
-   :
- else
-   echo "$ac_t""no" 1>&6
- fi
+@@ -4970,7 +4870,7 @@
  
      if test $ac_cv_func_shmat = no; then
        echo $ac_n "checking for shmat in -lipc""... $ac_c" 1>&6
@@ -2476,7 +1465,7 @@
  ac_lib_var=`echo ipc'_'shmat | sed 'y%./+-%__p_%'`
  if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
- else
+@@ -4978,7 +4878,7 @@
    ac_save_LIBS="$LIBS"
  LIBS="-lipc  $LIBS"
  cat > conftest.$ac_ext <<EOF
@@ -2485,13 +1474,7 @@
  #include "confdefs.h"
  /* Override any gcc2 internal prototype to avoid an error.  */
  #ifdef __cplusplus
- extern "C"
- #endif
- /* We use char because int might match the return type of a gcc2
-     builtin and then its argument prototype would still apply.  */
- char shmat();
- 
- int main() {
+@@ -4992,7 +4892,7 @@
  shmat()
  ; return 0; }
  EOF
@@ -2500,17 +1483,7 @@
    rm -rf conftest*
    eval "ac_cv_lib_$ac_lib_var=yes"
  else
-   echo "configure: failed program was:" >&5
-   cat conftest.$ac_ext >&5
-   rm -rf conftest*
-   eval "ac_cv_lib_$ac_lib_var=no"
- fi
-@@ -5020,39 +4920,39 @@
-   test -n "$x_libraries" && LDFLAGS="$LDFLAGS -L$x_libraries"
-   # SM needs ICE to (dynamically) link under SunOS 4.x (so we have to
-   # check for ICE first), but we must link in the order -lSM -lICE or
-   # we get undefined symbols.  So assume we have SM if we have ICE.
-   # These have to be linked with before -lX11, unlike the other
+@@ -5025,7 +4925,7 @@
    # libraries we check for below, so use a different variable.
    #  --interran@uluru.Stanford.EDU, kb@cs.umb.edu.
    echo $ac_n "checking for IceConnectionNumber in -lICE""... $ac_c" 1>&6
@@ -2519,7 +1492,7 @@
  ac_lib_var=`echo ICE'_'IceConnectionNumber | sed 'y%./+-%__p_%'`
  if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
- else
+@@ -5033,7 +4933,7 @@
    ac_save_LIBS="$LIBS"
  LIBS="-lICE $X_EXTRA_LIBS $LIBS"
  cat > conftest.$ac_ext <<EOF
@@ -2528,13 +1501,7 @@
  #include "confdefs.h"
  /* Override any gcc2 internal prototype to avoid an error.  */
  #ifdef __cplusplus
- extern "C"
- #endif
- /* We use char because int might match the return type of a gcc2
-     builtin and then its argument prototype would still apply.  */
- char IceConnectionNumber();
- 
- int main() {
+@@ -5047,7 +4947,7 @@
  IceConnectionNumber()
  ; return 0; }
  EOF
@@ -2543,17 +1510,15 @@
    rm -rf conftest*
    eval "ac_cv_lib_$ac_lib_var=yes"
  else
-   echo "configure: failed program was:" >&5
-   cat conftest.$ac_ext >&5
-   rm -rf conftest*
-   eval "ac_cv_lib_$ac_lib_var=no"
- fi
-@@ -5144,16 +5044,31 @@
-         darwin*)      OS_ARCH=Darwin OS_TARGET=Darwin ;;
-     esac
- else
-     OS_TARGET=`uname -s`
-     OS_ARCH=`uname -s | sed -e 's|/|_|g'`
+@@ -5138,6 +5038,7 @@
+     OS_TEST="${target_cpu}"
+     case "${target_os}" in
+         linux*)       OS_ARCH=Linux ;;
++        kfreebsd*-gnu) OS_ARCH=GNU_kFreeBSD ;;
+         solaris*)     OS_ARCH=SunOS OS_RELEASE=5 ;;
+         mingw*)       OS_ARCH=WINNT ;;
+         wince*)       OS_ARCH=WINCE ;;
+@@ -5149,6 +5050,21 @@
      OS_RELEASE=`uname -r`
      OS_TEST=`uname -m`
  fi
@@ -2575,40 +1540,21 @@
  _COMPILER_PREFIX=
  
  HOST_OS_ARCH=`echo $host_os | sed -e 's|/|_|g'`
- 
- #######################################################################
- # Master "Core Components" macros for getting the OS target           #
- #######################################################################
- 
-@@ -5480,41 +5395,41 @@
- fi
- 
- MKSHLIB_FORCE_ALL=
- MKSHLIB_UNFORCE_ALL=
- 
+@@ -5485,7 +5401,7 @@
  if test "$COMPILE_ENVIRONMENT"; then
  if test "$GNU_CC"; then
    echo $ac_n "checking whether ld has archive extraction flags""... $ac_c" 1>&6
 -echo "configure:5489: checking whether ld has archive extraction flags" >&5
-+echo "configure:5404: checking whether ld has archive extraction flags" >&5
++echo "configure:5405: checking whether ld has archive extraction flags" >&5
    if eval "test \"`echo '$''{'ac_cv_mkshlib_force_and_unforce'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
-   _SAVE_LDFLAGS=$LDFLAGS; _SAVE_LIBS=$LIBS
-     ac_cv_mkshlib_force_and_unforce="no"
-     exec 3<&0 <<LOOP_INPUT
- 	force="-Wl,--whole-archive";   unforce="-Wl,--no-whole-archive"
- 	force="-Wl,-z -Wl,allextract"; unforce="-Wl,-z -Wl,defaultextract"
- 	force="-Wl,-all";              unforce="-Wl,-none"
- LOOP_INPUT
-     while read line
-     do
-       eval $line
+@@ -5502,14 +5418,14 @@
        LDFLAGS=$force
        LIBS=$unforce
        cat > conftest.$ac_ext <<EOF
 -#line 5506 "configure"
-+#line 5421 "configure"
++#line 5422 "configure"
  #include "confdefs.h"
  
  int main() {
@@ -2616,41 +1562,25 @@
  ; return 0; }
  EOF
 -if { (eval echo configure:5513: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-+if { (eval echo configure:5428: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
++if { (eval echo configure:5429: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
    rm -rf conftest*
    ac_cv_mkshlib_force_and_unforce=$line; break
  else
-   echo "configure: failed program was:" >&5
-   cat conftest.$ac_ext >&5
- fi
- rm -f conftest*
-     done
-@@ -5537,95 +5452,95 @@
- if test "$COMPILE_ENVIRONMENT"; then
- configure_static_assert_macros='
- #define CONFIGURE_STATIC_ASSERT(condition) CONFIGURE_STATIC_ASSERT_IMPL(condition, __LINE__)
- #define CONFIGURE_STATIC_ASSERT_IMPL(condition, line) CONFIGURE_STATIC_ASSERT_IMPL2(condition, line)
- #define CONFIGURE_STATIC_ASSERT_IMPL2(condition, line) typedef int static_assert_line_##line[(condition) ? 1 : -1]
+@@ -5542,7 +5458,7 @@
  '
  
  echo $ac_n "checking that static assertion macros used in autoconf tests work""... $ac_c" 1>&6
 -echo "configure:5546: checking that static assertion macros used in autoconf tests work" >&5
-+echo "configure:5461: checking that static assertion macros used in autoconf tests work" >&5
++echo "configure:5462: checking that static assertion macros used in autoconf tests work" >&5
  if eval "test \"`echo '$''{'ac_cv_static_assertion_macros_work'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
-   
-   ac_ext=c
- # CFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
- ac_cpp='$CPP $CPPFLAGS'
- ac_compile='${CC-cc} -c $CFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
- ac_link='${CC-cc} -o conftest${ac_exeext} $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
- cross_compiling=$ac_cv_prog_cc_cross
+@@ -5556,14 +5472,14 @@
  
    ac_cv_static_assertion_macros_work="yes"
    cat > conftest.$ac_ext <<EOF
 -#line 5560 "configure"
-+#line 5475 "configure"
++#line 5476 "configure"
  #include "confdefs.h"
  $configure_static_assert_macros
  int main() {
@@ -2658,18 +1588,16 @@
  ; return 0; }
  EOF
 -if { (eval echo configure:5567: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
-+if { (eval echo configure:5482: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
++if { (eval echo configure:5483: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
    :
  else
    echo "configure: failed program was:" >&5
-   cat conftest.$ac_ext >&5
-   rm -rf conftest*
-   ac_cv_static_assertion_macros_work="no"
+@@ -5573,14 +5489,14 @@
  fi
  rm -f conftest*
    cat > conftest.$ac_ext <<EOF
 -#line 5577 "configure"
-+#line 5492 "configure"
++#line 5493 "configure"
  #include "confdefs.h"
  $configure_static_assert_macros
  int main() {
@@ -2677,24 +1605,16 @@
  ; return 0; }
  EOF
 -if { (eval echo configure:5584: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
-+if { (eval echo configure:5499: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
++if { (eval echo configure:5500: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
    rm -rf conftest*
    ac_cv_static_assertion_macros_work="no"
  else
-   echo "configure: failed program was:" >&5
-   cat conftest.$ac_ext >&5
- fi
- rm -f conftest*
-   ac_ext=C
- # CXXFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
- ac_cpp='$CXXCPP $CPPFLAGS'
- ac_compile='${CXX-g++} -c $CXXFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
- ac_link='${CXX-g++} -o conftest${ac_exeext} $CXXFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
+@@ -5596,14 +5512,14 @@
  cross_compiling=$ac_cv_prog_cxx_cross
  
    cat > conftest.$ac_ext <<EOF
 -#line 5600 "configure"
-+#line 5515 "configure"
++#line 5516 "configure"
  #include "confdefs.h"
  $configure_static_assert_macros
  int main() {
@@ -2702,18 +1622,16 @@
  ; return 0; }
  EOF
 -if { (eval echo configure:5607: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
-+if { (eval echo configure:5522: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
++if { (eval echo configure:5523: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
    :
  else
    echo "configure: failed program was:" >&5
-   cat conftest.$ac_ext >&5
-   rm -rf conftest*
-   ac_cv_static_assertion_macros_work="no"
+@@ -5613,14 +5529,14 @@
  fi
  rm -f conftest*
    cat > conftest.$ac_ext <<EOF
 -#line 5617 "configure"
-+#line 5532 "configure"
++#line 5533 "configure"
  #include "confdefs.h"
  $configure_static_assert_macros
  int main() {
@@ -2721,29 +1639,19 @@
  ; return 0; }
  EOF
 -if { (eval echo configure:5624: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
-+if { (eval echo configure:5539: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
++if { (eval echo configure:5540: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
    rm -rf conftest*
    ac_cv_static_assertion_macros_work="no"
  else
-   echo "configure: failed program was:" >&5
-   cat conftest.$ac_ext >&5
- fi
- rm -f conftest*
-   ac_ext=C
-@@ -5650,26 +5565,26 @@
- ac_ext=c
- # CFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
- ac_cpp='$CPP $CPPFLAGS'
- ac_compile='${CC-cc} -c $CFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
- ac_link='${CC-cc} -o conftest${ac_exeext} $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
+@@ -5655,16 +5571,16 @@
  cross_compiling=$ac_cv_prog_cc_cross
  
  echo $ac_n "checking for 64-bit OS""... $ac_c" 1>&6
 -echo "configure:5659: checking for 64-bit OS" >&5
-+echo "configure:5574: checking for 64-bit OS" >&5
++echo "configure:5575: checking for 64-bit OS" >&5
  cat > conftest.$ac_ext <<EOF
 -#line 5661 "configure"
-+#line 5576 "configure"
++#line 5577 "configure"
  #include "confdefs.h"
  $configure_static_assert_macros
  int main() {
@@ -2751,98 +1659,76 @@
  ; return 0; }
  EOF
 -if { (eval echo configure:5668: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
-+if { (eval echo configure:5583: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
++if { (eval echo configure:5584: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
    rm -rf conftest*
    result="yes"
  else
-   echo "configure: failed program was:" >&5
-   cat conftest.$ac_ext >&5
-   rm -rf conftest*
-   result="no"
- fi
-@@ -5817,28 +5732,28 @@
-             ac_ext=C
- # CXXFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
- ac_cpp='$CXXCPP $CPPFLAGS'
- ac_compile='${CXX-g++} -c $CXXFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
- ac_link='${CXX-g++} -o conftest${ac_exeext} $CXXFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
+@@ -5743,7 +5659,7 @@
+     LIBXUL_LIBS='$(XPCOM_FROZEN_LDOPTS) $(DIST)/bin/XUL -lobjc'
+     ;;
+ 
+-*-linux*)
++*-linux*|*-kfreebsd*-gnu)
+     HOST_CFLAGS="$HOST_CFLAGS -DXP_UNIX"
+     HOST_NSPR_MDCPUCFG='\"md/_linux.cfg\"'
+     HOST_OPTIMIZE_FLAGS="${HOST_OPTIMIZE_FLAGS=-O3}"
+@@ -5822,9 +5738,9 @@
  cross_compiling=$ac_cv_prog_cxx_cross
  
              echo $ac_n "checking for VisualAge C++ compiler version >= 5.0.2.0""... $ac_c" 1>&6
 -echo "configure:5826: checking for VisualAge C++ compiler version >= 5.0.2.0" >&5
-+echo "configure:5741: checking for VisualAge C++ compiler version >= 5.0.2.0" >&5
++echo "configure:5742: checking for VisualAge C++ compiler version >= 5.0.2.0" >&5
              cat > conftest.$ac_ext <<EOF
 -#line 5828 "configure"
-+#line 5743 "configure"
++#line 5744 "configure"
  #include "confdefs.h"
  
  int main() {
- #if (__IBMCPP__ < 502)
-                  #error "Bad compiler"
+@@ -5833,7 +5749,7 @@
                   #endif
  ; return 0; }
  EOF
 -if { (eval echo configure:5837: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
-+if { (eval echo configure:5752: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
++if { (eval echo configure:5753: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
    rm -rf conftest*
    _BAD_COMPILER=
  else
-   echo "configure: failed program was:" >&5
-   cat conftest.$ac_ext >&5
-   rm -rf conftest*
-   _BAD_COMPILER=1
- fi
-@@ -5866,27 +5781,27 @@
-         DLL_SUFFIX='_shr.a'
-         ;;
-     esac
-     if test "$COMPILE_ENVIRONMENT"; then
-         for ac_hdr in sys/inttypes.h
+@@ -5871,17 +5787,17 @@
  do
  ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
  echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
 -echo "configure:5875: checking for $ac_hdr" >&5
-+echo "configure:5790: checking for $ac_hdr" >&5
++echo "configure:5791: checking for $ac_hdr" >&5
  if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
    cat > conftest.$ac_ext <<EOF
 -#line 5880 "configure"
-+#line 5795 "configure"
++#line 5796 "configure"
  #include "confdefs.h"
  #include <$ac_hdr>
  EOF
  ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
 -{ (eval echo configure:5885: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
-+{ (eval echo configure:5800: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
++{ (eval echo configure:5801: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
  ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
  if test -z "$ac_err"; then
    rm -rf conftest*
-   eval "ac_cv_header_$ac_safe=yes"
- else
-   echo "$ac_err" >&5
-   echo "configure: failed program was:" >&5
-   cat conftest.$ac_ext >&5
-@@ -5918,32 +5833,32 @@
-     no_x=yes
-     MKSHLIB='$(CXX) $(CXXFLAGS) $(DSO_LDOPTS) -Wl,-h,$@ -o $@'
-     _PLATFORM_DEFAULT_TOOLKIT="beos"
-     DSO_LDOPTS='-nostart'
-     TK_LIBS='-lbe -lroot'
+@@ -5923,7 +5839,7 @@
      LIBS="$LIBS -lbe"
      if test "$COMPILE_ENVIRONMENT"; then
          echo $ac_n "checking for main in -lbind""... $ac_c" 1>&6
 -echo "configure:5927: checking for main in -lbind" >&5
-+echo "configure:5842: checking for main in -lbind" >&5
++echo "configure:5843: checking for main in -lbind" >&5
  ac_lib_var=`echo bind'_'main | sed 'y%./+-%__p_%'`
  if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
- else
+@@ -5931,14 +5847,14 @@
    ac_save_LIBS="$LIBS"
  LIBS="-lbind  $LIBS"
  cat > conftest.$ac_ext <<EOF
 -#line 5935 "configure"
-+#line 5850 "configure"
++#line 5851 "configure"
  #include "confdefs.h"
  
  int main() {
@@ -2850,35 +1736,25 @@
  ; return 0; }
  EOF
 -if { (eval echo configure:5942: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-+if { (eval echo configure:5857: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
++if { (eval echo configure:5858: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
    rm -rf conftest*
    eval "ac_cv_lib_$ac_lib_var=yes"
  else
-   echo "configure: failed program was:" >&5
-   cat conftest.$ac_ext >&5
-   rm -rf conftest*
-   eval "ac_cv_lib_$ac_lib_var=no"
- fi
-@@ -5954,32 +5869,32 @@
- if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
-   echo "$ac_t""yes" 1>&6
-   LIBS="$LIBS -lbind"
- else
-   echo "$ac_t""no" 1>&6
+@@ -5959,7 +5875,7 @@
  fi
  
          echo $ac_n "checking for main in -lzeta""... $ac_c" 1>&6
 -echo "configure:5963: checking for main in -lzeta" >&5
-+echo "configure:5878: checking for main in -lzeta" >&5
++echo "configure:5879: checking for main in -lzeta" >&5
  ac_lib_var=`echo zeta'_'main | sed 'y%./+-%__p_%'`
  if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
- else
+@@ -5967,14 +5883,14 @@
    ac_save_LIBS="$LIBS"
  LIBS="-lzeta  $LIBS"
  cat > conftest.$ac_ext <<EOF
 -#line 5971 "configure"
-+#line 5886 "configure"
++#line 5887 "configure"
  #include "confdefs.h"
  
  int main() {
@@ -2886,31 +1762,21 @@
  ; return 0; }
  EOF
 -if { (eval echo configure:5978: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-+if { (eval echo configure:5893: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
++if { (eval echo configure:5894: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
    rm -rf conftest*
    eval "ac_cv_lib_$ac_lib_var=yes"
  else
-   echo "configure: failed program was:" >&5
-   cat conftest.$ac_ext >&5
-   rm -rf conftest*
-   eval "ac_cv_lib_$ac_lib_var=no"
- fi
-@@ -6037,28 +5952,28 @@
-     STRIP="$STRIP -x -S"
-     _PLATFORM_DEFAULT_TOOLKIT='mac'
-     MOZ_ENABLE_POSTSCRIPT=
-     TARGET_NSPR_MDCPUCFG='\"md/_darwin.cfg\"'
-     # set MACOSX to generate lib/mac/MoreFiles/Makefile
+@@ -6042,18 +5958,18 @@
      MACOSX=1
  
          echo $ac_n "checking for -dead_strip option to ld""... $ac_c" 1>&6
 -echo "configure:6046: checking for -dead_strip option to ld" >&5
-+echo "configure:5961: checking for -dead_strip option to ld" >&5
++echo "configure:5962: checking for -dead_strip option to ld" >&5
      _SAVE_LDFLAGS=$LDFLAGS
      LDFLAGS="$LDFLAGS -Wl,-dead_strip"
      cat > conftest.$ac_ext <<EOF
 -#line 6050 "configure"
-+#line 5965 "configure"
++#line 5966 "configure"
  #include "confdefs.h"
  
  int main() {
@@ -2918,21 +1784,11 @@
  ; return 0; }
  EOF
 -if { (eval echo configure:6057: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-+if { (eval echo configure:5972: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
++if { (eval echo configure:5973: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
    rm -rf conftest*
    _HAVE_DEAD_STRIP=1
  else
-   echo "configure: failed program was:" >&5
-   cat conftest.$ac_ext >&5
-   rm -rf conftest*
-   _HAVE_DEAD_STRIP=
- fi
-@@ -6187,18 +6102,16 @@
-     	CFLAGS="$CFLAGS -mieee"
-     	CXXFLAGS="$CXXFLAGS -mieee"
-     ;;
-     i*86)
-     	USE_ELF_DYNSTR_GC=1
+@@ -6192,8 +6108,6 @@
          MOZ_ENABLE_OLD_ABI_COMPAT_WRAPPERS=1
      ;;
      mips*)
@@ -2941,22 +1797,12 @@
      ;;
      esac
      ;;
- 
- *-wince*)
- 
-     MOZ_TOOLS_DIR=`echo $MOZ_TOOLS`
-     AR_LIST="$AR -list"
-@@ -6916,24 +6829,24 @@
- 
-        CFLAGS="$CFLAGS -xstrconst -xbuiltin=%all"
-        CXXFLAGS="$CXXFLAGS -xbuiltin=%all -features=tmplife"
-        LDFLAGS="-xildoff -zlazyload -zcombreloc $LDFLAGS"
-        if test -z "$CROSS_COMPILE" && test -f /usr/lib/ld/map.noexstk; then
+@@ -6921,14 +6835,14 @@
             _SAVE_LDFLAGS=$LDFLAGS
             LDFLAGS="-M /usr/lib/ld/map.noexstk $LDFLAGS" 
             cat > conftest.$ac_ext <<EOF
 -#line 6925 "configure"
-+#line 6838 "configure"
++#line 6839 "configure"
  #include "confdefs.h"
  #include <stdio.h>
  int main() {
@@ -2964,846 +1810,548 @@
  ; return 0; }
  EOF
 -if { (eval echo configure:6932: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-+if { (eval echo configure:6845: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
++if { (eval echo configure:6846: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
    :
  else
    echo "configure: failed program was:" >&5
-   cat conftest.$ac_ext >&5
-   rm -rf conftest*
-   LDFLAGS=$_SAVE_LDFLAGS
- fi
- rm -f conftest*
-@@ -6951,36 +6864,36 @@
-        AR_FLAGS='-o $@'
-        AS='/usr/ccs/bin/as'
-        ASFLAGS="$ASFLAGS -K PIC -L -P -D_ASM -D__STDC__=0"
-        AS_DASH_C_FLAG=''
-        TARGET_COMPILER_ABI="sunc"
+@@ -6956,7 +6870,7 @@
          CC_VERSION=`$CC -V 2>&1 | grep '^cc:' 2>/dev/null | $AWK -F\: '{ print $2 }'`
          CXX_VERSION=`$CXX -V 2>&1 | grep '^CC:' 2>/dev/null | $AWK -F\: '{ print $2 }'`
         echo $ac_n "checking for Forte compiler version >= WS6U2""... $ac_c" 1>&6
 -echo "configure:6960: checking for Forte compiler version >= WS6U2" >&5
-+echo "configure:6873: checking for Forte compiler version >= WS6U2" >&5
++echo "configure:6874: checking for Forte compiler version >= WS6U2" >&5
         
         ac_ext=C
  # CXXFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
- ac_cpp='$CXXCPP $CPPFLAGS'
- ac_compile='${CXX-g++} -c $CXXFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
- ac_link='${CXX-g++} -o conftest${ac_exeext} $CXXFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
+@@ -6966,7 +6880,7 @@
  cross_compiling=$ac_cv_prog_cxx_cross
  
         cat > conftest.$ac_ext <<EOF
 -#line 6970 "configure"
-+#line 6883 "configure"
++#line 6884 "configure"
  #include "confdefs.h"
  
  int main() {
- #if (__SUNPRO_CC < 0x530)
-            #error "Denied"
+@@ -6975,7 +6889,7 @@
             #endif
  ; return 0; }
  EOF
 -if { (eval echo configure:6979: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
-+if { (eval echo configure:6892: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
++if { (eval echo configure:6893: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
    rm -rf conftest*
    _BAD_COMPILER=
  else
-   echo "configure: failed program was:" >&5
-   cat conftest.$ac_ext >&5
-   rm -rf conftest*
-   _BAD_COMPILER=1
- fi
-@@ -7120,47 +7033,47 @@
- ac_ext=c
- # CFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
- ac_cpp='$CPP $CPPFLAGS'
- ac_compile='${CC-cc} -c $CFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
- ac_link='${CC-cc} -o conftest${ac_exeext} $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
- cross_compiling=$ac_cv_prog_cc_cross
+@@ -7085,7 +6999,7 @@
+ esac
+ 
+ case "$target" in
+-    *-linux*)
++    *-linux*|*-kfreebsd*-gnu)
+         MOZ_COMPONENTS_VERSION_SCRIPT_LDFLAGS='-Wl,--version-script -Wl,$(BUILD_TOOLS)/gnu-ld-scripts/components-version-script'
+         ;;
+     *-solaris*)
+@@ -7125,12 +7039,12 @@
+ cross_compiling=$ac_cv_prog_cc_cross
  
  echo $ac_n "checking for ANSI C header files""... $ac_c" 1>&6
 -echo "configure:7129: checking for ANSI C header files" >&5
-+echo "configure:7042: checking for ANSI C header files" >&5
++echo "configure:7043: checking for ANSI C header files" >&5
  if eval "test \"`echo '$''{'ac_cv_header_stdc'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
    cat > conftest.$ac_ext <<EOF
 -#line 7134 "configure"
-+#line 7047 "configure"
++#line 7048 "configure"
  #include "confdefs.h"
  #include <stdlib.h>
  #include <stdarg.h>
- #include <string.h>
+@@ -7138,7 +7052,7 @@
  #include <float.h>
  EOF
  ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
 -{ (eval echo configure:7142: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
-+{ (eval echo configure:7055: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
++{ (eval echo configure:7056: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
  ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
  if test -z "$ac_err"; then
    rm -rf conftest*
-   ac_cv_header_stdc=yes
- else
-   echo "$ac_err" >&5
-   echo "configure: failed program was:" >&5
-   cat conftest.$ac_ext >&5
-   rm -rf conftest*
-   ac_cv_header_stdc=no
- fi
- rm -f conftest*
- 
+@@ -7155,7 +7069,7 @@
  if test $ac_cv_header_stdc = yes; then
    # SunOS 4.x string.h does not declare mem*, contrary to ANSI.
  cat > conftest.$ac_ext <<EOF
 -#line 7159 "configure"
-+#line 7072 "configure"
++#line 7073 "configure"
  #include "confdefs.h"
  #include <string.h>
  EOF
- if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
-   egrep "memchr" >/dev/null 2>&1; then
-   :
- else
-   rm -rf conftest*
-@@ -7168,17 +7081,17 @@
- fi
- rm -f conftest*
- 
- fi
- 
+@@ -7173,7 +7087,7 @@
  if test $ac_cv_header_stdc = yes; then
    # ISC 2.0.2 stdlib.h does not declare free, contrary to ANSI.
  cat > conftest.$ac_ext <<EOF
 -#line 7177 "configure"
-+#line 7090 "configure"
++#line 7091 "configure"
  #include "confdefs.h"
  #include <stdlib.h>
  EOF
- if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
-   egrep "free" >/dev/null 2>&1; then
-   :
- else
-   rm -rf conftest*
-@@ -7189,28 +7102,28 @@
- fi
- 
- if test $ac_cv_header_stdc = yes; then
-   # /bin/cc in Irix-4.0.5 gets non-ANSI ctype macros unless using -ansi.
- if test "$cross_compiling" = yes; then
+@@ -7194,7 +7108,7 @@
    :
  else
    cat > conftest.$ac_ext <<EOF
 -#line 7198 "configure"
-+#line 7111 "configure"
++#line 7112 "configure"
  #include "confdefs.h"
  #include <ctype.h>
  #define ISLOWER(c) ('a' <= (c) && (c) <= 'z')
- #define TOUPPER(c) (ISLOWER(c) ? 'A' + ((c) - 'a') : (c))
- #define XOR(e, f) (((e) && !(f)) || (!(e) && (f)))
- int main () { int i; for (i = 0; i < 256; i++)
- if (XOR (islower (i), ISLOWER (i)) || toupper (i) != TOUPPER (i)) exit(2);
+@@ -7205,7 +7119,7 @@
  exit (0); }
  
  EOF
 -if { (eval echo configure:7209: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
-+if { (eval echo configure:7122: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
++if { (eval echo configure:7123: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
  then
    :
  else
-   echo "configure: failed program was:" >&5
-   cat conftest.$ac_ext >&5
-   rm -fr conftest*
-   ac_cv_header_stdc=no
- fi
-@@ -7224,22 +7137,22 @@
- if test $ac_cv_header_stdc = yes; then
-   cat >> confdefs.h <<\EOF
- #define STDC_HEADERS 1
- EOF
- 
+@@ -7229,12 +7143,12 @@
  fi
  
  echo $ac_n "checking for working const""... $ac_c" 1>&6
 -echo "configure:7233: checking for working const" >&5
-+echo "configure:7146: checking for working const" >&5
++echo "configure:7147: checking for working const" >&5
  if eval "test \"`echo '$''{'ac_cv_c_const'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
    cat > conftest.$ac_ext <<EOF
 -#line 7238 "configure"
-+#line 7151 "configure"
++#line 7152 "configure"
  #include "confdefs.h"
  
  int main() {
- 
- /* Ultrix mips cc rejects this.  */
- typedef int charset[2]; const charset x;
- /* SunOS 4.1.1 cc rejects this.  */
- char const *const *ccp;
-@@ -7278,17 +7191,17 @@
-   struct s *b; b->j = 5;
- }
- { /* ULTRIX-32 V3.1 (Rev 9) vcc rejects this */
-   const int foo = 10;
- }
+@@ -7283,7 +7197,7 @@
  
  ; return 0; }
  EOF
 -if { (eval echo configure:7287: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
-+if { (eval echo configure:7200: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
++if { (eval echo configure:7201: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
    rm -rf conftest*
    ac_cv_c_const=yes
  else
-   echo "configure: failed program was:" >&5
-   cat conftest.$ac_ext >&5
-   rm -rf conftest*
-   ac_cv_c_const=no
- fi
-@@ -7299,22 +7212,22 @@
- if test $ac_cv_c_const = no; then
-   cat >> confdefs.h <<\EOF
- #define const 
- EOF
- 
+@@ -7304,12 +7218,12 @@
  fi
  
  echo $ac_n "checking for mode_t""... $ac_c" 1>&6
 -echo "configure:7308: checking for mode_t" >&5
-+echo "configure:7221: checking for mode_t" >&5
++echo "configure:7222: checking for mode_t" >&5
  if eval "test \"`echo '$''{'ac_cv_type_mode_t'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
    cat > conftest.$ac_ext <<EOF
 -#line 7313 "configure"
-+#line 7226 "configure"
++#line 7227 "configure"
  #include "confdefs.h"
  #include <sys/types.h>
  #if STDC_HEADERS
- #include <stdlib.h>
- #include <stddef.h>
- #endif
- EOF
- if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
-@@ -7332,22 +7245,22 @@
- if test $ac_cv_type_mode_t = no; then
-   cat >> confdefs.h <<\EOF
- #define mode_t int
- EOF
- 
+@@ -7337,12 +7251,12 @@
  fi
  
  echo $ac_n "checking for off_t""... $ac_c" 1>&6
 -echo "configure:7341: checking for off_t" >&5
-+echo "configure:7254: checking for off_t" >&5
++echo "configure:7255: checking for off_t" >&5
  if eval "test \"`echo '$''{'ac_cv_type_off_t'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
    cat > conftest.$ac_ext <<EOF
 -#line 7346 "configure"
-+#line 7259 "configure"
++#line 7260 "configure"
  #include "confdefs.h"
  #include <sys/types.h>
  #if STDC_HEADERS
- #include <stdlib.h>
- #include <stddef.h>
- #endif
- EOF
- if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
-@@ -7365,22 +7278,22 @@
- if test $ac_cv_type_off_t = no; then
-   cat >> confdefs.h <<\EOF
- #define off_t long
- EOF
- 
+@@ -7370,12 +7284,12 @@
  fi
  
  echo $ac_n "checking for pid_t""... $ac_c" 1>&6
 -echo "configure:7374: checking for pid_t" >&5
-+echo "configure:7287: checking for pid_t" >&5
++echo "configure:7288: checking for pid_t" >&5
  if eval "test \"`echo '$''{'ac_cv_type_pid_t'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
    cat > conftest.$ac_ext <<EOF
 -#line 7379 "configure"
-+#line 7292 "configure"
++#line 7293 "configure"
  #include "confdefs.h"
  #include <sys/types.h>
  #if STDC_HEADERS
- #include <stdlib.h>
- #include <stddef.h>
- #endif
- EOF
- if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
-@@ -7398,22 +7311,22 @@
- if test $ac_cv_type_pid_t = no; then
-   cat >> confdefs.h <<\EOF
- #define pid_t int
- EOF
- 
+@@ -7403,12 +7317,12 @@
  fi
  
  echo $ac_n "checking for size_t""... $ac_c" 1>&6
 -echo "configure:7407: checking for size_t" >&5
-+echo "configure:7320: checking for size_t" >&5
++echo "configure:7321: checking for size_t" >&5
  if eval "test \"`echo '$''{'ac_cv_type_size_t'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
    cat > conftest.$ac_ext <<EOF
 -#line 7412 "configure"
-+#line 7325 "configure"
++#line 7326 "configure"
  #include "confdefs.h"
  #include <sys/types.h>
  #if STDC_HEADERS
- #include <stdlib.h>
- #include <stddef.h>
- #endif
- EOF
- if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
-@@ -7431,30 +7344,30 @@
- if test $ac_cv_type_size_t = no; then
-   cat >> confdefs.h <<\EOF
- #define size_t unsigned
- EOF
- 
+@@ -7436,12 +7350,12 @@
  fi
  
  echo $ac_n "checking for st_blksize in struct stat""... $ac_c" 1>&6
 -echo "configure:7440: checking for st_blksize in struct stat" >&5
-+echo "configure:7353: checking for st_blksize in struct stat" >&5
++echo "configure:7354: checking for st_blksize in struct stat" >&5
  if eval "test \"`echo '$''{'ac_cv_struct_st_blksize'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
    cat > conftest.$ac_ext <<EOF
 -#line 7445 "configure"
-+#line 7358 "configure"
++#line 7359 "configure"
  #include "confdefs.h"
  #include <sys/types.h>
  #include <sys/stat.h>
- int main() {
+@@ -7449,7 +7363,7 @@
  struct stat s; s.st_blksize;
  ; return 0; }
  EOF
 -if { (eval echo configure:7453: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
-+if { (eval echo configure:7366: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
++if { (eval echo configure:7367: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
    rm -rf conftest*
    ac_cv_struct_st_blksize=yes
  else
-   echo "configure: failed program was:" >&5
-   cat conftest.$ac_ext >&5
-   rm -rf conftest*
-   ac_cv_struct_st_blksize=no
- fi
-@@ -7465,30 +7378,30 @@
- if test $ac_cv_struct_st_blksize = yes; then
-   cat >> confdefs.h <<\EOF
- #define HAVE_ST_BLKSIZE 1
- EOF
- 
+@@ -7470,12 +7384,12 @@
  fi
  
  echo $ac_n "checking for siginfo_t""... $ac_c" 1>&6
 -echo "configure:7474: checking for siginfo_t" >&5
-+echo "configure:7387: checking for siginfo_t" >&5
++echo "configure:7388: checking for siginfo_t" >&5
  if eval "test \"`echo '$''{'ac_cv_siginfo_t'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
    cat > conftest.$ac_ext <<EOF
 -#line 7479 "configure"
-+#line 7392 "configure"
++#line 7393 "configure"
  #include "confdefs.h"
  #define _POSIX_C_SOURCE 199506L
                    #include <signal.h>
- int main() {
+@@ -7483,7 +7397,7 @@
  siginfo_t* info;
  ; return 0; }
  EOF
 -if { (eval echo configure:7487: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
-+if { (eval echo configure:7400: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
++if { (eval echo configure:7401: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
    rm -rf conftest*
    ac_cv_siginfo_t=true
  else
-   echo "configure: failed program was:" >&5
-   cat conftest.$ac_ext >&5
-   rm -rf conftest*
-   ac_cv_siginfo_t=false
- fi
-@@ -7512,30 +7425,30 @@
- 
-    cat >> confdefs.h <<\EOF
- #define __off_t 1
- EOF
- 
+@@ -7517,12 +7431,12 @@
  fi
  
  echo $ac_n "checking for int16_t""... $ac_c" 1>&6
 -echo "configure:7521: checking for int16_t" >&5
-+echo "configure:7434: checking for int16_t" >&5
++echo "configure:7435: checking for int16_t" >&5
  if eval "test \"`echo '$''{'ac_cv_int16_t'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
    cat > conftest.$ac_ext <<EOF
 -#line 7526 "configure"
-+#line 7439 "configure"
++#line 7440 "configure"
  #include "confdefs.h"
  #include <stdio.h>
                    #include <sys/types.h>
- int main() {
+@@ -7530,7 +7444,7 @@
  int16_t foo = 0;
  ; return 0; }
  EOF
 -if { (eval echo configure:7534: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
-+if { (eval echo configure:7447: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
++if { (eval echo configure:7448: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
    rm -rf conftest*
    ac_cv_int16_t=true
  else
-   echo "configure: failed program was:" >&5
-   cat conftest.$ac_ext >&5
-   rm -rf conftest*
-   ac_cv_int16_t=false
- fi
-@@ -7547,30 +7460,30 @@
- #define HAVE_INT16_T 1
- EOF
- 
-   echo "$ac_t""yes" 1>&6
- else
+@@ -7552,12 +7466,12 @@
    echo "$ac_t""no" 1>&6
  fi
  echo $ac_n "checking for int32_t""... $ac_c" 1>&6
 -echo "configure:7556: checking for int32_t" >&5
-+echo "configure:7469: checking for int32_t" >&5
++echo "configure:7470: checking for int32_t" >&5
  if eval "test \"`echo '$''{'ac_cv_int32_t'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
    cat > conftest.$ac_ext <<EOF
 -#line 7561 "configure"
-+#line 7474 "configure"
++#line 7475 "configure"
  #include "confdefs.h"
  #include <stdio.h>
                    #include <sys/types.h>
- int main() {
+@@ -7565,7 +7479,7 @@
  int32_t foo = 0;
  ; return 0; }
  EOF
 -if { (eval echo configure:7569: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
-+if { (eval echo configure:7482: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
++if { (eval echo configure:7483: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
    rm -rf conftest*
    ac_cv_int32_t=true
  else
-   echo "configure: failed program was:" >&5
-   cat conftest.$ac_ext >&5
-   rm -rf conftest*
-   ac_cv_int32_t=false
- fi
-@@ -7582,30 +7495,30 @@
- #define HAVE_INT32_T 1
- EOF
- 
-   echo "$ac_t""yes" 1>&6
- else
+@@ -7587,12 +7501,12 @@
    echo "$ac_t""no" 1>&6
  fi
  echo $ac_n "checking for int64_t""... $ac_c" 1>&6
 -echo "configure:7591: checking for int64_t" >&5
-+echo "configure:7504: checking for int64_t" >&5
++echo "configure:7505: checking for int64_t" >&5
  if eval "test \"`echo '$''{'ac_cv_int64_t'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
    cat > conftest.$ac_ext <<EOF
 -#line 7596 "configure"
-+#line 7509 "configure"
++#line 7510 "configure"
  #include "confdefs.h"
  #include <stdio.h>
                    #include <sys/types.h>
- int main() {
+@@ -7600,7 +7514,7 @@
  int64_t foo = 0;
  ; return 0; }
  EOF
 -if { (eval echo configure:7604: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
-+if { (eval echo configure:7517: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
++if { (eval echo configure:7518: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
    rm -rf conftest*
    ac_cv_int64_t=true
  else
-   echo "configure: failed program was:" >&5
-   cat conftest.$ac_ext >&5
-   rm -rf conftest*
-   ac_cv_int64_t=false
- fi
-@@ -7617,30 +7530,30 @@
- #define HAVE_INT64_T 1
- EOF
- 
-   echo "$ac_t""yes" 1>&6
- else
+@@ -7622,12 +7536,12 @@
    echo "$ac_t""no" 1>&6
  fi
  echo $ac_n "checking for int64""... $ac_c" 1>&6
 -echo "configure:7626: checking for int64" >&5
-+echo "configure:7539: checking for int64" >&5
++echo "configure:7540: checking for int64" >&5
  if eval "test \"`echo '$''{'ac_cv_int64'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
    cat > conftest.$ac_ext <<EOF
 -#line 7631 "configure"
-+#line 7544 "configure"
++#line 7545 "configure"
  #include "confdefs.h"
  #include <stdio.h>
                    #include <sys/types.h>
- int main() {
+@@ -7635,7 +7549,7 @@
  int64 foo = 0;
  ; return 0; }
  EOF
 -if { (eval echo configure:7639: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
-+if { (eval echo configure:7552: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
++if { (eval echo configure:7553: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
    rm -rf conftest*
    ac_cv_int64=true
  else
-   echo "configure: failed program was:" >&5
-   cat conftest.$ac_ext >&5
-   rm -rf conftest*
-   ac_cv_int64=false
- fi
-@@ -7652,30 +7565,30 @@
- #define HAVE_INT64 1
- EOF
- 
-   echo "$ac_t""yes" 1>&6
- else
+@@ -7657,12 +7571,12 @@
    echo "$ac_t""no" 1>&6
  fi
  echo $ac_n "checking for uint""... $ac_c" 1>&6
 -echo "configure:7661: checking for uint" >&5
-+echo "configure:7574: checking for uint" >&5
++echo "configure:7575: checking for uint" >&5
  if eval "test \"`echo '$''{'ac_cv_uint'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
    cat > conftest.$ac_ext <<EOF
 -#line 7666 "configure"
-+#line 7579 "configure"
++#line 7580 "configure"
  #include "confdefs.h"
  #include <stdio.h>
                    #include <sys/types.h>
- int main() {
+@@ -7670,7 +7584,7 @@
  uint foo = 0;
  ; return 0; }
  EOF
 -if { (eval echo configure:7674: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
-+if { (eval echo configure:7587: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
++if { (eval echo configure:7588: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
    rm -rf conftest*
    ac_cv_uint=true
  else
-   echo "configure: failed program was:" >&5
-   cat conftest.$ac_ext >&5
-   rm -rf conftest*
-   ac_cv_uint=false
- fi
-@@ -7687,30 +7600,30 @@
- #define HAVE_UINT 1
- EOF
- 
-   echo "$ac_t""yes" 1>&6
- else
+@@ -7692,12 +7606,12 @@
    echo "$ac_t""no" 1>&6
  fi
  echo $ac_n "checking for uint_t""... $ac_c" 1>&6
 -echo "configure:7696: checking for uint_t" >&5
-+echo "configure:7609: checking for uint_t" >&5
++echo "configure:7610: checking for uint_t" >&5
  if eval "test \"`echo '$''{'ac_cv_uint_t'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
    cat > conftest.$ac_ext <<EOF
 -#line 7701 "configure"
-+#line 7614 "configure"
++#line 7615 "configure"
  #include "confdefs.h"
  #include <stdio.h>
                    #include <sys/types.h>
- int main() {
+@@ -7705,7 +7619,7 @@
  uint_t foo = 0;
  ; return 0; }
  EOF
 -if { (eval echo configure:7709: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
-+if { (eval echo configure:7622: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
++if { (eval echo configure:7623: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
    rm -rf conftest*
    ac_cv_uint_t=true
  else
-   echo "configure: failed program was:" >&5
-   cat conftest.$ac_ext >&5
-   rm -rf conftest*
-   ac_cv_uint_t=false
- fi
-@@ -7722,30 +7635,30 @@
- #define HAVE_UINT_T 1
- EOF
- 
-   echo "$ac_t""yes" 1>&6
- else
+@@ -7727,12 +7641,12 @@
    echo "$ac_t""no" 1>&6
  fi
  echo $ac_n "checking for uint16_t""... $ac_c" 1>&6
 -echo "configure:7731: checking for uint16_t" >&5
-+echo "configure:7644: checking for uint16_t" >&5
++echo "configure:7645: checking for uint16_t" >&5
  if eval "test \"`echo '$''{'ac_cv_uint16_t'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
    cat > conftest.$ac_ext <<EOF
 -#line 7736 "configure"
-+#line 7649 "configure"
++#line 7650 "configure"
  #include "confdefs.h"
  #include <stdio.h>
                    #include <sys/types.h>
- int main() {
+@@ -7740,7 +7654,7 @@
  uint16_t foo = 0;
  ; return 0; }
  EOF
 -if { (eval echo configure:7744: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
-+if { (eval echo configure:7657: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
++if { (eval echo configure:7658: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
    rm -rf conftest*
    ac_cv_uint16_t=true
  else
-   echo "configure: failed program was:" >&5
-   cat conftest.$ac_ext >&5
-   rm -rf conftest*
-   ac_cv_uint16_t=false
- fi
-@@ -7766,30 +7679,30 @@
- # CXXFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
- ac_cpp='$CXXCPP $CPPFLAGS'
- ac_compile='${CXX-g++} -c $CXXFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
- ac_link='${CXX-g++} -o conftest${ac_exeext} $CXXFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
- cross_compiling=$ac_cv_prog_cxx_cross
+@@ -7771,12 +7685,12 @@
  
  
  echo $ac_n "checking for uname.domainname""... $ac_c" 1>&6
 -echo "configure:7775: checking for uname.domainname" >&5
-+echo "configure:7688: checking for uname.domainname" >&5
++echo "configure:7689: checking for uname.domainname" >&5
  if eval "test \"`echo '$''{'ac_cv_have_uname_domainname_field'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
    cat > conftest.$ac_ext <<EOF
 -#line 7780 "configure"
-+#line 7693 "configure"
++#line 7694 "configure"
  #include "confdefs.h"
  #include <sys/utsname.h>
  int main() {
-  struct utsname *res; char *domain; 
+@@ -7784,7 +7698,7 @@
              (void)uname(res);  if (res != 0) { domain = res->domainname; } 
  ; return 0; }
  EOF
 -if { (eval echo configure:7788: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
-+if { (eval echo configure:7701: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
++if { (eval echo configure:7702: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
    rm -rf conftest*
    ac_cv_have_uname_domainname_field=true
  else
-   echo "configure: failed program was:" >&5
-   cat conftest.$ac_ext >&5
-   rm -rf conftest*
-   ac_cv_have_uname_domainname_field=false
- fi
-@@ -7803,30 +7716,30 @@
- EOF
- 
-     echo "$ac_t""yes" 1>&6
- else
-     echo "$ac_t""no" 1>&6
+@@ -7808,12 +7722,12 @@
  fi
  
  echo $ac_n "checking for uname.__domainname""... $ac_c" 1>&6
 -echo "configure:7812: checking for uname.__domainname" >&5
-+echo "configure:7725: checking for uname.__domainname" >&5
++echo "configure:7726: checking for uname.__domainname" >&5
  if eval "test \"`echo '$''{'ac_cv_have_uname_us_domainname_field'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
    cat > conftest.$ac_ext <<EOF
 -#line 7817 "configure"
-+#line 7730 "configure"
++#line 7731 "configure"
  #include "confdefs.h"
  #include <sys/utsname.h>
  int main() {
-  struct utsname *res; char *domain; 
+@@ -7821,7 +7735,7 @@
              (void)uname(res);  if (res != 0) { domain = res->__domainname; } 
  ; return 0; }
  EOF
 -if { (eval echo configure:7825: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
-+if { (eval echo configure:7738: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
++if { (eval echo configure:7739: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
    rm -rf conftest*
    ac_cv_have_uname_us_domainname_field=true
  else
-   echo "configure: failed program was:" >&5
-   cat conftest.$ac_ext >&5
-   rm -rf conftest*
-   ac_cv_have_uname_us_domainname_field=false
- fi
-@@ -7849,31 +7762,31 @@
- ac_cpp='$CPP $CPPFLAGS'
- ac_compile='${CC-cc} -c $CFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
- ac_link='${CC-cc} -o conftest${ac_exeext} $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
- cross_compiling=$ac_cv_prog_cc_cross
- 
+@@ -7854,12 +7768,12 @@
  
  
  echo $ac_n "checking for usable wchar_t (2 bytes, unsigned)""... $ac_c" 1>&6
 -echo "configure:7858: checking for usable wchar_t (2 bytes, unsigned)" >&5
-+echo "configure:7771: checking for usable wchar_t (2 bytes, unsigned)" >&5
++echo "configure:7772: checking for usable wchar_t (2 bytes, unsigned)" >&5
  if eval "test \"`echo '$''{'ac_cv_have_usable_wchar_v2'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
    cat > conftest.$ac_ext <<EOF
 -#line 7863 "configure"
-+#line 7776 "configure"
++#line 7777 "configure"
  #include "confdefs.h"
  #include <stddef.h>
                       $configure_static_assert_macros
- int main() {
- CONFIGURE_STATIC_ASSERT(sizeof(wchar_t) == 2);
+@@ -7868,7 +7782,7 @@
                       CONFIGURE_STATIC_ASSERT((wchar_t)-1 > (wchar_t) 0)
  ; return 0; }
  EOF
 -if { (eval echo configure:7872: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
-+if { (eval echo configure:7785: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
++if { (eval echo configure:7786: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
    rm -rf conftest*
    ac_cv_have_usable_wchar_v2="yes"
  else
-   echo "configure: failed program was:" >&5
-   cat conftest.$ac_ext >&5
-   rm -rf conftest*
-   ac_cv_have_usable_wchar_v2="no"
- fi
-@@ -7896,31 +7809,31 @@
- ac_compile='${CXX-g++} -c $CXXFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
- ac_link='${CXX-g++} -o conftest${ac_exeext} $CXXFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
- cross_compiling=$ac_cv_prog_cxx_cross
- 
-     _SAVE_CXXFLAGS=$CXXFLAGS
+@@ -7901,12 +7815,12 @@
      CXXFLAGS="$CXXFLAGS -fshort-wchar"
  
      echo $ac_n "checking for compiler -fshort-wchar option""... $ac_c" 1>&6
 -echo "configure:7905: checking for compiler -fshort-wchar option" >&5
-+echo "configure:7818: checking for compiler -fshort-wchar option" >&5
++echo "configure:7819: checking for compiler -fshort-wchar option" >&5
  if eval "test \"`echo '$''{'ac_cv_have_usable_wchar_option_v2'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
    cat > conftest.$ac_ext <<EOF
 -#line 7910 "configure"
-+#line 7823 "configure"
++#line 7824 "configure"
  #include "confdefs.h"
  #include <stddef.h>
                           $configure_static_assert_macros
- int main() {
- CONFIGURE_STATIC_ASSERT(sizeof(wchar_t) == 2);
+@@ -7915,7 +7829,7 @@
                           CONFIGURE_STATIC_ASSERT((wchar_t)-1 > (wchar_t) 0)
  ; return 0; }
  EOF
 -if { (eval echo configure:7919: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
-+if { (eval echo configure:7832: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
++if { (eval echo configure:7833: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
    rm -rf conftest*
    ac_cv_have_usable_wchar_option_v2="yes"
  else
-   echo "configure: failed program was:" >&5
-   cat conftest.$ac_ext >&5
-   rm -rf conftest*
-   ac_cv_have_usable_wchar_option_v2="no"
- fi
-@@ -7944,17 +7857,17 @@
- ac_compile='${CC-cc} -c $CFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
- ac_link='${CC-cc} -o conftest${ac_exeext} $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
- cross_compiling=$ac_cv_prog_cc_cross
- 
- fi
+@@ -7949,7 +7863,7 @@
  
  if test "$GNU_CC"; then
    echo $ac_n "checking for visibility(hidden) attribute""... $ac_c" 1>&6
 -echo "configure:7953: checking for visibility(hidden) attribute" >&5
-+echo "configure:7866: checking for visibility(hidden) attribute" >&5
++echo "configure:7867: checking for visibility(hidden) attribute" >&5
  if eval "test \"`echo '$''{'ac_cv_visibility_hidden'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
-   cat > conftest.c <<EOF
-                   int foo __attribute__ ((visibility ("hidden"))) = 1;
- EOF
-                   ac_cv_visibility_hidden=no
-                   if ${CC-cc} -Werror -S conftest.c -o conftest.s >/dev/null 2>&1; then
-@@ -7969,17 +7882,17 @@
- echo "$ac_t""$ac_cv_visibility_hidden" 1>&6
-   if test "$ac_cv_visibility_hidden" = "yes"; then
-     cat >> confdefs.h <<\EOF
- #define HAVE_VISIBILITY_HIDDEN_ATTRIBUTE 1
- EOF
+@@ -7974,7 +7888,7 @@
  
  
      echo $ac_n "checking for visibility(default) attribute""... $ac_c" 1>&6
 -echo "configure:7978: checking for visibility(default) attribute" >&5
-+echo "configure:7891: checking for visibility(default) attribute" >&5
++echo "configure:7892: checking for visibility(default) attribute" >&5
  if eval "test \"`echo '$''{'ac_cv_visibility_default'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
-   cat > conftest.c <<EOF
-                     int foo __attribute__ ((visibility ("default"))) = 1;
- EOF
-                     ac_cv_visibility_default=no
-                     if ${CC-cc} -fvisibility=hidden -Werror -S conftest.c -o conftest.s >/dev/null 2>&1; then
-@@ -7994,17 +7907,17 @@
- echo "$ac_t""$ac_cv_visibility_default" 1>&6
-     if test "$ac_cv_visibility_default" = "yes"; then
-       cat >> confdefs.h <<\EOF
- #define HAVE_VISIBILITY_ATTRIBUTE 1
- EOF
+@@ -7999,7 +7913,7 @@
  
  
        echo $ac_n "checking for visibility pragma support""... $ac_c" 1>&6
 -echo "configure:8003: checking for visibility pragma support" >&5
-+echo "configure:7916: checking for visibility pragma support" >&5
++echo "configure:7917: checking for visibility pragma support" >&5
  if eval "test \"`echo '$''{'ac_cv_visibility_pragma'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
-   cat > conftest.c <<EOF
- #pragma GCC visibility push(hidden)
-                       int foo_hidden = 1;
- #pragma GCC visibility push(default)
-                       int foo_default = 1;
-@@ -8019,17 +7932,17 @@
-                       fi
-                       rm -f conftest.cs
-                     
- fi
- 
+@@ -8024,7 +7938,7 @@
  echo "$ac_t""$ac_cv_visibility_pragma" 1>&6
        if test "$ac_cv_visibility_pragma" = "yes"; then
          echo $ac_n "checking For gcc visibility bug with class-level attributes (GCC bug 26905)""... $ac_c" 1>&6
 -echo "configure:8028: checking For gcc visibility bug with class-level attributes (GCC bug 26905)" >&5
-+echo "configure:7941: checking For gcc visibility bug with class-level attributes (GCC bug 26905)" >&5
++echo "configure:7942: checking For gcc visibility bug with class-level attributes (GCC bug 26905)" >&5
  if eval "test \"`echo '$''{'ac_cv_have_visibility_class_bug'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
-   cat > conftest.c <<EOF
- #pragma GCC visibility push(hidden)
- struct __attribute__ ((visibility ("default"))) TestStruct {
-   static void Init();
- };
-@@ -8047,17 +7960,17 @@
-                        fi
-                        rm -rf conftest.{c,S}
-                        
- fi
- 
+@@ -8052,7 +7966,7 @@
  echo "$ac_t""$ac_cv_have_visibility_class_bug" 1>&6
  
          echo $ac_n "checking For x86_64 gcc visibility bug with builtins (GCC bug 20297)""... $ac_c" 1>&6
 -echo "configure:8056: checking For x86_64 gcc visibility bug with builtins (GCC bug 20297)" >&5
-+echo "configure:7969: checking For x86_64 gcc visibility bug with builtins (GCC bug 20297)" >&5
++echo "configure:7970: checking For x86_64 gcc visibility bug with builtins (GCC bug 20297)" >&5
  if eval "test \"`echo '$''{'ac_cv_have_visibility_builtin_bug'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
-   cat > conftest.c <<EOF
- #pragma GCC visibility push(hidden)
- #pragma GCC visibility push(default)
- #include <string.h>
- #pragma GCC visibility pop
-@@ -8077,48 +7990,47 @@
-                        fi
-                        rm -f conftest.{c,S}
-                        
- fi
- 
+@@ -8082,8 +7996,7 @@
  echo "$ac_t""$ac_cv_have_visibility_builtin_bug" 1>&6
          if test "$ac_cv_have_visibility_builtin_bug" = "no" -a \
                  "$ac_cv_have_visibility_class_bug" = "no"; then
@@ -3813,1592 +2361,1020 @@
          else
            VISIBILITY_FLAGS='-fvisibility=hidden'
          fi # have visibility pragma bug
-       fi   # have visibility pragma
-     fi     # have visibility(default) attribute
-   fi       # have visibility(hidden) attribute
- fi         # GNU_CC
- 
- 
- 
- 
- ac_header_dirent=no
- for ac_hdr in dirent.h sys/ndir.h sys/dir.h ndir.h
+@@ -8100,12 +8013,12 @@
  do
  ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
  echo $ac_n "checking for $ac_hdr that defines DIR""... $ac_c" 1>&6
 -echo "configure:8104: checking for $ac_hdr that defines DIR" >&5
-+echo "configure:8016: checking for $ac_hdr that defines DIR" >&5
++echo "configure:8017: checking for $ac_hdr that defines DIR" >&5
  if eval "test \"`echo '$''{'ac_cv_header_dirent_$ac_safe'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
    cat > conftest.$ac_ext <<EOF
 -#line 8109 "configure"
-+#line 8021 "configure"
++#line 8022 "configure"
  #include "confdefs.h"
  #include <sys/types.h>
  #include <$ac_hdr>
- int main() {
+@@ -8113,7 +8026,7 @@
  DIR *dirp = 0;
  ; return 0; }
  EOF
 -if { (eval echo configure:8117: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
-+if { (eval echo configure:8029: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
++if { (eval echo configure:8030: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
    rm -rf conftest*
    eval "ac_cv_header_dirent_$ac_safe=yes"
  else
-   echo "configure: failed program was:" >&5
-   cat conftest.$ac_ext >&5
-   rm -rf conftest*
-   eval "ac_cv_header_dirent_$ac_safe=no"
- fi
-@@ -8133,36 +8045,36 @@
-  ac_header_dirent=$ac_hdr; break
- else
-   echo "$ac_t""no" 1>&6
- fi
- done
+@@ -8138,7 +8051,7 @@
  # Two versions of opendir et al. are in -ldir and -lx on SCO Xenix.
  if test $ac_header_dirent = dirent.h; then
  echo $ac_n "checking for opendir in -ldir""... $ac_c" 1>&6
 -echo "configure:8142: checking for opendir in -ldir" >&5
-+echo "configure:8054: checking for opendir in -ldir" >&5
++echo "configure:8055: checking for opendir in -ldir" >&5
  ac_lib_var=`echo dir'_'opendir | sed 'y%./+-%__p_%'`
  if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
- else
+@@ -8146,7 +8059,7 @@
    ac_save_LIBS="$LIBS"
  LIBS="-ldir  $LIBS"
  cat > conftest.$ac_ext <<EOF
 -#line 8150 "configure"
-+#line 8062 "configure"
++#line 8063 "configure"
  #include "confdefs.h"
  /* Override any gcc2 internal prototype to avoid an error.  */
  /* We use char because int might match the return type of a gcc2
-     builtin and then its argument prototype would still apply.  */
- char opendir();
- 
- int main() {
+@@ -8157,7 +8070,7 @@
  opendir()
  ; return 0; }
  EOF
 -if { (eval echo configure:8161: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-+if { (eval echo configure:8073: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
++if { (eval echo configure:8074: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
    rm -rf conftest*
    eval "ac_cv_lib_$ac_lib_var=yes"
  else
-   echo "configure: failed program was:" >&5
-   cat conftest.$ac_ext >&5
-   rm -rf conftest*
-   eval "ac_cv_lib_$ac_lib_var=no"
- fi
-@@ -8174,36 +8086,36 @@
-   echo "$ac_t""yes" 1>&6
-   LIBS="$LIBS -ldir"
- else
-   echo "$ac_t""no" 1>&6
- fi
+@@ -8179,7 +8092,7 @@
  
  else
  echo $ac_n "checking for opendir in -lx""... $ac_c" 1>&6
 -echo "configure:8183: checking for opendir in -lx" >&5
-+echo "configure:8095: checking for opendir in -lx" >&5
++echo "configure:8096: checking for opendir in -lx" >&5
  ac_lib_var=`echo x'_'opendir | sed 'y%./+-%__p_%'`
  if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
- else
+@@ -8187,7 +8100,7 @@
    ac_save_LIBS="$LIBS"
  LIBS="-lx  $LIBS"
  cat > conftest.$ac_ext <<EOF
 -#line 8191 "configure"
-+#line 8103 "configure"
++#line 8104 "configure"
  #include "confdefs.h"
  /* Override any gcc2 internal prototype to avoid an error.  */
  /* We use char because int might match the return type of a gcc2
-     builtin and then its argument prototype would still apply.  */
- char opendir();
- 
- int main() {
+@@ -8198,7 +8111,7 @@
  opendir()
  ; return 0; }
  EOF
 -if { (eval echo configure:8202: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-+if { (eval echo configure:8114: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
++if { (eval echo configure:8115: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
    rm -rf conftest*
    eval "ac_cv_lib_$ac_lib_var=yes"
  else
-   echo "configure: failed program was:" >&5
-   cat conftest.$ac_ext >&5
-   rm -rf conftest*
-   eval "ac_cv_lib_$ac_lib_var=no"
- fi
-@@ -8225,27 +8137,27 @@
- # for stuff like -lXshm
-     CPPFLAGS="${CPPFLAGS} ${X_CFLAGS}"
-     ;;
- esac
- for ac_hdr in sys/byteorder.h compat.h getopt.h
+@@ -8230,17 +8143,17 @@
  do
  ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
  echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
 -echo "configure:8234: checking for $ac_hdr" >&5
-+echo "configure:8146: checking for $ac_hdr" >&5
++echo "configure:8147: checking for $ac_hdr" >&5
  if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
    cat > conftest.$ac_ext <<EOF
 -#line 8239 "configure"
-+#line 8151 "configure"
++#line 8152 "configure"
  #include "confdefs.h"
  #include <$ac_hdr>
  EOF
  ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
 -{ (eval echo configure:8244: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
-+{ (eval echo configure:8156: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
++{ (eval echo configure:8157: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
  ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
  if test -z "$ac_err"; then
    rm -rf conftest*
-   eval "ac_cv_header_$ac_safe=yes"
- else
-   echo "$ac_err" >&5
-   echo "configure: failed program was:" >&5
-   cat conftest.$ac_ext >&5
-@@ -8265,27 +8177,27 @@
-   echo "$ac_t""no" 1>&6
- fi
- done
- 
- for ac_hdr in sys/bitypes.h memory.h unistd.h
+@@ -8270,17 +8183,17 @@
  do
  ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
  echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
 -echo "configure:8274: checking for $ac_hdr" >&5
-+echo "configure:8186: checking for $ac_hdr" >&5
++echo "configure:8187: checking for $ac_hdr" >&5
  if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
    cat > conftest.$ac_ext <<EOF
 -#line 8279 "configure"
-+#line 8191 "configure"
++#line 8192 "configure"
  #include "confdefs.h"
  #include <$ac_hdr>
  EOF
  ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
 -{ (eval echo configure:8284: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
-+{ (eval echo configure:8196: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
++{ (eval echo configure:8197: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
  ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
  if test -z "$ac_err"; then
    rm -rf conftest*
-   eval "ac_cv_header_$ac_safe=yes"
- else
-   echo "$ac_err" >&5
-   echo "configure: failed program was:" >&5
-   cat conftest.$ac_ext >&5
-@@ -8305,27 +8217,27 @@
-   echo "$ac_t""no" 1>&6
- fi
- done
- 
- for ac_hdr in gnu/libc-version.h nl_types.h
+@@ -8310,17 +8223,17 @@
  do
  ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
  echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
 -echo "configure:8314: checking for $ac_hdr" >&5
-+echo "configure:8226: checking for $ac_hdr" >&5
++echo "configure:8227: checking for $ac_hdr" >&5
  if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
    cat > conftest.$ac_ext <<EOF
 -#line 8319 "configure"
-+#line 8231 "configure"
++#line 8232 "configure"
  #include "confdefs.h"
  #include <$ac_hdr>
  EOF
  ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
 -{ (eval echo configure:8324: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
-+{ (eval echo configure:8236: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
++{ (eval echo configure:8237: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
  ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
  if test -z "$ac_err"; then
    rm -rf conftest*
-   eval "ac_cv_header_$ac_safe=yes"
- else
-   echo "$ac_err" >&5
-   echo "configure: failed program was:" >&5
-   cat conftest.$ac_ext >&5
-@@ -8345,27 +8257,27 @@
-   echo "$ac_t""no" 1>&6
- fi
- done
- 
- for ac_hdr in malloc.h
+@@ -8350,17 +8263,17 @@
  do
  ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
  echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
 -echo "configure:8354: checking for $ac_hdr" >&5
-+echo "configure:8266: checking for $ac_hdr" >&5
++echo "configure:8267: checking for $ac_hdr" >&5
  if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
    cat > conftest.$ac_ext <<EOF
 -#line 8359 "configure"
-+#line 8271 "configure"
++#line 8272 "configure"
  #include "confdefs.h"
  #include <$ac_hdr>
  EOF
  ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
 -{ (eval echo configure:8364: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
-+{ (eval echo configure:8276: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
++{ (eval echo configure:8277: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
  ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
  if test -z "$ac_err"; then
    rm -rf conftest*
-   eval "ac_cv_header_$ac_safe=yes"
- else
-   echo "$ac_err" >&5
-   echo "configure: failed program was:" >&5
-   cat conftest.$ac_ext >&5
-@@ -8385,27 +8297,27 @@
-   echo "$ac_t""no" 1>&6
- fi
- done
- 
- for ac_hdr in X11/XKBlib.h
+@@ -8390,17 +8303,17 @@
  do
  ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
  echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
 -echo "configure:8394: checking for $ac_hdr" >&5
-+echo "configure:8306: checking for $ac_hdr" >&5
++echo "configure:8307: checking for $ac_hdr" >&5
  if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
    cat > conftest.$ac_ext <<EOF
 -#line 8399 "configure"
-+#line 8311 "configure"
++#line 8312 "configure"
  #include "confdefs.h"
  #include <$ac_hdr>
  EOF
  ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
 -{ (eval echo configure:8404: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
-+{ (eval echo configure:8316: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
++{ (eval echo configure:8317: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
  ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
  if test -z "$ac_err"; then
    rm -rf conftest*
-   eval "ac_cv_header_$ac_safe=yes"
- else
-   echo "$ac_err" >&5
-   echo "configure: failed program was:" >&5
-   cat conftest.$ac_ext >&5
-@@ -8426,27 +8338,27 @@
- fi
- done
- 
- 
- for ac_hdr in sys/statvfs.h sys/statfs.h sys/vfs.h sys/mount.h
+@@ -8431,17 +8344,17 @@
  do
  ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
  echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
 -echo "configure:8435: checking for $ac_hdr" >&5
-+echo "configure:8347: checking for $ac_hdr" >&5
++echo "configure:8348: checking for $ac_hdr" >&5
  if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
    cat > conftest.$ac_ext <<EOF
 -#line 8440 "configure"
-+#line 8352 "configure"
++#line 8353 "configure"
  #include "confdefs.h"
  #include <$ac_hdr>
  EOF
  ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
 -{ (eval echo configure:8445: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
-+{ (eval echo configure:8357: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
++{ (eval echo configure:8358: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
  ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
  if test -z "$ac_err"; then
    rm -rf conftest*
-   eval "ac_cv_header_$ac_safe=yes"
- else
-   echo "$ac_err" >&5
-   echo "configure: failed program was:" >&5
-   cat conftest.$ac_ext >&5
-@@ -8467,27 +8379,27 @@
- fi
- done
- 
- 
- for ac_hdr in mmintrin.h
+@@ -8472,17 +8385,17 @@
  do
  ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
  echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
 -echo "configure:8476: checking for $ac_hdr" >&5
-+echo "configure:8388: checking for $ac_hdr" >&5
++echo "configure:8389: checking for $ac_hdr" >&5
  if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
    cat > conftest.$ac_ext <<EOF
 -#line 8481 "configure"
-+#line 8393 "configure"
++#line 8394 "configure"
  #include "confdefs.h"
  #include <$ac_hdr>
  EOF
  ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
 -{ (eval echo configure:8486: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
-+{ (eval echo configure:8398: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
++{ (eval echo configure:8399: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
  ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
  if test -z "$ac_err"; then
    rm -rf conftest*
-   eval "ac_cv_header_$ac_safe=yes"
- else
-   echo "$ac_err" >&5
-   echo "configure: failed program was:" >&5
-   cat conftest.$ac_ext >&5
-@@ -8514,27 +8426,27 @@
- ac_cpp='$CXXCPP $CPPFLAGS'
- ac_compile='${CXX-g++} -c $CXXFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
- ac_link='${CXX-g++} -o conftest${ac_exeext} $CXXFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
- cross_compiling=$ac_cv_prog_cxx_cross
- 
+@@ -8519,17 +8432,17 @@
  NEW_H=new.h
  ac_safe=`echo "new" | sed 'y%./+-%__p_%'`
  echo $ac_n "checking for new""... $ac_c" 1>&6
 -echo "configure:8523: checking for new" >&5
-+echo "configure:8435: checking for new" >&5
++echo "configure:8436: checking for new" >&5
  if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
    cat > conftest.$ac_ext <<EOF
 -#line 8528 "configure"
-+#line 8440 "configure"
++#line 8441 "configure"
  #include "confdefs.h"
  #include <new>
  EOF
  ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
 -{ (eval echo configure:8533: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
-+{ (eval echo configure:8445: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
++{ (eval echo configure:8446: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
  ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
  if test -z "$ac_err"; then
    rm -rf conftest*
-   eval "ac_cv_header_$ac_safe=yes"
- else
-   echo "$ac_err" >&5
-   echo "configure: failed program was:" >&5
-   cat conftest.$ac_ext >&5
-@@ -8565,27 +8477,27 @@
- case $target in
- *-aix4.3*|*-aix5*)
- 	;;
- *)
- 	for ac_hdr in sys/cdefs.h
+@@ -8570,17 +8483,17 @@
  do
  ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
  echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
 -echo "configure:8574: checking for $ac_hdr" >&5
-+echo "configure:8486: checking for $ac_hdr" >&5
++echo "configure:8487: checking for $ac_hdr" >&5
  if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
    cat > conftest.$ac_ext <<EOF
 -#line 8579 "configure"
-+#line 8491 "configure"
++#line 8492 "configure"
  #include "confdefs.h"
  #include <$ac_hdr>
  EOF
  ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
 -{ (eval echo configure:8584: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
-+{ (eval echo configure:8496: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
++{ (eval echo configure:8497: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
  ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
  if test -z "$ac_err"; then
    rm -rf conftest*
-   eval "ac_cv_header_$ac_safe=yes"
- else
-   echo "$ac_err" >&5
-   echo "configure: failed program was:" >&5
-   cat conftest.$ac_ext >&5
-@@ -8609,36 +8521,36 @@
- 	;;
- esac
- 
- case $target in
- *-hpux11.*)
+@@ -8614,7 +8527,7 @@
  	;;
  *)
  	echo $ac_n "checking for gethostbyname_r in -lc_r""... $ac_c" 1>&6
 -echo "configure:8618: checking for gethostbyname_r in -lc_r" >&5
-+echo "configure:8530: checking for gethostbyname_r in -lc_r" >&5
++echo "configure:8531: checking for gethostbyname_r in -lc_r" >&5
  ac_lib_var=`echo c_r'_'gethostbyname_r | sed 'y%./+-%__p_%'`
  if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
- else
+@@ -8622,7 +8535,7 @@
    ac_save_LIBS="$LIBS"
  LIBS="-lc_r  $LIBS"
  cat > conftest.$ac_ext <<EOF
 -#line 8626 "configure"
-+#line 8538 "configure"
++#line 8539 "configure"
  #include "confdefs.h"
  /* Override any gcc2 internal prototype to avoid an error.  */
  /* We use char because int might match the return type of a gcc2
-     builtin and then its argument prototype would still apply.  */
- char gethostbyname_r();
- 
- int main() {
+@@ -8633,7 +8546,7 @@
  gethostbyname_r()
  ; return 0; }
  EOF
 -if { (eval echo configure:8637: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-+if { (eval echo configure:8549: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
++if { (eval echo configure:8550: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
    rm -rf conftest*
    eval "ac_cv_lib_$ac_lib_var=yes"
  else
-   echo "configure: failed program was:" >&5
-   cat conftest.$ac_ext >&5
-   rm -rf conftest*
-   eval "ac_cv_lib_$ac_lib_var=no"
- fi
-@@ -8658,36 +8570,36 @@
- 
- else
-   echo "$ac_t""no" 1>&6
- fi
- 
+@@ -8663,7 +8576,7 @@
  	;;
  esac
  echo $ac_n "checking for atan in -lm""... $ac_c" 1>&6
 -echo "configure:8667: checking for atan in -lm" >&5
-+echo "configure:8579: checking for atan in -lm" >&5
++echo "configure:8580: checking for atan in -lm" >&5
  ac_lib_var=`echo m'_'atan | sed 'y%./+-%__p_%'`
  if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
- else
+@@ -8671,7 +8584,7 @@
    ac_save_LIBS="$LIBS"
  LIBS="-lm  $LIBS"
  cat > conftest.$ac_ext <<EOF
 -#line 8675 "configure"
-+#line 8587 "configure"
++#line 8588 "configure"
  #include "confdefs.h"
  /* Override any gcc2 internal prototype to avoid an error.  */
  /* We use char because int might match the return type of a gcc2
-     builtin and then its argument prototype would still apply.  */
- char atan();
- 
- int main() {
+@@ -8682,7 +8595,7 @@
  atan()
  ; return 0; }
  EOF
 -if { (eval echo configure:8686: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-+if { (eval echo configure:8598: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
++if { (eval echo configure:8599: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
    rm -rf conftest*
    eval "ac_cv_lib_$ac_lib_var=yes"
  else
-   echo "configure: failed program was:" >&5
-   cat conftest.$ac_ext >&5
-   rm -rf conftest*
-   eval "ac_cv_lib_$ac_lib_var=no"
- fi
-@@ -8711,63 +8623,63 @@
- 
- 
- 
- case $target in
- *-darwin*)
+@@ -8716,7 +8629,7 @@
  	;;
  *)
  	echo $ac_n "checking for dlopen in -ldl""... $ac_c" 1>&6
 -echo "configure:8720: checking for dlopen in -ldl" >&5
-+echo "configure:8632: checking for dlopen in -ldl" >&5
++echo "configure:8633: checking for dlopen in -ldl" >&5
  ac_lib_var=`echo dl'_'dlopen | sed 'y%./+-%__p_%'`
  if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
- else
+@@ -8724,7 +8637,7 @@
    ac_save_LIBS="$LIBS"
  LIBS="-ldl  $LIBS"
  cat > conftest.$ac_ext <<EOF
 -#line 8728 "configure"
-+#line 8640 "configure"
++#line 8641 "configure"
  #include "confdefs.h"
  /* Override any gcc2 internal prototype to avoid an error.  */
  /* We use char because int might match the return type of a gcc2
-     builtin and then its argument prototype would still apply.  */
- char dlopen();
- 
- int main() {
+@@ -8735,7 +8648,7 @@
  dlopen()
  ; return 0; }
  EOF
 -if { (eval echo configure:8739: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-+if { (eval echo configure:8651: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
++if { (eval echo configure:8652: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
    rm -rf conftest*
    eval "ac_cv_lib_$ac_lib_var=yes"
  else
-   echo "configure: failed program was:" >&5
-   cat conftest.$ac_ext >&5
-   rm -rf conftest*
-   eval "ac_cv_lib_$ac_lib_var=no"
- fi
- rm -f conftest*
- LIBS="$ac_save_LIBS"
- 
- fi
- if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
+@@ -8752,17 +8665,17 @@
    echo "$ac_t""yes" 1>&6
    ac_safe=`echo "dlfcn.h" | sed 'y%./+-%__p_%'`
  echo $ac_n "checking for dlfcn.h""... $ac_c" 1>&6
 -echo "configure:8756: checking for dlfcn.h" >&5
-+echo "configure:8668: checking for dlfcn.h" >&5
++echo "configure:8669: checking for dlfcn.h" >&5
  if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
    cat > conftest.$ac_ext <<EOF
 -#line 8761 "configure"
-+#line 8673 "configure"
++#line 8674 "configure"
  #include "confdefs.h"
  #include <dlfcn.h>
  EOF
  ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
 -{ (eval echo configure:8766: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
-+{ (eval echo configure:8678: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
++{ (eval echo configure:8679: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
  ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
  if test -z "$ac_err"; then
    rm -rf conftest*
-   eval "ac_cv_header_$ac_safe=yes"
- else
-   echo "$ac_err" >&5
-   echo "configure: failed program was:" >&5
-   cat conftest.$ac_ext >&5
-@@ -8793,36 +8705,36 @@
- 
- 	;;
- esac
- if test ! "$GNU_CXX"; then
- 
+@@ -8798,7 +8711,7 @@
      case $target in
      *-aix*)
  	echo $ac_n "checking for demangle in -lC_r""... $ac_c" 1>&6
 -echo "configure:8802: checking for demangle in -lC_r" >&5
-+echo "configure:8714: checking for demangle in -lC_r" >&5
++echo "configure:8715: checking for demangle in -lC_r" >&5
  ac_lib_var=`echo C_r'_'demangle | sed 'y%./+-%__p_%'`
  if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
- else
+@@ -8806,7 +8719,7 @@
    ac_save_LIBS="$LIBS"
  LIBS="-lC_r  $LIBS"
  cat > conftest.$ac_ext <<EOF
 -#line 8810 "configure"
-+#line 8722 "configure"
++#line 8723 "configure"
  #include "confdefs.h"
  /* Override any gcc2 internal prototype to avoid an error.  */
  /* We use char because int might match the return type of a gcc2
-     builtin and then its argument prototype would still apply.  */
- char demangle();
- 
- int main() {
+@@ -8817,7 +8730,7 @@
  demangle()
  ; return 0; }
  EOF
 -if { (eval echo configure:8821: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-+if { (eval echo configure:8733: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
++if { (eval echo configure:8734: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
    rm -rf conftest*
    eval "ac_cv_lib_$ac_lib_var=yes"
  else
-   echo "configure: failed program was:" >&5
-   cat conftest.$ac_ext >&5
-   rm -rf conftest*
-   eval "ac_cv_lib_$ac_lib_var=no"
- fi
-@@ -8842,36 +8754,36 @@
- 
- else
-   echo "$ac_t""no" 1>&6
- fi
- 
+@@ -8847,7 +8760,7 @@
  	;;
       *)
  	echo $ac_n "checking for demangle in -lC""... $ac_c" 1>&6
 -echo "configure:8851: checking for demangle in -lC" >&5
-+echo "configure:8763: checking for demangle in -lC" >&5
++echo "configure:8764: checking for demangle in -lC" >&5
  ac_lib_var=`echo C'_'demangle | sed 'y%./+-%__p_%'`
  if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
- else
+@@ -8855,7 +8768,7 @@
    ac_save_LIBS="$LIBS"
  LIBS="-lC  $LIBS"
  cat > conftest.$ac_ext <<EOF
 -#line 8859 "configure"
-+#line 8771 "configure"
++#line 8772 "configure"
  #include "confdefs.h"
  /* Override any gcc2 internal prototype to avoid an error.  */
  /* We use char because int might match the return type of a gcc2
-     builtin and then its argument prototype would still apply.  */
- char demangle();
- 
- int main() {
+@@ -8866,7 +8779,7 @@
  demangle()
  ; return 0; }
  EOF
 -if { (eval echo configure:8870: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-+if { (eval echo configure:8782: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
++if { (eval echo configure:8783: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
    rm -rf conftest*
    eval "ac_cv_lib_$ac_lib_var=yes"
  else
-   echo "configure: failed program was:" >&5
-   cat conftest.$ac_ext >&5
-   rm -rf conftest*
-   eval "ac_cv_lib_$ac_lib_var=no"
- fi
-@@ -8892,36 +8804,36 @@
- else
-   echo "$ac_t""no" 1>&6
- fi
- 
- 	;;
+@@ -8897,7 +8810,7 @@
       esac
  fi
  echo $ac_n "checking for socket in -lsocket""... $ac_c" 1>&6
 -echo "configure:8901: checking for socket in -lsocket" >&5
-+echo "configure:8813: checking for socket in -lsocket" >&5
++echo "configure:8814: checking for socket in -lsocket" >&5
  ac_lib_var=`echo socket'_'socket | sed 'y%./+-%__p_%'`
  if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
- else
+@@ -8905,7 +8818,7 @@
    ac_save_LIBS="$LIBS"
  LIBS="-lsocket  $LIBS"
  cat > conftest.$ac_ext <<EOF
 -#line 8909 "configure"
-+#line 8821 "configure"
++#line 8822 "configure"
  #include "confdefs.h"
  /* Override any gcc2 internal prototype to avoid an error.  */
  /* We use char because int might match the return type of a gcc2
-     builtin and then its argument prototype would still apply.  */
- char socket();
- 
- int main() {
+@@ -8916,7 +8829,7 @@
  socket()
  ; return 0; }
  EOF
 -if { (eval echo configure:8920: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-+if { (eval echo configure:8832: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
++if { (eval echo configure:8833: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
    rm -rf conftest*
    eval "ac_cv_lib_$ac_lib_var=yes"
  else
-   echo "configure: failed program was:" >&5
-   cat conftest.$ac_ext >&5
-   rm -rf conftest*
-   eval "ac_cv_lib_$ac_lib_var=no"
- fi
-@@ -8956,36 +8868,36 @@
-     cat >> confdefs.h <<EOF
- #define FUNCPROTO 15
- EOF
- 
- 	XLIBS="-lX11 $XLIBS"
+@@ -8961,7 +8874,7 @@
  	_SAVE_LDFLAGS="$LDFLAGS"
  	LDFLAGS="$XLDFLAGS $LDFLAGS"
  	echo $ac_n "checking for XDrawLines in -lX11""... $ac_c" 1>&6
 -echo "configure:8965: checking for XDrawLines in -lX11" >&5
-+echo "configure:8877: checking for XDrawLines in -lX11" >&5
++echo "configure:8878: checking for XDrawLines in -lX11" >&5
  ac_lib_var=`echo X11'_'XDrawLines | sed 'y%./+-%__p_%'`
  if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
- else
+@@ -8969,7 +8882,7 @@
    ac_save_LIBS="$LIBS"
  LIBS="-lX11 $XLIBS $LIBS"
  cat > conftest.$ac_ext <<EOF
 -#line 8973 "configure"
-+#line 8885 "configure"
++#line 8886 "configure"
  #include "confdefs.h"
  /* Override any gcc2 internal prototype to avoid an error.  */
  /* We use char because int might match the return type of a gcc2
-     builtin and then its argument prototype would still apply.  */
- char XDrawLines();
- 
- int main() {
+@@ -8980,7 +8893,7 @@
  XDrawLines()
  ; return 0; }
  EOF
 -if { (eval echo configure:8984: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-+if { (eval echo configure:8896: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
++if { (eval echo configure:8897: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
    rm -rf conftest*
    eval "ac_cv_lib_$ac_lib_var=yes"
  else
-   echo "configure: failed program was:" >&5
-   cat conftest.$ac_ext >&5
-   rm -rf conftest*
-   eval "ac_cv_lib_$ac_lib_var=no"
- fi
-@@ -8997,36 +8909,36 @@
-   echo "$ac_t""yes" 1>&6
-   X11_LIBS="-lX11"
- else
-   echo "$ac_t""no" 1>&6
- MISSING_X="$MISSING_X -lX11"
+@@ -9002,7 +8915,7 @@
  fi
  
  	echo $ac_n "checking for XextAddDisplay in -lXext""... $ac_c" 1>&6
 -echo "configure:9006: checking for XextAddDisplay in -lXext" >&5
-+echo "configure:8918: checking for XextAddDisplay in -lXext" >&5
++echo "configure:8919: checking for XextAddDisplay in -lXext" >&5
  ac_lib_var=`echo Xext'_'XextAddDisplay | sed 'y%./+-%__p_%'`
  if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
- else
+@@ -9010,7 +8923,7 @@
    ac_save_LIBS="$LIBS"
  LIBS="-lXext $XLIBS $LIBS"
  cat > conftest.$ac_ext <<EOF
 -#line 9014 "configure"
-+#line 8926 "configure"
++#line 8927 "configure"
  #include "confdefs.h"
  /* Override any gcc2 internal prototype to avoid an error.  */
  /* We use char because int might match the return type of a gcc2
-     builtin and then its argument prototype would still apply.  */
- char XextAddDisplay();
- 
- int main() {
+@@ -9021,7 +8934,7 @@
  XextAddDisplay()
  ; return 0; }
  EOF
 -if { (eval echo configure:9025: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-+if { (eval echo configure:8937: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
++if { (eval echo configure:8938: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
    rm -rf conftest*
    eval "ac_cv_lib_$ac_lib_var=yes"
  else
-   echo "configure: failed program was:" >&5
-   cat conftest.$ac_ext >&5
-   rm -rf conftest*
-   eval "ac_cv_lib_$ac_lib_var=no"
- fi
-@@ -9040,36 +8952,36 @@
- else
-   echo "$ac_t""no" 1>&6
- MISSING_X="$MISSING_X -lXext"
- fi
- 
+@@ -9045,7 +8958,7 @@
     
       
  	echo $ac_n "checking for XtFree in -lXt""... $ac_c" 1>&6
 -echo "configure:9049: checking for XtFree in -lXt" >&5
-+echo "configure:8961: checking for XtFree in -lXt" >&5
++echo "configure:8962: checking for XtFree in -lXt" >&5
  ac_lib_var=`echo Xt'_'XtFree | sed 'y%./+-%__p_%'`
  if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
- else
+@@ -9053,7 +8966,7 @@
    ac_save_LIBS="$LIBS"
  LIBS="-lXt  $LIBS"
  cat > conftest.$ac_ext <<EOF
 -#line 9057 "configure"
-+#line 8969 "configure"
++#line 8970 "configure"
  #include "confdefs.h"
  /* Override any gcc2 internal prototype to avoid an error.  */
  /* We use char because int might match the return type of a gcc2
-     builtin and then its argument prototype would still apply.  */
- char XtFree();
- 
- int main() {
+@@ -9064,7 +8977,7 @@
  XtFree()
  ; return 0; }
  EOF
 -if { (eval echo configure:9068: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-+if { (eval echo configure:8980: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
++if { (eval echo configure:8981: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
    rm -rf conftest*
    eval "ac_cv_lib_$ac_lib_var=yes"
  else
-   echo "configure: failed program was:" >&5
-   cat conftest.$ac_ext >&5
-   rm -rf conftest*
-   eval "ac_cv_lib_$ac_lib_var=no"
- fi
-@@ -9080,36 +8992,36 @@
- if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
-   echo "$ac_t""yes" 1>&6
-    XT_LIBS="-lXt"
- else
-   echo "$ac_t""no" 1>&6
+@@ -9085,7 +8998,7 @@
  
          unset ac_cv_lib_Xt_XtFree
  	    echo $ac_n "checking for IceFlush in -lICE""... $ac_c" 1>&6
 -echo "configure:9089: checking for IceFlush in -lICE" >&5
-+echo "configure:9001: checking for IceFlush in -lICE" >&5
++echo "configure:9002: checking for IceFlush in -lICE" >&5
  ac_lib_var=`echo ICE'_'IceFlush | sed 'y%./+-%__p_%'`
  if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
- else
+@@ -9093,7 +9006,7 @@
    ac_save_LIBS="$LIBS"
  LIBS="-lICE $XT_LIBS $XLIBS $LIBS"
  cat > conftest.$ac_ext <<EOF
 -#line 9097 "configure"
-+#line 9009 "configure"
++#line 9010 "configure"
  #include "confdefs.h"
  /* Override any gcc2 internal prototype to avoid an error.  */
  /* We use char because int might match the return type of a gcc2
-     builtin and then its argument prototype would still apply.  */
- char IceFlush();
- 
- int main() {
+@@ -9104,7 +9017,7 @@
  IceFlush()
  ; return 0; }
  EOF
 -if { (eval echo configure:9108: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-+if { (eval echo configure:9020: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
++if { (eval echo configure:9021: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
    rm -rf conftest*
    eval "ac_cv_lib_$ac_lib_var=yes"
  else
-   echo "configure: failed program was:" >&5
-   cat conftest.$ac_ext >&5
-   rm -rf conftest*
-   eval "ac_cv_lib_$ac_lib_var=no"
- fi
-@@ -9120,36 +9032,36 @@
- if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
-   echo "$ac_t""yes" 1>&6
-   XT_LIBS="-lICE $XT_LIBS"
- else
-   echo "$ac_t""no" 1>&6
+@@ -9125,7 +9038,7 @@
  fi
  
  	    echo $ac_n "checking for SmcCloseConnection in -lSM""... $ac_c" 1>&6
 -echo "configure:9129: checking for SmcCloseConnection in -lSM" >&5
-+echo "configure:9041: checking for SmcCloseConnection in -lSM" >&5
++echo "configure:9042: checking for SmcCloseConnection in -lSM" >&5
  ac_lib_var=`echo SM'_'SmcCloseConnection | sed 'y%./+-%__p_%'`
  if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
- else
+@@ -9133,7 +9046,7 @@
    ac_save_LIBS="$LIBS"
  LIBS="-lSM $XT_LIBS $XLIBS $LIBS"
  cat > conftest.$ac_ext <<EOF
 -#line 9137 "configure"
-+#line 9049 "configure"
++#line 9050 "configure"
  #include "confdefs.h"
  /* Override any gcc2 internal prototype to avoid an error.  */
  /* We use char because int might match the return type of a gcc2
-     builtin and then its argument prototype would still apply.  */
- char SmcCloseConnection();
- 
- int main() {
+@@ -9144,7 +9057,7 @@
  SmcCloseConnection()
  ; return 0; }
  EOF
 -if { (eval echo configure:9148: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-+if { (eval echo configure:9060: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
++if { (eval echo configure:9061: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
    rm -rf conftest*
    eval "ac_cv_lib_$ac_lib_var=yes"
  else
-   echo "configure: failed program was:" >&5
-   cat conftest.$ac_ext >&5
-   rm -rf conftest*
-   eval "ac_cv_lib_$ac_lib_var=no"
- fi
-@@ -9160,36 +9072,36 @@
- if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
-   echo "$ac_t""yes" 1>&6
-   XT_LIBS="-lSM $XT_LIBS"
- else
-   echo "$ac_t""no" 1>&6
+@@ -9165,7 +9078,7 @@
  fi
   
          echo $ac_n "checking for XtFree in -lXt""... $ac_c" 1>&6
 -echo "configure:9169: checking for XtFree in -lXt" >&5
-+echo "configure:9081: checking for XtFree in -lXt" >&5
++echo "configure:9082: checking for XtFree in -lXt" >&5
  ac_lib_var=`echo Xt'_'XtFree | sed 'y%./+-%__p_%'`
  if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
- else
+@@ -9173,7 +9086,7 @@
    ac_save_LIBS="$LIBS"
  LIBS="-lXt $X_PRE_LIBS $XT_LIBS $XLIBS $LIBS"
  cat > conftest.$ac_ext <<EOF
 -#line 9177 "configure"
-+#line 9089 "configure"
++#line 9090 "configure"
  #include "confdefs.h"
  /* Override any gcc2 internal prototype to avoid an error.  */
  /* We use char because int might match the return type of a gcc2
-     builtin and then its argument prototype would still apply.  */
- char XtFree();
- 
- int main() {
+@@ -9184,7 +9097,7 @@
  XtFree()
  ; return 0; }
  EOF
 -if { (eval echo configure:9188: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-+if { (eval echo configure:9100: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
++if { (eval echo configure:9101: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
    rm -rf conftest*
    eval "ac_cv_lib_$ac_lib_var=yes"
  else
-   echo "configure: failed program was:" >&5
-   cat conftest.$ac_ext >&5
-   rm -rf conftest*
-   eval "ac_cv_lib_$ac_lib_var=no"
- fi
-@@ -9213,36 +9125,36 @@
-     # crashes in plugins linked against Motif - Bug #98892
-     case "${target_os}" in
-     aix*)
-         XT_LIBS="-lXm $XT_LIBS"
-         ;;
+@@ -9218,7 +9131,7 @@
      esac
  
                  echo $ac_n "checking for XineramaIsActive in -lXinerama""... $ac_c" 1>&6
 -echo "configure:9222: checking for XineramaIsActive in -lXinerama" >&5
-+echo "configure:9134: checking for XineramaIsActive in -lXinerama" >&5
++echo "configure:9135: checking for XineramaIsActive in -lXinerama" >&5
  ac_lib_var=`echo Xinerama'_'XineramaIsActive | sed 'y%./+-%__p_%'`
  if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
- else
+@@ -9226,7 +9139,7 @@
    ac_save_LIBS="$LIBS"
  LIBS="-lXinerama $XLIBS $XEXT_LIBS $LIBS"
  cat > conftest.$ac_ext <<EOF
 -#line 9230 "configure"
-+#line 9142 "configure"
++#line 9143 "configure"
  #include "confdefs.h"
  /* Override any gcc2 internal prototype to avoid an error.  */
  /* We use char because int might match the return type of a gcc2
-     builtin and then its argument prototype would still apply.  */
- char XineramaIsActive();
- 
- int main() {
+@@ -9237,7 +9150,7 @@
  XineramaIsActive()
  ; return 0; }
  EOF
 -if { (eval echo configure:9241: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-+if { (eval echo configure:9153: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
++if { (eval echo configure:9154: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
    rm -rf conftest*
    eval "ac_cv_lib_$ac_lib_var=yes"
  else
-   echo "configure: failed program was:" >&5
-   cat conftest.$ac_ext >&5
-   rm -rf conftest*
-   eval "ac_cv_lib_$ac_lib_var=no"
- fi
-@@ -9254,27 +9166,27 @@
-   echo "$ac_t""yes" 1>&6
-   MOZ_XINERAMA_LIBS="-lXinerama"
- else
-   echo "$ac_t""no" 1>&6
- fi
+@@ -9259,17 +9172,17 @@
  
      ac_safe=`echo "X11/extensions/Xinerama.h" | sed 'y%./+-%__p_%'`
  echo $ac_n "checking for X11/extensions/Xinerama.h""... $ac_c" 1>&6
 -echo "configure:9263: checking for X11/extensions/Xinerama.h" >&5
-+echo "configure:9175: checking for X11/extensions/Xinerama.h" >&5
++echo "configure:9176: checking for X11/extensions/Xinerama.h" >&5
  if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
    cat > conftest.$ac_ext <<EOF
 -#line 9268 "configure"
-+#line 9180 "configure"
++#line 9181 "configure"
  #include "confdefs.h"
  #include <X11/extensions/Xinerama.h>
  EOF
  ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
 -{ (eval echo configure:9273: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
-+{ (eval echo configure:9185: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
++{ (eval echo configure:9186: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
  ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
  if test -z "$ac_err"; then
    rm -rf conftest*
-   eval "ac_cv_header_$ac_safe=yes"
- else
-   echo "$ac_err" >&5
-   echo "configure: failed program was:" >&5
-   cat conftest.$ac_ext >&5
-@@ -9287,36 +9199,36 @@
-   echo "$ac_t""yes" 1>&6
-   :
- else
-   echo "$ac_t""no" 1>&6
- fi
+@@ -9292,7 +9205,7 @@
  
  
                  echo $ac_n "checking for XShmCreateImage in -lXext""... $ac_c" 1>&6
 -echo "configure:9296: checking for XShmCreateImage in -lXext" >&5
-+echo "configure:9208: checking for XShmCreateImage in -lXext" >&5
++echo "configure:9209: checking for XShmCreateImage in -lXext" >&5
  ac_lib_var=`echo Xext'_'XShmCreateImage | sed 'y%./+-%__p_%'`
  if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
- else
+@@ -9300,7 +9213,7 @@
    ac_save_LIBS="$LIBS"
  LIBS="-lXext $XLIBS $XEXT_LIBS $LIBS"
  cat > conftest.$ac_ext <<EOF
 -#line 9304 "configure"
-+#line 9216 "configure"
++#line 9217 "configure"
  #include "confdefs.h"
  /* Override any gcc2 internal prototype to avoid an error.  */
  /* We use char because int might match the return type of a gcc2
-     builtin and then its argument prototype would still apply.  */
- char XShmCreateImage();
- 
- int main() {
+@@ -9311,7 +9224,7 @@
  XShmCreateImage()
  ; return 0; }
  EOF
 -if { (eval echo configure:9315: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-+if { (eval echo configure:9227: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
++if { (eval echo configure:9228: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
    rm -rf conftest*
    eval "ac_cv_lib_$ac_lib_var=yes"
  else
-   echo "configure: failed program was:" >&5
-   cat conftest.$ac_ext >&5
-   rm -rf conftest*
-   eval "ac_cv_lib_$ac_lib_var=no"
- fi
-@@ -9328,27 +9240,27 @@
-   echo "$ac_t""yes" 1>&6
-   _HAVE_XSHM_XEXT=1
- else
-   echo "$ac_t""no" 1>&6
- fi
+@@ -9333,17 +9246,17 @@
  
      ac_safe=`echo "X11/extensions/XShm.h" | sed 'y%./+-%__p_%'`
  echo $ac_n "checking for X11/extensions/XShm.h""... $ac_c" 1>&6
 -echo "configure:9337: checking for X11/extensions/XShm.h" >&5
-+echo "configure:9249: checking for X11/extensions/XShm.h" >&5
++echo "configure:9250: checking for X11/extensions/XShm.h" >&5
  if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
    cat > conftest.$ac_ext <<EOF
 -#line 9342 "configure"
-+#line 9254 "configure"
++#line 9255 "configure"
  #include "confdefs.h"
  #include <X11/extensions/XShm.h>
  EOF
  ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
 -{ (eval echo configure:9347: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
-+{ (eval echo configure:9259: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
++{ (eval echo configure:9260: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
  ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
  if test -z "$ac_err"; then
    rm -rf conftest*
-   eval "ac_cv_header_$ac_safe=yes"
- else
-   echo "$ac_err" >&5
-   echo "configure: failed program was:" >&5
-   cat conftest.$ac_ext >&5
-@@ -9368,36 +9280,36 @@
-         test -n "$_HAVE_XSHM_XEXT"; then
-         cat >> confdefs.h <<\EOF
- #define HAVE_XSHM 1
- EOF
- 
+@@ -9373,7 +9286,7 @@
      fi
  
                  echo $ac_n "checking for XieFloGeometry in -lXIE""... $ac_c" 1>&6
 -echo "configure:9377: checking for XieFloGeometry in -lXIE" >&5
-+echo "configure:9289: checking for XieFloGeometry in -lXIE" >&5
++echo "configure:9290: checking for XieFloGeometry in -lXIE" >&5
  ac_lib_var=`echo XIE'_'XieFloGeometry | sed 'y%./+-%__p_%'`
  if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
- else
+@@ -9381,7 +9294,7 @@
    ac_save_LIBS="$LIBS"
  LIBS="-lXIE $XLIBS $XEXT_LIBS $LIBS"
  cat > conftest.$ac_ext <<EOF
 -#line 9385 "configure"
-+#line 9297 "configure"
++#line 9298 "configure"
  #include "confdefs.h"
  /* Override any gcc2 internal prototype to avoid an error.  */
  /* We use char because int might match the return type of a gcc2
-     builtin and then its argument prototype would still apply.  */
- char XieFloGeometry();
- 
- int main() {
+@@ -9392,7 +9305,7 @@
  XieFloGeometry()
  ; return 0; }
  EOF
 -if { (eval echo configure:9396: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-+if { (eval echo configure:9308: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
++if { (eval echo configure:9309: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
    rm -rf conftest*
    eval "ac_cv_lib_$ac_lib_var=yes"
  else
-   echo "configure: failed program was:" >&5
-   cat conftest.$ac_ext >&5
-   rm -rf conftest*
-   eval "ac_cv_lib_$ac_lib_var=no"
- fi
-@@ -9409,27 +9321,27 @@
-   echo "$ac_t""yes" 1>&6
-   MOZ_XIE_LIBS="-lXIE"
- else
-   echo "$ac_t""no" 1>&6
- fi
+@@ -9414,17 +9327,17 @@
  
      ac_safe=`echo "X11/extensions/XIElib.h" | sed 'y%./+-%__p_%'`
  echo $ac_n "checking for X11/extensions/XIElib.h""... $ac_c" 1>&6
 -echo "configure:9418: checking for X11/extensions/XIElib.h" >&5
-+echo "configure:9330: checking for X11/extensions/XIElib.h" >&5
++echo "configure:9331: checking for X11/extensions/XIElib.h" >&5
  if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
    cat > conftest.$ac_ext <<EOF
 -#line 9423 "configure"
-+#line 9335 "configure"
++#line 9336 "configure"
  #include "confdefs.h"
  #include <X11/extensions/XIElib.h>
  EOF
  ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
 -{ (eval echo configure:9428: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
-+{ (eval echo configure:9340: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
++{ (eval echo configure:9341: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
  ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
  if test -z "$ac_err"; then
    rm -rf conftest*
-   eval "ac_cv_header_$ac_safe=yes"
- else
-   echo "$ac_err" >&5
-   echo "configure: failed program was:" >&5
-   cat conftest.$ac_ext >&5
-@@ -9493,17 +9405,17 @@
-   ft_config_args="$ft_config_args --prefix=$ft_config_prefix"
-   if test x${FT2_CONFIG+set} != xset ; then
-     FT2_CONFIG=$ft_config_prefix/bin/freetype-config
-   fi
- fi
+@@ -9498,7 +9411,7 @@
  # Extract the first word of "freetype-config", so it can be a program name with args.
  set dummy freetype-config; ac_word=$2
  echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
 -echo "configure:9502: checking for $ac_word" >&5
-+echo "configure:9414: checking for $ac_word" >&5
++echo "configure:9415: checking for $ac_word" >&5
  if eval "test \"`echo '$''{'ac_cv_path_FT2_CONFIG'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
-   case "$FT2_CONFIG" in
-   /*)
-   ac_cv_path_FT2_CONFIG="$FT2_CONFIG" # Let the user override the test with a path.
-   ;;
-   ?:/*)			 
-@@ -9529,17 +9441,17 @@
-   echo "$ac_t""$FT2_CONFIG" 1>&6
- else
-   echo "$ac_t""no" 1>&6
- fi
- 
+@@ -9534,7 +9447,7 @@
  
  min_ft_version=6.1.0
  echo $ac_n "checking for FreeType - version >= $min_ft_version""... $ac_c" 1>&6
 -echo "configure:9538: checking for FreeType - version >= $min_ft_version" >&5
-+echo "configure:9450: checking for FreeType - version >= $min_ft_version" >&5
++echo "configure:9451: checking for FreeType - version >= $min_ft_version" >&5
  no_ft=""
  if test "$FT2_CONFIG" = "no" ; then
    no_ft=yes
- else
-   FT2_CFLAGS=`$FT2_CONFIG $ft_config_args --cflags`
-   FT2_LIBS=`$FT2_CONFIG $ft_config_args --libs`
-   ft_config_major_version=`$FT2_CONFIG $ft_config_args --version | \
-          sed 's/\([0-9]*\).\([0-9]*\).\([0-9]*\)/\1/'`
-@@ -9577,17 +9489,17 @@
-       ac_save_CFLAGS="$CFLAGS"
-       ac_save_LIBS="$LIBS"
-       CFLAGS="$CFLAGS $FT2_CFLAGS"
-       LIBS="$FT2_LIBS $LIBS"
-       if test "$cross_compiling" = yes; then
+@@ -9582,7 +9495,7 @@
    echo $ac_n "cross compiling; assumed OK... $ac_c"
  else
    cat > conftest.$ac_ext <<EOF
 -#line 9586 "configure"
-+#line 9498 "configure"
++#line 9499 "configure"
  #include "confdefs.h"
  
  #include <ft2build.h>
- #include FT_FREETYPE_H
- #include <stdio.h>
- #include <stdlib.h>
- 
- int
-@@ -9603,17 +9515,17 @@
-   else
-   {
-     FT_Done_FreeType(library);
-     return 0;
-   }
+@@ -9608,7 +9521,7 @@
  }
  
  EOF
 -if { (eval echo configure:9612: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
-+if { (eval echo configure:9524: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
++if { (eval echo configure:9525: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
  then
    :
  else
-   echo "configure: failed program was:" >&5
-   cat conftest.$ac_ext >&5
-   rm -fr conftest*
-   no_ft=yes
- fi
-@@ -9655,17 +9567,17 @@
- 
- 
- 
- 
- 
+@@ -9660,7 +9573,7 @@
  
  
  echo $ac_n "checking for pthread_create in -lpthreads""... $ac_c" 1>&6
 -echo "configure:9664: checking for pthread_create in -lpthreads" >&5
-+echo "configure:9576: checking for pthread_create in -lpthreads" >&5
++echo "configure:9577: checking for pthread_create in -lpthreads" >&5
  echo "
      #include <pthread.h> 
      void *foo(void *v) { int a = 1;  } 
-     int main() { 
-         pthread_t t;
-         if (!pthread_create(&t, 0, &foo, 0)) {
-             pthread_join(t, 0);
-         }
-@@ -9677,17 +9589,17 @@
-     rm -f dummy.c dummy${ac_exeext} ;
-     if test "$_res" = "0"; then
-         echo "$ac_t""yes" 1>&6
-         USE_PTHREADS=1 _PTHREAD_LDFLAGS="-lpthreads"
-     else
+@@ -9682,7 +9595,7 @@
          echo "$ac_t""no" 1>&6
          
  echo $ac_n "checking for pthread_create in -lpthread""... $ac_c" 1>&6
 -echo "configure:9686: checking for pthread_create in -lpthread" >&5
-+echo "configure:9598: checking for pthread_create in -lpthread" >&5
++echo "configure:9599: checking for pthread_create in -lpthread" >&5
  echo "
      #include <pthread.h> 
      void *foo(void *v) { int a = 1;  } 
-     int main() { 
-         pthread_t t;
-         if (!pthread_create(&t, 0, &foo, 0)) {
-             pthread_join(t, 0);
-         }
-@@ -9699,17 +9611,17 @@
-     rm -f dummy.c dummy${ac_exeext} ;
-     if test "$_res" = "0"; then
-         echo "$ac_t""yes" 1>&6
-         USE_PTHREADS=1 _PTHREAD_LDFLAGS="-lpthread"
-     else
+@@ -9704,7 +9617,7 @@
          echo "$ac_t""no" 1>&6
          
  echo $ac_n "checking for pthread_create in -lc_r""... $ac_c" 1>&6
 -echo "configure:9708: checking for pthread_create in -lc_r" >&5
-+echo "configure:9620: checking for pthread_create in -lc_r" >&5
++echo "configure:9621: checking for pthread_create in -lc_r" >&5
  echo "
      #include <pthread.h> 
      void *foo(void *v) { int a = 1;  } 
-     int main() { 
-         pthread_t t;
-         if (!pthread_create(&t, 0, &foo, 0)) {
-             pthread_join(t, 0);
-         }
-@@ -9721,17 +9633,17 @@
-     rm -f dummy.c dummy${ac_exeext} ;
-     if test "$_res" = "0"; then
-         echo "$ac_t""yes" 1>&6
-         USE_PTHREADS=1 _PTHREAD_LDFLAGS="-lc_r"
-     else
+@@ -9726,7 +9639,7 @@
          echo "$ac_t""no" 1>&6
          
  echo $ac_n "checking for pthread_create in -lc""... $ac_c" 1>&6
 -echo "configure:9730: checking for pthread_create in -lc" >&5
-+echo "configure:9642: checking for pthread_create in -lc" >&5
++echo "configure:9643: checking for pthread_create in -lc" >&5
  echo "
      #include <pthread.h> 
      void *foo(void *v) { int a = 1;  } 
-     int main() { 
-         pthread_t t;
-         if (!pthread_create(&t, 0, &foo, 0)) {
-             pthread_join(t, 0);
-         }
-@@ -9777,17 +9689,17 @@
- fi
- 
- 
- if test "$USE_PTHREADS"x != x
- then
+@@ -9782,7 +9695,7 @@
  				rm -f conftest*
  	ac_cv_have_dash_pthread=no
  	echo $ac_n "checking whether ${CC-cc} accepts -pthread""... $ac_c" 1>&6
 -echo "configure:9786: checking whether ${CC-cc} accepts -pthread" >&5
-+echo "configure:9698: checking whether ${CC-cc} accepts -pthread" >&5
++echo "configure:9699: checking whether ${CC-cc} accepts -pthread" >&5
  	echo 'int main() { return 0; }' | cat > conftest.c
  	${CC-cc} -pthread -o conftest conftest.c > conftest.out 2>&1
  	if test $? -eq 0; then
- 		if test -z "`egrep -i '(unrecognize|unknown)' conftest.out | grep pthread`" && test -z "`egrep -i '(error|incorrect)' conftest.out`" ; then
- 			ac_cv_have_dash_pthread=yes
- 	        case "$target_os" in
- 	        freebsd*)
- # Freebsd doesn't use -pthread for compiles, it uses them for linking
-@@ -9800,17 +9712,17 @@
- 		fi
- 	fi
- 	rm -f conftest*
-     echo "$ac_t""$ac_cv_have_dash_pthread" 1>&6
- 
+@@ -9805,7 +9718,7 @@
  			    ac_cv_have_dash_pthreads=no
      if test "$ac_cv_have_dash_pthread" = "no"; then
  	    echo $ac_n "checking whether ${CC-cc} accepts -pthreads""... $ac_c" 1>&6
 -echo "configure:9809: checking whether ${CC-cc} accepts -pthreads" >&5
-+echo "configure:9721: checking whether ${CC-cc} accepts -pthreads" >&5
++echo "configure:9722: checking whether ${CC-cc} accepts -pthreads" >&5
      	echo 'int main() { return 0; }' | cat > conftest.c
  	    ${CC-cc} -pthreads -o conftest conftest.c > conftest.out 2>&1
      	if test $? -eq 0; then
- 	    	if test -z "`egrep -i '(unrecognize|unknown)' conftest.out | grep pthreads`" && test -z "`egrep -i '(error|incorrect)' conftest.out`" ; then
- 			    ac_cv_have_dash_pthreads=yes
- 			    CFLAGS="$CFLAGS -pthreads"
- 			    CXXFLAGS="$CXXFLAGS -pthreads"
- 		    fi
-@@ -9895,17 +9807,17 @@
- 				CFLAGS="$CFLAGS -mt" 
- 				CXXFLAGS="$CXXFLAGS -mt" 
+@@ -9851,7 +9764,7 @@
  			fi
  			;;
- 	esac
+ 
+-	    *-*-linux*) 
++	    *-*-linux*|*-*-kfreebsd*-gnu) 
+ 			cat >> confdefs.h <<\EOF
+ #define _REENTRANT 1
+ EOF
+@@ -9900,7 +9813,7 @@
  fi
  
  echo $ac_n "checking whether mmap() sees write()s""... $ac_c" 1>&6
 -echo "configure:9904: checking whether mmap() sees write()s" >&5
-+echo "configure:9816: checking whether mmap() sees write()s" >&5
++echo "configure:9817: checking whether mmap() sees write()s" >&5
  
  
  mmap_test_prog='
-     #include <stdlib.h>
-     #include <unistd.h>
-     #include <sys/mman.h>
-     #include <sys/types.h>
-     #include <sys/stat.h>
-@@ -9934,21 +9846,21 @@
-     }
- '
- 
- 
- if test "$cross_compiling" = yes; then
+@@ -9939,11 +9852,11 @@
    result="yes"
  else
    cat > conftest.$ac_ext <<EOF
 -#line 9943 "configure"
-+#line 9855 "configure"
++#line 9856 "configure"
  #include "confdefs.h"
  $mmap_test_prog 
  EOF
 -if { (eval echo configure:9947: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
-+if { (eval echo configure:9859: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
++if { (eval echo configure:9860: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
  then
    result="yes"
  else
-   echo "configure: failed program was:" >&5
-   cat conftest.$ac_ext >&5
-   rm -fr conftest*
-   result="no"
- fi
-@@ -9963,23 +9875,23 @@
- #define MMAP_MISSES_WRITES 1
- EOF
- 
- fi
- 
+@@ -9968,13 +9881,13 @@
  
  if test $ac_cv_prog_gcc = yes; then
      echo $ac_n "checking whether ${CC-cc} needs -traditional""... $ac_c" 1>&6
 -echo "configure:9972: checking whether ${CC-cc} needs -traditional" >&5
-+echo "configure:9884: checking whether ${CC-cc} needs -traditional" >&5
++echo "configure:9885: checking whether ${CC-cc} needs -traditional" >&5
  if eval "test \"`echo '$''{'ac_cv_prog_gcc_traditional'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
      ac_pattern="Autoconf.*'x'"
    cat > conftest.$ac_ext <<EOF
 -#line 9978 "configure"
-+#line 9890 "configure"
++#line 9891 "configure"
  #include "confdefs.h"
  #include <sgtty.h>
  Autoconf TIOCGETP
- EOF
- if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
-   egrep "$ac_pattern" >/dev/null 2>&1; then
-   rm -rf conftest*
-   ac_cv_prog_gcc_traditional=yes
-@@ -9987,17 +9899,17 @@
-   rm -rf conftest*
-   ac_cv_prog_gcc_traditional=no
- fi
- rm -f conftest*
- 
+@@ -9992,7 +9905,7 @@
  
    if test $ac_cv_prog_gcc_traditional = no; then
      cat > conftest.$ac_ext <<EOF
 -#line 9996 "configure"
-+#line 9908 "configure"
++#line 9909 "configure"
  #include "confdefs.h"
  #include <termio.h>
  Autoconf TCGETA
- EOF
- if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
-   egrep "$ac_pattern" >/dev/null 2>&1; then
-   rm -rf conftest*
-   ac_cv_prog_gcc_traditional=yes
-@@ -10009,35 +9921,35 @@
- 
- echo "$ac_t""$ac_cv_prog_gcc_traditional" 1>&6
-   if test $ac_cv_prog_gcc_traditional = yes; then
-     CC="$CC -traditional"
-   fi
+@@ -10014,7 +9927,7 @@
  fi
  
  echo $ac_n "checking for 8-bit clean memcmp""... $ac_c" 1>&6
 -echo "configure:10018: checking for 8-bit clean memcmp" >&5
-+echo "configure:9930: checking for 8-bit clean memcmp" >&5
++echo "configure:9931: checking for 8-bit clean memcmp" >&5
  if eval "test \"`echo '$''{'ac_cv_func_memcmp_clean'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
-   if test "$cross_compiling" = yes; then
+@@ -10022,7 +9935,7 @@
    ac_cv_func_memcmp_clean=no
  else
    cat > conftest.$ac_ext <<EOF
 -#line 10026 "configure"
-+#line 9938 "configure"
++#line 9939 "configure"
  #include "confdefs.h"
  
  main()
- {
-   char c0 = 0x40, c1 = 0x80, c2 = 0x81;
-   exit(memcmp(&c0, &c2, 1) < 0 && memcmp(&c1, &c2, 1) < 0 ? 0 : 1);
+@@ -10032,7 +9945,7 @@
  }
  
  EOF
 -if { (eval echo configure:10036: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
-+if { (eval echo configure:9948: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
++if { (eval echo configure:9949: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
  then
    ac_cv_func_memcmp_clean=yes
  else
-   echo "configure: failed program was:" >&5
-   cat conftest.$ac_ext >&5
-   rm -fr conftest*
-   ac_cv_func_memcmp_clean=no
- fi
-@@ -10047,22 +9959,22 @@
- fi
- 
- echo "$ac_t""$ac_cv_func_memcmp_clean" 1>&6
- test $ac_cv_func_memcmp_clean = no && LIBOBJS="$LIBOBJS memcmp.${ac_objext}"
- 
+@@ -10052,12 +9965,12 @@
  for ac_func in random strerror lchown fchmod snprintf statvfs memmove rint stat64 lstat64
  do
  echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
 -echo "configure:10056: checking for $ac_func" >&5
-+echo "configure:9968: checking for $ac_func" >&5
++echo "configure:9969: checking for $ac_func" >&5
  if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
    cat > conftest.$ac_ext <<EOF
 -#line 10061 "configure"
-+#line 9973 "configure"
++#line 9974 "configure"
  #include "confdefs.h"
  /* System header to define __stub macros and hopefully few prototypes,
      which can conflict with char $ac_func(); below.  */
- #include <assert.h>
- /* Override any gcc2 internal prototype to avoid an error.  */
- /* We use char because int might match the return type of a gcc2
-     builtin and then its argument prototype would still apply.  */
- char $ac_func();
-@@ -10075,17 +9987,17 @@
- #if defined (__stub_$ac_func) || defined (__stub___$ac_func)
- choke me
- #else
- $ac_func();
- #endif
+@@ -10080,7 +9993,7 @@
  
  ; return 0; }
  EOF
 -if { (eval echo configure:10084: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-+if { (eval echo configure:9996: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
++if { (eval echo configure:9997: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
    rm -rf conftest*
    eval "ac_cv_func_$ac_func=yes"
  else
-   echo "configure: failed program was:" >&5
-   cat conftest.$ac_ext >&5
-   rm -rf conftest*
-   eval "ac_cv_func_$ac_func=no"
- fi
-@@ -10102,22 +10014,22 @@
- else
-   echo "$ac_t""no" 1>&6
- fi
- done
- 
+@@ -10107,12 +10020,12 @@
  for ac_func in flockfile getpagesize
  do
  echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
 -echo "configure:10111: checking for $ac_func" >&5
-+echo "configure:10023: checking for $ac_func" >&5
++echo "configure:10024: checking for $ac_func" >&5
  if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
    cat > conftest.$ac_ext <<EOF
 -#line 10116 "configure"
-+#line 10028 "configure"
++#line 10029 "configure"
  #include "confdefs.h"
  /* System header to define __stub macros and hopefully few prototypes,
      which can conflict with char $ac_func(); below.  */
- #include <assert.h>
- /* Override any gcc2 internal prototype to avoid an error.  */
- /* We use char because int might match the return type of a gcc2
-     builtin and then its argument prototype would still apply.  */
- char $ac_func();
-@@ -10130,17 +10042,17 @@
- #if defined (__stub_$ac_func) || defined (__stub___$ac_func)
- choke me
- #else
- $ac_func();
- #endif
+@@ -10135,7 +10048,7 @@
  
  ; return 0; }
  EOF
 -if { (eval echo configure:10139: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-+if { (eval echo configure:10051: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
++if { (eval echo configure:10052: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
    rm -rf conftest*
    eval "ac_cv_func_$ac_func=yes"
  else
-   echo "configure: failed program was:" >&5
-   cat conftest.$ac_ext >&5
-   rm -rf conftest*
-   eval "ac_cv_func_$ac_func=no"
- fi
-@@ -10159,22 +10071,22 @@
- fi
- done
- 
- 
- if test -z "$MACOS_DEPLOYMENT_TARGET" || test "$MACOS_DEPLOYMENT_TARGET" -ge "100200"; then
+@@ -10164,12 +10077,12 @@
    for ac_func in localtime_r strtok_r
  do
  echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
 -echo "configure:10168: checking for $ac_func" >&5
-+echo "configure:10080: checking for $ac_func" >&5
++echo "configure:10081: checking for $ac_func" >&5
  if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
    cat > conftest.$ac_ext <<EOF
 -#line 10173 "configure"
-+#line 10085 "configure"
++#line 10086 "configure"
  #include "confdefs.h"
  /* System header to define __stub macros and hopefully few prototypes,
      which can conflict with char $ac_func(); below.  */
- #include <assert.h>
- /* Override any gcc2 internal prototype to avoid an error.  */
- /* We use char because int might match the return type of a gcc2
-     builtin and then its argument prototype would still apply.  */
- char $ac_func();
-@@ -10187,17 +10099,17 @@
- #if defined (__stub_$ac_func) || defined (__stub___$ac_func)
- choke me
- #else
- $ac_func();
- #endif
+@@ -10192,7 +10105,7 @@
  
  ; return 0; }
  EOF
 -if { (eval echo configure:10196: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-+if { (eval echo configure:10108: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
++if { (eval echo configure:10109: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
    rm -rf conftest*
    eval "ac_cv_func_$ac_func=yes"
  else
-   echo "configure: failed program was:" >&5
-   cat conftest.$ac_ext >&5
-   rm -rf conftest*
-   eval "ac_cv_func_$ac_func=no"
- fi
-@@ -10223,29 +10135,29 @@
- ac_ext=C
- # CXXFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
- ac_cpp='$CXXCPP $CPPFLAGS'
- ac_compile='${CXX-g++} -c $CXXFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
- ac_link='${CXX-g++} -o conftest${ac_exeext} $CXXFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
+@@ -10228,19 +10141,19 @@
  cross_compiling=$ac_cv_prog_cxx_cross
  
  echo $ac_n "checking for wcrtomb""... $ac_c" 1>&6
 -echo "configure:10232: checking for wcrtomb" >&5
-+echo "configure:10144: checking for wcrtomb" >&5
++echo "configure:10145: checking for wcrtomb" >&5
  if eval "test \"`echo '$''{'ac_cv_have_wcrtomb'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
    cat > conftest.$ac_ext <<EOF
 -#line 10237 "configure"
-+#line 10149 "configure"
++#line 10150 "configure"
  #include "confdefs.h"
  #include <wchar.h>
  int main() {
@@ -5406,32 +3382,22 @@
  ; return 0; }
  EOF
 -if { (eval echo configure:10244: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-+if { (eval echo configure:10156: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
++if { (eval echo configure:10157: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
    rm -rf conftest*
    ac_cv_have_wcrtomb="yes"
  else
-   echo "configure: failed program was:" >&5
-   cat conftest.$ac_ext >&5
-   rm -rf conftest*
-   ac_cv_have_wcrtomb="no"
- fi
-@@ -10255,29 +10167,29 @@
- echo "$ac_t""$ac_cv_have_wcrtomb" 1>&6
- if test "$ac_cv_have_wcrtomb" = "yes"; then
-     cat >> confdefs.h <<\EOF
- #define HAVE_WCRTOMB 1
- EOF
+@@ -10260,19 +10173,19 @@
  
  fi
  echo $ac_n "checking for mbrtowc""... $ac_c" 1>&6
 -echo "configure:10264: checking for mbrtowc" >&5
-+echo "configure:10176: checking for mbrtowc" >&5
++echo "configure:10177: checking for mbrtowc" >&5
  if eval "test \"`echo '$''{'ac_cv_have_mbrtowc'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
    cat > conftest.$ac_ext <<EOF
 -#line 10269 "configure"
-+#line 10181 "configure"
++#line 10182 "configure"
  #include "confdefs.h"
  #include <wchar.h>
  int main() {
@@ -5439,317 +3405,199 @@
  ; return 0; }
  EOF
 -if { (eval echo configure:10276: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-+if { (eval echo configure:10188: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
++if { (eval echo configure:10189: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
    rm -rf conftest*
    ac_cv_have_mbrtowc="yes"
  else
-   echo "configure: failed program was:" >&5
-   cat conftest.$ac_ext >&5
-   rm -rf conftest*
-   ac_cv_have_mbrtowc="no"
- fi
-@@ -10296,34 +10208,34 @@
- ac_cpp='$CPP $CPPFLAGS'
- ac_compile='${CC-cc} -c $CFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
- ac_link='${CC-cc} -o conftest${ac_exeext} $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
- cross_compiling=$ac_cv_prog_cc_cross
- 
+@@ -10301,12 +10214,12 @@
  fi
  
  echo $ac_n "checking for res_ninit()""... $ac_c" 1>&6
 -echo "configure:10305: checking for res_ninit()" >&5
-+echo "configure:10217: checking for res_ninit()" >&5
++echo "configure:10218: checking for res_ninit()" >&5
  if eval "test \"`echo '$''{'ac_cv_func_res_ninit'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
    cat > conftest.$ac_ext <<EOF
 -#line 10310 "configure"
-+#line 10222 "configure"
++#line 10223 "configure"
  #include "confdefs.h"
  
          #ifdef linux
-         #define _BSD_SOURCE 1
-         #endif
-         #include <resolv.h>
-         
- int main() {
+@@ -10318,7 +10231,7 @@
  int foo = res_ninit(&_res);
  ; return 0; }
  EOF
 -if { (eval echo configure:10322: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-+if { (eval echo configure:10234: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
++if { (eval echo configure:10235: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
    rm -rf conftest*
    ac_cv_func_res_ninit=yes
  else
-   echo "configure: failed program was:" >&5
-   cat conftest.$ac_ext >&5
-   rm -rf conftest*
-   ac_cv_func_res_ninit=no
- fi
-@@ -10343,33 +10255,33 @@
- ac_ext=C
- # CXXFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
- ac_cpp='$CXXCPP $CPPFLAGS'
- ac_compile='${CXX-g++} -c $CXXFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
- ac_link='${CXX-g++} -o conftest${ac_exeext} $CXXFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
+@@ -10348,12 +10261,12 @@
  cross_compiling=$ac_cv_prog_cxx_cross
  
  echo $ac_n "checking for gnu_get_libc_version()""... $ac_c" 1>&6
 -echo "configure:10352: checking for gnu_get_libc_version()" >&5
-+echo "configure:10264: checking for gnu_get_libc_version()" >&5
++echo "configure:10265: checking for gnu_get_libc_version()" >&5
  if eval "test \"`echo '$''{'ac_cv_func_gnu_get_libc_version'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
    cat > conftest.$ac_ext <<EOF
 -#line 10357 "configure"
-+#line 10269 "configure"
++#line 10270 "configure"
  #include "confdefs.h"
  
          #ifdef HAVE_GNU_LIBC_VERSION_H
-         #include <gnu/libc-version.h>
-         #endif
-         
- int main() {
+@@ -10364,7 +10277,7 @@
  const char *glibc_version = gnu_get_libc_version();
  ; return 0; }
  EOF
 -if { (eval echo configure:10368: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-+if { (eval echo configure:10280: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
++if { (eval echo configure:10281: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
    rm -rf conftest*
    ac_cv_func_gnu_get_libc_version=yes
  else
-   echo "configure: failed program was:" >&5
-   cat conftest.$ac_ext >&5
-   rm -rf conftest*
-   ac_cv_func_gnu_get_libc_version=no 
-         
-@@ -10388,39 +10300,39 @@
- fi
- 
- case $target_os in
-     os2*|msvc*|mks*|cygwin*|mingw*|darwin*|wince*)
-         ;;
+@@ -10393,7 +10306,7 @@
      *)
      
  echo $ac_n "checking for iconv in -lc""... $ac_c" 1>&6
 -echo "configure:10397: checking for iconv in -lc" >&5
-+echo "configure:10309: checking for iconv in -lc" >&5
++echo "configure:10310: checking for iconv in -lc" >&5
  ac_lib_var=`echo c'_'iconv | sed 'y%./+-%__p_%'`
  if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
- else
+@@ -10401,7 +10314,7 @@
    ac_save_LIBS="$LIBS"
  LIBS="-lc  $LIBS"
  cat > conftest.$ac_ext <<EOF
 -#line 10405 "configure"
-+#line 10317 "configure"
++#line 10318 "configure"
  #include "confdefs.h"
  /* Override any gcc2 internal prototype to avoid an error.  */
  #ifdef __cplusplus
- extern "C"
- #endif
- /* We use char because int might match the return type of a gcc2
-     builtin and then its argument prototype would still apply.  */
- char iconv();
- 
- int main() {
+@@ -10415,7 +10328,7 @@
  iconv()
  ; return 0; }
  EOF
 -if { (eval echo configure:10419: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-+if { (eval echo configure:10331: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
++if { (eval echo configure:10332: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
    rm -rf conftest*
    eval "ac_cv_lib_$ac_lib_var=yes"
  else
-   echo "configure: failed program was:" >&5
-   cat conftest.$ac_ext >&5
-   rm -rf conftest*
-   eval "ac_cv_lib_$ac_lib_var=no"
- fi
-@@ -10429,39 +10341,39 @@
- 
- fi
- if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
-   echo "$ac_t""yes" 1>&6
-   _ICONV_LIBS="$_ICONV_LIBS"
+@@ -10434,7 +10347,7 @@
  else
    echo "$ac_t""no" 1>&6
  echo $ac_n "checking for iconv in -liconv""... $ac_c" 1>&6
 -echo "configure:10438: checking for iconv in -liconv" >&5
-+echo "configure:10350: checking for iconv in -liconv" >&5
++echo "configure:10351: checking for iconv in -liconv" >&5
  ac_lib_var=`echo iconv'_'iconv | sed 'y%./+-%__p_%'`
  if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
- else
+@@ -10442,7 +10355,7 @@
    ac_save_LIBS="$LIBS"
  LIBS="-liconv  $LIBS"
  cat > conftest.$ac_ext <<EOF
 -#line 10446 "configure"
-+#line 10358 "configure"
++#line 10359 "configure"
  #include "confdefs.h"
  /* Override any gcc2 internal prototype to avoid an error.  */
  #ifdef __cplusplus
- extern "C"
- #endif
- /* We use char because int might match the return type of a gcc2
-     builtin and then its argument prototype would still apply.  */
- char iconv();
- 
- int main() {
+@@ -10456,7 +10369,7 @@
  iconv()
  ; return 0; }
  EOF
 -if { (eval echo configure:10460: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-+if { (eval echo configure:10372: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
++if { (eval echo configure:10373: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
    rm -rf conftest*
    eval "ac_cv_lib_$ac_lib_var=yes"
  else
-   echo "configure: failed program was:" >&5
-   cat conftest.$ac_ext >&5
-   rm -rf conftest*
-   eval "ac_cv_lib_$ac_lib_var=no"
- fi
-@@ -10470,39 +10382,39 @@
- 
- fi
- if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
-   echo "$ac_t""yes" 1>&6
-   _ICONV_LIBS="$_ICONV_LIBS -liconv"
+@@ -10475,7 +10388,7 @@
  else
    echo "$ac_t""no" 1>&6
  echo $ac_n "checking for libiconv in -liconv""... $ac_c" 1>&6
 -echo "configure:10479: checking for libiconv in -liconv" >&5
-+echo "configure:10391: checking for libiconv in -liconv" >&5
++echo "configure:10392: checking for libiconv in -liconv" >&5
  ac_lib_var=`echo iconv'_'libiconv | sed 'y%./+-%__p_%'`
  if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
- else
+@@ -10483,7 +10396,7 @@
    ac_save_LIBS="$LIBS"
  LIBS="-liconv  $LIBS"
  cat > conftest.$ac_ext <<EOF
 -#line 10487 "configure"
-+#line 10399 "configure"
++#line 10400 "configure"
  #include "confdefs.h"
  /* Override any gcc2 internal prototype to avoid an error.  */
  #ifdef __cplusplus
- extern "C"
- #endif
- /* We use char because int might match the return type of a gcc2
-     builtin and then its argument prototype would still apply.  */
- char libiconv();
- 
- int main() {
+@@ -10497,7 +10410,7 @@
  libiconv()
  ; return 0; }
  EOF
 -if { (eval echo configure:10501: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-+if { (eval echo configure:10413: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
++if { (eval echo configure:10414: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
    rm -rf conftest*
    eval "ac_cv_lib_$ac_lib_var=yes"
  else
-   echo "configure: failed program was:" >&5
-   cat conftest.$ac_ext >&5
-   rm -rf conftest*
-   eval "ac_cv_lib_$ac_lib_var=no"
- fi
-@@ -10519,36 +10431,36 @@
- 
- fi
- 
- fi
- 
+@@ -10524,12 +10437,12 @@
  _SAVE_LIBS=$LIBS
  LIBS="$LIBS $_ICONV_LIBS"
  echo $ac_n "checking for iconv()""... $ac_c" 1>&6
 -echo "configure:10528: checking for iconv()" >&5
-+echo "configure:10440: checking for iconv()" >&5
++echo "configure:10441: checking for iconv()" >&5
  if eval "test \"`echo '$''{'ac_cv_func_iconv'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
    cat > conftest.$ac_ext <<EOF
 -#line 10533 "configure"
-+#line 10445 "configure"
++#line 10446 "configure"
  #include "confdefs.h"
  
          #include <stdlib.h>
-         #include <iconv.h>
-         
- int main() {
- 
-             iconv_t h = iconv_open("", "");
-             iconv(h, NULL, NULL, NULL, NULL);
-             iconv_close(h);
+@@ -10543,7 +10456,7 @@
          
  ; return 0; }
  EOF
 -if { (eval echo configure:10547: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-+if { (eval echo configure:10459: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
++if { (eval echo configure:10460: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
    rm -rf conftest*
    ac_cv_func_iconv=yes
  else
-   echo "configure: failed program was:" >&5
-   cat conftest.$ac_ext >&5
-   rm -rf conftest*
-   ac_cv_func_iconv=no 
-         
-@@ -10562,37 +10474,37 @@
-     cat >> confdefs.h <<\EOF
- #define HAVE_ICONV 1
- EOF
- 
-     DYNAMIC_XPCOM_LIBS="$DYNAMIC_XPCOM_LIBS $_ICONV_LIBS"
+@@ -10567,12 +10480,12 @@
      LIBXUL_LIBS="$LIBXUL_LIBS $_ICONV_LIBS"
      LIBICONV="$_ICONV_LIBS"
      echo $ac_n "checking for iconv() with const input""... $ac_c" 1>&6
 -echo "configure:10571: checking for iconv() with const input" >&5
-+echo "configure:10483: checking for iconv() with const input" >&5
++echo "configure:10484: checking for iconv() with const input" >&5
  if eval "test \"`echo '$''{'ac_cv_func_const_iconv'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
    cat > conftest.$ac_ext <<EOF
 -#line 10576 "configure"
-+#line 10488 "configure"
++#line 10489 "configure"
  #include "confdefs.h"
  
              #include <stdlib.h>
-             #include <iconv.h>
-             
- int main() {
- 
-                 const char *input = "testing";
-                 iconv_t h = iconv_open("", "");
-                 iconv(h, &input, NULL, NULL, NULL);
-                 iconv_close(h);
+@@ -10587,7 +10500,7 @@
              
  ; return 0; }
  EOF
 -if { (eval echo configure:10591: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
-+if { (eval echo configure:10503: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
++if { (eval echo configure:10504: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
    rm -rf conftest*
    ac_cv_func_const_iconv=yes
  else
-   echo "configure: failed program was:" >&5
-   cat conftest.$ac_ext >&5
-   rm -rf conftest*
-   ac_cv_func_const_iconv=no 
-             
-@@ -10611,29 +10523,29 @@
- fi
- LIBS=$_SAVE_LIBS
- 
-     ;;
- esac
+@@ -10616,19 +10529,19 @@
  
  
    echo $ac_n "checking for nl_langinfo and CODESET""... $ac_c" 1>&6
 -echo "configure:10620: checking for nl_langinfo and CODESET" >&5
-+echo "configure:10532: checking for nl_langinfo and CODESET" >&5
++echo "configure:10533: checking for nl_langinfo and CODESET" >&5
  if eval "test \"`echo '$''{'am_cv_langinfo_codeset'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
    cat > conftest.$ac_ext <<EOF
 -#line 10625 "configure"
-+#line 10537 "configure"
++#line 10538 "configure"
  #include "confdefs.h"
  #include <langinfo.h>
  int main() {
@@ -5757,579 +3605,365 @@
  ; return 0; }
  EOF
 -if { (eval echo configure:10632: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-+if { (eval echo configure:10544: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
++if { (eval echo configure:10545: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
    rm -rf conftest*
    am_cv_langinfo_codeset=yes
  else
-   echo "configure: failed program was:" >&5
-   cat conftest.$ac_ext >&5
-   rm -rf conftest*
-   am_cv_langinfo_codeset=no
- fi
-@@ -10655,123 +10567,123 @@
- # CFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
- ac_cpp='$CPP $CPPFLAGS'
- ac_compile='${CC-cc} -c $CFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
- ac_link='${CC-cc} -o conftest${ac_exeext} $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
- cross_compiling=$ac_cv_prog_cc_cross
+@@ -10660,7 +10573,7 @@
  
  
  echo $ac_n "checking for an implementation of va_copy()""... $ac_c" 1>&6
 -echo "configure:10664: checking for an implementation of va_copy()" >&5
-+echo "configure:10576: checking for an implementation of va_copy()" >&5
++echo "configure:10577: checking for an implementation of va_copy()" >&5
  if eval "test \"`echo '$''{'ac_cv_va_copy'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
-   
-     if test "$cross_compiling" = yes; then
-   ac_cv_va_copy=no
+@@ -10670,7 +10583,7 @@
      
  else
    cat > conftest.$ac_ext <<EOF
 -#line 10674 "configure"
-+#line 10586 "configure"
++#line 10587 "configure"
  #include "confdefs.h"
  
          #include <stdarg.h>
-         void f (int i, ...) {
-             va_list args1, args2;
-             va_start (args1, i);
-             va_copy (args2, args1);
-             if (va_arg (args2, int) != 42 || va_arg (args1, int) != 42)
-                 exit (1);
-             va_end (args1); va_end (args2);
+@@ -10684,7 +10597,7 @@
          }
          int main() { f (0, 42); return 0; }
  EOF
 -if { (eval echo configure:10688: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
-+if { (eval echo configure:10600: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
++if { (eval echo configure:10601: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
  then
    ac_cv_va_copy=yes
  else
-   echo "configure: failed program was:" >&5
-   cat conftest.$ac_ext >&5
-   rm -fr conftest*
-   ac_cv_va_copy=no
- fi
- rm -fr conftest*
- fi
- 
- 
- fi
+@@ -10701,7 +10614,7 @@
  
  echo "$ac_t""$ac_cv_va_copy" 1>&6
  echo $ac_n "checking for an implementation of __va_copy()""... $ac_c" 1>&6
 -echo "configure:10705: checking for an implementation of __va_copy()" >&5
-+echo "configure:10617: checking for an implementation of __va_copy()" >&5
++echo "configure:10618: checking for an implementation of __va_copy()" >&5
  if eval "test \"`echo '$''{'ac_cv___va_copy'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
-   
-     if test "$cross_compiling" = yes; then
-   ac_cv___va_copy=no
+@@ -10711,7 +10624,7 @@
      
  else
    cat > conftest.$ac_ext <<EOF
 -#line 10715 "configure"
-+#line 10627 "configure"
++#line 10628 "configure"
  #include "confdefs.h"
  
          #include <stdarg.h>
-         void f (int i, ...) {
-             va_list args1, args2;
-             va_start (args1, i);
-             __va_copy (args2, args1);
-             if (va_arg (args2, int) != 42 || va_arg (args1, int) != 42)
-                 exit (1);
-             va_end (args1); va_end (args2);
+@@ -10725,7 +10638,7 @@
          }
          int main() { f (0, 42); return 0; }
  EOF
 -if { (eval echo configure:10729: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
-+if { (eval echo configure:10641: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
++if { (eval echo configure:10642: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
  then
    ac_cv___va_copy=yes
  else
-   echo "configure: failed program was:" >&5
-   cat conftest.$ac_ext >&5
-   rm -fr conftest*
-   ac_cv___va_copy=no
- fi
- rm -fr conftest*
- fi
- 
- 
- fi
+@@ -10742,7 +10655,7 @@
  
  echo "$ac_t""$ac_cv___va_copy" 1>&6
  echo $ac_n "checking whether va_lists can be copied by value""... $ac_c" 1>&6
 -echo "configure:10746: checking whether va_lists can be copied by value" >&5
-+echo "configure:10658: checking whether va_lists can be copied by value" >&5
++echo "configure:10659: checking whether va_lists can be copied by value" >&5
  if eval "test \"`echo '$''{'ac_cv_va_val_copy'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
-   
-     if test "$cross_compiling" = yes; then
-   ac_cv_va_val_copy=yes
+@@ -10752,7 +10665,7 @@
      
  else
    cat > conftest.$ac_ext <<EOF
 -#line 10756 "configure"
-+#line 10668 "configure"
++#line 10669 "configure"
  #include "confdefs.h"
  
          #include <stdarg.h>
-         void f (int i, ...) {
-             va_list args1, args2;
-             va_start (args1, i);
-             args2 = args1;
-             if (va_arg (args2, int) != 42 || va_arg (args1, int) != 42)
-                 exit (1);
-             va_end (args1); va_end (args2);
+@@ -10766,7 +10679,7 @@
          }
          int main() { f (0, 42); return 0; }
  EOF
 -if { (eval echo configure:10770: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
-+if { (eval echo configure:10682: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
++if { (eval echo configure:10683: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
  then
    ac_cv_va_val_copy=yes
  else
-   echo "configure: failed program was:" >&5
-   cat conftest.$ac_ext >&5
-   rm -fr conftest*
-   ac_cv_va_val_copy=no
- fi
-@@ -10860,17 +10772,17 @@
- 	    cd ${_curdir}
- 	    rm -rf conftest* _conftest
- 	    	    ;;
- esac
- 
+@@ -10865,7 +10778,7 @@
  if test "$GNU_CXX"; then
  
    echo $ac_n "checking for C++ exceptions flag""... $ac_c" 1>&6
 -echo "configure:10869: checking for C++ exceptions flag" >&5
-+echo "configure:10781: checking for C++ exceptions flag" >&5
++echo "configure:10782: checking for C++ exceptions flag" >&5
  
      if eval "test \"`echo '$''{'ac_cv_cxx_exceptions_flags'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
- else
-   echo "int main() { return 0; }" | cat > conftest.C
- 
-   ${CXX-g++} ${CXXFLAGS} -c -fno-handle-exceptions conftest.C > conftest.out 2>&1
- 
-@@ -10895,35 +10807,35 @@
- ac_compile='${CXX-g++} -c $CXXFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
- ac_link='${CXX-g++} -o conftest${ac_exeext} $CXXFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
- cross_compiling=$ac_cv_prog_cxx_cross
- 
- 
+@@ -10900,12 +10813,12 @@
  HAVE_GCC3_ABI=
  if test "$GNU_CC"; then
    echo $ac_n "checking for gcc 3.0 ABI""... $ac_c" 1>&6
 -echo "configure:10904: checking for gcc 3.0 ABI" >&5
-+echo "configure:10816: checking for gcc 3.0 ABI" >&5
++echo "configure:10817: checking for gcc 3.0 ABI" >&5
  if eval "test \"`echo '$''{'ac_cv_gcc_three_abi'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
    cat > conftest.$ac_ext <<EOF
 -#line 10909 "configure"
-+#line 10821 "configure"
++#line 10822 "configure"
  #include "confdefs.h"
  
  int main() {
- 
- #if defined(__GXX_ABI_VERSION) && __GXX_ABI_VERSION >= 100 /* G++ V3 ABI */
-   return 0;
- #else
- #error Not gcc3.
- #endif
+@@ -10918,7 +10831,7 @@
                        
  ; return 0; }
  EOF
 -if { (eval echo configure:10922: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
-+if { (eval echo configure:10834: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
++if { (eval echo configure:10835: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
    rm -rf conftest*
    ac_cv_gcc_three_abi="yes"
  else
-   echo "configure: failed program was:" >&5
-   cat conftest.$ac_ext >&5
-   rm -rf conftest*
-   ac_cv_gcc_three_abi="no"
- fi
-@@ -10937,32 +10849,32 @@
-   else
-       TARGET_COMPILER_ABI="${TARGET_COMPILER_ABI-gcc2}"
-   fi
- fi
- 
+@@ -10942,12 +10855,12 @@
  
  
  echo $ac_n "checking for C++ \"explicit\" keyword""... $ac_c" 1>&6
 -echo "configure:10946: checking for C++ \"explicit\" keyword" >&5
-+echo "configure:10858: checking for C++ \"explicit\" keyword" >&5
++echo "configure:10859: checking for C++ \"explicit\" keyword" >&5
  if eval "test \"`echo '$''{'ac_cv_cpp_explicit'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
    cat > conftest.$ac_ext <<EOF
 -#line 10951 "configure"
-+#line 10863 "configure"
++#line 10864 "configure"
  #include "confdefs.h"
  class X {
                                 public: explicit X(int i) : i_(i) {}
-                                private: int i_;
-                                };
- int main() {
+@@ -10957,7 +10870,7 @@
  X x(3);
  ; return 0; }
  EOF
 -if { (eval echo configure:10961: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
-+if { (eval echo configure:10873: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
++if { (eval echo configure:10874: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
    rm -rf conftest*
    ac_cv_cpp_explicit=yes
  else
-   echo "configure: failed program was:" >&5
-   cat conftest.$ac_ext >&5
-   rm -rf conftest*
-   ac_cv_cpp_explicit=no
- fi
-@@ -10973,22 +10885,22 @@
- if test "$ac_cv_cpp_explicit" = yes ; then
-    cat >> confdefs.h <<\EOF
- #define HAVE_CPP_EXPLICIT 1
- EOF
- 
+@@ -10978,12 +10891,12 @@
  fi
  
  echo $ac_n "checking for C++ \"typename\" keyword""... $ac_c" 1>&6
 -echo "configure:10982: checking for C++ \"typename\" keyword" >&5
-+echo "configure:10894: checking for C++ \"typename\" keyword" >&5
++echo "configure:10895: checking for C++ \"typename\" keyword" >&5
  if eval "test \"`echo '$''{'ac_cv_cpp_typename'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
    cat > conftest.$ac_ext <<EOF
 -#line 10987 "configure"
-+#line 10899 "configure"
++#line 10900 "configure"
  #include "confdefs.h"
  class param {
                                 public:
-                                    typedef unsigned long num_type;
-                                };
- 
-                                template <class T> class tplt {
-                                public:
-@@ -10997,17 +10909,17 @@
-                                        return num;
-                                    }
-                                };
- int main() {
- tplt<param> A;
+@@ -11002,7 +10915,7 @@
                                 A.foo(0);
  ; return 0; }
  EOF
 -if { (eval echo configure:11006: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
-+if { (eval echo configure:10918: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
++if { (eval echo configure:10919: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
    rm -rf conftest*
    ac_cv_cpp_typename=yes
  else
-   echo "configure: failed program was:" >&5
-   cat conftest.$ac_ext >&5
-   rm -rf conftest*
-   ac_cv_cpp_typename=no
- fi
-@@ -11018,32 +10930,32 @@
- if test "$ac_cv_cpp_typename" = yes ; then
-    cat >> confdefs.h <<\EOF
- #define HAVE_CPP_TYPENAME 1
- EOF
- 
+@@ -11023,12 +10936,12 @@
  fi
  
  echo $ac_n "checking for modern C++ template specialization syntax support""... $ac_c" 1>&6
 -echo "configure:11027: checking for modern C++ template specialization syntax support" >&5
-+echo "configure:10939: checking for modern C++ template specialization syntax support" >&5
++echo "configure:10940: checking for modern C++ template specialization syntax support" >&5
  if eval "test \"`echo '$''{'ac_cv_cpp_modern_specialize_template_syntax'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
    cat > conftest.$ac_ext <<EOF
 -#line 11032 "configure"
-+#line 10944 "configure"
++#line 10945 "configure"
  #include "confdefs.h"
  template <class T> struct X { int a; };
                                 class Y {};
-                                template <> struct X<Y> { double a; };
- int main() {
- X<int> int_x;
+@@ -11038,7 +10951,7 @@
                                 X<Y> y_x;
  ; return 0; }
  EOF
 -if { (eval echo configure:11042: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
-+if { (eval echo configure:10954: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
++if { (eval echo configure:10955: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
    rm -rf conftest*
    ac_cv_cpp_modern_specialize_template_syntax=yes
  else
-   echo "configure: failed program was:" >&5
-   cat conftest.$ac_ext >&5
-   rm -rf conftest*
-   ac_cv_cpp_modern_specialize_template_syntax=no
- fi
-@@ -11055,30 +10967,30 @@
-   cat >> confdefs.h <<\EOF
- #define HAVE_CPP_MODERN_SPECIALIZE_TEMPLATE_SYNTAX 1
- EOF
- 
- fi
+@@ -11060,12 +10973,12 @@
  
  
  echo $ac_n "checking whether partial template specialization works""... $ac_c" 1>&6
 -echo "configure:11064: checking whether partial template specialization works" >&5
-+echo "configure:10976: checking whether partial template specialization works" >&5
++echo "configure:10977: checking whether partial template specialization works" >&5
  if eval "test \"`echo '$''{'ac_cv_cpp_partial_specialization'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
    cat > conftest.$ac_ext <<EOF
 -#line 11069 "configure"
-+#line 10981 "configure"
++#line 10982 "configure"
  #include "confdefs.h"
  template <class T> class Foo {};
                                 template <class T> class Foo<T*> {};
- int main() {
+@@ -11073,7 +10986,7 @@
  return 0;
  ; return 0; }
  EOF
 -if { (eval echo configure:11077: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
-+if { (eval echo configure:10989: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
++if { (eval echo configure:10990: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
    rm -rf conftest*
    ac_cv_cpp_partial_specialization=yes
  else
-   echo "configure: failed program was:" >&5
-   cat conftest.$ac_ext >&5
-   rm -rf conftest*
-   ac_cv_cpp_partial_specialization=no
- fi
-@@ -11089,34 +11001,34 @@
- if test "$ac_cv_cpp_partial_specialization" = yes ; then
-   cat >> confdefs.h <<\EOF
- #define HAVE_CPP_PARTIAL_SPECIALIZATION 1
- EOF
- 
+@@ -11094,12 +11007,12 @@
  fi
  
  echo $ac_n "checking whether operators must be re-defined for templates derived from templates""... $ac_c" 1>&6
 -echo "configure:11098: checking whether operators must be re-defined for templates derived from templates" >&5
-+echo "configure:11010: checking whether operators must be re-defined for templates derived from templates" >&5
++echo "configure:11011: checking whether operators must be re-defined for templates derived from templates" >&5
  if eval "test \"`echo '$''{'ac_cv_need_derived_template_operators'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
    cat > conftest.$ac_ext <<EOF
 -#line 11103 "configure"
-+#line 11015 "configure"
++#line 11016 "configure"
  #include "confdefs.h"
  template <class T> class Base { };
                                  template <class T>
-                                 Base<T> operator+(const Base<T>& lhs, const Base<T>& rhs) { return lhs; }
-                                 template <class T> class Derived : public Base<T> { };
- int main() {
- Derived<char> a, b;
-                                 Base<char> c = a + b;
+@@ -11111,7 +11024,7 @@
                                  return 0;
  ; return 0; }
  EOF
 -if { (eval echo configure:11115: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
-+if { (eval echo configure:11027: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
++if { (eval echo configure:11028: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
    rm -rf conftest*
    ac_cv_need_derived_template_operators=no
  else
-   echo "configure: failed program was:" >&5
-   cat conftest.$ac_ext >&5
-   rm -rf conftest*
-   ac_cv_need_derived_template_operators=yes
- fi
-@@ -11128,31 +11040,31 @@
-   cat >> confdefs.h <<\EOF
- #define NEED_CPP_DERIVED_TEMPLATE_OPERATORS 1
- EOF
- 
- fi
+@@ -11133,12 +11046,12 @@
  
  
  echo $ac_n "checking whether we need to cast a derived template to pass as its base class""... $ac_c" 1>&6
 -echo "configure:11137: checking whether we need to cast a derived template to pass as its base class" >&5
-+echo "configure:11049: checking whether we need to cast a derived template to pass as its base class" >&5
++echo "configure:11050: checking whether we need to cast a derived template to pass as its base class" >&5
  if eval "test \"`echo '$''{'ac_cv_need_cpp_template_cast_to_base'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
    cat > conftest.$ac_ext <<EOF
 -#line 11142 "configure"
-+#line 11054 "configure"
++#line 11055 "configure"
  #include "confdefs.h"
  template <class T> class Base { };
                                  template <class T> class Derived : public Base<T> { };
-                                 template <class T> int foo(const Base<T>&) { return 0; }
- int main() {
+@@ -11147,7 +11060,7 @@
  Derived<char> bar; return foo(bar);
  ; return 0; }
  EOF
 -if { (eval echo configure:11151: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
-+if { (eval echo configure:11063: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
++if { (eval echo configure:11064: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
    rm -rf conftest*
    ac_cv_need_cpp_template_cast_to_base=no
  else
-   echo "configure: failed program was:" >&5
-   cat conftest.$ac_ext >&5
-   rm -rf conftest*
-   ac_cv_need_cpp_template_cast_to_base=yes
- fi
-@@ -11163,22 +11075,22 @@
- if test "$ac_cv_need_cpp_template_cast_to_base" = yes ; then
-   cat >> confdefs.h <<\EOF
- #define NEED_CPP_TEMPLATE_CAST_TO_BASE 1
- EOF
- 
+@@ -11168,12 +11081,12 @@
  fi
  
  echo $ac_n "checking whether the compiler can resolve const ambiguities for templates""... $ac_c" 1>&6
 -echo "configure:11172: checking whether the compiler can resolve const ambiguities for templates" >&5
-+echo "configure:11084: checking whether the compiler can resolve const ambiguities for templates" >&5
++echo "configure:11085: checking whether the compiler can resolve const ambiguities for templates" >&5
  if eval "test \"`echo '$''{'ac_cv_can_resolve_const_ambiguity'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
    cat > conftest.$ac_ext <<EOF
 -#line 11177 "configure"
-+#line 11089 "configure"
++#line 11090 "configure"
  #include "confdefs.h"
  
                                  template <class T> class ptrClass {
-                                   public: T* ptr;
-                                 };
- 
-                                 template <class T> T* a(ptrClass<T> *arg) {
-                                   return arg->ptr;
-@@ -11189,17 +11101,17 @@
-                                   return arg->ptr;
-                                 }
-                                
- int main() {
-  ptrClass<int> i;
+@@ -11194,7 +11107,7 @@
                                   a(&i); 
  ; return 0; }
  EOF
 -if { (eval echo configure:11198: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
-+if { (eval echo configure:11110: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
++if { (eval echo configure:11111: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
    rm -rf conftest*
    ac_cv_can_resolve_const_ambiguity=yes
  else
-   echo "configure: failed program was:" >&5
-   cat conftest.$ac_ext >&5
-   rm -rf conftest*
-   ac_cv_can_resolve_const_ambiguity=no
- fi
-@@ -11211,41 +11123,41 @@
-   cat >> confdefs.h <<\EOF
- #define CANT_RESOLVE_CPP_CONST_AMBIGUITY 1
- EOF
- 
- fi
+@@ -11216,12 +11129,12 @@
  
  
  echo $ac_n "checking whether the C++ \"using\" keyword can change access""... $ac_c" 1>&6
 -echo "configure:11220: checking whether the C++ \"using\" keyword can change access" >&5
-+echo "configure:11132: checking whether the C++ \"using\" keyword can change access" >&5
++echo "configure:11133: checking whether the C++ \"using\" keyword can change access" >&5
  if eval "test \"`echo '$''{'ac_cv_cpp_access_changing_using2'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
    cat > conftest.$ac_ext <<EOF
 -#line 11225 "configure"
-+#line 11137 "configure"
++#line 11138 "configure"
  #include "confdefs.h"
  class A { protected: int foo() { return 0; } };
                     class B : public A { public: using A::foo; };
- int main() {
+@@ -11229,10 +11142,10 @@
  B b; return b.foo();
  ; return 0; }
  EOF
 -if { (eval echo configure:11233: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
-+if { (eval echo configure:11145: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
++if { (eval echo configure:11146: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
    rm -rf conftest*
    cat > conftest.$ac_ext <<EOF
 -#line 11236 "configure"
-+#line 11148 "configure"
++#line 11149 "configure"
  #include "confdefs.h"
  class A { public: int foo() { return 1; } };
                         class B : public A { private: using A::foo; };
- int main() {
+@@ -11240,7 +11153,7 @@
  B b; return b.foo();
  ; return 0; }
  EOF
 -if { (eval echo configure:11244: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
-+if { (eval echo configure:11156: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
++if { (eval echo configure:11157: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
    rm -rf conftest*
    ac_cv_cpp_access_changing_using2=no
  else
-   echo "configure: failed program was:" >&5
-   cat conftest.$ac_ext >&5
-   rm -rf conftest*
-   ac_cv_cpp_access_changing_using2=yes
- fi
-@@ -11263,38 +11175,38 @@
- if test "$ac_cv_cpp_access_changing_using2" = yes ; then
-    cat >> confdefs.h <<\EOF
- #define HAVE_CPP_ACCESS_CHANGING_USING 1
- EOF
- 
+@@ -11268,12 +11181,12 @@
  fi
  
  echo $ac_n "checking whether the C++ \"using\" keyword resolves ambiguity""... $ac_c" 1>&6
 -echo "configure:11272: checking whether the C++ \"using\" keyword resolves ambiguity" >&5
-+echo "configure:11184: checking whether the C++ \"using\" keyword resolves ambiguity" >&5
++echo "configure:11185: checking whether the C++ \"using\" keyword resolves ambiguity" >&5
  if eval "test \"`echo '$''{'ac_cv_cpp_ambiguity_resolving_using'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
    cat > conftest.$ac_ext <<EOF
 -#line 11277 "configure"
-+#line 11189 "configure"
++#line 11190 "configure"
  #include "confdefs.h"
  class X { 
                                   public: int go(const X&) {return 3;}
-                                          int jo(const X&) {return 3;}
-                                };
-                                class Y : public X {
-                                  public:  int go(int) {return 2;}
-                                           int jo(int) {return 2;}
-                                           using X::jo;
-                                  private: using X::go;
-                                };
- int main() {
+@@ -11289,7 +11202,7 @@
  X x; Y y; y.jo(x);
  ; return 0; }
  EOF
 -if { (eval echo configure:11293: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
-+if { (eval echo configure:11205: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
++if { (eval echo configure:11206: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
    rm -rf conftest*
    ac_cv_cpp_ambiguity_resolving_using=yes
  else
-   echo "configure: failed program was:" >&5
-   cat conftest.$ac_ext >&5
-   rm -rf conftest*
-   ac_cv_cpp_ambiguity_resolving_using=no
- fi
-@@ -11305,29 +11217,29 @@
- if test "$ac_cv_cpp_ambiguity_resolving_using" = yes ; then
-    cat >> confdefs.h <<\EOF
- #define HAVE_CPP_AMBIGUITY_RESOLVING_USING 1
- EOF
- 
+@@ -11310,19 +11223,19 @@
  fi
  
  echo $ac_n "checking for \"std::\" namespace""... $ac_c" 1>&6
 -echo "configure:11314: checking for \"std::\" namespace" >&5
-+echo "configure:11226: checking for \"std::\" namespace" >&5
++echo "configure:11227: checking for \"std::\" namespace" >&5
  if eval "test \"`echo '$''{'ac_cv_cpp_namespace_std'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
    cat > conftest.$ac_ext <<EOF
 -#line 11319 "configure"
-+#line 11231 "configure"
++#line 11232 "configure"
  #include "confdefs.h"
  #include <algorithm>
  int main() {
@@ -6337,105 +3971,73 @@
  ; return 0; }
  EOF
 -if { (eval echo configure:11326: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
-+if { (eval echo configure:11238: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
++if { (eval echo configure:11239: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
    rm -rf conftest*
    ac_cv_cpp_namespace_std=yes
  else
-   echo "configure: failed program was:" >&5
-   cat conftest.$ac_ext >&5
-   rm -rf conftest*
-   ac_cv_cpp_namespace_std=no
- fi
-@@ -11338,32 +11250,32 @@
- if test "$ac_cv_cpp_namespace_std" = yes ; then
-    cat >> confdefs.h <<\EOF
- #define HAVE_CPP_NAMESPACE_STD 1
- EOF
- 
+@@ -11343,12 +11256,12 @@
  fi
  
  echo $ac_n "checking whether standard template operator!=() is ambiguous""... $ac_c" 1>&6
 -echo "configure:11347: checking whether standard template operator!=() is ambiguous" >&5
-+echo "configure:11259: checking whether standard template operator!=() is ambiguous" >&5
++echo "configure:11260: checking whether standard template operator!=() is ambiguous" >&5
  if eval "test \"`echo '$''{'ac_cv_cpp_unambiguous_std_notequal'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
    cat > conftest.$ac_ext <<EOF
 -#line 11352 "configure"
-+#line 11264 "configure"
++#line 11265 "configure"
  #include "confdefs.h"
  #include <algorithm>
                                  struct T1 {};
-                                 int operator==(const T1&, const T1&) { return 0; }
-                                 int operator!=(const T1&, const T1&) { return 0; }
- int main() {
+@@ -11358,7 +11271,7 @@
  T1 a,b; return a != b;
  ; return 0; }
  EOF
 -if { (eval echo configure:11362: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
-+if { (eval echo configure:11274: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
++if { (eval echo configure:11275: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
    rm -rf conftest*
    ac_cv_cpp_unambiguous_std_notequal=unambiguous
  else
-   echo "configure: failed program was:" >&5
-   cat conftest.$ac_ext >&5
-   rm -rf conftest*
-   ac_cv_cpp_unambiguous_std_notequal=ambiguous
- fi
-@@ -11375,30 +11287,30 @@
-   cat >> confdefs.h <<\EOF
- #define HAVE_CPP_UNAMBIGUOUS_STD_NOTEQUAL 1
- EOF
- 
- fi
+@@ -11380,12 +11293,12 @@
  
  
  echo $ac_n "checking for C++ reinterpret_cast""... $ac_c" 1>&6
 -echo "configure:11384: checking for C++ reinterpret_cast" >&5
-+echo "configure:11296: checking for C++ reinterpret_cast" >&5
++echo "configure:11297: checking for C++ reinterpret_cast" >&5
  if eval "test \"`echo '$''{'ac_cv_cpp_reinterpret_cast'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
    cat > conftest.$ac_ext <<EOF
 -#line 11389 "configure"
-+#line 11301 "configure"
++#line 11302 "configure"
  #include "confdefs.h"
  struct X { int i; };
                                 struct Y { int i; };
- int main() {
+@@ -11393,7 +11306,7 @@
  X x; X*const z = &x;Y*y = reinterpret_cast<Y*>(z);
  ; return 0; }
  EOF
 -if { (eval echo configure:11397: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
-+if { (eval echo configure:11309: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
++if { (eval echo configure:11310: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
    rm -rf conftest*
    ac_cv_cpp_reinterpret_cast=yes
  else
-   echo "configure: failed program was:" >&5
-   cat conftest.$ac_ext >&5
-   rm -rf conftest*
-   ac_cv_cpp_reinterpret_cast=no
- fi
-@@ -11409,41 +11321,44 @@
- if test "$ac_cv_cpp_reinterpret_cast" = yes ; then
-    cat >> confdefs.h <<\EOF
- #define HAVE_CPP_NEW_CASTS 1
- EOF
- 
+@@ -11414,7 +11327,7 @@
  fi
  
  echo $ac_n "checking for C++ dynamic_cast to void*""... $ac_c" 1>&6
 -echo "configure:11418: checking for C++ dynamic_cast to void*" >&5
-+echo "configure:11330: checking for C++ dynamic_cast to void*" >&5
++echo "configure:11331: checking for C++ dynamic_cast to void*" >&5
  if eval "test \"`echo '$''{'ac_cv_cpp_dynamic_cast_void_ptr'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
-   if test "$cross_compiling" = yes; then
+@@ -11422,8 +11335,11 @@
    ac_cv_cpp_dynamic_cast_void_ptr=no
  else
    cat > conftest.$ac_ext <<EOF
 -#line 11426 "configure"
-+#line 11338 "configure"
++#line 11339 "configure"
  #include "confdefs.h"
 +#ifdef __cplusplus
 +extern "C" void exit(int);
@@ -6443,44 +4045,27 @@
  class X { int i; public: virtual ~X() { } };
                              class Y { int j; public: virtual ~Y() { } };
                              class Z : public X, public Y { int k; };
- 
-                             int main() {
-                                  Z mdo;
-                                  X *subx = (X*)&mdo;
-                                  Y *suby = (Y*)&mdo;
-                                  return !((((void*)&mdo != (void*)subx) &&
-                                            ((void*)&mdo == dynamic_cast<void*>(subx))) ||
-                                           (((void*)&mdo != (void*)suby) &&
+@@ -11438,7 +11354,7 @@
                                             ((void*)&mdo == dynamic_cast<void*>(suby))));
                              }
  EOF
 -if { (eval echo configure:11442: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
-+if { (eval echo configure:11357: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
++if { (eval echo configure:11358: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
  then
    ac_cv_cpp_dynamic_cast_void_ptr=yes
  else
-   echo "configure: failed program was:" >&5
-   cat conftest.$ac_ext >&5
-   rm -fr conftest*
-   ac_cv_cpp_dynamic_cast_void_ptr=no
- fi
-@@ -11457,29 +11372,29 @@
-    cat >> confdefs.h <<\EOF
- #define HAVE_CPP_DYNAMIC_CAST_TO_VOID_PTR 1
- EOF
- 
- fi
+@@ -11462,19 +11378,19 @@
  
  
  echo $ac_n "checking whether C++ requires implementation of unused virtual methods""... $ac_c" 1>&6
 -echo "configure:11466: checking whether C++ requires implementation of unused virtual methods" >&5
-+echo "configure:11381: checking whether C++ requires implementation of unused virtual methods" >&5
++echo "configure:11382: checking whether C++ requires implementation of unused virtual methods" >&5
  if eval "test \"`echo '$''{'ac_cv_cpp_unused_required'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
    cat > conftest.$ac_ext <<EOF
 -#line 11471 "configure"
-+#line 11386 "configure"
++#line 11387 "configure"
  #include "confdefs.h"
  class X {private: virtual void never_called();};
  int main() {
@@ -6488,69 +4073,46 @@
  ; return 0; }
  EOF
 -if { (eval echo configure:11478: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-+if { (eval echo configure:11393: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
++if { (eval echo configure:11394: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
    rm -rf conftest*
    ac_cv_cpp_unused_required=no
  else
-   echo "configure: failed program was:" >&5
-   cat conftest.$ac_ext >&5
-   rm -rf conftest*
-   ac_cv_cpp_unused_required=yes
- fi
-@@ -11492,33 +11407,33 @@
- #define NEED_CPP_UNUSED_IMPLEMENTATIONS 1
- EOF
- 
- fi
- 
+@@ -11497,12 +11413,12 @@
  
  
  echo $ac_n "checking for trouble comparing to zero near std::operator!=()""... $ac_c" 1>&6
 -echo "configure:11501: checking for trouble comparing to zero near std::operator!=()" >&5
-+echo "configure:11416: checking for trouble comparing to zero near std::operator!=()" >&5
++echo "configure:11417: checking for trouble comparing to zero near std::operator!=()" >&5
  if eval "test \"`echo '$''{'ac_cv_trouble_comparing_to_zero'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
    cat > conftest.$ac_ext <<EOF
 -#line 11506 "configure"
-+#line 11421 "configure"
++#line 11422 "configure"
  #include "confdefs.h"
  #include <algorithm>
                                  template <class T> class Foo {};
-                                 class T2;
-                                 template <class T> int operator==(const T2*, const T&) { return 0; }
-                                 template <class T> int operator!=(const T2*, const T&) { return 0; }
- int main() {
+@@ -11513,7 +11429,7 @@
  Foo<int> f; return (0 != f);
  ; return 0; }
  EOF
 -if { (eval echo configure:11517: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
-+if { (eval echo configure:11432: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
++if { (eval echo configure:11433: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
    rm -rf conftest*
    ac_cv_trouble_comparing_to_zero=no
  else
-   echo "configure: failed program was:" >&5
-   cat conftest.$ac_ext >&5
-   rm -rf conftest*
-   ac_cv_trouble_comparing_to_zero=yes
- fi
-@@ -11540,29 +11455,29 @@
- ac_cpp='$CPP $CPPFLAGS'
- ac_compile='${CC-cc} -c $CFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
- ac_link='${CC-cc} -o conftest${ac_exeext} $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
- cross_compiling=$ac_cv_prog_cc_cross
- 
+@@ -11545,19 +11461,19 @@
  
  
  echo $ac_n "checking for LC_MESSAGES""... $ac_c" 1>&6
 -echo "configure:11549: checking for LC_MESSAGES" >&5
-+echo "configure:11464: checking for LC_MESSAGES" >&5
++echo "configure:11465: checking for LC_MESSAGES" >&5
  if eval "test \"`echo '$''{'ac_cv_i18n_lc_messages'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
    cat > conftest.$ac_ext <<EOF
 -#line 11554 "configure"
-+#line 11469 "configure"
++#line 11470 "configure"
  #include "confdefs.h"
  #include <locale.h>
  int main() {
@@ -6558,323 +4120,182 @@
  ; return 0; }
  EOF
 -if { (eval echo configure:11561: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
-+if { (eval echo configure:11476: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
++if { (eval echo configure:11477: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
    rm -rf conftest*
    ac_cv_i18n_lc_messages=yes
  else
-   echo "configure: failed program was:" >&5
-   cat conftest.$ac_ext >&5
-   rm -rf conftest*
-   ac_cv_i18n_lc_messages=no
- fi
-@@ -11633,17 +11548,17 @@
- 			NSPR_CONFIG=$nspr_config_prefix/bin/nspr-config
- 		fi
- 	fi
- 
- 	unset ac_cv_path_NSPR_CONFIG
+@@ -11638,7 +11554,7 @@
  	# Extract the first word of "nspr-config", so it can be a program name with args.
  set dummy nspr-config; ac_word=$2
  echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
 -echo "configure:11642: checking for $ac_word" >&5
-+echo "configure:11557: checking for $ac_word" >&5
++echo "configure:11558: checking for $ac_word" >&5
  if eval "test \"`echo '$''{'ac_cv_path_NSPR_CONFIG'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
-   case "$NSPR_CONFIG" in
-   /*)
-   ac_cv_path_NSPR_CONFIG="$NSPR_CONFIG" # Let the user override the test with a path.
-   ;;
-   ?:/*)			 
-@@ -11668,17 +11583,17 @@
- if test -n "$NSPR_CONFIG"; then
-   echo "$ac_t""$NSPR_CONFIG" 1>&6
- else
-   echo "$ac_t""no" 1>&6
- fi
+@@ -11673,7 +11589,7 @@
  
  	min_nspr_version=4.0.0
  	echo $ac_n "checking for NSPR - version >= $min_nspr_version (skipping)""... $ac_c" 1>&6
 -echo "configure:11677: checking for NSPR - version >= $min_nspr_version (skipping)" >&5
-+echo "configure:11592: checking for NSPR - version >= $min_nspr_version (skipping)" >&5
++echo "configure:11593: checking for NSPR - version >= $min_nspr_version (skipping)" >&5
  
  	no_nspr=""
  	if test "$NSPR_CONFIG" = "no"; then
- 		no_nspr="yes"
- 	else
- 		NSPR_CFLAGS=`$NSPR_CONFIG $nspr_config_args --cflags`
- 		NSPR_LIBS=`$NSPR_CONFIG $nspr_config_args --libs`
- 
-@@ -11770,17 +11685,17 @@
- 			NSS_CONFIG=$nss_config_prefix/bin/nss-config
- 		fi
- 	fi
- 
- 	unset ac_cv_path_NSS_CONFIG
+@@ -11775,7 +11691,7 @@
  	# Extract the first word of "nss-config", so it can be a program name with args.
  set dummy nss-config; ac_word=$2
  echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
 -echo "configure:11779: checking for $ac_word" >&5
-+echo "configure:11694: checking for $ac_word" >&5
++echo "configure:11695: checking for $ac_word" >&5
  if eval "test \"`echo '$''{'ac_cv_path_NSS_CONFIG'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
-   case "$NSS_CONFIG" in
-   /*)
-   ac_cv_path_NSS_CONFIG="$NSS_CONFIG" # Let the user override the test with a path.
-   ;;
-   ?:/*)			 
-@@ -11805,17 +11720,17 @@
- if test -n "$NSS_CONFIG"; then
-   echo "$ac_t""$NSS_CONFIG" 1>&6
- else
-   echo "$ac_t""no" 1>&6
- fi
+@@ -11810,7 +11726,7 @@
  
  	min_nss_version=3.0.0
  	echo $ac_n "checking for NSS - version >= $min_nss_version (skipping)""... $ac_c" 1>&6
 -echo "configure:11814: checking for NSS - version >= $min_nss_version (skipping)" >&5
-+echo "configure:11729: checking for NSS - version >= $min_nss_version (skipping)" >&5
++echo "configure:11730: checking for NSS - version >= $min_nss_version (skipping)" >&5
  
  	no_nss=""
  	if test "$NSS_CONFIG" = "no"; then
- 		no_nss="yes"
- 	else
- 		NSS_CFLAGS=`$NSS_CONFIG $nss_config_args --cflags`
- 		NSS_LIBS=`$NSS_CONFIG $nss_config_args --libs`
- 
-@@ -11878,36 +11793,36 @@
- if test -n "${JPEG_DIR}" -a "${JPEG_DIR}" != "yes"; then
-     CFLAGS="-I${JPEG_DIR}/include $CFLAGS"
-     LDFLAGS="-L${JPEG_DIR}/lib $LDFLAGS"
- fi
- if test -z "$JPEG_DIR" -o "$JPEG_DIR" = no; then
+@@ -11883,7 +11799,7 @@
      SYSTEM_JPEG=
  else
      echo $ac_n "checking for jpeg_destroy_compress in -ljpeg""... $ac_c" 1>&6
 -echo "configure:11887: checking for jpeg_destroy_compress in -ljpeg" >&5
-+echo "configure:11802: checking for jpeg_destroy_compress in -ljpeg" >&5
++echo "configure:11803: checking for jpeg_destroy_compress in -ljpeg" >&5
  ac_lib_var=`echo jpeg'_'jpeg_destroy_compress | sed 'y%./+-%__p_%'`
  if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
- else
+@@ -11891,7 +11807,7 @@
    ac_save_LIBS="$LIBS"
  LIBS="-ljpeg $JPEG_LIBS $LIBS"
  cat > conftest.$ac_ext <<EOF
 -#line 11895 "configure"
-+#line 11810 "configure"
++#line 11811 "configure"
  #include "confdefs.h"
  /* Override any gcc2 internal prototype to avoid an error.  */
  /* We use char because int might match the return type of a gcc2
-     builtin and then its argument prototype would still apply.  */
- char jpeg_destroy_compress();
- 
- int main() {
+@@ -11902,7 +11818,7 @@
  jpeg_destroy_compress()
  ; return 0; }
  EOF
 -if { (eval echo configure:11906: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-+if { (eval echo configure:11821: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
++if { (eval echo configure:11822: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
    rm -rf conftest*
    eval "ac_cv_lib_$ac_lib_var=yes"
  else
-   echo "configure: failed program was:" >&5
-   cat conftest.$ac_ext >&5
-   rm -rf conftest*
-   eval "ac_cv_lib_$ac_lib_var=no"
- fi
-@@ -11926,31 +11841,31 @@
- fi
- 
- if test "$SYSTEM_JPEG" = 1; then
-     LIBS="$JPEG_LIBS $LIBS"
-     if test "$cross_compiling" = yes; then
+@@ -11931,7 +11847,7 @@
    SYSTEM_JPEG= 
  else
    cat > conftest.$ac_ext <<EOF
 -#line 11935 "configure"
-+#line 11850 "configure"
++#line 11851 "configure"
  #include "confdefs.h"
  #include <stdio.h>
  	#include <sys/types.h>
- 	#include <jpeglib.h>
- 	int main () {
- 	    #if JPEG_LIB_VERSION >= $MOZJPEG
- 		exit(0);
- 	    #else
- 		exit(1);
- 	    #endif
+@@ -11945,7 +11861,7 @@
  	}
  	
  EOF
 -if { (eval echo configure:11949: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
-+if { (eval echo configure:11864: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
++if { (eval echo configure:11865: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
  then
    SYSTEM_JPEG=1
  else
-   echo "configure: failed program was:" >&5
-   cat conftest.$ac_ext >&5
-   rm -fr conftest*
-   SYSTEM_JPEG= JPEG_CFLAGS= JPEG_LIBS=
- fi
-@@ -11981,36 +11896,36 @@
- if test -n "${ZLIB_DIR}" -a "${ZLIB_DIR}" != "yes"; then
-     CFLAGS="-I${ZLIB_DIR}/include $CFLAGS"
-     LDFLAGS="-L${ZLIB_DIR}/lib $LDFLAGS"
- fi
- if test -z "$ZLIB_DIR" -o "$ZLIB_DIR" = no; then
+@@ -11986,7 +11902,7 @@
      SYSTEM_ZLIB=
  else
      echo $ac_n "checking for gzread in -lz""... $ac_c" 1>&6
 -echo "configure:11990: checking for gzread in -lz" >&5
-+echo "configure:11905: checking for gzread in -lz" >&5
++echo "configure:11906: checking for gzread in -lz" >&5
  ac_lib_var=`echo z'_'gzread | sed 'y%./+-%__p_%'`
  if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
- else
+@@ -11994,7 +11910,7 @@
    ac_save_LIBS="$LIBS"
  LIBS="-lz $ZLIB_LIBS $LIBS"
  cat > conftest.$ac_ext <<EOF
 -#line 11998 "configure"
-+#line 11913 "configure"
++#line 11914 "configure"
  #include "confdefs.h"
  /* Override any gcc2 internal prototype to avoid an error.  */
  /* We use char because int might match the return type of a gcc2
-     builtin and then its argument prototype would still apply.  */
- char gzread();
- 
- int main() {
+@@ -12005,7 +11921,7 @@
  gzread()
  ; return 0; }
  EOF
 -if { (eval echo configure:12009: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-+if { (eval echo configure:11924: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
++if { (eval echo configure:11925: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
    rm -rf conftest*
    eval "ac_cv_lib_$ac_lib_var=yes"
  else
-   echo "configure: failed program was:" >&5
-   cat conftest.$ac_ext >&5
-   rm -rf conftest*
-   eval "ac_cv_lib_$ac_lib_var=no"
- fi
-@@ -12028,17 +11943,17 @@
- 
- fi
- if test "$SYSTEM_ZLIB" = 1; then
-     LIBS="$ZLIB_LIBS $LIBS"
-     if test "$cross_compiling" = yes; then
+@@ -12033,7 +11949,7 @@
    SYSTEM_ZLIB= 
  else
    cat > conftest.$ac_ext <<EOF
 -#line 12037 "configure"
-+#line 11952 "configure"
++#line 11953 "configure"
  #include "confdefs.h"
  
      #include <stdio.h>
-     #include <string.h>
-     #include <zlib.h>
-     int parse_version(const char *str, int *ver) {
-       return (sscanf(str, "%d.%d.%d", ver, ver+1, ver+2)==3?0:1);
-     }
-@@ -12049,17 +11964,17 @@
-       if ((sys[0] == req[0]) &&
-           ((sys[1] > req[1]) || ((sys[1] == req[1]) && (sys[2] >= req[2]))))
-         exit(0);
-       else
-         exit(1);
+@@ -12054,7 +11970,7 @@
      }
      
  EOF
 -if { (eval echo configure:12058: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
-+if { (eval echo configure:11973: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
++if { (eval echo configure:11974: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
  then
    SYSTEM_ZLIB=1
  else
-   echo "configure: failed program was:" >&5
-   cat conftest.$ac_ext >&5
-   rm -fr conftest*
-   SYSTEM_ZLIB= ZLIB_CFLAGS= ZLIB_LIBS=
- fi
-@@ -12092,36 +12007,36 @@
- if test -n "${PNG_DIR}" -a "${PNG_DIR}" != "yes"; then
-     CFLAGS="-I${PNG_DIR}/include $CFLAGS"
-     LDFLAGS="-L${PNG_DIR}/lib $LDFLAGS"
- fi
- if test -z "$PNG_DIR" -o "$PNG_DIR" = no; then
+@@ -12097,7 +12013,7 @@
      SYSTEM_PNG=
  else
      echo $ac_n "checking for png_get_valid in -lpng""... $ac_c" 1>&6
 -echo "configure:12101: checking for png_get_valid in -lpng" >&5
-+echo "configure:12016: checking for png_get_valid in -lpng" >&5
++echo "configure:12017: checking for png_get_valid in -lpng" >&5
  ac_lib_var=`echo png'_'png_get_valid | sed 'y%./+-%__p_%'`
  if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
- else
+@@ -12105,7 +12021,7 @@
    ac_save_LIBS="$LIBS"
  LIBS="-lpng $PNG_LIBS $LIBS"
  cat > conftest.$ac_ext <<EOF
 -#line 12109 "configure"
-+#line 12024 "configure"
++#line 12025 "configure"
  #include "confdefs.h"
  /* Override any gcc2 internal prototype to avoid an error.  */
  /* We use char because int might match the return type of a gcc2
-     builtin and then its argument prototype would still apply.  */
- char png_get_valid();
- 
- int main() {
+@@ -12116,7 +12032,7 @@
  png_get_valid()
  ; return 0; }
  EOF
 -if { (eval echo configure:12120: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-+if { (eval echo configure:12035: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
++if { (eval echo configure:12036: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
    rm -rf conftest*
    eval "ac_cv_lib_$ac_lib_var=yes"
  else
-   echo "configure: failed program was:" >&5
-   cat conftest.$ac_ext >&5
-   rm -rf conftest*
-   eval "ac_cv_lib_$ac_lib_var=no"
- fi
-@@ -12139,31 +12054,31 @@
- 
- fi
- if test "$SYSTEM_PNG" = 1; then
-     LIBS="$PNG_LIBS $LIBS"
-     if test "$cross_compiling" = yes; then
+@@ -12144,7 +12060,7 @@
    SYSTEM_PNG= 
  else
    cat > conftest.$ac_ext <<EOF
 -#line 12148 "configure"
-+#line 12063 "configure"
++#line 12064 "configure"
  #include "confdefs.h"
  #include <stdio.h>
  	#include <sys/types.h>
- 	#include <png.h>
- 	int main () {
- 	    #if PNG_LIBPNG_VER >= $MOZPNG
- 		exit(0);
- 	    #else
- 		exit(1);
- 	    #endif
+@@ -12158,7 +12074,7 @@
  	}
  	
  EOF
 -if { (eval echo configure:12162: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
-+if { (eval echo configure:12077: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
++if { (eval echo configure:12078: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
  then
    SYSTEM_PNG=1
  else
-   echo "configure: failed program was:" >&5
-   cat conftest.$ac_ext >&5
-   rm -fr conftest*
-   SYSTEM_PNG= PNG_CFLAGS= PNG_LIBS=
- fi
-@@ -12178,16 +12093,38 @@
- 
- if test "${PNG_DIR}" -a -d "${PNG_DIR}" -a "$SYSTEM_PNG" = 1; then
-     PNG_CFLAGS="-I${PNG_DIR}/include"
-     PNG_LIBS="-L${PNG_DIR}/lib ${PNG_LIBS}"
- fi
+@@ -12183,6 +12099,28 @@
  
  fi # SKIP_LIBRARY_CHECKS
  
@@ -6903,147 +4324,75 @@
  JAVA_INCLUDE_PATH=
  # Check whether --with-java-include-path or --without-java-include-path was given.
  if test "${with_java_include_path+set}" = set; then
-   withval="$with_java_include_path"
-   JAVA_INCLUDE_PATH=$withval
- fi
- 
- 
-@@ -12403,17 +12340,17 @@
-      fi
-   fi
- 
-     unset ac_cv_path_GTK_CONFIG
- 
+@@ -12408,7 +12346,7 @@
    # Extract the first word of "gtk-config", so it can be a program name with args.
  set dummy gtk-config; ac_word=$2
  echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
 -echo "configure:12412: checking for $ac_word" >&5
-+echo "configure:12349: checking for $ac_word" >&5
++echo "configure:12350: checking for $ac_word" >&5
  if eval "test \"`echo '$''{'ac_cv_path_GTK_CONFIG'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
-   case "$GTK_CONFIG" in
-   /*)
-   ac_cv_path_GTK_CONFIG="$GTK_CONFIG" # Let the user override the test with a path.
-   ;;
-   ?:/*)			 
-@@ -12438,17 +12375,17 @@
- if test -n "$GTK_CONFIG"; then
-   echo "$ac_t""$GTK_CONFIG" 1>&6
- else
-   echo "$ac_t""no" 1>&6
- fi
+@@ -12443,7 +12381,7 @@
  
    min_gtk_version=$GTK_VERSION
    echo $ac_n "checking for GTK - version >= $min_gtk_version""... $ac_c" 1>&6
 -echo "configure:12447: checking for GTK - version >= $min_gtk_version" >&5
-+echo "configure:12384: checking for GTK - version >= $min_gtk_version" >&5
++echo "configure:12385: checking for GTK - version >= $min_gtk_version" >&5
    no_gtk=""
    if test "$GTK_CONFIG" = "no" ; then
      no_gtk=yes
-   else
-     GTK_CFLAGS=`$GTK_CONFIG $gtk_config_args --cflags`
-     GTK_LIBS=`$GTK_CONFIG $gtk_config_args --libs`
-     gtk_config_major_version=`$GTK_CONFIG $gtk_config_args --version | \
-            sed 's/\([0-9]*\).\([0-9]*\).\([0-9]*\)/\1/'`
-@@ -12461,17 +12398,17 @@
-       ac_save_LIBS="$LIBS"
-       CFLAGS="$CFLAGS $GTK_CFLAGS"
-       LIBS="$LIBS $GTK_LIBS"
-       rm -f conf.gtktest
-       if test "$cross_compiling" = yes; then
+@@ -12466,7 +12404,7 @@
    echo $ac_n "cross compiling; assumed OK... $ac_c"
  else
    cat > conftest.$ac_ext <<EOF
 -#line 12470 "configure"
-+#line 12407 "configure"
++#line 12408 "configure"
  #include "confdefs.h"
  
  #include <gtk/gtk.h>
- #include <stdio.h>
- #include <stdlib.h>
- 
- int 
- main ()
-@@ -12539,17 +12476,17 @@
-         printf("*** modify your LD_LIBRARY_PATH environment variable, or edit /etc/ld.so.conf\n");
-         printf("*** so that the correct libraries are found at run-time))\n");
-       }
-     }
-   return 1;
+@@ -12544,7 +12482,7 @@
  }
  
  EOF
 -if { (eval echo configure:12548: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
-+if { (eval echo configure:12485: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
++if { (eval echo configure:12486: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
  then
    :
  else
-   echo "configure: failed program was:" >&5
-   cat conftest.$ac_ext >&5
-   rm -fr conftest*
-   no_gtk=yes
- fi
-@@ -12574,27 +12511,27 @@
-      else
-        if test -f conf.gtktest ; then
-         :
-        else
-           echo "*** Could not run GTK test program, checking why..."
+@@ -12579,7 +12517,7 @@
            CFLAGS="$CFLAGS $GTK_CFLAGS"
            LIBS="$LIBS $GTK_LIBS"
            cat > conftest.$ac_ext <<EOF
 -#line 12583 "configure"
-+#line 12520 "configure"
++#line 12521 "configure"
  #include "confdefs.h"
  
  #include <gtk/gtk.h>
- #include <stdio.h>
- 
- int main() {
+@@ -12589,7 +12527,7 @@
   return ((gtk_major_version) || (gtk_minor_version) || (gtk_micro_version)); 
  ; return 0; }
  EOF
 -if { (eval echo configure:12593: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-+if { (eval echo configure:12530: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
++if { (eval echo configure:12531: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
    rm -rf conftest*
     echo "*** The test program compiled, but did not run. This usually means"
            echo "*** that the run-time linker is not finding GTK or finding the wrong"
-           echo "*** version of GTK. If it is not finding GTK, you'll need to set your"
-           echo "*** LD_LIBRARY_PATH environment variable, or edit /etc/ld.so.conf to point"
-           echo "*** to the installed location  Also, make sure you have run ldconfig if that"
-           echo "*** is required on your system"
- 	  echo "***"
-@@ -12636,17 +12573,17 @@
- then
-     
-   succeeded=no
- 
-   if test -z "$PKG_CONFIG"; then
+@@ -12641,7 +12579,7 @@
      # Extract the first word of "pkg-config", so it can be a program name with args.
  set dummy pkg-config; ac_word=$2
  echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
 -echo "configure:12645: checking for $ac_word" >&5
-+echo "configure:12582: checking for $ac_word" >&5
++echo "configure:12583: checking for $ac_word" >&5
  if eval "test \"`echo '$''{'ac_cv_path_PKG_CONFIG'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
-   case "$PKG_CONFIG" in
-   /*)
-   ac_cv_path_PKG_CONFIG="$PKG_CONFIG" # Let the user override the test with a path.
-   ;;
-   ?:/*)			 
-@@ -12680,29 +12617,29 @@
-      echo "*** The pkg-config script could not be found. Make sure it is"
-      echo "*** in your path, or set the PKG_CONFIG environment variable"
-      echo "*** to the full path to pkg-config."
-      echo "*** Or see http://www.freedesktop.org/software/pkgconfig to get pkg-config."
-   else
+@@ -12685,19 +12623,19 @@
       PKG_CONFIG_MIN_VERSION=0.9.0
       if $PKG_CONFIG --atleast-pkgconfig-version $PKG_CONFIG_MIN_VERSION; then
          echo $ac_n "checking for gtk+-2.0 >= 1.3.7""... $ac_c" 1>&6
 -echo "configure:12689: checking for gtk+-2.0 >= 1.3.7" >&5
-+echo "configure:12626: checking for gtk+-2.0 >= 1.3.7" >&5
++echo "configure:12627: checking for gtk+-2.0 >= 1.3.7" >&5
  
          if $PKG_CONFIG --exists "gtk+-2.0 >= 1.3.7" ; then
              echo "$ac_t""yes" 1>&6
@@ -7051,60 +4400,40 @@
  
              echo $ac_n "checking MOZ_GTK2_CFLAGS""... $ac_c" 1>&6
 -echo "configure:12696: checking MOZ_GTK2_CFLAGS" >&5
-+echo "configure:12633: checking MOZ_GTK2_CFLAGS" >&5
++echo "configure:12634: checking MOZ_GTK2_CFLAGS" >&5
              MOZ_GTK2_CFLAGS=`$PKG_CONFIG --cflags "gtk+-2.0 >= 1.3.7"`
              echo "$ac_t""$MOZ_GTK2_CFLAGS" 1>&6
  
              echo $ac_n "checking MOZ_GTK2_LIBS""... $ac_c" 1>&6
 -echo "configure:12701: checking MOZ_GTK2_LIBS" >&5
-+echo "configure:12638: checking MOZ_GTK2_LIBS" >&5
++echo "configure:12639: checking MOZ_GTK2_LIBS" >&5
              ## don't use --libs since that can do evil things like add
              ## -Wl,--export-dynamic
              MOZ_GTK2_LIBS="`$PKG_CONFIG --libs-only-L \"gtk+-2.0 >= 1.3.7\"` `$PKG_CONFIG --libs-only-l \"gtk+-2.0 >= 1.3.7\"`"
-             echo "$ac_t""$MOZ_GTK2_LIBS" 1>&6
-         else
-             MOZ_GTK2_CFLAGS=""
-             MOZ_GTK2_LIBS=""
-             ## If we have a custom action on failure, don't print errors, but 
-@@ -12757,17 +12694,17 @@
-     if test -x "$QTDIR/bin/moc"; then
-       HOST_MOC="$QTDIR/bin/moc"
-     else
-       for ac_prog in moc
- do
+@@ -12762,7 +12700,7 @@
  # Extract the first word of "$ac_prog", so it can be a program name with args.
  set dummy $ac_prog; ac_word=$2
  echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
 -echo "configure:12766: checking for $ac_word" >&5
-+echo "configure:12703: checking for $ac_word" >&5
++echo "configure:12704: checking for $ac_word" >&5
  if eval "test \"`echo '$''{'ac_cv_prog_HOST_MOC'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
-   if test -n "$HOST_MOC"; then
-   ac_cv_prog_HOST_MOC="$HOST_MOC" # Let the user override the test.
- else
-   IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
-   ac_dummy="$PATH"
-@@ -12809,32 +12746,32 @@
-     ac_ext=C
- # CXXFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
- ac_cpp='$CXXCPP $CPPFLAGS'
- ac_compile='${CXX-g++} -c $CXXFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
- ac_link='${CXX-g++} -o conftest${ac_exeext} $CXXFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
+@@ -12814,7 +12752,7 @@
  cross_compiling=$ac_cv_prog_cxx_cross
  
      echo $ac_n "checking for main in -lqt""... $ac_c" 1>&6
 -echo "configure:12818: checking for main in -lqt" >&5
-+echo "configure:12755: checking for main in -lqt" >&5
++echo "configure:12756: checking for main in -lqt" >&5
  ac_lib_var=`echo qt'_'main | sed 'y%./+-%__p_%'`
  if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
- else
+@@ -12822,14 +12760,14 @@
    ac_save_LIBS="$LIBS"
  LIBS="-lqt  $LIBS"
  cat > conftest.$ac_ext <<EOF
 -#line 12826 "configure"
-+#line 12763 "configure"
++#line 12764 "configure"
  #include "confdefs.h"
  
  int main() {
@@ -7112,35 +4441,25 @@
  ; return 0; }
  EOF
 -if { (eval echo configure:12833: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-+if { (eval echo configure:12770: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
++if { (eval echo configure:12771: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
    rm -rf conftest*
    eval "ac_cv_lib_$ac_lib_var=yes"
  else
-   echo "configure: failed program was:" >&5
-   cat conftest.$ac_ext >&5
-   rm -rf conftest*
-   eval "ac_cv_lib_$ac_lib_var=no"
- fi
-@@ -12843,32 +12780,32 @@
- 
- fi
- if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
-   echo "$ac_t""yes" 1>&6
-   QT_LIB=-lqt
+@@ -12848,7 +12786,7 @@
  else
    echo "$ac_t""no" 1>&6
  echo $ac_n "checking for main in -lqt-mt""... $ac_c" 1>&6
 -echo "configure:12852: checking for main in -lqt-mt" >&5
-+echo "configure:12789: checking for main in -lqt-mt" >&5
++echo "configure:12790: checking for main in -lqt-mt" >&5
  ac_lib_var=`echo qt-mt'_'main | sed 'y%./+-%__p_%'`
  if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
- else
+@@ -12856,14 +12794,14 @@
    ac_save_LIBS="$LIBS"
  LIBS="-lqt-mt  $LIBS"
  cat > conftest.$ac_ext <<EOF
 -#line 12860 "configure"
-+#line 12797 "configure"
++#line 12798 "configure"
  #include "confdefs.h"
  
  int main() {
@@ -7148,79 +4467,46 @@
  ; return 0; }
  EOF
 -if { (eval echo configure:12867: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-+if { (eval echo configure:12804: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
++if { (eval echo configure:12805: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
    rm -rf conftest*
    eval "ac_cv_lib_$ac_lib_var=yes"
  else
-   echo "configure: failed program was:" >&5
-   cat conftest.$ac_ext >&5
-   rm -rf conftest*
-   eval "ac_cv_lib_$ac_lib_var=no"
- fi
-@@ -12894,30 +12831,30 @@
- 
-     _SAVE_CXXFLAGS=$CXXFLAGS
-     _SAVE_LIBS=$LIBS
- 
-     CXXFLAGS="$CXXFLAGS $QT_CFLAGS"
+@@ -12899,9 +12837,9 @@
      LIBS="$LIBS $QT_LIBS"
      
      echo $ac_n "checking Qt - version >= $QT_VERSION""... $ac_c" 1>&6
 -echo "configure:12903: checking Qt - version >= $QT_VERSION" >&5
-+echo "configure:12840: checking Qt - version >= $QT_VERSION" >&5
++echo "configure:12841: checking Qt - version >= $QT_VERSION" >&5
      cat > conftest.$ac_ext <<EOF
 -#line 12905 "configure"
-+#line 12842 "configure"
++#line 12843 "configure"
  #include "confdefs.h"
  #include <qglobal.h>
  int main() {
- 
-         #if (QT_VERSION < $QT_VERSION_NUM)
-             #error  "QT_VERSION too old"
-         #endif
+@@ -12912,7 +12850,7 @@
      
  ; return 0; }
  EOF
 -if { (eval echo configure:12916: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
-+if { (eval echo configure:12853: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
++if { (eval echo configure:12854: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
    rm -rf conftest*
    result="yes"
  else
-   echo "configure: failed program was:" >&5
-   cat conftest.$ac_ext >&5
-   rm -rf conftest*
-   result="no"
- fi
-@@ -13503,17 +13440,17 @@
- 
-     
-   succeeded=no
- 
-   if test -z "$PKG_CONFIG"; then
+@@ -13508,7 +13446,7 @@
      # Extract the first word of "pkg-config", so it can be a program name with args.
  set dummy pkg-config; ac_word=$2
  echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
 -echo "configure:13512: checking for $ac_word" >&5
-+echo "configure:13449: checking for $ac_word" >&5
++echo "configure:13450: checking for $ac_word" >&5
  if eval "test \"`echo '$''{'ac_cv_path_PKG_CONFIG'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
-   case "$PKG_CONFIG" in
-   /*)
-   ac_cv_path_PKG_CONFIG="$PKG_CONFIG" # Let the user override the test with a path.
-   ;;
-   ?:/*)			 
-@@ -13547,29 +13484,29 @@
-      echo "*** The pkg-config script could not be found. Make sure it is"
-      echo "*** in your path, or set the PKG_CONFIG environment variable"
-      echo "*** to the full path to pkg-config."
-      echo "*** Or see http://www.freedesktop.org/software/pkgconfig to get pkg-config."
-   else
+@@ -13552,19 +13490,19 @@
       PKG_CONFIG_MIN_VERSION=0.9.0
       if $PKG_CONFIG --atleast-pkgconfig-version $PKG_CONFIG_MIN_VERSION; then
          echo $ac_n "checking for xft""... $ac_c" 1>&6
 -echo "configure:13556: checking for xft" >&5
-+echo "configure:13493: checking for xft" >&5
++echo "configure:13494: checking for xft" >&5
  
          if $PKG_CONFIG --exists "xft" ; then
              echo "$ac_t""yes" 1>&6
@@ -7228,51 +4514,31 @@
  
              echo $ac_n "checking MOZ_XFT_CFLAGS""... $ac_c" 1>&6
 -echo "configure:13563: checking MOZ_XFT_CFLAGS" >&5
-+echo "configure:13500: checking MOZ_XFT_CFLAGS" >&5
++echo "configure:13501: checking MOZ_XFT_CFLAGS" >&5
              MOZ_XFT_CFLAGS=`$PKG_CONFIG --cflags "xft"`
              echo "$ac_t""$MOZ_XFT_CFLAGS" 1>&6
  
              echo $ac_n "checking MOZ_XFT_LIBS""... $ac_c" 1>&6
 -echo "configure:13568: checking MOZ_XFT_LIBS" >&5
-+echo "configure:13505: checking MOZ_XFT_LIBS" >&5
++echo "configure:13506: checking MOZ_XFT_LIBS" >&5
              ## don't use --libs since that can do evil things like add
              ## -Wl,--export-dynamic
              MOZ_XFT_LIBS="`$PKG_CONFIG --libs-only-L \"xft\"` `$PKG_CONFIG --libs-only-l \"xft\"`"
-             echo "$ac_t""$MOZ_XFT_LIBS" 1>&6
-         else
-             MOZ_XFT_CFLAGS=""
-             MOZ_XFT_LIBS=""
-             ## If we have a custom action on failure, don't print errors, but 
-@@ -13594,17 +13531,17 @@
- 
-     
-   succeeded=no
- 
-   if test -z "$PKG_CONFIG"; then
+@@ -13599,7 +13537,7 @@
      # Extract the first word of "pkg-config", so it can be a program name with args.
  set dummy pkg-config; ac_word=$2
  echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
 -echo "configure:13603: checking for $ac_word" >&5
-+echo "configure:13540: checking for $ac_word" >&5
++echo "configure:13541: checking for $ac_word" >&5
  if eval "test \"`echo '$''{'ac_cv_path_PKG_CONFIG'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
-   case "$PKG_CONFIG" in
-   /*)
-   ac_cv_path_PKG_CONFIG="$PKG_CONFIG" # Let the user override the test with a path.
-   ;;
-   ?:/*)			 
-@@ -13638,29 +13575,29 @@
-      echo "*** The pkg-config script could not be found. Make sure it is"
-      echo "*** in your path, or set the PKG_CONFIG environment variable"
-      echo "*** to the full path to pkg-config."
-      echo "*** Or see http://www.freedesktop.org/software/pkgconfig to get pkg-config."
-   else
+@@ -13643,19 +13581,19 @@
       PKG_CONFIG_MIN_VERSION=0.9.0
       if $PKG_CONFIG --atleast-pkgconfig-version $PKG_CONFIG_MIN_VERSION; then
          echo $ac_n "checking for pango >= 1.1.0""... $ac_c" 1>&6
 -echo "configure:13647: checking for pango >= 1.1.0" >&5
-+echo "configure:13584: checking for pango >= 1.1.0" >&5
++echo "configure:13585: checking for pango >= 1.1.0" >&5
  
          if $PKG_CONFIG --exists "pango >= 1.1.0" ; then
              echo "$ac_t""yes" 1>&6
@@ -7280,51 +4546,31 @@
  
              echo $ac_n "checking _PANGOCHK_CFLAGS""... $ac_c" 1>&6
 -echo "configure:13654: checking _PANGOCHK_CFLAGS" >&5
-+echo "configure:13591: checking _PANGOCHK_CFLAGS" >&5
++echo "configure:13592: checking _PANGOCHK_CFLAGS" >&5
              _PANGOCHK_CFLAGS=`$PKG_CONFIG --cflags "pango >= 1.1.0"`
              echo "$ac_t""$_PANGOCHK_CFLAGS" 1>&6
  
              echo $ac_n "checking _PANGOCHK_LIBS""... $ac_c" 1>&6
 -echo "configure:13659: checking _PANGOCHK_LIBS" >&5
-+echo "configure:13596: checking _PANGOCHK_LIBS" >&5
++echo "configure:13597: checking _PANGOCHK_LIBS" >&5
              ## don't use --libs since that can do evil things like add
              ## -Wl,--export-dynamic
              _PANGOCHK_LIBS="`$PKG_CONFIG --libs-only-L \"pango >= 1.1.0\"` `$PKG_CONFIG --libs-only-l \"pango >= 1.1.0\"`"
-             echo "$ac_t""$_PANGOCHK_LIBS" 1>&6
-         else
-             _PANGOCHK_CFLAGS=""
-             _PANGOCHK_LIBS=""
-             ## If we have a custom action on failure, don't print errors, but 
-@@ -13710,17 +13647,17 @@
- 
-     
-   succeeded=no
- 
-   if test -z "$PKG_CONFIG"; then
+@@ -13715,7 +13653,7 @@
      # Extract the first word of "pkg-config", so it can be a program name with args.
  set dummy pkg-config; ac_word=$2
  echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
 -echo "configure:13719: checking for $ac_word" >&5
-+echo "configure:13656: checking for $ac_word" >&5
++echo "configure:13657: checking for $ac_word" >&5
  if eval "test \"`echo '$''{'ac_cv_path_PKG_CONFIG'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
-   case "$PKG_CONFIG" in
-   /*)
-   ac_cv_path_PKG_CONFIG="$PKG_CONFIG" # Let the user override the test with a path.
-   ;;
-   ?:/*)			 
-@@ -13754,29 +13691,29 @@
-      echo "*** The pkg-config script could not be found. Make sure it is"
-      echo "*** in your path, or set the PKG_CONFIG environment variable"
-      echo "*** to the full path to pkg-config."
-      echo "*** Or see http://www.freedesktop.org/software/pkgconfig to get pkg-config."
-   else
+@@ -13759,19 +13697,19 @@
       PKG_CONFIG_MIN_VERSION=0.9.0
       if $PKG_CONFIG --atleast-pkgconfig-version $PKG_CONFIG_MIN_VERSION; then
          echo $ac_n "checking for pango >= 1.6.0 pangoft2 >= 1.6.0""... $ac_c" 1>&6
 -echo "configure:13763: checking for pango >= 1.6.0 pangoft2 >= 1.6.0" >&5
-+echo "configure:13700: checking for pango >= 1.6.0 pangoft2 >= 1.6.0" >&5
++echo "configure:13701: checking for pango >= 1.6.0 pangoft2 >= 1.6.0" >&5
  
          if $PKG_CONFIG --exists "pango >= 1.6.0 pangoft2 >= 1.6.0" ; then
              echo "$ac_t""yes" 1>&6
@@ -7332,91 +4578,58 @@
  
              echo $ac_n "checking MOZ_PANGO_CFLAGS""... $ac_c" 1>&6
 -echo "configure:13770: checking MOZ_PANGO_CFLAGS" >&5
-+echo "configure:13707: checking MOZ_PANGO_CFLAGS" >&5
++echo "configure:13708: checking MOZ_PANGO_CFLAGS" >&5
              MOZ_PANGO_CFLAGS=`$PKG_CONFIG --cflags "pango >= 1.6.0 pangoft2 >= 1.6.0"`
              echo "$ac_t""$MOZ_PANGO_CFLAGS" 1>&6
  
              echo $ac_n "checking MOZ_PANGO_LIBS""... $ac_c" 1>&6
 -echo "configure:13775: checking MOZ_PANGO_LIBS" >&5
-+echo "configure:13712: checking MOZ_PANGO_LIBS" >&5
++echo "configure:13713: checking MOZ_PANGO_LIBS" >&5
              ## don't use --libs since that can do evil things like add
              ## -Wl,--export-dynamic
              MOZ_PANGO_LIBS="`$PKG_CONFIG --libs-only-L \"pango >= 1.6.0 pangoft2 >= 1.6.0\"` `$PKG_CONFIG --libs-only-l \"pango >= 1.6.0 pangoft2 >= 1.6.0\"`"
-             echo "$ac_t""$MOZ_PANGO_LIBS" 1>&6
-         else
-             MOZ_PANGO_CFLAGS=""
-             MOZ_PANGO_LIBS=""
-             ## If we have a custom action on failure, don't print errors, but 
-@@ -13834,36 +13771,36 @@
- fi
- 
- 
- if test "$MOZ_X11"
- then
+@@ -13839,7 +13777,7 @@
      _SAVE_LDFLAGS="$LDFLAGS"
      LDFLAGS="$XLDFLAGS $LDFLAGS"
      echo $ac_n "checking for XpGetPrinterList in -lXp""... $ac_c" 1>&6
 -echo "configure:13843: checking for XpGetPrinterList in -lXp" >&5
-+echo "configure:13780: checking for XpGetPrinterList in -lXp" >&5
++echo "configure:13781: checking for XpGetPrinterList in -lXp" >&5
  ac_lib_var=`echo Xp'_'XpGetPrinterList | sed 'y%./+-%__p_%'`
  if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
- else
+@@ -13847,7 +13785,7 @@
    ac_save_LIBS="$LIBS"
  LIBS="-lXp $XEXT_LIBS $XLIBS $LIBS"
  cat > conftest.$ac_ext <<EOF
 -#line 13851 "configure"
-+#line 13788 "configure"
++#line 13789 "configure"
  #include "confdefs.h"
  /* Override any gcc2 internal prototype to avoid an error.  */
  /* We use char because int might match the return type of a gcc2
-     builtin and then its argument prototype would still apply.  */
- char XpGetPrinterList();
- 
- int main() {
+@@ -13858,7 +13796,7 @@
  XpGetPrinterList()
  ; return 0; }
  EOF
 -if { (eval echo configure:13862: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-+if { (eval echo configure:13799: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
++if { (eval echo configure:13800: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
    rm -rf conftest*
    eval "ac_cv_lib_$ac_lib_var=yes"
  else
-   echo "configure: failed program was:" >&5
-   cat conftest.$ac_ext >&5
-   rm -rf conftest*
-   eval "ac_cv_lib_$ac_lib_var=no"
- fi
-@@ -13926,17 +13863,17 @@
-     then
-         
-   succeeded=no
- 
-   if test -z "$PKG_CONFIG"; then
+@@ -13931,7 +13869,7 @@
      # Extract the first word of "pkg-config", so it can be a program name with args.
  set dummy pkg-config; ac_word=$2
  echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
 -echo "configure:13935: checking for $ac_word" >&5
-+echo "configure:13872: checking for $ac_word" >&5
++echo "configure:13873: checking for $ac_word" >&5
  if eval "test \"`echo '$''{'ac_cv_path_PKG_CONFIG'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
-   case "$PKG_CONFIG" in
-   /*)
-   ac_cv_path_PKG_CONFIG="$PKG_CONFIG" # Let the user override the test with a path.
-   ;;
-   ?:/*)			 
-@@ -13970,29 +13907,29 @@
-      echo "*** The pkg-config script could not be found. Make sure it is"
-      echo "*** in your path, or set the PKG_CONFIG environment variable"
-      echo "*** to the full path to pkg-config."
-      echo "*** Or see http://www.freedesktop.org/software/pkgconfig to get pkg-config."
-   else
+@@ -13975,19 +13913,19 @@
       PKG_CONFIG_MIN_VERSION=0.9.0
       if $PKG_CONFIG --atleast-pkgconfig-version $PKG_CONFIG_MIN_VERSION; then
          echo $ac_n "checking for gnome-vfs-2.0 >= $GNOMEVFS_VERSION gnome-vfs-module-2.0 >= $GNOMEVFS_VERSION""... $ac_c" 1>&6
 -echo "configure:13979: checking for gnome-vfs-2.0 >= $GNOMEVFS_VERSION gnome-vfs-module-2.0 >= $GNOMEVFS_VERSION" >&5
-+echo "configure:13916: checking for gnome-vfs-2.0 >= $GNOMEVFS_VERSION gnome-vfs-module-2.0 >= $GNOMEVFS_VERSION" >&5
++echo "configure:13917: checking for gnome-vfs-2.0 >= $GNOMEVFS_VERSION gnome-vfs-module-2.0 >= $GNOMEVFS_VERSION" >&5
  
          if $PKG_CONFIG --exists "gnome-vfs-2.0 >= $GNOMEVFS_VERSION gnome-vfs-module-2.0 >= $GNOMEVFS_VERSION" ; then
              echo "$ac_t""yes" 1>&6
@@ -7424,51 +4637,31 @@
  
              echo $ac_n "checking MOZ_GNOMEVFS_CFLAGS""... $ac_c" 1>&6
 -echo "configure:13986: checking MOZ_GNOMEVFS_CFLAGS" >&5
-+echo "configure:13923: checking MOZ_GNOMEVFS_CFLAGS" >&5
++echo "configure:13924: checking MOZ_GNOMEVFS_CFLAGS" >&5
              MOZ_GNOMEVFS_CFLAGS=`$PKG_CONFIG --cflags "gnome-vfs-2.0 >= $GNOMEVFS_VERSION gnome-vfs-module-2.0 >= $GNOMEVFS_VERSION"`
              echo "$ac_t""$MOZ_GNOMEVFS_CFLAGS" 1>&6
  
              echo $ac_n "checking MOZ_GNOMEVFS_LIBS""... $ac_c" 1>&6
 -echo "configure:13991: checking MOZ_GNOMEVFS_LIBS" >&5
-+echo "configure:13928: checking MOZ_GNOMEVFS_LIBS" >&5
++echo "configure:13929: checking MOZ_GNOMEVFS_LIBS" >&5
              ## don't use --libs since that can do evil things like add
              ## -Wl,--export-dynamic
              MOZ_GNOMEVFS_LIBS="`$PKG_CONFIG --libs-only-L \"gnome-vfs-2.0 >= $GNOMEVFS_VERSION gnome-vfs-module-2.0 >= $GNOMEVFS_VERSION\"` `$PKG_CONFIG --libs-only-l \"gnome-vfs-2.0 >= $GNOMEVFS_VERSION gnome-vfs-module-2.0 >= $GNOMEVFS_VERSION\"`"
-             echo "$ac_t""$MOZ_GNOMEVFS_LIBS" 1>&6
-         else
-             MOZ_GNOMEVFS_CFLAGS=""
-             MOZ_GNOMEVFS_LIBS=""
-             ## If we have a custom action on failure, don't print errors, but 
-@@ -14033,17 +13970,17 @@
-     then
-         
-   succeeded=no
- 
-   if test -z "$PKG_CONFIG"; then
+@@ -14038,7 +13976,7 @@
      # Extract the first word of "pkg-config", so it can be a program name with args.
  set dummy pkg-config; ac_word=$2
  echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
 -echo "configure:14042: checking for $ac_word" >&5
-+echo "configure:13979: checking for $ac_word" >&5
++echo "configure:13980: checking for $ac_word" >&5
  if eval "test \"`echo '$''{'ac_cv_path_PKG_CONFIG'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
-   case "$PKG_CONFIG" in
-   /*)
-   ac_cv_path_PKG_CONFIG="$PKG_CONFIG" # Let the user override the test with a path.
-   ;;
-   ?:/*)			 
-@@ -14077,29 +14014,29 @@
-      echo "*** The pkg-config script could not be found. Make sure it is"
-      echo "*** in your path, or set the PKG_CONFIG environment variable"
-      echo "*** to the full path to pkg-config."
-      echo "*** Or see http://www.freedesktop.org/software/pkgconfig to get pkg-config."
-   else
+@@ -14082,19 +14020,19 @@
       PKG_CONFIG_MIN_VERSION=0.9.0
       if $PKG_CONFIG --atleast-pkgconfig-version $PKG_CONFIG_MIN_VERSION; then
          echo $ac_n "checking for gconf-2.0 >= $GCONF_VERSION""... $ac_c" 1>&6
 -echo "configure:14086: checking for gconf-2.0 >= $GCONF_VERSION" >&5
-+echo "configure:14023: checking for gconf-2.0 >= $GCONF_VERSION" >&5
++echo "configure:14024: checking for gconf-2.0 >= $GCONF_VERSION" >&5
  
          if $PKG_CONFIG --exists "gconf-2.0 >= $GCONF_VERSION" ; then
              echo "$ac_t""yes" 1>&6
@@ -7476,51 +4669,31 @@
  
              echo $ac_n "checking MOZ_GCONF_CFLAGS""... $ac_c" 1>&6
 -echo "configure:14093: checking MOZ_GCONF_CFLAGS" >&5
-+echo "configure:14030: checking MOZ_GCONF_CFLAGS" >&5
++echo "configure:14031: checking MOZ_GCONF_CFLAGS" >&5
              MOZ_GCONF_CFLAGS=`$PKG_CONFIG --cflags "gconf-2.0 >= $GCONF_VERSION"`
              echo "$ac_t""$MOZ_GCONF_CFLAGS" 1>&6
  
              echo $ac_n "checking MOZ_GCONF_LIBS""... $ac_c" 1>&6
 -echo "configure:14098: checking MOZ_GCONF_LIBS" >&5
-+echo "configure:14035: checking MOZ_GCONF_LIBS" >&5
++echo "configure:14036: checking MOZ_GCONF_LIBS" >&5
              ## don't use --libs since that can do evil things like add
              ## -Wl,--export-dynamic
              MOZ_GCONF_LIBS="`$PKG_CONFIG --libs-only-L \"gconf-2.0 >= $GCONF_VERSION\"` `$PKG_CONFIG --libs-only-l \"gconf-2.0 >= $GCONF_VERSION\"`"
-             echo "$ac_t""$MOZ_GCONF_LIBS" 1>&6
-         else
-             MOZ_GCONF_CFLAGS=""
-             MOZ_GCONF_LIBS=""
-             ## If we have a custom action on failure, don't print errors, but 
-@@ -14136,17 +14073,17 @@
-     then
-         
-   succeeded=no
- 
-   if test -z "$PKG_CONFIG"; then
+@@ -14141,7 +14079,7 @@
      # Extract the first word of "pkg-config", so it can be a program name with args.
  set dummy pkg-config; ac_word=$2
  echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
 -echo "configure:14145: checking for $ac_word" >&5
-+echo "configure:14082: checking for $ac_word" >&5
++echo "configure:14083: checking for $ac_word" >&5
  if eval "test \"`echo '$''{'ac_cv_path_PKG_CONFIG'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
-   case "$PKG_CONFIG" in
-   /*)
-   ac_cv_path_PKG_CONFIG="$PKG_CONFIG" # Let the user override the test with a path.
-   ;;
-   ?:/*)			 
-@@ -14180,29 +14117,29 @@
-      echo "*** The pkg-config script could not be found. Make sure it is"
-      echo "*** in your path, or set the PKG_CONFIG environment variable"
-      echo "*** to the full path to pkg-config."
-      echo "*** Or see http://www.freedesktop.org/software/pkgconfig to get pkg-config."
-   else
+@@ -14185,19 +14123,19 @@
       PKG_CONFIG_MIN_VERSION=0.9.0
       if $PKG_CONFIG --atleast-pkgconfig-version $PKG_CONFIG_MIN_VERSION; then
          echo $ac_n "checking for libgnome-2.0 >= $LIBGNOME_VERSION""... $ac_c" 1>&6
 -echo "configure:14189: checking for libgnome-2.0 >= $LIBGNOME_VERSION" >&5
-+echo "configure:14126: checking for libgnome-2.0 >= $LIBGNOME_VERSION" >&5
++echo "configure:14127: checking for libgnome-2.0 >= $LIBGNOME_VERSION" >&5
  
          if $PKG_CONFIG --exists "libgnome-2.0 >= $LIBGNOME_VERSION" ; then
              echo "$ac_t""yes" 1>&6
@@ -7528,51 +4701,31 @@
  
              echo $ac_n "checking MOZ_LIBGNOME_CFLAGS""... $ac_c" 1>&6
 -echo "configure:14196: checking MOZ_LIBGNOME_CFLAGS" >&5
-+echo "configure:14133: checking MOZ_LIBGNOME_CFLAGS" >&5
++echo "configure:14134: checking MOZ_LIBGNOME_CFLAGS" >&5
              MOZ_LIBGNOME_CFLAGS=`$PKG_CONFIG --cflags "libgnome-2.0 >= $LIBGNOME_VERSION"`
              echo "$ac_t""$MOZ_LIBGNOME_CFLAGS" 1>&6
  
              echo $ac_n "checking MOZ_LIBGNOME_LIBS""... $ac_c" 1>&6
 -echo "configure:14201: checking MOZ_LIBGNOME_LIBS" >&5
-+echo "configure:14138: checking MOZ_LIBGNOME_LIBS" >&5
++echo "configure:14139: checking MOZ_LIBGNOME_LIBS" >&5
              ## don't use --libs since that can do evil things like add
              ## -Wl,--export-dynamic
              MOZ_LIBGNOME_LIBS="`$PKG_CONFIG --libs-only-L \"libgnome-2.0 >= $LIBGNOME_VERSION\"` `$PKG_CONFIG --libs-only-l \"libgnome-2.0 >= $LIBGNOME_VERSION\"`"
-             echo "$ac_t""$MOZ_LIBGNOME_LIBS" 1>&6
-         else
-             MOZ_LIBGNOME_CFLAGS=""
-             MOZ_LIBGNOME_LIBS=""
-             ## If we have a custom action on failure, don't print errors, but 
-@@ -14270,17 +14207,17 @@
-     then
-         
-   succeeded=no
- 
-   if test -z "$PKG_CONFIG"; then
+@@ -14275,7 +14213,7 @@
      # Extract the first word of "pkg-config", so it can be a program name with args.
  set dummy pkg-config; ac_word=$2
  echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
 -echo "configure:14279: checking for $ac_word" >&5
-+echo "configure:14216: checking for $ac_word" >&5
++echo "configure:14217: checking for $ac_word" >&5
  if eval "test \"`echo '$''{'ac_cv_path_PKG_CONFIG'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
-   case "$PKG_CONFIG" in
-   /*)
-   ac_cv_path_PKG_CONFIG="$PKG_CONFIG" # Let the user override the test with a path.
-   ;;
-   ?:/*)			 
-@@ -14314,29 +14251,29 @@
-      echo "*** The pkg-config script could not be found. Make sure it is"
-      echo "*** in your path, or set the PKG_CONFIG environment variable"
-      echo "*** to the full path to pkg-config."
-      echo "*** Or see http://www.freedesktop.org/software/pkgconfig to get pkg-config."
-   else
+@@ -14319,19 +14257,19 @@
       PKG_CONFIG_MIN_VERSION=0.9.0
       if $PKG_CONFIG --atleast-pkgconfig-version $PKG_CONFIG_MIN_VERSION; then
          echo $ac_n "checking for libgnomeui-2.0 >= $GNOMEUI_VERSION""... $ac_c" 1>&6
 -echo "configure:14323: checking for libgnomeui-2.0 >= $GNOMEUI_VERSION" >&5
-+echo "configure:14260: checking for libgnomeui-2.0 >= $GNOMEUI_VERSION" >&5
++echo "configure:14261: checking for libgnomeui-2.0 >= $GNOMEUI_VERSION" >&5
  
          if $PKG_CONFIG --exists "libgnomeui-2.0 >= $GNOMEUI_VERSION" ; then
              echo "$ac_t""yes" 1>&6
@@ -7580,179 +4733,106 @@
  
              echo $ac_n "checking MOZ_GNOMEUI_CFLAGS""... $ac_c" 1>&6
 -echo "configure:14330: checking MOZ_GNOMEUI_CFLAGS" >&5
-+echo "configure:14267: checking MOZ_GNOMEUI_CFLAGS" >&5
++echo "configure:14268: checking MOZ_GNOMEUI_CFLAGS" >&5
              MOZ_GNOMEUI_CFLAGS=`$PKG_CONFIG --cflags "libgnomeui-2.0 >= $GNOMEUI_VERSION"`
              echo "$ac_t""$MOZ_GNOMEUI_CFLAGS" 1>&6
  
              echo $ac_n "checking MOZ_GNOMEUI_LIBS""... $ac_c" 1>&6
 -echo "configure:14335: checking MOZ_GNOMEUI_LIBS" >&5
-+echo "configure:14272: checking MOZ_GNOMEUI_LIBS" >&5
++echo "configure:14273: checking MOZ_GNOMEUI_LIBS" >&5
              ## don't use --libs since that can do evil things like add
              ## -Wl,--export-dynamic
              MOZ_GNOMEUI_LIBS="`$PKG_CONFIG --libs-only-L \"libgnomeui-2.0 >= $GNOMEUI_VERSION\"` `$PKG_CONFIG --libs-only-l \"libgnomeui-2.0 >= $GNOMEUI_VERSION\"`"
-             echo "$ac_t""$MOZ_GNOMEUI_LIBS" 1>&6
-         else
-             MOZ_GNOMEUI_CFLAGS=""
-             MOZ_GNOMEUI_LIBS=""
-             ## If we have a custom action on failure, don't print errors, but 
-@@ -14812,17 +14749,17 @@
-         JAVA_PATH="$JAVA_BIN_PATH"
-   else
-         JAVA_PATH="$JAVA_HOME/bin:$PATH"
-   fi
- 
+@@ -14817,7 +14755,7 @@
    # Extract the first word of "javac", so it can be a program name with args.
  set dummy javac; ac_word=$2
  echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
 -echo "configure:14821: checking for $ac_word" >&5
-+echo "configure:14758: checking for $ac_word" >&5
++echo "configure:14759: checking for $ac_word" >&5
  if eval "test \"`echo '$''{'ac_cv_path_JAVAC'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
-   case "$JAVAC" in
-   /*)
-   ac_cv_path_JAVAC="$JAVAC" # Let the user override the test with a path.
-   ;;
-   ?:/*)			 
-@@ -14848,17 +14785,17 @@
-   echo "$ac_t""$JAVAC" 1>&6
- else
-   echo "$ac_t""no" 1>&6
- fi
- 
+@@ -14853,7 +14791,7 @@
    # Extract the first word of "jar", so it can be a program name with args.
  set dummy jar; ac_word=$2
  echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
 -echo "configure:14857: checking for $ac_word" >&5
-+echo "configure:14794: checking for $ac_word" >&5
++echo "configure:14795: checking for $ac_word" >&5
  if eval "test \"`echo '$''{'ac_cv_path_JAR'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
-   case "$JAR" in
-   /*)
-   ac_cv_path_JAR="$JAR" # Let the user override the test with a path.
-   ;;
-   ?:/*)			 
-@@ -15095,36 +15032,36 @@
-    SVG_RENDERER=$SVG_DEFAULT_RENDERER
- fi
- 
- 
-   case "$SVG_RENDERER" in
+@@ -15100,7 +15038,7 @@
    gdiplus)
      MOZ_SVG_RENDERER_GDIPLUS=1
                          echo $ac_n "checking for Gdiplus.h""... $ac_c" 1>&6
 -echo "configure:15104: checking for Gdiplus.h" >&5
-+echo "configure:15041: checking for Gdiplus.h" >&5
++echo "configure:15042: checking for Gdiplus.h" >&5
      
      ac_ext=C
  # CXXFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
- ac_cpp='$CXXCPP $CPPFLAGS'
- ac_compile='${CXX-g++} -c $CXXFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
- ac_link='${CXX-g++} -o conftest${ac_exeext} $CXXFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
+@@ -15110,7 +15048,7 @@
  cross_compiling=$ac_cv_prog_cxx_cross
  
      cat > conftest.$ac_ext <<EOF
 -#line 15114 "configure"
-+#line 15051 "configure"
++#line 15052 "configure"
  #include "confdefs.h"
  #include <windows.h>
                      #include <unknwn.h>
-                     #include <Gdiplus.h>
- int main() {
+@@ -15119,7 +15057,7 @@
  
  ; return 0; }
  EOF
 -if { (eval echo configure:15123: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
-+if { (eval echo configure:15060: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
++if { (eval echo configure:15061: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
    rm -rf conftest*
    echo "$ac_t""yes" 1>&6
  else
-   echo "configure: failed program was:" >&5
-   cat conftest.$ac_ext >&5
-   rm -rf conftest*
-   { echo "configure: error: Building the SVG GDI+ renderer requires an appropriate Microsoft SDK." 1>&2; exit 1; }
- fi
-@@ -15194,17 +15131,17 @@
- if test -n "$MOZ_INSTALLER" -a -n "$MOZ_XUL_APP" -a "$OS_ARCH" = "WINNT"; then
-     # Disable installer for Windows builds that use the new toolkit if NSIS
-     # isn't in the path.
-     for ac_prog in makensis
- do
+@@ -15199,7 +15137,7 @@
  # Extract the first word of "$ac_prog", so it can be a program name with args.
  set dummy $ac_prog; ac_word=$2
  echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
 -echo "configure:15203: checking for $ac_word" >&5
-+echo "configure:15140: checking for $ac_word" >&5
++echo "configure:15141: checking for $ac_word" >&5
  if eval "test \"`echo '$''{'ac_cv_path_MAKENSIS'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
-   case "$MAKENSIS" in
-   /*)
-   ac_cv_path_MAKENSIS="$MAKENSIS" # Let the user override the test with a path.
-   ;;
-   ?:/*)			 
-@@ -15239,17 +15176,17 @@
-     fi
-     # The Windows build for NSIS requires the iconv command line utility to
-     # convert the charset of the locale files.
-     for ac_prog in $HOST_ICONV "iconv"
- do
+@@ -15244,7 +15182,7 @@
  # Extract the first word of "$ac_prog", so it can be a program name with args.
  set dummy $ac_prog; ac_word=$2
  echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
 -echo "configure:15248: checking for $ac_word" >&5
-+echo "configure:15185: checking for $ac_word" >&5
++echo "configure:15186: checking for $ac_word" >&5
  if eval "test \"`echo '$''{'ac_cv_path_HOST_ICONV'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
-   case "$HOST_ICONV" in
-   /*)
-   ac_cv_path_HOST_ICONV="$HOST_ICONV" # Let the user override the test with a path.
-   ;;
-   ?:/*)			 
-@@ -15308,23 +15245,23 @@
- fi
- 
- # The Windows build requires the iconv command line utility
- # in order to build the updater.
- case "$target_os" in
+@@ -15313,13 +15251,13 @@
      msvc*|mks*|cygwin*|mingw*|wince*)
          if test -n "$MOZ_UPDATER"; then
              echo $ac_n "checking for iconv""... $ac_c" 1>&6
 -echo "configure:15317: checking for iconv" >&5
-+echo "configure:15254: checking for iconv" >&5
++echo "configure:15255: checking for iconv" >&5
              for ac_prog in $HOST_ICONV "iconv"
  do
  # Extract the first word of "$ac_prog", so it can be a program name with args.
  set dummy $ac_prog; ac_word=$2
  echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
 -echo "configure:15323: checking for $ac_word" >&5
-+echo "configure:15260: checking for $ac_word" >&5
++echo "configure:15261: checking for $ac_word" >&5
  if eval "test \"`echo '$''{'ac_cv_prog_HOST_ICONV'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
-   if test -n "$HOST_ICONV"; then
-   ac_cv_prog_HOST_ICONV="$HOST_ICONV" # Let the user override the test.
- else
-   IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
-   ac_dummy="$PATH"
-@@ -15660,28 +15597,28 @@
-         ;;
-   esac
- MOZ_DEBUG_ENABLE_DEFS="$MOZ_DEBUG_ENABLE_DEFS -DTRACING"
- 
- MOZ_DEBUG_DISABLE_DEFS="-DNDEBUG -DTRIMMED"
+@@ -15665,18 +15603,18 @@
  
  if test -n "$MOZ_DEBUG"; then
      echo $ac_n "checking for valid debug flags""... $ac_c" 1>&6
 -echo "configure:15669: checking for valid debug flags" >&5
-+echo "configure:15606: checking for valid debug flags" >&5
++echo "configure:15607: checking for valid debug flags" >&5
      _SAVE_CFLAGS=$CFLAGS
      CFLAGS="$CFLAGS $MOZ_DEBUG_FLAGS"
      cat > conftest.$ac_ext <<EOF
 -#line 15673 "configure"
-+#line 15610 "configure"
++#line 15611 "configure"
  #include "confdefs.h"
  #include <stdio.h>
  int main() {
@@ -7760,31 +4840,21 @@
  ; return 0; }
  EOF
 -if { (eval echo configure:15680: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
-+if { (eval echo configure:15617: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
++if { (eval echo configure:15618: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
    rm -rf conftest*
    _results=yes
  else
-   echo "configure: failed program was:" >&5
-   cat conftest.$ac_ext >&5
-   rm -rf conftest*
-   _results=no
- fi
-@@ -15712,28 +15649,28 @@
- else
-   MOZ_OPTIMIZE=1
- fi
- 
- 
+@@ -15717,18 +15655,18 @@
  if test "$COMPILE_ENVIRONMENT"; then
  if test -n "$MOZ_OPTIMIZE"; then
      echo $ac_n "checking for valid optimization flags""... $ac_c" 1>&6
 -echo "configure:15721: checking for valid optimization flags" >&5
-+echo "configure:15658: checking for valid optimization flags" >&5
++echo "configure:15659: checking for valid optimization flags" >&5
      _SAVE_CFLAGS=$CFLAGS
      CFLAGS="$CFLAGS $MOZ_OPTIMIZE_FLAGS"
      cat > conftest.$ac_ext <<EOF
 -#line 15725 "configure"
-+#line 15662 "configure"
++#line 15663 "configure"
  #include "confdefs.h"
  #include <stdio.h>
  int main() {
@@ -7792,170 +4862,100 @@
  ; return 0; }
  EOF
 -if { (eval echo configure:15732: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
-+if { (eval echo configure:15669: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
++if { (eval echo configure:15670: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
    rm -rf conftest*
    _results=yes
  else
-   echo "configure: failed program was:" >&5
-   cat conftest.$ac_ext >&5
-   rm -rf conftest*
-   _results=no
- fi
-@@ -15940,36 +15877,36 @@
-     _ENABLE_EFENCE= 
-   else
-     { echo "configure: error: Option, efence, does not take an argument ($enableval)." 1>&2; exit 1; }
-   fi
- fi
+@@ -15945,7 +15883,7 @@
  
  if test -n "$_ENABLE_EFENCE"; then
      echo $ac_n "checking for malloc in -lefence""... $ac_c" 1>&6
 -echo "configure:15949: checking for malloc in -lefence" >&5
-+echo "configure:15886: checking for malloc in -lefence" >&5
++echo "configure:15887: checking for malloc in -lefence" >&5
  ac_lib_var=`echo efence'_'malloc | sed 'y%./+-%__p_%'`
  if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
- else
+@@ -15953,7 +15891,7 @@
    ac_save_LIBS="$LIBS"
  LIBS="-lefence  $LIBS"
  cat > conftest.$ac_ext <<EOF
 -#line 15957 "configure"
-+#line 15894 "configure"
++#line 15895 "configure"
  #include "confdefs.h"
  /* Override any gcc2 internal prototype to avoid an error.  */
  /* We use char because int might match the return type of a gcc2
-     builtin and then its argument prototype would still apply.  */
- char malloc();
- 
- int main() {
+@@ -15964,7 +15902,7 @@
  malloc()
  ; return 0; }
  EOF
 -if { (eval echo configure:15968: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-+if { (eval echo configure:15905: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
++if { (eval echo configure:15906: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
    rm -rf conftest*
    eval "ac_cv_lib_$ac_lib_var=yes"
  else
-   echo "configure: failed program was:" >&5
-   cat conftest.$ac_ext >&5
-   rm -rf conftest*
-   eval "ac_cv_lib_$ac_lib_var=no"
- fi
-@@ -16060,22 +15997,22 @@
- ac_cpp='$CXXCPP $CPPFLAGS'
- ac_compile='${CXX-g++} -c $CXXFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
- ac_link='${CXX-g++} -o conftest${ac_exeext} $CXXFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
- cross_compiling=$ac_cv_prog_cxx_cross
- 
+@@ -16065,12 +16003,12 @@
      for ac_func in __builtin_vec_new __builtin_vec_delete __builtin_new __builtin_delete __pure_virtual
  do
  echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
 -echo "configure:16069: checking for $ac_func" >&5
-+echo "configure:16006: checking for $ac_func" >&5
++echo "configure:16007: checking for $ac_func" >&5
  if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
    cat > conftest.$ac_ext <<EOF
 -#line 16074 "configure"
-+#line 16011 "configure"
++#line 16012 "configure"
  #include "confdefs.h"
  /* System header to define __stub macros and hopefully few prototypes,
      which can conflict with char $ac_func(); below.  */
- #include <assert.h>
- /* Override any gcc2 internal prototype to avoid an error.  */
- #ifdef __cplusplus
- extern "C"
- #endif
-@@ -16091,17 +16028,17 @@
- #if defined (__stub_$ac_func) || defined (__stub___$ac_func)
- choke me
- #else
- $ac_func();
- #endif
+@@ -16096,7 +16034,7 @@
  
  ; return 0; }
  EOF
 -if { (eval echo configure:16100: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-+if { (eval echo configure:16037: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
++if { (eval echo configure:16038: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
    rm -rf conftest*
    eval "ac_cv_func_$ac_func=yes"
  else
-   echo "configure: failed program was:" >&5
-   cat conftest.$ac_ext >&5
-   rm -rf conftest*
-   eval "ac_cv_func_$ac_func=no"
- fi
-@@ -16334,22 +16271,22 @@
- ac_cpp='$CXXCPP $CPPFLAGS'
- ac_compile='${CXX-g++} -c $CXXFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
- ac_link='${CXX-g++} -o conftest${ac_exeext} $CXXFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
- cross_compiling=$ac_cv_prog_cxx_cross
- 
+@@ -16339,12 +16277,12 @@
      for ac_func in __cxa_demangle
  do
  echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
 -echo "configure:16343: checking for $ac_func" >&5
-+echo "configure:16280: checking for $ac_func" >&5
++echo "configure:16281: checking for $ac_func" >&5
  if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
    cat > conftest.$ac_ext <<EOF
 -#line 16348 "configure"
-+#line 16285 "configure"
++#line 16286 "configure"
  #include "confdefs.h"
  /* System header to define __stub macros and hopefully few prototypes,
      which can conflict with char $ac_func(); below.  */
- #include <assert.h>
- /* Override any gcc2 internal prototype to avoid an error.  */
- #ifdef __cplusplus
- extern "C"
- #endif
-@@ -16365,17 +16302,17 @@
- #if defined (__stub_$ac_func) || defined (__stub___$ac_func)
- choke me
- #else
- $ac_func();
- #endif
+@@ -16370,7 +16308,7 @@
  
  ; return 0; }
  EOF
 -if { (eval echo configure:16374: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-+if { (eval echo configure:16311: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
++if { (eval echo configure:16312: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
    rm -rf conftest*
    eval "ac_cv_func_$ac_func=yes"
  else
-   echo "configure: failed program was:" >&5
-   cat conftest.$ac_ext >&5
-   rm -rf conftest*
-   eval "ac_cv_func_$ac_func=no"
- fi
-@@ -16503,39 +16440,39 @@
- fi
- 
- 
- 
- if test -z "$SKIP_COMPILER_CHECKS"; then
+@@ -16508,7 +16446,7 @@
  # Compiler Options
  
  echo $ac_n "checking for gcc -pipe support""... $ac_c" 1>&6
 -echo "configure:16512: checking for gcc -pipe support" >&5
-+echo "configure:16449: checking for gcc -pipe support" >&5
++echo "configure:16450: checking for gcc -pipe support" >&5
  if test -n "$GNU_CC" && test -n "$GNU_CXX" && test -n "$GNU_AS"; then
      echo '#include <stdio.h>' > dummy-hello.c
      echo 'int main() { printf("Hello World\n"); exit(0); }' >> dummy-hello.c
-     ${CC} -S dummy-hello.c -o dummy-hello.s 2>&5
-     cat dummy-hello.s | ${AS_BIN} -o dummy-hello.S - 2>&5
-     if test $? = 0; then
-         _res_as_stdin="yes"
-     else
-         _res_as_stdin="no"
-     fi
-     if test "$_res_as_stdin" = "yes"; then
+@@ -16523,14 +16461,14 @@
          _SAVE_CFLAGS=$CFLAGS
          CFLAGS="$CFLAGS -pipe"
          cat > conftest.$ac_ext <<EOF
 -#line 16527 "configure"
-+#line 16464 "configure"
++#line 16465 "configure"
  #include "confdefs.h"
   #include <stdio.h> 
  int main() {
@@ -7963,29 +4963,19 @@
  ; return 0; }
  EOF
 -if { (eval echo configure:16534: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
-+if { (eval echo configure:16471: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
++if { (eval echo configure:16472: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
    rm -rf conftest*
    _res_gcc_pipe="yes"
  else
-   echo "configure: failed program was:" >&5
-   cat conftest.$ac_ext >&5
-   rm -rf conftest*
-   _res_gcc_pipe="no" 
- fi
-@@ -16567,26 +16504,26 @@
-   fi
- fi
- 
- 
- if test "$_IGNORE_LONG_LONG_WARNINGS"; then
+@@ -16572,16 +16510,16 @@
       _SAVE_CFLAGS="$CFLAGS"
       CFLAGS="$CFLAGS ${_COMPILER_PREFIX}-Wno-long-long"
       echo $ac_n "checking whether compiler supports -Wno-long-long""... $ac_c" 1>&6
 -echo "configure:16576: checking whether compiler supports -Wno-long-long" >&5
-+echo "configure:16513: checking whether compiler supports -Wno-long-long" >&5
++echo "configure:16514: checking whether compiler supports -Wno-long-long" >&5
       cat > conftest.$ac_ext <<EOF
 -#line 16578 "configure"
-+#line 16515 "configure"
++#line 16516 "configure"
  #include "confdefs.h"
  
  int main() {
@@ -7993,29 +4983,19 @@
  ; return 0; }
  EOF
 -if { (eval echo configure:16585: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
-+if { (eval echo configure:16522: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
++if { (eval echo configure:16523: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
    rm -rf conftest*
     _WARNINGS_CFLAGS="${_WARNINGS_CFLAGS} ${_COMPILER_PREFIX}-Wno-long-long"
  	  _WARNINGS_CXXFLAGS="${_WARNINGS_CXXFLAGS} ${_COMPILER_PREFIX}-Wno-long-long"
- 	  result="yes" 
- else
-   echo "configure: failed program was:" >&5
-   cat conftest.$ac_ext >&5
-   rm -rf conftest*
-@@ -16597,26 +16534,26 @@
-      CFLAGS="$_SAVE_CFLAGS"
- fi
- 
- 
- _SAVE_CFLAGS="$CFLAGS"
+@@ -16602,16 +16540,16 @@
  CFLAGS="$CFLAGS -fprofile-generate"
  
  echo $ac_n "checking whether C compiler supports -fprofile-generate""... $ac_c" 1>&6
 -echo "configure:16606: checking whether C compiler supports -fprofile-generate" >&5
-+echo "configure:16543: checking whether C compiler supports -fprofile-generate" >&5
++echo "configure:16544: checking whether C compiler supports -fprofile-generate" >&5
  cat > conftest.$ac_ext <<EOF
 -#line 16608 "configure"
-+#line 16545 "configure"
++#line 16546 "configure"
  #include "confdefs.h"
  
  int main() {
@@ -8023,29 +5003,19 @@
  ; return 0; }
  EOF
 -if { (eval echo configure:16615: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
-+if { (eval echo configure:16552: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
++if { (eval echo configure:16553: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
    rm -rf conftest*
     PROFILE_GEN_CFLAGS="-fprofile-generate"
                   result="yes" 
- else
-   echo "configure: failed program was:" >&5
-   cat conftest.$ac_ext >&5
-   rm -rf conftest*
-   result="no"
-@@ -16624,26 +16561,26 @@
- rm -f conftest*
- echo "$ac_t""$result" 1>&6
- 
- if test $result = "yes"; then
-   PROFILE_USE_CFLAGS="-fprofile-use"
+@@ -16629,16 +16567,16 @@
  else
    CFLAGS="$_SAVE_CFLAGS -fprofile-arcs"
    echo $ac_n "checking whether C compiler supports -fprofile-arcs""... $ac_c" 1>&6
 -echo "configure:16633: checking whether C compiler supports -fprofile-arcs" >&5
-+echo "configure:16570: checking whether C compiler supports -fprofile-arcs" >&5
++echo "configure:16571: checking whether C compiler supports -fprofile-arcs" >&5
    cat > conftest.$ac_ext <<EOF
 -#line 16635 "configure"
-+#line 16572 "configure"
++#line 16573 "configure"
  #include "confdefs.h"
  
  int main() {
@@ -8053,29 +5023,19 @@
  ; return 0; }
  EOF
 -if { (eval echo configure:16642: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
-+if { (eval echo configure:16579: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
++if { (eval echo configure:16580: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
    rm -rf conftest*
     PROFILE_GEN_CFLAGS="-fprofile-arcs"
                     result="yes" 
- else
-   echo "configure: failed program was:" >&5
-   cat conftest.$ac_ext >&5
-   rm -rf conftest*
-   result="no"
-@@ -16679,26 +16616,26 @@
-     { echo "configure: error: Option, pedantic, does not take an argument ($enableval)." 1>&2; exit 1; }
-   fi
- fi
- 
- if test "$_PEDANTIC"; then
+@@ -16684,16 +16622,16 @@
      _SAVE_CXXFLAGS=$CXXFLAGS
      CXXFLAGS="$CXXFLAGS ${_WARNINGS_CXXFLAGS} ${_COMPILER_PREFIX}-pedantic"
      echo $ac_n "checking whether C++ compiler has -pedantic long long bug""... $ac_c" 1>&6
 -echo "configure:16688: checking whether C++ compiler has -pedantic long long bug" >&5
-+echo "configure:16625: checking whether C++ compiler has -pedantic long long bug" >&5
++echo "configure:16626: checking whether C++ compiler has -pedantic long long bug" >&5
      cat > conftest.$ac_ext <<EOF
 -#line 16690 "configure"
-+#line 16627 "configure"
++#line 16628 "configure"
  #include "confdefs.h"
  $configure_static_assert_macros
  int main() {
@@ -8083,32 +5043,22 @@
  ; return 0; }
  EOF
 -if { (eval echo configure:16697: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
-+if { (eval echo configure:16634: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
++if { (eval echo configure:16635: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
    rm -rf conftest*
    result="no"
  else
-   echo "configure: failed program was:" >&5
-   cat conftest.$ac_ext >&5
-   rm -rf conftest*
-   result="yes" 
- fi
-@@ -16713,23 +16650,26 @@
-         ;;
-     yes)
-         { echo "configure: error: Your compiler appears to have a known bug where long long is miscompiled when using -pedantic.  Reconfigure using --disable-pedantic. " 1>&2; exit 1; }
-         ;;
-     esac
+@@ -16718,13 +16656,16 @@
  fi
  
  echo $ac_n "checking for correct temporary object destruction order""... $ac_c" 1>&6
 -echo "configure:16722: checking for correct temporary object destruction order" >&5
-+echo "configure:16659: checking for correct temporary object destruction order" >&5
++echo "configure:16660: checking for correct temporary object destruction order" >&5
  if test "$cross_compiling" = yes; then
    result="maybe"
  else
    cat > conftest.$ac_ext <<EOF
 -#line 16727 "configure"
-+#line 16664 "configure"
++#line 16665 "configure"
  #include "confdefs.h"
 +#ifdef __cplusplus
 +extern "C" void exit(int);
@@ -8116,104 +5066,54 @@
   class A {
               public:  A(int& x) : mValue(x) {}
                        ~A() { mValue--; }
-                       operator char**() { return 0; }
-              private:  int& mValue;
-              };
-              void func(char **arg) {}
-              int m=2;
-@@ -16738,17 +16678,17 @@
-                   if (m==1) m = 0;
-              }
-              int main() {
-                  test();
-                  return(m);
+@@ -16743,7 +16684,7 @@
               }
               
  EOF
 -if { (eval echo configure:16747: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
-+if { (eval echo configure:16687: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
++if { (eval echo configure:16688: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
  then
    result="yes"
  else
-   echo "configure: failed program was:" >&5
-   cat conftest.$ac_ext >&5
-   rm -fr conftest*
-   result="no"
- fi
-@@ -16759,22 +16699,22 @@
- 
- if test "$result" = "no"; then
-     { echo "configure: error: Your compiler does not follow the C++ specification for temporary object destruction order." 1>&2; exit 1; }
- fi
- 
+@@ -16764,12 +16705,12 @@
  _SAVE_CXXFLAGS=$CXXFLAGS
  CXXFLAGS="$CXXFLAGS ${_WARNINGS_CXXFLAGS}"
  echo $ac_n "checking for correct overload resolution with const and templates""... $ac_c" 1>&6
 -echo "configure:16768: checking for correct overload resolution with const and templates" >&5
-+echo "configure:16708: checking for correct overload resolution with const and templates" >&5
++echo "configure:16709: checking for correct overload resolution with const and templates" >&5
  if eval "test \"`echo '$''{'ac_nscap_nonconst_opeq_bug'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
    cat > conftest.$ac_ext <<EOF
 -#line 16773 "configure"
-+#line 16713 "configure"
++#line 16714 "configure"
  #include "confdefs.h"
  
                        template <class T>
-                       class Pointer
-                         {
-                         public:
-                           T* myPtr;
-                         };
-@@ -16794,17 +16734,17 @@
- int main() {
- 
-                       Pointer<int> foo;
-                       const int* bar;
-                       return foo == bar;
+@@ -16799,7 +16740,7 @@
                      
  ; return 0; }
  EOF
 -if { (eval echo configure:16803: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
-+if { (eval echo configure:16743: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
++if { (eval echo configure:16744: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
    rm -rf conftest*
    ac_nscap_nonconst_opeq_bug="no"
  else
-   echo "configure: failed program was:" >&5
-   cat conftest.$ac_ext >&5
-   rm -rf conftest*
-   ac_nscap_nonconst_opeq_bug="yes"
- fi
-@@ -17086,17 +17026,17 @@
-     if test "$MOZ_ENABLE_GTK2"; then
-         
-   succeeded=no
- 
-   if test -z "$PKG_CONFIG"; then
+@@ -17091,7 +17032,7 @@
      # Extract the first word of "pkg-config", so it can be a program name with args.
  set dummy pkg-config; ac_word=$2
  echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
 -echo "configure:17095: checking for $ac_word" >&5
-+echo "configure:17035: checking for $ac_word" >&5
++echo "configure:17036: checking for $ac_word" >&5
  if eval "test \"`echo '$''{'ac_cv_path_PKG_CONFIG'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
-   case "$PKG_CONFIG" in
-   /*)
-   ac_cv_path_PKG_CONFIG="$PKG_CONFIG" # Let the user override the test with a path.
-   ;;
-   ?:/*)			 
-@@ -17130,29 +17070,29 @@
-      echo "*** The pkg-config script could not be found. Make sure it is"
-      echo "*** in your path, or set the PKG_CONFIG environment variable"
-      echo "*** to the full path to pkg-config."
-      echo "*** Or see http://www.freedesktop.org/software/pkgconfig to get pkg-config."
-   else
+@@ -17135,19 +17076,19 @@
       PKG_CONFIG_MIN_VERSION=0.9.0
       if $PKG_CONFIG --atleast-pkgconfig-version $PKG_CONFIG_MIN_VERSION; then
          echo $ac_n "checking for libIDL-2.0 >= 0.8.0""... $ac_c" 1>&6
 -echo "configure:17139: checking for libIDL-2.0 >= 0.8.0" >&5
-+echo "configure:17079: checking for libIDL-2.0 >= 0.8.0" >&5
++echo "configure:17080: checking for libIDL-2.0 >= 0.8.0" >&5
  
          if $PKG_CONFIG --exists "libIDL-2.0 >= 0.8.0" ; then
              echo "$ac_t""yes" 1>&6
@@ -8221,477 +5121,247 @@
  
              echo $ac_n "checking LIBIDL_CFLAGS""... $ac_c" 1>&6
 -echo "configure:17146: checking LIBIDL_CFLAGS" >&5
-+echo "configure:17086: checking LIBIDL_CFLAGS" >&5
++echo "configure:17087: checking LIBIDL_CFLAGS" >&5
              LIBIDL_CFLAGS=`$PKG_CONFIG --cflags "libIDL-2.0 >= 0.8.0"`
              echo "$ac_t""$LIBIDL_CFLAGS" 1>&6
  
              echo $ac_n "checking LIBIDL_LIBS""... $ac_c" 1>&6
 -echo "configure:17151: checking LIBIDL_LIBS" >&5
-+echo "configure:17091: checking LIBIDL_LIBS" >&5
++echo "configure:17092: checking LIBIDL_LIBS" >&5
              ## don't use --libs since that can do evil things like add
              ## -Wl,--export-dynamic
              LIBIDL_LIBS="`$PKG_CONFIG --libs-only-L \"libIDL-2.0 >= 0.8.0\"` `$PKG_CONFIG --libs-only-l \"libIDL-2.0 >= 0.8.0\"`"
-             echo "$ac_t""$LIBIDL_LIBS" 1>&6
-         else
-             LIBIDL_CFLAGS=""
-             LIBIDL_LIBS=""
-             ## If we have a custom action on failure, don't print errors, but 
-@@ -17265,17 +17205,17 @@
-       esac
-   done
- 
-     unset ac_cv_path_GLIB_CONFIG
- 
+@@ -17270,7 +17211,7 @@
    # Extract the first word of "glib-config", so it can be a program name with args.
  set dummy glib-config; ac_word=$2
  echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
 -echo "configure:17274: checking for $ac_word" >&5
-+echo "configure:17214: checking for $ac_word" >&5
++echo "configure:17215: checking for $ac_word" >&5
  if eval "test \"`echo '$''{'ac_cv_path_GLIB_CONFIG'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
-   case "$GLIB_CONFIG" in
-   /*)
-   ac_cv_path_GLIB_CONFIG="$GLIB_CONFIG" # Let the user override the test with a path.
-   ;;
-   ?:/*)			 
-@@ -17300,17 +17240,17 @@
- if test -n "$GLIB_CONFIG"; then
-   echo "$ac_t""$GLIB_CONFIG" 1>&6
- else
-   echo "$ac_t""no" 1>&6
- fi
+@@ -17305,7 +17246,7 @@
  
    min_glib_version=1.2.0
    echo $ac_n "checking for GLIB - version >= $min_glib_version""... $ac_c" 1>&6
 -echo "configure:17309: checking for GLIB - version >= $min_glib_version" >&5
-+echo "configure:17249: checking for GLIB - version >= $min_glib_version" >&5
++echo "configure:17250: checking for GLIB - version >= $min_glib_version" >&5
    no_glib=""
    if test "$GLIB_CONFIG" = "no" ; then
      no_glib=yes
-   else
-     GLIB_CFLAGS=`$GLIB_CONFIG $glib_config_args --cflags`
-     GLIB_LIBS=`$GLIB_CONFIG $glib_config_args --libs`
-     glib_config_major_version=`$GLIB_CONFIG $glib_config_args --version | \
-            sed 's/\([0-9]*\).\([0-9]*\).\([0-9]*\)/\1/'`
-@@ -17323,17 +17263,17 @@
-       ac_save_LIBS="$LIBS"
-       CFLAGS="$CFLAGS $GLIB_CFLAGS"
-       LIBS="$GLIB_LIBS $LIBS"
-       rm -f conf.glibtest
-       if test "$cross_compiling" = yes; then
+@@ -17328,7 +17269,7 @@
    echo $ac_n "cross compiling; assumed OK... $ac_c"
  else
    cat > conftest.$ac_ext <<EOF
 -#line 17332 "configure"
-+#line 17272 "configure"
++#line 17273 "configure"
  #include "confdefs.h"
  
  #include <glib.h>
- #include <stdio.h>
- #include <stdlib.h>
- 
- int 
- main ()
-@@ -17399,17 +17339,17 @@
-         printf("*** modify your LD_LIBRARY_PATH environment variable, or edit /etc/ld.so.conf\n");
-         printf("*** so that the correct libraries are found at run-time))\n");
-       }
-     }
-   return 1;
+@@ -17404,7 +17345,7 @@
  }
  
  EOF
 -if { (eval echo configure:17408: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
-+if { (eval echo configure:17348: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
++if { (eval echo configure:17349: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
  then
    :
  else
-   echo "configure: failed program was:" >&5
-   cat conftest.$ac_ext >&5
-   rm -fr conftest*
-   no_glib=yes
- fi
-@@ -17433,27 +17373,27 @@
-      else
-        if test -f conf.glibtest ; then
-         :
-        else
-           echo "*** Could not run GLIB test program, checking why..."
+@@ -17438,7 +17379,7 @@
            CFLAGS="$CFLAGS $GLIB_CFLAGS"
            LIBS="$LIBS $GLIB_LIBS"
            cat > conftest.$ac_ext <<EOF
 -#line 17442 "configure"
-+#line 17382 "configure"
++#line 17383 "configure"
  #include "confdefs.h"
  
  #include <glib.h>
- #include <stdio.h>
- 
- int main() {
+@@ -17448,7 +17389,7 @@
   return ((glib_major_version) || (glib_minor_version) || (glib_micro_version)); 
  ; return 0; }
  EOF
 -if { (eval echo configure:17452: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-+if { (eval echo configure:17392: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
++if { (eval echo configure:17393: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
    rm -rf conftest*
     echo "*** The test program compiled, but did not run. This usually means"
            echo "*** that the run-time linker is not finding GLIB or finding the wrong"
-           echo "*** version of GLIB. If it is not finding GLIB, you'll need to set your"
-           echo "*** LD_LIBRARY_PATH environment variable, or edit /etc/ld.so.conf to point"
-           echo "*** to the installed location  Also, make sure you have run ldconfig if that"
-           echo "*** is required on your system"
- 	  echo "***"
-@@ -17487,17 +17427,17 @@
-   rm -f conf.glibtest
- 
- 
-     unset ac_cv_path_LIBIDL_CONFIG
- 
+@@ -17492,7 +17433,7 @@
    # Extract the first word of "libIDL-config", so it can be a program name with args.
  set dummy libIDL-config; ac_word=$2
  echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
 -echo "configure:17496: checking for $ac_word" >&5
-+echo "configure:17436: checking for $ac_word" >&5
++echo "configure:17437: checking for $ac_word" >&5
  if eval "test \"`echo '$''{'ac_cv_path_LIBIDL_CONFIG'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
-   case "$LIBIDL_CONFIG" in
-   /*)
-   ac_cv_path_LIBIDL_CONFIG="$LIBIDL_CONFIG" # Let the user override the test with a path.
-   ;;
-   ?:/*)			 
-@@ -17522,17 +17462,17 @@
- if test -n "$LIBIDL_CONFIG"; then
-   echo "$ac_t""$LIBIDL_CONFIG" 1>&6
- else
-   echo "$ac_t""no" 1>&6
- fi
+@@ -17527,7 +17468,7 @@
  
    min_libIDL_version=$LIBIDL_VERSION
    echo $ac_n "checking for libIDL - version >= $min_libIDL_version""... $ac_c" 1>&6
 -echo "configure:17531: checking for libIDL - version >= $min_libIDL_version" >&5
-+echo "configure:17471: checking for libIDL - version >= $min_libIDL_version" >&5
++echo "configure:17472: checking for libIDL - version >= $min_libIDL_version" >&5
    no_libIDL=""
    if test "$LIBIDL_CONFIG" = "no" ; then
      no_libIDL=yes
-   else
-     LIBIDL_CFLAGS=`$LIBIDL_CONFIG $libIDL_config_args --cflags`
-     LIBIDL_LIBS=`$LIBIDL_CONFIG $libIDL_config_args --libs`
-     # hack to allow us to keep using libIDL 0.6.3-0.6.7. Anyone may remove
-     # this after we start requiring libIDL 0.6.8 or anything higher
-@@ -17549,17 +17489,17 @@
-       ac_save_LIBS="$LIBS"
-       CFLAGS="$CFLAGS $LIBIDL_CFLAGS"
-       LIBS="$LIBIDL_LIBS $LIBS"
-       rm -f conf.libIDLtest
-       if test "$cross_compiling" = yes; then
+@@ -17554,7 +17495,7 @@
    echo $ac_n "cross compiling; assumed OK... $ac_c"
  else
    cat > conftest.$ac_ext <<EOF
 -#line 17558 "configure"
-+#line 17498 "configure"
++#line 17499 "configure"
  #include "confdefs.h"
  
  #include <stdio.h>
- #include <stdlib.h>
- #include <libIDL/IDL.h>
- 
- int 
- main ()
-@@ -17635,17 +17575,17 @@
-         printf("*** modify your LD_LIBRARY_PATH environment variable, or edit /etc/ld.so.conf\n");
-         printf("*** so that the correct libraries are found at run-time))\n");
-       }
-     }
-   return 1;
+@@ -17640,7 +17581,7 @@
  }
  
  EOF
 -if { (eval echo configure:17644: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
-+if { (eval echo configure:17584: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
++if { (eval echo configure:17585: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
  then
    :
  else
-   echo "configure: failed program was:" >&5
-   cat conftest.$ac_ext >&5
-   rm -fr conftest*
-   no_libIDL=yes
- fi
-@@ -17669,28 +17609,28 @@
-      else
-        if test -f conf.libIDLtest ; then
-         :
-        else
-           echo "*** Could not run libIDL test program, checking why..."
+@@ -17674,7 +17615,7 @@
            CFLAGS="$CFLAGS $LIBIDL_CFLAGS"
            LIBS="$LIBS $LIBIDL_LIBS"
            cat > conftest.$ac_ext <<EOF
 -#line 17678 "configure"
-+#line 17618 "configure"
++#line 17619 "configure"
  #include "confdefs.h"
  
  #include <stdio.h>
- #include <stdlib.h>
- #include <libIDL/IDL.h>
- 
- int main() {
+@@ -17685,7 +17626,7 @@
   return IDL_get_libver_string ? 1 : 0; 
  ; return 0; }
  EOF
 -if { (eval echo configure:17689: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-+if { (eval echo configure:17629: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
++if { (eval echo configure:17630: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
    rm -rf conftest*
     echo "*** The test program compiled, but did not run. This usually means"
            echo "*** that the run-time linker is not finding libIDL or finding the wrong"
-           echo "*** version of LIBIDL. If it is not finding libIDL, you'll need to set your"
-           echo "*** LD_LIBRARY_PATH environment variable, or edit /etc/ld.so.conf to point"
-           echo "*** to the installed location  Also, make sure you have run ldconfig if that"
-           echo "*** is required on your system"
- 	  echo "***"
-@@ -17808,17 +17748,17 @@
-       esac
-   done
- 
-     unset ac_cv_path_GLIB_CONFIG
- 
+@@ -17813,7 +17754,7 @@
    # Extract the first word of "glib-config", so it can be a program name with args.
  set dummy glib-config; ac_word=$2
  echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
 -echo "configure:17817: checking for $ac_word" >&5
-+echo "configure:17757: checking for $ac_word" >&5
++echo "configure:17758: checking for $ac_word" >&5
  if eval "test \"`echo '$''{'ac_cv_path_GLIB_CONFIG'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
-   case "$GLIB_CONFIG" in
-   /*)
-   ac_cv_path_GLIB_CONFIG="$GLIB_CONFIG" # Let the user override the test with a path.
-   ;;
-   ?:/*)			 
-@@ -17843,17 +17783,17 @@
- if test -n "$GLIB_CONFIG"; then
-   echo "$ac_t""$GLIB_CONFIG" 1>&6
- else
-   echo "$ac_t""no" 1>&6
- fi
+@@ -17848,7 +17789,7 @@
  
    min_glib_version=1.2.0
    echo $ac_n "checking for GLIB - version >= $min_glib_version""... $ac_c" 1>&6
 -echo "configure:17852: checking for GLIB - version >= $min_glib_version" >&5
-+echo "configure:17792: checking for GLIB - version >= $min_glib_version" >&5
++echo "configure:17793: checking for GLIB - version >= $min_glib_version" >&5
    no_glib=""
    if test "$GLIB_CONFIG" = "no" ; then
      no_glib=yes
-   else
-     GLIB_CFLAGS=`$GLIB_CONFIG $glib_config_args --cflags`
-     GLIB_LIBS=`$GLIB_CONFIG $glib_config_args --libs`
-     glib_config_major_version=`$GLIB_CONFIG $glib_config_args --version | \
-            sed 's/\([0-9]*\).\([0-9]*\).\([0-9]*\)/\1/'`
-@@ -17866,17 +17806,17 @@
-       ac_save_LIBS="$LIBS"
-       CFLAGS="$CFLAGS $GLIB_CFLAGS"
-       LIBS="$GLIB_LIBS $LIBS"
-       rm -f conf.glibtest
-       if test "$cross_compiling" = yes; then
+@@ -17871,7 +17812,7 @@
    echo $ac_n "cross compiling; assumed OK... $ac_c"
  else
    cat > conftest.$ac_ext <<EOF
 -#line 17875 "configure"
-+#line 17815 "configure"
++#line 17816 "configure"
  #include "confdefs.h"
  
  #include <glib.h>
- #include <stdio.h>
- #include <stdlib.h>
- 
- int 
- main ()
-@@ -17942,17 +17882,17 @@
-         printf("*** modify your LD_LIBRARY_PATH environment variable, or edit /etc/ld.so.conf\n");
-         printf("*** so that the correct libraries are found at run-time))\n");
-       }
-     }
-   return 1;
+@@ -17947,7 +17888,7 @@
  }
  
  EOF
 -if { (eval echo configure:17951: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
-+if { (eval echo configure:17891: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
++if { (eval echo configure:17892: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
  then
    :
  else
-   echo "configure: failed program was:" >&5
-   cat conftest.$ac_ext >&5
-   rm -fr conftest*
-   no_glib=yes
- fi
-@@ -17976,27 +17916,27 @@
-      else
-        if test -f conf.glibtest ; then
-         :
-        else
-           echo "*** Could not run GLIB test program, checking why..."
+@@ -17981,7 +17922,7 @@
            CFLAGS="$CFLAGS $GLIB_CFLAGS"
            LIBS="$LIBS $GLIB_LIBS"
            cat > conftest.$ac_ext <<EOF
 -#line 17985 "configure"
-+#line 17925 "configure"
++#line 17926 "configure"
  #include "confdefs.h"
  
  #include <glib.h>
- #include <stdio.h>
- 
- int main() {
+@@ -17991,7 +17932,7 @@
   return ((glib_major_version) || (glib_minor_version) || (glib_micro_version)); 
  ; return 0; }
  EOF
 -if { (eval echo configure:17995: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-+if { (eval echo configure:17935: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
++if { (eval echo configure:17936: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
    rm -rf conftest*
     echo "*** The test program compiled, but did not run. This usually means"
            echo "*** that the run-time linker is not finding GLIB or finding the wrong"
-           echo "*** version of GLIB. If it is not finding GLIB, you'll need to set your"
-           echo "*** LD_LIBRARY_PATH environment variable, or edit /etc/ld.so.conf to point"
-           echo "*** to the installed location  Also, make sure you have run ldconfig if that"
-           echo "*** is required on your system"
- 	  echo "***"
-@@ -18030,17 +17970,17 @@
-   rm -f conf.glibtest
- 
- 
-     unset ac_cv_path_LIBIDL_CONFIG
- 
+@@ -18035,7 +17976,7 @@
    # Extract the first word of "libIDL-config", so it can be a program name with args.
  set dummy libIDL-config; ac_word=$2
  echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
 -echo "configure:18039: checking for $ac_word" >&5
-+echo "configure:17979: checking for $ac_word" >&5
++echo "configure:17980: checking for $ac_word" >&5
  if eval "test \"`echo '$''{'ac_cv_path_LIBIDL_CONFIG'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
-   case "$LIBIDL_CONFIG" in
-   /*)
-   ac_cv_path_LIBIDL_CONFIG="$LIBIDL_CONFIG" # Let the user override the test with a path.
-   ;;
-   ?:/*)			 
-@@ -18065,17 +18005,17 @@
- if test -n "$LIBIDL_CONFIG"; then
-   echo "$ac_t""$LIBIDL_CONFIG" 1>&6
- else
-   echo "$ac_t""no" 1>&6
- fi
+@@ -18070,7 +18011,7 @@
  
    min_libIDL_version=$LIBIDL_VERSION
    echo $ac_n "checking for libIDL - version >= $min_libIDL_version""... $ac_c" 1>&6
 -echo "configure:18074: checking for libIDL - version >= $min_libIDL_version" >&5
-+echo "configure:18014: checking for libIDL - version >= $min_libIDL_version" >&5
++echo "configure:18015: checking for libIDL - version >= $min_libIDL_version" >&5
    no_libIDL=""
    if test "$LIBIDL_CONFIG" = "no" ; then
      no_libIDL=yes
-   else
-     LIBIDL_CFLAGS=`$LIBIDL_CONFIG $libIDL_config_args --cflags`
-     LIBIDL_LIBS=`$LIBIDL_CONFIG $libIDL_config_args --libs`
-     # hack to allow us to keep using libIDL 0.6.3-0.6.7. Anyone may remove
-     # this after we start requiring libIDL 0.6.8 or anything higher
-@@ -18092,17 +18032,17 @@
-       ac_save_LIBS="$LIBS"
-       CFLAGS="$CFLAGS $LIBIDL_CFLAGS"
-       LIBS="$LIBIDL_LIBS $LIBS"
-       rm -f conf.libIDLtest
-       if test "$cross_compiling" = yes; then
+@@ -18097,7 +18038,7 @@
    echo $ac_n "cross compiling; assumed OK... $ac_c"
  else
    cat > conftest.$ac_ext <<EOF
 -#line 18101 "configure"
-+#line 18041 "configure"
++#line 18042 "configure"
  #include "confdefs.h"
  
  #include <stdio.h>
- #include <stdlib.h>
- #include <libIDL/IDL.h>
- 
- int 
- main ()
-@@ -18178,17 +18118,17 @@
-         printf("*** modify your LD_LIBRARY_PATH environment variable, or edit /etc/ld.so.conf\n");
-         printf("*** so that the correct libraries are found at run-time))\n");
-       }
-     }
-   return 1;
+@@ -18183,7 +18124,7 @@
  }
  
  EOF
 -if { (eval echo configure:18187: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
-+if { (eval echo configure:18127: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
++if { (eval echo configure:18128: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
  then
    :
  else
-   echo "configure: failed program was:" >&5
-   cat conftest.$ac_ext >&5
-   rm -fr conftest*
-   no_libIDL=yes
- fi
-@@ -18212,28 +18152,28 @@
-      else
-        if test -f conf.libIDLtest ; then
-         :
-        else
-           echo "*** Could not run libIDL test program, checking why..."
+@@ -18217,7 +18158,7 @@
            CFLAGS="$CFLAGS $LIBIDL_CFLAGS"
            LIBS="$LIBS $LIBIDL_LIBS"
            cat > conftest.$ac_ext <<EOF
 -#line 18221 "configure"
-+#line 18161 "configure"
++#line 18162 "configure"
  #include "confdefs.h"
  
  #include <stdio.h>
- #include <stdlib.h>
- #include <libIDL/IDL.h>
- 
- int main() {
+@@ -18228,7 +18169,7 @@
   return IDL_get_libver_string ? 1 : 0; 
  ; return 0; }
  EOF
 -if { (eval echo configure:18232: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-+if { (eval echo configure:18172: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
++if { (eval echo configure:18173: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
    rm -rf conftest*
     echo "*** The test program compiled, but did not run. This usually means"
            echo "*** that the run-time linker is not finding libIDL or finding the wrong"
-           echo "*** version of LIBIDL. If it is not finding libIDL, you'll need to set your"
-           echo "*** LD_LIBRARY_PATH environment variable, or edit /etc/ld.so.conf to point"
-           echo "*** to the installed location  Also, make sure you have run ldconfig if that"
-           echo "*** is required on your system"
- 	  echo "***"
-@@ -18264,17 +18204,17 @@
-         if test -z "$_LIBIDL_FOUND"; then
-             
-   succeeded=no
- 
-   if test -z "$PKG_CONFIG"; then
+@@ -18269,7 +18210,7 @@
      # Extract the first word of "pkg-config", so it can be a program name with args.
  set dummy pkg-config; ac_word=$2
  echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
 -echo "configure:18273: checking for $ac_word" >&5
-+echo "configure:18213: checking for $ac_word" >&5
++echo "configure:18214: checking for $ac_word" >&5
  if eval "test \"`echo '$''{'ac_cv_path_PKG_CONFIG'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
-   case "$PKG_CONFIG" in
-   /*)
-   ac_cv_path_PKG_CONFIG="$PKG_CONFIG" # Let the user override the test with a path.
-   ;;
-   ?:/*)			 
-@@ -18308,29 +18248,29 @@
-      echo "*** The pkg-config script could not be found. Make sure it is"
-      echo "*** in your path, or set the PKG_CONFIG environment variable"
-      echo "*** to the full path to pkg-config."
-      echo "*** Or see http://www.freedesktop.org/software/pkgconfig to get pkg-config."
-   else
+@@ -18313,19 +18254,19 @@
       PKG_CONFIG_MIN_VERSION=0.9.0
       if $PKG_CONFIG --atleast-pkgconfig-version $PKG_CONFIG_MIN_VERSION; then
          echo $ac_n "checking for libIDL-2.0 >= 0.8.0""... $ac_c" 1>&6
 -echo "configure:18317: checking for libIDL-2.0 >= 0.8.0" >&5
-+echo "configure:18257: checking for libIDL-2.0 >= 0.8.0" >&5
++echo "configure:18258: checking for libIDL-2.0 >= 0.8.0" >&5
  
          if $PKG_CONFIG --exists "libIDL-2.0 >= 0.8.0" ; then
              echo "$ac_t""yes" 1>&6
@@ -8699,123 +5369,67 @@
  
              echo $ac_n "checking LIBIDL_CFLAGS""... $ac_c" 1>&6
 -echo "configure:18324: checking LIBIDL_CFLAGS" >&5
-+echo "configure:18264: checking LIBIDL_CFLAGS" >&5
++echo "configure:18265: checking LIBIDL_CFLAGS" >&5
              LIBIDL_CFLAGS=`$PKG_CONFIG --cflags "libIDL-2.0 >= 0.8.0"`
              echo "$ac_t""$LIBIDL_CFLAGS" 1>&6
  
              echo $ac_n "checking LIBIDL_LIBS""... $ac_c" 1>&6
 -echo "configure:18329: checking LIBIDL_LIBS" >&5
-+echo "configure:18269: checking LIBIDL_LIBS" >&5
++echo "configure:18270: checking LIBIDL_LIBS" >&5
              ## don't use --libs since that can do evil things like add
              ## -Wl,--export-dynamic
              LIBIDL_LIBS="`$PKG_CONFIG --libs-only-L \"libIDL-2.0 >= 0.8.0\"` `$PKG_CONFIG --libs-only-l \"libIDL-2.0 >= 0.8.0\"`"
-             echo "$ac_t""$LIBIDL_LIBS" 1>&6
-         else
-             LIBIDL_CFLAGS=""
-             LIBIDL_LIBS=""
-             ## If we have a custom action on failure, don't print errors, but 
-@@ -18356,17 +18296,17 @@
-         fi
-     fi
-                     if test -z "$_LIBIDL_FOUND" && test -z "$CROSS_COMPILE"; then
-         for ac_prog in $ORBIT_CONFIG orbit-config
- do
+@@ -18361,7 +18302,7 @@
  # Extract the first word of "$ac_prog", so it can be a program name with args.
  set dummy $ac_prog; ac_word=$2
  echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
 -echo "configure:18365: checking for $ac_word" >&5
-+echo "configure:18305: checking for $ac_word" >&5
++echo "configure:18306: checking for $ac_word" >&5
  if eval "test \"`echo '$''{'ac_cv_path_ORBIT_CONFIG'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
-   case "$ORBIT_CONFIG" in
-   /*)
-   ac_cv_path_ORBIT_CONFIG="$ORBIT_CONFIG" # Let the user override the test with a path.
-   ;;
-   ?:/*)			 
-@@ -18393,49 +18333,49 @@
-   echo "$ac_t""no" 1>&6
- fi
- 
- test -n "$ORBIT_CONFIG" && break
- done
+@@ -18398,7 +18339,7 @@
  
          if test -n "$ORBIT_CONFIG"; then
              echo $ac_n "checking for ORBit libIDL usability""... $ac_c" 1>&6
 -echo "configure:18402: checking for ORBit libIDL usability" >&5
-+echo "configure:18342: checking for ORBit libIDL usability" >&5
++echo "configure:18343: checking for ORBit libIDL usability" >&5
          	_ORBIT_CFLAGS=`${ORBIT_CONFIG} client --cflags`
      	    _ORBIT_LIBS=`${ORBIT_CONFIG} client --libs`
              _ORBIT_INC_PATH=`${PERL} -e '{ for $f (@ARGV) { print "$f " if ($f =~ m/^-I/); } }' -- ${_ORBIT_CFLAGS}`
-             _ORBIT_LIB_PATH=`${PERL} -e '{ for $f (@ARGV) { print "$f " if ($f =~ m/^-L/); } }' -- ${_ORBIT_LIBS}`
-             LIBIDL_CFLAGS="$_ORBIT_INC_PATH"
-             LIBIDL_LIBS="$_ORBIT_LIB_PATH -lIDL -lglib"
-             LIBIDL_CONFIG=
-             _SAVE_CFLAGS="$CFLAGS"
-             _SAVE_LIBS="$LIBS"
-             CFLAGS="$LIBIDL_CFLAGS $CFLAGS"
-             LIBS="$LIBIDL_LIBS $LIBS"
-             if test "$cross_compiling" = yes; then
-   _LIBIDL_FOUND=1
+@@ -18415,7 +18356,7 @@
                  result="maybe" 
  else
    cat > conftest.$ac_ext <<EOF
 -#line 18419 "configure"
-+#line 18359 "configure"
++#line 18360 "configure"
  #include "confdefs.h"
  
  #include <stdlib.h>
- #include <libIDL/IDL.h>
- int main() {
-   char *s;
-   s=strdup(IDL_get_libver_string());
-   if(s==NULL) {
-     exit(1);
-   }
-   exit(0);
+@@ -18430,7 +18371,7 @@
  }
              
  EOF
 -if { (eval echo configure:18434: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
-+if { (eval echo configure:18374: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
++if { (eval echo configure:18375: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
  then
    _LIBIDL_FOUND=1
                  result="yes"
- else
-   echo "configure: failed program was:" >&5
-   cat conftest.$ac_ext >&5
-   rm -fr conftest*
-   LIBIDL_CFLAGS=
-@@ -18482,17 +18422,17 @@
-     if test "$MOZ_ENABLE_GTK2"; then
-         
-   succeeded=no
- 
-   if test -z "$PKG_CONFIG"; then
+@@ -18487,7 +18428,7 @@
      # Extract the first word of "pkg-config", so it can be a program name with args.
  set dummy pkg-config; ac_word=$2
  echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
 -echo "configure:18491: checking for $ac_word" >&5
-+echo "configure:18431: checking for $ac_word" >&5
++echo "configure:18432: checking for $ac_word" >&5
  if eval "test \"`echo '$''{'ac_cv_path_PKG_CONFIG'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
-   case "$PKG_CONFIG" in
-   /*)
-   ac_cv_path_PKG_CONFIG="$PKG_CONFIG" # Let the user override the test with a path.
-   ;;
-   ?:/*)			 
-@@ -18526,29 +18466,29 @@
-      echo "*** The pkg-config script could not be found. Make sure it is"
-      echo "*** in your path, or set the PKG_CONFIG environment variable"
-      echo "*** to the full path to pkg-config."
-      echo "*** Or see http://www.freedesktop.org/software/pkgconfig to get pkg-config."
-   else
+@@ -18531,19 +18472,19 @@
       PKG_CONFIG_MIN_VERSION=0.9.0
       if $PKG_CONFIG --atleast-pkgconfig-version $PKG_CONFIG_MIN_VERSION; then
          echo $ac_n "checking for glib-2.0 >= 1.3.7""... $ac_c" 1>&6
 -echo "configure:18535: checking for glib-2.0 >= 1.3.7" >&5
-+echo "configure:18475: checking for glib-2.0 >= 1.3.7" >&5
++echo "configure:18476: checking for glib-2.0 >= 1.3.7" >&5
  
          if $PKG_CONFIG --exists "glib-2.0 >= 1.3.7" ; then
              echo "$ac_t""yes" 1>&6
@@ -8823,144 +5437,82 @@
  
              echo $ac_n "checking GLIB_CFLAGS""... $ac_c" 1>&6
 -echo "configure:18542: checking GLIB_CFLAGS" >&5
-+echo "configure:18482: checking GLIB_CFLAGS" >&5
++echo "configure:18483: checking GLIB_CFLAGS" >&5
              GLIB_CFLAGS=`$PKG_CONFIG --cflags "glib-2.0 >= 1.3.7"`
              echo "$ac_t""$GLIB_CFLAGS" 1>&6
  
              echo $ac_n "checking GLIB_LIBS""... $ac_c" 1>&6
 -echo "configure:18547: checking GLIB_LIBS" >&5
-+echo "configure:18487: checking GLIB_LIBS" >&5
++echo "configure:18488: checking GLIB_LIBS" >&5
              ## don't use --libs since that can do evil things like add
              ## -Wl,--export-dynamic
              GLIB_LIBS="`$PKG_CONFIG --libs-only-L \"glib-2.0 >= 1.3.7\"` `$PKG_CONFIG --libs-only-l \"glib-2.0 >= 1.3.7\"`"
-             echo "$ac_t""$GLIB_LIBS" 1>&6
-         else
-             GLIB_CFLAGS=""
-             GLIB_LIBS=""
-             ## If we have a custom action on failure, don't print errors, but 
-@@ -18622,17 +18562,17 @@
-       esac
-   done
- 
-     unset ac_cv_path_GLIB_CONFIG
- 
+@@ -18627,7 +18568,7 @@
    # Extract the first word of "glib-config", so it can be a program name with args.
  set dummy glib-config; ac_word=$2
  echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
 -echo "configure:18631: checking for $ac_word" >&5
-+echo "configure:18571: checking for $ac_word" >&5
++echo "configure:18572: checking for $ac_word" >&5
  if eval "test \"`echo '$''{'ac_cv_path_GLIB_CONFIG'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
-   case "$GLIB_CONFIG" in
-   /*)
-   ac_cv_path_GLIB_CONFIG="$GLIB_CONFIG" # Let the user override the test with a path.
-   ;;
-   ?:/*)			 
-@@ -18657,17 +18597,17 @@
- if test -n "$GLIB_CONFIG"; then
-   echo "$ac_t""$GLIB_CONFIG" 1>&6
- else
-   echo "$ac_t""no" 1>&6
- fi
+@@ -18662,7 +18603,7 @@
  
    min_glib_version=${GLIB_VERSION}
    echo $ac_n "checking for GLIB - version >= $min_glib_version""... $ac_c" 1>&6
 -echo "configure:18666: checking for GLIB - version >= $min_glib_version" >&5
-+echo "configure:18606: checking for GLIB - version >= $min_glib_version" >&5
++echo "configure:18607: checking for GLIB - version >= $min_glib_version" >&5
    no_glib=""
    if test "$GLIB_CONFIG" = "no" ; then
      no_glib=yes
-   else
-     GLIB_CFLAGS=`$GLIB_CONFIG $glib_config_args --cflags`
-     GLIB_LIBS=`$GLIB_CONFIG $glib_config_args --libs`
-     glib_config_major_version=`$GLIB_CONFIG $glib_config_args --version | \
-            sed 's/\([0-9]*\).\([0-9]*\).\([0-9]*\)/\1/'`
-@@ -18680,17 +18620,17 @@
-       ac_save_LIBS="$LIBS"
-       CFLAGS="$CFLAGS $GLIB_CFLAGS"
-       LIBS="$GLIB_LIBS $LIBS"
-       rm -f conf.glibtest
-       if test "$cross_compiling" = yes; then
+@@ -18685,7 +18626,7 @@
    echo $ac_n "cross compiling; assumed OK... $ac_c"
  else
    cat > conftest.$ac_ext <<EOF
 -#line 18689 "configure"
-+#line 18629 "configure"
++#line 18630 "configure"
  #include "confdefs.h"
  
  #include <glib.h>
- #include <stdio.h>
- #include <stdlib.h>
- 
- int 
- main ()
-@@ -18756,17 +18696,17 @@
-         printf("*** modify your LD_LIBRARY_PATH environment variable, or edit /etc/ld.so.conf\n");
-         printf("*** so that the correct libraries are found at run-time))\n");
-       }
-     }
-   return 1;
+@@ -18761,7 +18702,7 @@
  }
  
  EOF
 -if { (eval echo configure:18765: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
-+if { (eval echo configure:18705: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
++if { (eval echo configure:18706: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
  then
    :
  else
-   echo "configure: failed program was:" >&5
-   cat conftest.$ac_ext >&5
-   rm -fr conftest*
-   no_glib=yes
- fi
-@@ -18790,27 +18730,27 @@
-      else
-        if test -f conf.glibtest ; then
-         :
-        else
-           echo "*** Could not run GLIB test program, checking why..."
+@@ -18795,7 +18736,7 @@
            CFLAGS="$CFLAGS $GLIB_CFLAGS"
            LIBS="$LIBS $GLIB_LIBS"
            cat > conftest.$ac_ext <<EOF
 -#line 18799 "configure"
-+#line 18739 "configure"
++#line 18740 "configure"
  #include "confdefs.h"
  
  #include <glib.h>
- #include <stdio.h>
- 
- int main() {
+@@ -18805,7 +18746,7 @@
   return ((glib_major_version) || (glib_minor_version) || (glib_micro_version)); 
  ; return 0; }
  EOF
 -if { (eval echo configure:18809: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-+if { (eval echo configure:18749: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
++if { (eval echo configure:18750: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
    rm -rf conftest*
     echo "*** The test program compiled, but did not run. This usually means"
            echo "*** that the run-time linker is not finding GLIB or finding the wrong"
-           echo "*** version of GLIB. If it is not finding GLIB, you'll need to set your"
-           echo "*** LD_LIBRARY_PATH environment variable, or edit /etc/ld.so.conf to point"
-           echo "*** to the installed location  Also, make sure you have run ldconfig if that"
-           echo "*** is required on your system"
- 	  echo "***"
-@@ -18880,29 +18820,29 @@
-       ;;
-   *)
-       MOZ_LIBART_LIBS='-lmoz_art_lgpl -lm'
-       ;;
-   esac
+@@ -18885,19 +18826,19 @@
    # The Ultrix 4.2 mips builtin alloca declared by alloca.h only works
  # for constant arguments.  Useless!
  echo $ac_n "checking for working alloca.h""... $ac_c" 1>&6
 -echo "configure:18889: checking for working alloca.h" >&5
-+echo "configure:18829: checking for working alloca.h" >&5
++echo "configure:18830: checking for working alloca.h" >&5
  if eval "test \"`echo '$''{'ac_cv_header_alloca_h'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
    cat > conftest.$ac_ext <<EOF
 -#line 18894 "configure"
-+#line 18834 "configure"
++#line 18835 "configure"
  #include "confdefs.h"
  #include <alloca.h>
  int main() {
@@ -8968,236 +5520,136 @@
  ; return 0; }
  EOF
 -if { (eval echo configure:18901: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-+if { (eval echo configure:18841: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
++if { (eval echo configure:18842: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
    rm -rf conftest*
    ac_cv_header_alloca_h=yes
  else
-   echo "configure: failed program was:" >&5
-   cat conftest.$ac_ext >&5
-   rm -rf conftest*
-   ac_cv_header_alloca_h=no
- fi
-@@ -18913,22 +18853,22 @@
- if test $ac_cv_header_alloca_h = yes; then
-   cat >> confdefs.h <<\EOF
- #define HAVE_ALLOCA_H 1
- EOF
- 
+@@ -18918,12 +18859,12 @@
  fi
  
  echo $ac_n "checking for alloca""... $ac_c" 1>&6
 -echo "configure:18922: checking for alloca" >&5
-+echo "configure:18862: checking for alloca" >&5
++echo "configure:18863: checking for alloca" >&5
  if eval "test \"`echo '$''{'ac_cv_func_alloca_works'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
    cat > conftest.$ac_ext <<EOF
 -#line 18927 "configure"
-+#line 18867 "configure"
++#line 18868 "configure"
  #include "confdefs.h"
  
  #ifdef __GNUC__
- # define alloca __builtin_alloca
- #else
- # ifdef _MSC_VER
- #  include <malloc.h>
- #  define alloca _alloca
-@@ -18946,17 +18886,17 @@
- #  endif
- # endif
- #endif
- 
- int main() {
+@@ -18951,7 +18892,7 @@
  char *p = (char *) alloca(1);
  ; return 0; }
  EOF
 -if { (eval echo configure:18955: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-+if { (eval echo configure:18895: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
++if { (eval echo configure:18896: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
    rm -rf conftest*
    ac_cv_func_alloca_works=yes
  else
-   echo "configure: failed program was:" >&5
-   cat conftest.$ac_ext >&5
-   rm -rf conftest*
-   ac_cv_func_alloca_works=no
- fi
-@@ -18978,22 +18918,22 @@
-   # use ar to extract alloca.o from them instead of compiling alloca.c.
-   ALLOCA=alloca.${ac_objext}
-   cat >> confdefs.h <<\EOF
- #define C_ALLOCA 1
- EOF
+@@ -18983,12 +18924,12 @@
  
  
  echo $ac_n "checking whether alloca needs Cray hooks""... $ac_c" 1>&6
 -echo "configure:18987: checking whether alloca needs Cray hooks" >&5
-+echo "configure:18927: checking whether alloca needs Cray hooks" >&5
++echo "configure:18928: checking whether alloca needs Cray hooks" >&5
  if eval "test \"`echo '$''{'ac_cv_os_cray'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
    cat > conftest.$ac_ext <<EOF
 -#line 18992 "configure"
-+#line 18932 "configure"
++#line 18933 "configure"
  #include "confdefs.h"
  #if defined(CRAY) && ! defined(CRAY2)
  webecray
- #else
- wenotbecray
- #endif
- 
- EOF
-@@ -19008,22 +18948,22 @@
- rm -f conftest*
- 
- fi
- 
- echo "$ac_t""$ac_cv_os_cray" 1>&6
+@@ -19013,12 +18954,12 @@
  if test $ac_cv_os_cray = yes; then
  for ac_func in _getb67 GETB67 getb67; do
    echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
 -echo "configure:19017: checking for $ac_func" >&5
-+echo "configure:18957: checking for $ac_func" >&5
++echo "configure:18958: checking for $ac_func" >&5
  if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
    cat > conftest.$ac_ext <<EOF
 -#line 19022 "configure"
-+#line 18962 "configure"
++#line 18963 "configure"
  #include "confdefs.h"
  /* System header to define __stub macros and hopefully few prototypes,
      which can conflict with char $ac_func(); below.  */
- #include <assert.h>
- /* Override any gcc2 internal prototype to avoid an error.  */
- /* We use char because int might match the return type of a gcc2
-     builtin and then its argument prototype would still apply.  */
- char $ac_func();
-@@ -19036,17 +18976,17 @@
- #if defined (__stub_$ac_func) || defined (__stub___$ac_func)
- choke me
- #else
- $ac_func();
- #endif
+@@ -19041,7 +18982,7 @@
  
  ; return 0; }
  EOF
 -if { (eval echo configure:19045: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-+if { (eval echo configure:18985: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
++if { (eval echo configure:18986: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
    rm -rf conftest*
    eval "ac_cv_func_$ac_func=yes"
  else
-   echo "configure: failed program was:" >&5
-   cat conftest.$ac_ext >&5
-   rm -rf conftest*
-   eval "ac_cv_func_$ac_func=no"
- fi
-@@ -19063,25 +19003,25 @@
- else
-   echo "$ac_t""no" 1>&6
- fi
- 
- done
+@@ -19068,7 +19009,7 @@
  fi
  
  echo $ac_n "checking stack direction for C alloca""... $ac_c" 1>&6
 -echo "configure:19072: checking stack direction for C alloca" >&5
-+echo "configure:19012: checking stack direction for C alloca" >&5
++echo "configure:19013: checking stack direction for C alloca" >&5
  if eval "test \"`echo '$''{'ac_cv_c_stack_direction'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
-   if test "$cross_compiling" = yes; then
+@@ -19076,7 +19017,7 @@
    ac_cv_c_stack_direction=0
  else
    cat > conftest.$ac_ext <<EOF
 -#line 19080 "configure"
-+#line 19020 "configure"
++#line 19021 "configure"
  #include "confdefs.h"
  find_stack_direction ()
  {
-   static char *addr = 0;
-   auto char dummy;
-   if (addr == 0)
-     {
-       addr = &dummy;
-@@ -19090,17 +19030,17 @@
-   else
-     return (&dummy > addr) ? 1 : -1;
- }
- main ()
- {
+@@ -19095,7 +19036,7 @@
    exit (find_stack_direction() < 0);
  }
  EOF
 -if { (eval echo configure:19099: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
-+if { (eval echo configure:19039: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
++if { (eval echo configure:19040: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
  then
    ac_cv_c_stack_direction=1
  else
-   echo "configure: failed program was:" >&5
-   cat conftest.$ac_ext >&5
-   rm -fr conftest*
-   ac_cv_c_stack_direction=-1
- fi
-@@ -19139,27 +19079,27 @@
- 
- 
-    if test "$MOZ_TREE_CAIRO"; then
-        # Check for headers defining standard int types.
-        for ac_hdr in stdint.h inttypes.h sys/int_types.h
+@@ -19144,17 +19085,17 @@
  do
  ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
  echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
 -echo "configure:19148: checking for $ac_hdr" >&5
-+echo "configure:19088: checking for $ac_hdr" >&5
++echo "configure:19089: checking for $ac_hdr" >&5
  if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
    cat > conftest.$ac_ext <<EOF
 -#line 19153 "configure"
-+#line 19093 "configure"
++#line 19094 "configure"
  #include "confdefs.h"
  #include <$ac_hdr>
  EOF
  ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
 -{ (eval echo configure:19158: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
-+{ (eval echo configure:19098: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
++{ (eval echo configure:19099: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
  ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
  if test -z "$ac_err"; then
    rm -rf conftest*
-   eval "ac_cv_header_$ac_safe=yes"
- else
-   echo "$ac_err" >&5
-   echo "configure: failed program was:" >&5
-   cat conftest.$ac_ext >&5
-@@ -19240,17 +19180,17 @@
-    else
-       
-   succeeded=no
- 
-   if test -z "$PKG_CONFIG"; then
+@@ -19245,7 +19186,7 @@
      # Extract the first word of "pkg-config", so it can be a program name with args.
  set dummy pkg-config; ac_word=$2
  echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
 -echo "configure:19249: checking for $ac_word" >&5
-+echo "configure:19189: checking for $ac_word" >&5
++echo "configure:19190: checking for $ac_word" >&5
  if eval "test \"`echo '$''{'ac_cv_path_PKG_CONFIG'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
-   case "$PKG_CONFIG" in
-   /*)
-   ac_cv_path_PKG_CONFIG="$PKG_CONFIG" # Let the user override the test with a path.
-   ;;
-   ?:/*)			 
-@@ -19284,29 +19224,29 @@
-      echo "*** The pkg-config script could not be found. Make sure it is"
-      echo "*** in your path, or set the PKG_CONFIG environment variable"
-      echo "*** to the full path to pkg-config."
-      echo "*** Or see http://www.freedesktop.org/software/pkgconfig to get pkg-config."
-   else
+@@ -19289,19 +19230,19 @@
       PKG_CONFIG_MIN_VERSION=0.9.0
       if $PKG_CONFIG --atleast-pkgconfig-version $PKG_CONFIG_MIN_VERSION; then
          echo $ac_n "checking for cairo >= $CAIRO_VERSION""... $ac_c" 1>&6
 -echo "configure:19293: checking for cairo >= $CAIRO_VERSION" >&5
-+echo "configure:19233: checking for cairo >= $CAIRO_VERSION" >&5
++echo "configure:19234: checking for cairo >= $CAIRO_VERSION" >&5
  
          if $PKG_CONFIG --exists "cairo >= $CAIRO_VERSION" ; then
              echo "$ac_t""yes" 1>&6
@@ -9205,27 +5657,17 @@
  
              echo $ac_n "checking CAIRO_CFLAGS""... $ac_c" 1>&6
 -echo "configure:19300: checking CAIRO_CFLAGS" >&5
-+echo "configure:19240: checking CAIRO_CFLAGS" >&5
++echo "configure:19241: checking CAIRO_CFLAGS" >&5
              CAIRO_CFLAGS=`$PKG_CONFIG --cflags "cairo >= $CAIRO_VERSION"`
              echo "$ac_t""$CAIRO_CFLAGS" 1>&6
  
              echo $ac_n "checking CAIRO_LIBS""... $ac_c" 1>&6
 -echo "configure:19305: checking CAIRO_LIBS" >&5
-+echo "configure:19245: checking CAIRO_LIBS" >&5
++echo "configure:19246: checking CAIRO_LIBS" >&5
              ## don't use --libs since that can do evil things like add
              ## -Wl,--export-dynamic
              CAIRO_LIBS="`$PKG_CONFIG --libs-only-L \"cairo >= $CAIRO_VERSION\"` `$PKG_CONFIG --libs-only-l \"cairo >= $CAIRO_VERSION\"`"
-             echo "$ac_t""$CAIRO_LIBS" 1>&6
-         else
-             CAIRO_CFLAGS=""
-             CAIRO_LIBS=""
-             ## If we have a custom action on failure, don't print errors, but 
-@@ -19326,23 +19266,220 @@
-   if test $succeeded = yes; then
-      :
-   else
-      { echo "configure: error: Library requirements (cairo >= $CAIRO_VERSION) not met; consider adjusting the PKG_CONFIG_PATH environment variable if your libraries are in a nonstandard prefix so pkg-config can find them." 1>&2; exit 1; }
-   fi
+@@ -19331,6 +19272,199 @@
  
        MOZ_CAIRO_CFLAGS=$CAIRO_CFLAGS
        MOZ_CAIRO_LIBS=$CAIRO_LIBS
@@ -9239,7 +5681,7 @@
 +    # Extract the first word of "pkg-config", so it can be a program name with args.
 +set dummy pkg-config; ac_word=$2
 +echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
-+echo "configure:19285: checking for $ac_word" >&5
++echo "configure:19286: checking for $ac_word" >&5
 +if eval "test \"`echo '$''{'ac_cv_path_PKG_CONFIG'+set}'`\" = set"; then
 +  echo $ac_n "(cached) $ac_c" 1>&6
 +else
@@ -9283,19 +5725,19 @@
 +     PKG_CONFIG_MIN_VERSION=0.9.0
 +     if $PKG_CONFIG --atleast-pkgconfig-version $PKG_CONFIG_MIN_VERSION; then
 +        echo $ac_n "checking for cairo-xlib >= $CAIRO_VERSION""... $ac_c" 1>&6
-+echo "configure:19329: checking for cairo-xlib >= $CAIRO_VERSION" >&5
++echo "configure:19330: checking for cairo-xlib >= $CAIRO_VERSION" >&5
 +
 +        if $PKG_CONFIG --exists "cairo-xlib >= $CAIRO_VERSION" ; then
 +            echo "$ac_t""yes" 1>&6
 +            succeeded=yes
 +
 +            echo $ac_n "checking CAIRO_XLIB_CFLAGS""... $ac_c" 1>&6
-+echo "configure:19336: checking CAIRO_XLIB_CFLAGS" >&5
++echo "configure:19337: checking CAIRO_XLIB_CFLAGS" >&5
 +            CAIRO_XLIB_CFLAGS=`$PKG_CONFIG --cflags "cairo-xlib >= $CAIRO_VERSION"`
 +            echo "$ac_t""$CAIRO_XLIB_CFLAGS" 1>&6
 +
 +            echo $ac_n "checking CAIRO_XLIB_LIBS""... $ac_c" 1>&6
-+echo "configure:19341: checking CAIRO_XLIB_LIBS" >&5
++echo "configure:19342: checking CAIRO_XLIB_LIBS" >&5
 +            ## don't use --libs since that can do evil things like add
 +            ## -Wl,--export-dynamic
 +            CAIRO_XLIB_LIBS="`$PKG_CONFIG --libs-only-L \"cairo-xlib >= $CAIRO_VERSION\"` `$PKG_CONFIG --libs-only-l \"cairo-xlib >= $CAIRO_VERSION\"`"
@@ -9334,7 +5776,7 @@
 +    # Extract the first word of "pkg-config", so it can be a program name with args.
 +set dummy pkg-config; ac_word=$2
 +echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
-+echo "configure:19380: checking for $ac_word" >&5
++echo "configure:19381: checking for $ac_word" >&5
 +if eval "test \"`echo '$''{'ac_cv_path_PKG_CONFIG'+set}'`\" = set"; then
 +  echo $ac_n "(cached) $ac_c" 1>&6
 +else
@@ -9378,19 +5820,19 @@
 +     PKG_CONFIG_MIN_VERSION=0.9.0
 +     if $PKG_CONFIG --atleast-pkgconfig-version $PKG_CONFIG_MIN_VERSION; then
 +        echo $ac_n "checking for cairo-xlib-xrender >= $CAIRO_VERSION""... $ac_c" 1>&6
-+echo "configure:19424: checking for cairo-xlib-xrender >= $CAIRO_VERSION" >&5
++echo "configure:19425: checking for cairo-xlib-xrender >= $CAIRO_VERSION" >&5
 +
 +        if $PKG_CONFIG --exists "cairo-xlib-xrender >= $CAIRO_VERSION" ; then
 +            echo "$ac_t""yes" 1>&6
 +            succeeded=yes
 +
 +            echo $ac_n "checking CAIRO_XRENDER_CFLAGS""... $ac_c" 1>&6
-+echo "configure:19431: checking CAIRO_XRENDER_CFLAGS" >&5
++echo "configure:19432: checking CAIRO_XRENDER_CFLAGS" >&5
 +            CAIRO_XRENDER_CFLAGS=`$PKG_CONFIG --cflags "cairo-xlib-xrender >= $CAIRO_VERSION"`
 +            echo "$ac_t""$CAIRO_XRENDER_CFLAGS" 1>&6
 +
 +            echo $ac_n "checking CAIRO_XRENDER_LIBS""... $ac_c" 1>&6
-+echo "configure:19436: checking CAIRO_XRENDER_LIBS" >&5
++echo "configure:19437: checking CAIRO_XRENDER_LIBS" >&5
 +            ## don't use --libs since that can do evil things like add
 +            ## -Wl,--export-dynamic
 +            CAIRO_XRENDER_LIBS="`$PKG_CONFIG --libs-only-L \"cairo-xlib-xrender >= $CAIRO_VERSION\"` `$PKG_CONFIG --libs-only-l \"cairo-xlib-xrender >= $CAIRO_VERSION\"`"
@@ -9425,7 +5867,7 @@
     fi
  fi
  
- 
+@@ -19338,6 +19472,10 @@
  
  
  
@@ -9436,41 +5878,21 @@
  # Check whether --enable-xul or --disable-xul was given.
  if test "${enable_xul+set}" = set; then
    enableval="$enable_xul"
-   if test "$enableval" = "no"; then
-     MOZ_XUL= 
-   elif test "$enableval" = "yes"; then
-     :
-   else
-@@ -19361,17 +19498,17 @@
- 
- 
- 
- if test `echo "$MOZ_EXTENSIONS" | grep -c python/xpcom` -ne 0; then
-         if test -z "$PYTHON"; then
+@@ -19366,7 +19504,7 @@
          # Extract the first word of "python", so it can be a program name with args.
  set dummy python; ac_word=$2
  echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
 -echo "configure:19370: checking for $ac_word" >&5
-+echo "configure:19507: checking for $ac_word" >&5
++echo "configure:19508: checking for $ac_word" >&5
  if eval "test \"`echo '$''{'ac_cv_path_PYTHON'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
-   case "$PYTHON" in
-   /*)
-   ac_cv_path_PYTHON="$PYTHON" # Let the user override the test with a path.
-   ;;
-   ?:/*)			 
-@@ -19637,24 +19774,24 @@
-     ac_ext=c
- # CFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
- ac_cpp='$CPP $CPPFLAGS'
- ac_compile='${CC-cc} -c $CFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
- ac_link='${CC-cc} -o conftest${ac_exeext} $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
+@@ -19642,14 +19780,14 @@
  cross_compiling=$ac_cv_prog_cc_cross
  
      cat > conftest.$ac_ext <<EOF
 -#line 19646 "configure"
-+#line 19783 "configure"
++#line 19784 "configure"
  #include "confdefs.h"
  #include <gmodule.h>
  int main() {
@@ -9478,57 +5900,29 @@
  ; return 0; }
  EOF
 -if { (eval echo configure:19653: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
-+if { (eval echo configure:19790: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
++if { (eval echo configure:19791: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
    :
  else
    echo "configure: failed program was:" >&5
-   cat conftest.$ac_ext >&5
-   rm -rf conftest*
-   { echo "configure: error: Cannot build ctl without gmodule support in glib." 1>&2; exit 1; }
- fi
- rm -f conftest*
-@@ -19951,33 +20088,33 @@
-    
- fi
- 
- if test "$COMPILE_ENVIRONMENT"; then
- if test "$MOZ_X11"; then
+@@ -19956,7 +20094,7 @@
                  _SAVE_CFLAGS=$CFLAGS
      CFLAGS="$CFLAGS $XCFLAGS"
      cat > conftest.$ac_ext <<EOF
 -#line 19960 "configure"
-+#line 20097 "configure"
++#line 20098 "configure"
  #include "confdefs.h"
  
          #include <stdio.h>
-         #include <X11/Xlib.h>
-     
- int main() {
- 
-         Display *dpy = 0;
-         if ((dpy = XOpenDisplay(NULL)) == NULL) {
-             fprintf(stderr, ": can't open %s\n", XDisplayName(NULL));
-             exit(1);
-         }
+@@ -19972,7 +20110,7 @@
      
  ; return 0; }
  EOF
 -if { (eval echo configure:19976: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
-+if { (eval echo configure:20113: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
++if { (eval echo configure:20114: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
    :
  else
    echo "configure: failed program was:" >&5
-   cat conftest.$ac_ext >&5
-   rm -rf conftest*
-    { echo "configure: error: Could not compile basic X program." 1>&2; exit 1; } 
- fi
- rm -f conftest*
-@@ -20185,44 +20322,25 @@
-   fi
- 
- rm -f confdefs.h.save
- mv confdefs.h confdefs.h.save
- egrep -v "$_EGREP_PATTERN" confdefs.h.save > confdefs.h
+@@ -20190,34 +20328,15 @@
  # Transform confdefs.h into DEFS.
  # Protect against shell expansion while executing Makefile rules.
  # Protect against Makefile macro expansion.
@@ -9572,17 +5966,7 @@
  
  MOZ_DEFINES=$DEFS
  
- rm -f confdefs.h
- mv confdefs.h.save confdefs.h
- 
- . ${srcdir}/allmakefiles.sh
- if test -z "${AS_PERL}"; then
-@@ -20452,16 +20570,19 @@
- s%@LIBOBJS@%$LIBOBJS%g
- s%@HAVE_GCC3_ABI@%$HAVE_GCC3_ABI%g
- s%@NSPR_CONFIG@%$NSPR_CONFIG%g
- s%@NSPR_CFLAGS@%$NSPR_CFLAGS%g
- s%@NSPR_LIBS@%$NSPR_LIBS%g
+@@ -20457,6 +20576,9 @@
  s%@NSS_CONFIG@%$NSS_CONFIG%g
  s%@NSS_CFLAGS@%$NSS_CFLAGS%g
  s%@NSS_LIBS@%$NSS_LIBS%g
@@ -9592,17 +5976,7 @@
  s%@GTK_CONFIG@%$GTK_CONFIG%g
  s%@GTK_CFLAGS@%$GTK_CFLAGS%g
  s%@GTK_LIBS@%$GTK_LIBS%g
- s%@PKG_CONFIG@%$PKG_CONFIG%g
- s%@MOZ_GTK2_CFLAGS@%$MOZ_GTK2_CFLAGS%g
- s%@MOZ_GTK2_LIBS@%$MOZ_GTK2_LIBS%g
- s%@HOST_MOC@%$HOST_MOC%g
- s%@MOZ_DEFAULT_TOOLKIT@%$MOZ_DEFAULT_TOOLKIT%g
-@@ -20576,19 +20697,27 @@
- s%@OS2_SURFACE_FEATURE@%$OS2_SURFACE_FEATURE%g
- s%@GLITZ_SURFACE_FEATURE@%$GLITZ_SURFACE_FEATURE%g
- s%@FT_FONT_FEATURE@%$FT_FONT_FEATURE%g
- s%@WIN32_FONT_FEATURE@%$WIN32_FONT_FEATURE%g
- s%@ATSUI_FONT_FEATURE@%$ATSUI_FONT_FEATURE%g
+@@ -20581,9 +20703,17 @@
  s%@PNG_FUNCTIONS_FEATURE@%$PNG_FUNCTIONS_FEATURE%g
  s%@CAIRO_CFLAGS@%$CAIRO_CFLAGS%g
  s%@CAIRO_LIBS@%$CAIRO_LIBS%g
@@ -9620,17 +5994,7 @@
  s%@MOZ_XUL@%$MOZ_XUL%g
  s%@MOZ_PYTHON@%$MOZ_PYTHON%g
  s%@MOZ_PYTHON_PREFIX@%$MOZ_PYTHON_PREFIX%g
- s%@MOZ_PYTHON_INCLUDES@%$MOZ_PYTHON_INCLUDES%g
- s%@MOZ_PYTHON_LIBS@%$MOZ_PYTHON_LIBS%g
- s%@MOZ_PYTHON_VER@%$MOZ_PYTHON_VER%g
- s%@MOZ_PYTHON_VER_DOTTED@%$MOZ_PYTHON_VER_DOTTED%g
- s%@MOZ_PYTHON_DEBUG_SUFFIX@%$MOZ_PYTHON_DEBUG_SUFFIX%g
-@@ -21151,17 +21280,17 @@
-       # The eval makes quoting arguments work.
-       if eval ${CONFIG_SHELL-/bin/sh} $ac_sub_configure $ac_sub_configure_args --cache-file=$ac_sub_cache_file --srcdir=$ac_sub_srcdir
-       then :
-       else
-         { echo "configure: error: $ac_sub_configure failed for $ac_config_dir" 1>&2; exit 1; }
+@@ -21156,7 +21286,7 @@
        fi
      fi
  
@@ -9639,17 +6003,7 @@
    done
  fi
  
-     ac_configure_args="$_SUBDIR_CONFIG_ARGS"
- fi
- 
- if test -z "$MOZ_NATIVE_NSPR"; then
-     # Hack to deal with the fact that we use NSPR_CFLAGS everywhere
-@@ -21294,15 +21423,15 @@
-       # The eval makes quoting arguments work.
-       if eval ${CONFIG_SHELL-/bin/sh} $ac_sub_configure $ac_sub_configure_args --cache-file=$ac_sub_cache_file --srcdir=$ac_sub_srcdir
-       then :
-       else
-         { echo "configure: error: $ac_sub_configure failed for $ac_config_dir" 1>&2; exit 1; }
+@@ -21299,7 +21429,7 @@
        fi
      fi
  
@@ -9658,6 +6012,3 @@
    done
  fi
  
-     ac_configure_args="$_SUBDIR_CONFIG_ARGS"
- fi
- fi # COMPILE_ENVIRONMENT
