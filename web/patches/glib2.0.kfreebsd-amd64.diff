Status: in BTS, needed for kfreebsd-amd64 only
Author: aurel32

--- glib2.0-2.8.6.orig/debian/patches/001_anon_versioning_kfreebsd.patch
+++ glib2.0-2.8.6/debian/patches/001_anon_versioning_kfreebsd.patch
@@ -0,0 +1,26 @@
+--- glib-2.8.6/configure	2006-01-18 17:44:49.000000000 +0100
++++ glib-2.8.6-deb/configure	2006-03-08 00:18:27.000000000 +0100
+@@ -10865,6 +10865,23 @@
+       fi
+       ;;
+ 
++    kfreebsd*-gnu)
++      if $LD --help 2>&1 | grep ': supported targets:.* elf' > /dev/null; then
++      	tmp_addflag=
++	archive_cmds='$CC -shared'"$tmp_addflag"' $libobjs $deplibs $compiler_flags ${wl}-soname $wl$soname -o $lib'
++
++	if test $supports_anon_versioning = yes; then
++	  archive_expsym_cmds='$echo "{ global:" > $output_objdir/$libname.ver~
++  cat $export_symbols | sed -e "s/\(.*\)/\1;/" >> $output_objdir/$libname.ver~
++  $echo "local: *; };" >> $output_objdir/$libname.ver~
++	  $CC -shared'"$tmp_addflag"' $libobjs $deplibs $compiler_flags ${wl}-soname $wl$soname ${wl}-version-script ${wl}$output_objdir/$libname.ver -o $lib'
++	fi
++	link_all_deplibs=no
++      else
++	ld_shlibs=no
++      fi
++      ;;
++
+     solaris* | sysv5*)
+       if $LD -v 2>&1 | grep 'BFD 2\.8' > /dev/null; then
+ 	ld_shlibs=no
