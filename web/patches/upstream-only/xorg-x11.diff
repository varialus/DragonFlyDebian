diff -u xorg-x11-6.9.0.dfsg.1/debian/patches/freebsd/001_gnu-kbsd.diff xorg-x11-6.9.0.dfsg.1/debian/patches/freebsd/001_gnu-kbsd.diff
--- xorg-x11-6.9.0.dfsg.1/debian/patches/freebsd/001_gnu-kbsd.diff
+++ xorg-x11-6.9.0.dfsg.1/debian/patches/freebsd/001_gnu-kbsd.diff
@@ -1,1185 +1,67 @@
-Index: xc/config/cf/Imake.cf
-===================================================================
---- xc/config/cf/Imake.cf.orig	2005-07-26 01:11:28.000000000 -0400
-+++ xc/config/cf/Imake.cf	2005-07-30 17:19:00.000000000 -0400
-@@ -699,11 +699,13 @@
- # define Win32Architecture
- #endif /* WIN32 */
- 
--#ifdef linux 
-+#if defined(linux) || defined(__GLIBC__)
- # define MacroIncludeFile <linux.cf>
- # define MacroFile linux.cf
- # undef linux
--# define LinuxArchitecture
-+# ifdef __linux__
-+#  define LinuxArchitecture
-+# endif
- # ifdef i386
- #  ifndef i386Architecture
- #   define i386Architecture
-@@ -928,7 +930,7 @@
- #   define AMD64Architecture
- #  endif
- # endif
--#endif /* linux */
-+#endif /* linux || __GLIBC__ */
- 
- #if (defined(__Lynx__) || defined(Lynx)) && (defined(i386) || defined(__i386__) || defined(__x86__) || defined(__powerpc__) || defined(__sparc__) || defined(sparc))
- # define MacroIncludeFile <lynx.cf>
-@@ -1008,9 +1010,7 @@
- #endif /* minix */
- 
- /* Systems with GNU libc and userland */
--#if defined(__GNU__) || defined(__GNU_userland__) || \
--  defined(__GNU_KFreeBSD__) || \
--  defined(__GNU_KNetBSD__) || defined(__GNU_KOpenBSD__)
-+#if defined(__GNU__)
- #define GNUArchitecture
- #define MacroIncludeFile <gnu.cf>
- #define MacroFile gnu.cf
+
+Author: rmh
+Status: https://bugs.freedesktop.org/show_bug.cgi?id=3810
+
 Index: xc/config/cf/linux.cf
 ===================================================================
---- xc/config/cf/linux.cf.orig	2005-07-30 17:13:28.000000000 -0400
-+++ xc/config/cf/linux.cf	2005-07-30 17:19:00.000000000 -0400
-@@ -261,13 +261,14 @@
+--- xc/config/cf/linux.cf.orig	2006-01-10 09:26:06.000000000 +0100
++++ xc/config/cf/linux.cf	2006-01-10 09:26:07.000000000 +0100
+@@ -259,6 +259,7 @@
+ /* Wraphelp.c magic is supplied via a custom patch. */
  #  define HasXdmAuth			YES
  
++#  ifdef LinuxArchitecture
  /* Glide2 only works on i386. */
--#  ifdef i386Architecture
-+#  if defined(__linux__) && defined(i386Architecture)
+ #  ifdef i386Architecture
  #   define HasGlide2			YES
- #   define Glide2IncDir		/usr/include/glide
- #  endif /* i386Architecture */
- /* Glide3 only works on alpha, amd64, i386 and ia64. */
--#  if defined(i386Architecture) || defined(AlphaArchitecture) || \
--      defined(ia64Architecture) || defined(AMD64Architecture)
-+#  if defined(__linux__) && (defined(i386Architecture) || \
-+      defined(AlphaArchitecture) || defined(ia64Architecture) || \
-+      defined(AMD64Architecture))
- #   define HasGlide3			YES
+@@ -271,6 +272,7 @@
  #   define Glide3IncDir		/usr/include/glide3
  #  endif /* i386Architecture || AlphaArchitecture || ia64Architecture ||
-@@ -374,22 +375,23 @@
- 
- /* <linux/input.h> support mainly for USB support */
- #ifndef HasLinuxInput
--# if OSMajorVersion > 2 || (OSMajorVersion == 2 && OSMinorVersion >= 4)
-+# if defined(__linux__) && (OSMajorVersion > 2 || (OSMajorVersion == 2 && OSMinorVersion >= 4))
- #  define HasLinuxInput YES
- # else
- #  define HasLinuxInput NO
- # endif
- #endif
- 
--/* <linux/joystick.h> appeared in 2.1.45 (officially) */
- #ifndef JoystickSupport
- # define JoystickSupport	NO	/* joystick driver is broken */
- #endif
-+
-+/* <linux/joystick.h> appeared in 2.1.45 (officially) */
- #ifndef HasLinuxSupport
--# if JoystickSupport || \
-+# if defined(__linux__) && (JoystickSupport || \
-      (OSMajorVersion > 2) || \
-      ((OSMajorVersion == 2) && (OSMinorVersion > 1)) || \
--     ((OSMajorVersion == 2) && (OSMinorVersion == 1) && (OSTeenyVersion >= 45))
-+     ((OSMajorVersion == 2) && (OSMinorVersion == 1) && (OSTeenyVersion >= 45)))
- #  define HasLinuxJoystick	YES
- # else
- #  define HasLinuxJoystick	NO
-@@ -414,9 +416,9 @@
- #endif
- 
- #ifndef XF86INT10_BUILD
--# if defined (i386Architecture)
-+# if defined(__linux__) && defined(i386Architecture)
- #  define XF86INT10_BUILD	X86VM
--# elif defined (AMD64Architecture)
-+# elif defined(__linux__) && defined(AMD64Architecture)
- #  define XF86INT10_BUILD	X86EMU_OS
- # else
- #  define XF86INT10_BUILD	X86EMU_GENERIC
-@@ -433,7 +435,9 @@
- #  elif defined(HPArchitecture)
- #    define BuildXF86DRI	NO
- #  elif defined(i386Architecture)
--#    if OSMajorVersion > 2 || (OSMajorVersion == 2 && OSMinorVersion >= 2)
-+#    if (defined(__linux__) && (OSMajorVersion > 2 || (OSMajorVersion == 2 && \
-+        OSMinorVersion >= 2))) || \
-+        defined(__FreeBSD_kernel__)
- #      define BuildXF86DRI	YES
- #    else
- #      define BuildXF86DRI	NO
-@@ -538,7 +542,7 @@
- # define BuildXF86RushExt	YES
- #endif
- 
--#ifndef LinuxFBDevSupport
-+#if defined(__linux__) && !defined(LinuxFBDevSupport)
- # define LinuxFBDevSupport	YES
- #endif
- 
-@@ -861,7 +865,11 @@
- #endif
- 
- #ifndef XF86OSCardDrivers
--# define XF86OSCardDrivers	fbdev v4l
-+# ifdef __linux__
-+#  define XF86OSCardDrivers	fbdev v4l
-+# else
-+#  define XF86OSCardDrivers	/**/
-+# endif
- #endif
- 
- #ifndef OSXInputDrivers
-@@ -1041,7 +1049,11 @@
- #endif /* AMD64Architecture */
- 
- #ifndef StandardDefines
--# define StandardDefines	-Dlinux LinuxMachineDefines LinuxSourceDefines
-+# ifdef __linux__
-+#  define StandardDefines	-Dlinux LinuxMachineDefines LinuxSourceDefines
-+# else
-+#  define StandardDefines	LinuxMachineDefines LinuxSourceDefines
-+# endif
- #endif
- 
- #if UseElfFormat
-Index: xc/config/cf/xfree86.cf
-===================================================================
---- xc/config/cf/xfree86.cf.orig	2005-07-30 17:13:28.000000000 -0400
-+++ xc/config/cf/xfree86.cf	2005-07-30 17:19:00.000000000 -0400
-@@ -1666,7 +1666,8 @@
- # if SystemV || SystemV4 || \
-     defined(LinuxArchitecture) || \
-     defined(i386BsdArchitecture) || defined(LynxOSArchitecture) || \
--    defined(OS2Architecture) || defined(GNUMachArchitecture)
-+    defined(OS2Architecture) || defined(GNUMachArchitecture) || \
-+    defined(KFreeBSDArchitecture)
- #   define BuildScanpci		YES
- # else
- #   define BuildScanpci		NO
-@@ -1772,9 +1773,9 @@
- #endif
- 
- #ifndef XFree86ConsoleDefines
--# if defined(i386BsdArchitecture) || defined(AlphaBsdArchitecture)
-+# if defined(i386BsdArchitecture) || defined(AlphaBsdArchitecture) || (defined(KFreeBSDArchitecture) && defined(i386Architecture))
- #  define XFree86ConsoleDefines	-DPCCONS_SUPPORT -DSYSCONS_SUPPORT -DPCVT_SUPPORT
--# elif defined(FreeBSDArchitecture)
-+# elif defined(KFreeBSDArchitecture)
- #  define XFree86ConsoleDefines -DSYSCONS_SUPPORT
- # else
- #  define XFree86ConsoleDefines	/**/
-Index: xc/config/cf/xorg.cf
-===================================================================
---- xc/config/cf/xorg.cf.orig	2005-07-30 17:13:09.000000000 -0400
-+++ xc/config/cf/xorg.cf	2005-07-30 17:19:00.000000000 -0400
-@@ -1310,7 +1310,8 @@
- # if SystemV || SystemV4 || \
-     (defined(LinuxArchitecture) && !defined(Mc68020Architecture)) || \
-     defined(i386BsdArchitecture) || defined(LynxOSArchitecture) || \
--    defined(OS2Architecture) || defined(GNUMachArchitecture)
-+    defined(OS2Architecture) || defined(GNUMachArchitecture) || \
-+    defined(KFreeBSDArchitecture)
- #   define BuildScanpci		YES
- # else
- #   define BuildScanpci		NO
-@@ -1417,9 +1418,9 @@
- #endif
- 
- #ifndef XFree86ConsoleDefines
--# if defined(i386BsdArchitecture) || defined(AlphaBsdArchitecture)
-+# if defined(i386BsdArchitecture) || defined(AlphaBsdArchitecture) || (defined(KFreeBSDArchitecture) && defined(i386Architecture))
- #  define XFree86ConsoleDefines	-DPCCONS_SUPPORT -DSYSCONS_SUPPORT -DPCVT_SUPPORT
--# elif defined(FreeBSDArchitecture)
-+# elif defined(KFreeBSDArchitecture)
- #  define XFree86ConsoleDefines -DSYSCONS_SUPPORT
- # else
- #  define XFree86ConsoleDefines	/**/
-Index: xc/config/imake/imake.c
-===================================================================
---- xc/config/imake/imake.c.orig	2005-07-30 17:13:28.000000000 -0400
-+++ xc/config/imake/imake.c	2005-07-30 17:19:00.000000000 -0400
-@@ -251,7 +251,7 @@
- #  define SYS_NMLN 257
- # endif
- #endif
--#if defined(linux) || defined(__GNU__)
-+#if defined(linux) || defined(__GNU__) || defined(__GLIBC__)
- #include <limits.h>
- #include <stdio.h>
- #endif
-@@ -913,7 +913,7 @@
- }
- #endif
- 
--#if defined linux
-+#if defined(linux) || defined(__GLIBC__)
- const char *libc_c=
- "#include <stdio.h>\n"
- "#include <ctype.h>\n"
-@@ -1048,7 +1048,7 @@
- #endif
- 	
+             AMD64Architecture */
++#  endif /* LinuxArchitecture */
  
--#if defined CROSSCOMPILE || defined linux
-+#if defined CROSSCOMPILE || defined linux || defined(__GLIBC__)
- static void
- get_distrib(FILE *inFile)
- {
-@@ -1360,7 +1360,8 @@
-      defined(__OpenBSD__) || \
-      defined(__FreeBSD__) || \
-      defined(__APPLE__) || \
--     defined(__GNU__)
-+     defined(__GNU__) || \
-+     defined(__GLIBC__)
- 	"/usr/bin/cc",	/* for Linux PostIncDir */
- # endif
- 	"/usr/local/bin/gcc",
-@@ -1449,7 +1450,7 @@
- 	  else
- 	      name = &uts_name;
-       }
--#if defined CROSSCOMPILE && defined linux
-+#if defined CROSSCOMPILE && (defined linux || defined(__GLIBC__))
-       else {
- 	  strncpy(uts_name.sysname,cross_uts_sysname,SYS_NMLN);
- 	  strncpy(uts_name.release,cross_uts_release,SYS_NMLN);
-@@ -1606,13 +1607,13 @@
- # if defined CROSSCOMPILE
-       if (CrossCompiling && sys == LinuX)
- # endif
--# if defined CROSSCOMPILE || defined linux
--#  ifdef CROSSCOMPILE
-+# if defined CROSSCOMPILE || defined linux || defined(__GLIBC__)
-+#  if defined(CROSSCOMPILE) && defined(__linux__)
- 	if (sys == LinuX)
- #  endif
- 	  get_distrib (inFile);
- # endif
--# if defined linux
-+# if defined linux || defined(__GLIBC__)
- #  if defined CROSSCOMPILE
-       if (!CrossCompiling)
- #  endif
-@@ -1626,9 +1627,9 @@
- 	  fprintf(inFile,"#define DefaultLinuxCLibTeenyVersion 0\n");
-       }
- #  endif
--# endif /* linux */
--# if defined CROSSCOMPILE || defined linux
--#  if defined CROSSCOMPILE
-+# endif /* linux || __GLIBC__ */
-+# if defined CROSSCOMPILE || defined linux || defined(__GLIBC__)
-+#  if defined CROSSCOMPILE && defined(__linux__)
-       if (sys == LinuX)
- #  endif
- 	  get_ld_version(inFile);
-Index: xc/config/imake/imakemdep.h
-===================================================================
---- xc/config/imake/imakemdep.h.orig	2005-05-08 23:33:34.000000000 -0400
-+++ xc/config/imake/imakemdep.h	2005-07-30 17:19:00.000000000 -0400
-@@ -349,7 +349,8 @@
- #endif
- #if defined(__386BSD__) || defined(__NetBSD__) || defined(__OpenBSD__) || \
-     defined(__FreeBSD__) || defined(MACH) || defined(linux) || \
--    defined(__GNU__) || defined(__bsdi__) || defined(__GNUC__)
-+    defined(__GNU__) || defined(__bsdi__) || defined(__GNUC__) || \
-+    defined(__GLIBC__)
- # ifdef __i386__
- 	"-D__i386__",
- #  if defined(__GNUC__) && (__GNUC__ >= 3)
-@@ -816,7 +817,7 @@
- #  define DEFAULT_OS_MINOR_REV   "r %*d.%[0-9]"
- #  define DEFAULT_OS_TEENY_REV   "v %[0-9]" 
- /* # define DEFAULT_OS_NAME        "srm %[^\n]" */ /* Not useful on ISC */
--# elif defined(__FreeBSD__) || defined(__OpenBSD__)
-+# elif defined(__FreeBSD__) || defined(__FreeBSD_kernel__) || defined(__OpenBSD__)
- /* BSD/OS too? */
- /* uname -r returns "x.y[.z]-mumble", e.g. "2.1.5-RELEASE" or "2.2-0801SNAP" */
- #  define DEFAULT_OS_MAJOR_REV   "r %[0-9]"
-@@ -1411,7 +1412,7 @@
-   win32
- } System;
- 
--#   ifdef linux
-+#   if defined(linux) || defined(__GLIBC__)
- System sys = LinuX;
- #   elif defined __FreeBSD__
- System sys = freebsd;
-@@ -1432,7 +1433,7 @@
- int gnu_c = 0;
- int gnu_c_minor = -1;
- #   endif
--#   if defined linux
-+#   if defined(linux) || defined(__GLIBC__)
- #    include <features.h>
- int glibc_major = __GLIBC__ + 4;
- int glibc_minor = __GLIBC_MINOR__;
+ /* Enable extended instruction set support. */
+ #  ifdef i386Architecture
 Index: xc/extras/drm/shared/drm.h
 ===================================================================
---- xc/extras/drm/shared/drm.h.orig	2005-07-30 17:13:04.000000000 -0400
-+++ xc/extras/drm/shared/drm.h	2005-07-30 17:19:00.000000000 -0400
-@@ -48,15 +48,15 @@
+--- xc/extras/drm/shared/drm.h.orig	2005-12-29 03:38:49.000000000 +0100
++++ xc/extras/drm/shared/drm.h	2006-01-10 09:26:07.000000000 +0100
+@@ -73,8 +73,8 @@
  #define DRM_IOC_WRITE		_IOC_WRITE
  #define DRM_IOC_READWRITE	_IOC_READ|_IOC_WRITE
  #define DRM_IOC(dir, group, nr, size) _IOC(dir, group, nr, size)
--#elif defined(__FreeBSD__) || defined(__NetBSD__) || defined(__OpenBSD__)
+-#elif defined(__FreeBSD__) || defined(__NetBSD__) || defined(__OpenBSD__) || defined(__DragonFly__)
 -#if defined(__FreeBSD__) && defined(IN_MODULE)
-+#elif defined(__FreeBSD__) || defined(__FreeBSD_kernel__) || defined(__NetBSD__) || defined(__OpenBSD__)
++#elif defined(__FreeBSD__) || defined(__FreeBSD_kernel__) || defined(__NetBSD__) || defined(__OpenBSD__) || defined(__DragonFly__)
 +#if (defined(__FreeBSD__) || defined(__FreeBSD_kernel__)) && defined(IN_MODULE)
  /* Prevent name collision when including sys/ioccom.h */
  #undef ioctl
  #include <sys/ioccom.h>
- #define ioctl(a,b,c)		xf86ioctl(a,b,c)
- #else
+Index: xc/extras/drm/shared-core/drm.h
+===================================================================
+--- xc/extras/drm/shared-core/drm.h.orig	2005-12-29 03:38:50.000000000 +0100
++++ xc/extras/drm/shared-core/drm.h	2006-01-10 09:26:07.000000000 +0100
+@@ -79,8 +79,8 @@
+ #define DRM_IOC_WRITE		_IOC_WRITE
+ #define DRM_IOC_READWRITE	_IOC_READ|_IOC_WRITE
+ #define DRM_IOC(dir, group, nr, size) _IOC(dir, group, nr, size)
+-#elif defined(__FreeBSD__) || defined(__NetBSD__) || defined(__OpenBSD__) || defined(__DragonFly__)
+-#if defined(__FreeBSD__) && defined(IN_MODULE)
++#elif defined(__FreeBSD__) || defined(__FreeBSD_kernel__) || defined(__NetBSD__) || defined(__OpenBSD__) || defined(__DragonFly__)
++#if (defined(__FreeBSD__) || defined(__FreeBSD_kernel__)) && defined(IN_MODULE)
+ /* Prevent name collision when including sys/ioccom.h */
+ #undef ioctl
  #include <sys/ioccom.h>
--#endif /* __FreeBSD__ && xf86ioctl */
-+#endif /* __FreeBSD_kernel__ && xf86ioctl */
- #define DRM_IOCTL_NR(n)		((n) & 0xff)
- #define DRM_IOC_VOID		IOC_VOID
- #define DRM_IOC_READ		IOC_OUT
 Index: xc/lib/GL/dri/drm/Imakefile
 ===================================================================
---- xc/lib/GL/dri/drm/Imakefile.orig	2005-05-08 23:36:10.000000000 -0400
-+++ xc/lib/GL/dri/drm/Imakefile	2005-07-30 17:19:00.000000000 -0400
+--- xc/lib/GL/dri/drm/Imakefile.orig	2005-12-29 03:38:22.000000000 +0100
++++ xc/lib/GL/dri/drm/Imakefile	2006-01-10 09:26:07.000000000 +0100
 @@ -25,7 +25,7 @@
  OS_SUBDIR2 = linux
- OS_SUBDIR3 = shared
+ OS_SUBDIR3 = shared-core
  #endif
 -#if defined(FreeBSDArchitecture) || defined(BSDOSArchitecture) || \
 +#if defined(KFreeBSDArchitecture) || defined(BSDOSArchitecture) || \
      defined(NetBSDArchitecture) || defined(OpenBSDArchitecture)
  OS_SUBDIR = bsd
  OS_SUBDIR2 = linux
-Index: xc/lib/xtrans/Xtranssock.c
-===================================================================
---- xc/lib/xtrans/Xtranssock.c.orig	2005-05-08 23:35:35.000000000 -0400
-+++ xc/lib/xtrans/Xtranssock.c	2005-07-30 17:19:00.000000000 -0400
-@@ -88,7 +88,7 @@
- #endif 
- 
- #ifndef NO_TCP_H
--#if defined(__osf__) || defined(linux) || defined(AIXV5)
-+#if defined(__osf__) || defined(linux) || defined(__GLIBC__) || defined(AIXV5)
- #include <sys/param.h>
- #endif /* osf */
- #if defined(__NetBSD__) || defined(__OpenBSD__) || defined(__FreeBSD__) 
-Index: xc/programs/Xserver/hw/vfb/Imakefile
-===================================================================
---- xc/programs/Xserver/hw/vfb/Imakefile.orig	2005-05-08 23:25:44.000000000 -0400
-+++ xc/programs/Xserver/hw/vfb/Imakefile	2005-07-30 17:19:00.000000000 -0400
-@@ -17,6 +17,7 @@
-     SystemV4 || \
-     defined(OSF1Architecture) || \
-     defined(i386BsdArchitecture) || \
-+    defined(KFreeBSDArchitecture) || \
-     defined(LinuxArchitecture) || \
-     defined(DarwinArchitecture)
- MMAPDEF = -DHAS_MMAP
-Index: xc/programs/Xserver/hw/xfree86/Imakefile
-===================================================================
---- xc/programs/Xserver/hw/xfree86/Imakefile.orig	2005-05-08 23:25:12.000000000 -0400
-+++ xc/programs/Xserver/hw/xfree86/Imakefile	2005-07-30 17:19:00.000000000 -0400
-@@ -154,7 +154,7 @@
- DPI75USFONTPATH=\"$(LIBDIR)/fonts/75dpi/:unscaled\"
- DPI100USFONTPATH=\"$(LIBDIR)/fonts/100dpi/:unscaled\"
- 
--#ifdef FreeBSDArchitecture
-+#ifdef KFreeBSDArchitecture
-   FREEBSDMOUSEDEV="    Option	\"Device\"	\"/dev/mse0\""
- #else
-   FREEBSDMOUSEDEV="XCOMM    Option	\"Device\"	\"/dev/mse0\""
-Index: xc/programs/Xserver/hw/xfree86/common/Imakefile
-===================================================================
---- xc/programs/Xserver/hw/xfree86/common/Imakefile.orig	2005-07-30 17:13:08.000000000 -0400
-+++ xc/programs/Xserver/hw/xfree86/common/Imakefile	2005-07-30 17:19:00.000000000 -0400
-@@ -19,7 +19,7 @@
- #else
- # if defined(i386BsdArchitecture) || defined(AlphaBsdArchitecture) \
- 	|| defined(OpenBSDArchitecture) || defined(NetBSDArchitecture) \
--	|| defined(FreeBSDArchitecture)
-+	|| defined(KFreeBSDArchitecture)
-         KBD = xf86KbdBSD
- # else
- #  ifdef LinuxArchitecture
-Index: xc/programs/Xserver/hw/xfree86/common/xf86Config.c
-===================================================================
---- xc/programs/Xserver/hw/xfree86/common/xf86Config.c.orig	2005-07-30 17:13:19.000000000 -0400
-+++ xc/programs/Xserver/hw/xfree86/common/xf86Config.c	2005-07-30 17:19:00.000000000 -0400
-@@ -79,7 +79,8 @@
- #endif
- 
- #if (defined(i386) || defined(__i386__)) && \
--    (defined(__FreeBSD__) || defined(__NetBSD__) || defined(linux) || \
-+    (defined(__FreeBSD__) || defined(__FreeBSD_kernel__) || \
-+     defined(__NetBSD__) || defined(linux) || \
-      (defined(SVR4) && !defined(sun)) || defined(__GNU__))
- #define SUPPORT_PC98
- #endif
-Index: xc/programs/Xserver/hw/xfree86/common/xf86Configure.c
-===================================================================
---- xc/programs/Xserver/hw/xfree86/common/xf86Configure.c.orig	2005-05-08 23:22:38.000000000 -0400
-+++ xc/programs/Xserver/hw/xfree86/common/xf86Configure.c	2005-07-30 17:19:00.000000000 -0400
-@@ -79,7 +79,7 @@
- #elif defined(__QNXNTO__)
- static char *DFLT_MOUSE_PROTO = "OSMouse";
- static char *DFLT_MOUSE_DEV = "/dev/devi/mouse0";
--#elif defined(__FreeBSD__)
-+#elif defined(__FreeBSD__) || defined(__FreeBSD_kernel__)
- static char *DFLT_MOUSE_DEV = "/dev/sysmouse";
- static char *DFLT_MOUSE_PROTO = "auto";
- #else
-Index: xc/programs/Xserver/hw/xfree86/common/xf86Privstr.h
-===================================================================
---- xc/programs/Xserver/hw/xfree86/common/xf86Privstr.h.orig	2005-05-08 23:22:38.000000000 -0400
-+++ xc/programs/Xserver/hw/xfree86/common/xf86Privstr.h	2005-07-30 17:19:00.000000000 -0400
-@@ -120,7 +120,7 @@
-     /* graphics part */
-     Bool		sharedMonitor;
-     ScreenPtr		currentScreen;
--#ifdef CSRG_BASED
-+#if defined(CSRG_BASED) || defined(__FreeBSD_kernel__)
-     int			screenFd;	/* fd for memory mapped access to
- 					 * vga card */
-     int			consType;	/* Which console driver? */
-@@ -222,7 +222,7 @@
- #define XCOMP	((unsigned long) 0x00008000)
- 
- /* BSD console driver types (consType) */
--#ifdef CSRG_BASED
-+#if defined(CSRG_BASED) || defined(__FreeBSD_kernel__)
- #define PCCONS		   0
- #define CODRV011	   1
- #define CODRV01X	   2
-Index: xc/programs/Xserver/hw/xfree86/input/joystick/Imakefile
-===================================================================
---- xc/programs/Xserver/hw/xfree86/input/joystick/Imakefile.orig	2005-05-08 23:21:40.000000000 -0400
-+++ xc/programs/Xserver/hw/xfree86/input/joystick/Imakefile	2005-07-30 17:19:00.000000000 -0400
-@@ -15,7 +15,7 @@
-         ARCH_JSTK = ../os-support/linux/lnx_jstk.o
- #endif
- 
--#if defined(FreeBSDArchitecture) || defined(NetBSDArchitecture) || defined(OpenBSDArchitecture)
-+#if defined(KFreeBSDArchitecture) || defined(NetBSDArchitecture) || defined(OpenBSDArchitecture)
-         ARCH_JSTK = ../os-support/bsd/bsd_jstk.o
- #endif
- 
-Index: xc/programs/Xserver/hw/xfree86/os-support/Imakefile
-===================================================================
---- xc/programs/Xserver/hw/xfree86/os-support/Imakefile.orig	2005-05-08 23:21:32.000000000 -0400
-+++ xc/programs/Xserver/hw/xfree86/os-support/Imakefile	2005-07-30 17:19:00.000000000 -0400
-@@ -63,7 +63,7 @@
- OS_SUBDIR = lynxos
- #endif
- 
--#if defined(FreeBSDArchitecture) || defined(NetBSDArchitecture) || \
-+#if defined(KFreeBSDArchitecture) || defined(NetBSDArchitecture) || \
-     defined(OpenBSDArchitecture)
- OS_SUBDIR = bsd
- #endif
-Index: xc/programs/Xserver/hw/xfree86/os-support/bsd/Imakefile
-===================================================================
---- xc/programs/Xserver/hw/xfree86/os-support/bsd/Imakefile.orig	2005-05-08 23:21:31.000000000 -0400
-+++ xc/programs/Xserver/hw/xfree86/os-support/bsd/Imakefile	2005-07-30 17:19:00.000000000 -0400
-@@ -8,7 +8,7 @@
- 
- #include <Server.tmpl>
- 
--#if defined(FreeBSDArchitecture) || defined(NetBSDArchitecture) || defined(OpenBSDArchitecture)
-+#if defined(KFreeBSDArchitecture) || defined(NetBSDArchitecture) || defined(OpenBSDArchitecture)
- #if BuildXInputExt
- # if JoystickSupport
-  JOYSTICK_SRC = bsd_jstk.c
-@@ -47,7 +47,7 @@
-   IOPERM_SRC = ioperm_noop.c
-   IOPERM_OBJ = ioperm_noop.o
- # endif
--#elif defined(FreeBSDArchitecture)
-+#elif defined(KFreeBSDArchitecture)
- # if defined(i386Architecture) || defined(AMD64Architecture)
-   IOPERMDEFINES = -DUSE_DEV_IO
- # elif defined(AlphaBsdArchitecture)
-@@ -106,7 +106,7 @@
- APMOBJ = pm_noop.o
- #endif
- 
--#if defined(FreeBSDArchitecture) && (OSMajorVersion > 2)
-+#if defined(KFreeBSDArchitecture) && (OSMajorVersion > 2)
- KMODSRC = bsd_kmod.c
- KMODOBJ = bsd_kmod.o
- #else
-@@ -127,7 +127,7 @@
- AXP_OBJ=bsd_ev56.o xf86Axp.o bsd_axp.o
- #endif
- 
--#if (defined(FreeBSDArchitecture) || defined(NetBSDArchitecture) || \
-+#if (defined(KFreeBSDArchitecture) || defined(NetBSDArchitecture) || \
- 	defined(OpenBSDArchitecture)) && HasAgpGart
- AGP_SRC=lnx_agp.c
- AGP_OBJ=lnx_agp.o
-@@ -219,7 +219,7 @@
- LinkSourceFile(vidmem.c,../shared)
- LinkSourceFile(sigio.c,../shared)
- LinkSourceFile(kmod_noop.c,../shared)
--#if (defined(FreeBSDArchitecture) || defined(NetBSDArchitecture) || \
-+#if (defined(KFreeBSDArchitecture) || defined(NetBSDArchitecture) || \
- 	defined(OpenBSDArchitecture)) && HasAgpGart
- LinkSourceFile(lnx_agp.c,../linux)
- #else
-Index: xc/programs/Xserver/hw/xfree86/os-support/bsd/alpha_video.c
-===================================================================
---- xc/programs/Xserver/hw/xfree86/os-support/bsd/alpha_video.c.orig	2005-05-08 23:21:31.000000000 -0400
-+++ xc/programs/Xserver/hw/xfree86/os-support/bsd/alpha_video.c	2005-07-30 17:19:00.000000000 -0400
-@@ -33,7 +33,7 @@
- #include <sys/param.h>
- #ifndef __NetBSD__
- #  include <sys/sysctl.h>
--#  ifdef __FreeBSD__
-+#  if defined(__FreeBSD__) || defined(__FreeBSD_kernel__)
- #      include <machine/sysarch.h>
- #   endif
- # else
-@@ -395,7 +395,7 @@
- }
- 
- 
--#if defined(__FreeBSD__) || defined(__OpenBSD__)
-+#if defined(__FreeBSD__) || defined(__FreeBSD_kernel__) || defined(__OpenBSD__)
- 
- extern int ioperm(unsigned long from, unsigned long num, int on);
- 
-@@ -412,7 +412,7 @@
- 	return;
- }
- 
--#endif /* __FreeBSD__ || __OpenBSD__ */
-+#endif /* __FreeBSD_kernel__ || __OpenBSD__ */
- 
- #ifdef USE_ALPHA_PIO
- 
-@@ -486,7 +486,7 @@
- static void
- writeSparse32(int Value, pointer Base, register unsigned long Offset);
- 
--#ifdef __FreeBSD__
-+#if defined(__FreeBSD__) || defined(__FreeBSD_kernel__)
- extern int sysarch(int, char *);
- #endif
- 
-@@ -498,7 +498,7 @@
- static int
- sethae(u_int64_t hae)
- {
--#ifdef __FreeBSD__
-+#if defined(__FreeBSD__) || defined(__FreeBSD_kernel__)
- #ifndef ALPHA_SETHAE
- #define ALPHA_SETHAE 0
- #endif
-Index: xc/programs/Xserver/hw/xfree86/os-support/bsd/bsd_init.c
-===================================================================
---- xc/programs/Xserver/hw/xfree86/os-support/bsd/bsd_init.c.orig	2005-05-08 23:21:31.000000000 -0400
-+++ xc/programs/Xserver/hw/xfree86/os-support/bsd/bsd_init.c	2005-07-30 17:19:00.000000000 -0400
-@@ -34,7 +34,9 @@
- #include "xf86_OSlib.h"
- 
- #include <sys/utsname.h>
-+#include <sys/ioctl.h>
- #include <stdlib.h>
-+#include <errno.h>
- 
- static Bool KeepTty = FALSE;
- static int devConsoleFd = -1;
-@@ -76,6 +78,10 @@
- #define WSCONS_PCVT_COMPAT_CONSOLE_DEV "/dev/ttyE0"
- #endif
- 
-+#ifdef __GLIBC__
-+#define setpgrp setpgid
-+#endif
-+
- #define CHECK_DRIVER_MSG \
-   "Check your kernel's console driver configuration and /dev entries"
- 
-@@ -235,11 +241,11 @@
- 	     * switching anymore. Here we check for FreeBSD 3.1 and up.
- 	     * Add cases for other *BSD that behave the same.
- 	    */
-+#if defined(__FreeBSD__) || defined(__FreeBSD_kernel__)
- 	    uname (&uts);
--	    if (strcmp(uts.sysname, "FreeBSD") == 0) {
--		i = atof(uts.release) * 100;
--		if (i >= 310) goto acquire_vt;
--	    }
-+	    i = atof(uts.release) * 100;
-+	    if (i >= 310) goto acquire_vt;
-+#endif
- 	    /* otherwise fall through */
- 	case PCVT:
- 	    /*
-Index: xc/programs/Xserver/hw/xfree86/os-support/bsd/bsd_io.c
-===================================================================
---- xc/programs/Xserver/hw/xfree86/os-support/bsd/bsd_io.c.orig	2005-05-08 23:21:31.000000000 -0400
-+++ xc/programs/Xserver/hw/xfree86/os-support/bsd/bsd_io.c	2005-07-30 17:19:00.000000000 -0400
-@@ -34,6 +34,8 @@
- #include "xf86Priv.h"
- #include "xf86_OSlib.h"
- 
-+#include <termios.h>
-+
- #ifdef WSCONS_SUPPORT
- #define KBD_FD(i) ((i).kbdFd != -1 ? (i).kbdFd : (i).consoleFd)
- #endif
-@@ -144,7 +146,7 @@
- }
- 
- #if defined(SYSCONS_SUPPORT) || defined(PCCONS_SUPPORT) || defined(PCVT_SUPPORT) || defined(WSCONS_SUPPORT)
--static struct termio kbdtty;
-+static struct termios kbdtty;
- #endif
- 
- void
-Index: xc/programs/Xserver/hw/xfree86/os-support/bsd/bsd_kbd.c
-===================================================================
---- xc/programs/Xserver/hw/xfree86/os-support/bsd/bsd_kbd.c.orig	2005-05-08 23:21:31.000000000 -0400
-+++ xc/programs/Xserver/hw/xfree86/os-support/bsd/bsd_kbd.c	2005-07-30 17:19:00.000000000 -0400
-@@ -23,6 +23,8 @@
- #include "atKeynames.h"
- #include "bsd_kbd.h"
- 
-+#include <termios.h>
-+
- extern Bool VTSwitchEnabled;
- #ifdef USE_VT_SYSREQ
- extern Bool VTSysreqToggle;
-@@ -37,7 +39,7 @@
- };
- 
- typedef struct {
--   struct termio kbdtty;
-+   struct termios kbdtty;
- } BsdKbdPrivRec, *BsdKbdPrivPtr;
- 
- static
-@@ -70,10 +72,16 @@
-     KbdDevPtr pKbd = (KbdDevPtr) pInfo->private;
-     int real_leds = 0;
- 
-+#ifdef LED_CAP
-     if (leds & XLED1)  real_leds |= LED_CAP;
-+#endif
-+#ifdef LED_NUM
-     if (leds & XLED2)  real_leds |= LED_NUM;
-+#endif
-+#ifdef LED_SCR
-     if (leds & XLED3)  real_leds |= LED_SCR;
-     if (leds & XLED4)  real_leds |= LED_SCR;
-+#endif
- 
-     switch (pKbd->consType) {
- 
-@@ -115,9 +123,15 @@
- #endif
-     }
- 
-+#ifdef LED_CAP
-     if (real_leds & LED_CAP) leds |= XLED1;
-+#endif
-+#ifdef LED_NUM
-     if (real_leds & LED_NUM) leds |= XLED2;
-+#endif
-+#ifdef LED_SCR
-     if (real_leds & LED_SCR) leds |= XLED3;
-+#endif
- 
-     return(leds);
- }
-@@ -307,16 +321,20 @@
-              case KEY_F8:
-              case KEY_F9:
-              case KEY_F10:
-+#ifdef VT_ACTIVATE
-                   if (down) {
-                     ioctl(xf86Info.consoleFd, VT_ACTIVATE, key - KEY_F1 + 1);
-                     return TRUE;
-                   }
-+#endif
-              case KEY_F11:
-              case KEY_F12:
-+#ifdef VT_ACTIVATE
-                   if (down) {
-                     ioctl(xf86Info.consoleFd, VT_ACTIVATE, key - KEY_F11 + 11);
-                     return TRUE;
-                   }
-+#endif
-          }
-       }
-     }
-Index: xc/programs/Xserver/hw/xfree86/os-support/bsd/bsd_mouse.c
-===================================================================
---- xc/programs/Xserver/hw/xfree86/os-support/bsd/bsd_mouse.c.orig	2005-05-08 23:21:31.000000000 -0400
-+++ xc/programs/Xserver/hw/xfree86/os-support/bsd/bsd_mouse.c	2005-07-30 17:19:00.000000000 -0400
-@@ -68,7 +68,7 @@
- static void usbSigioReadInput (int fd, void *closure);
- #endif
- 
--#if defined(__FreeBSD__)
-+#if defined(__FreeBSD__) || defined(__FreeBSD_kernel__)
- /* These are for FreeBSD */
- #define DEFAULT_MOUSE_DEV		"/dev/mouse"
- #define DEFAULT_SYSMOUSE_DEV		"/dev/sysmouse"
-@@ -97,7 +97,7 @@
- {
- #if defined(__NetBSD__)
-     return MSE_SERIAL | MSE_BUS | MSE_PS2 | MSE_AUTO;
--#elif defined(__FreeBSD__)
-+#elif defined(__FreeBSD__) || defined(__FreeBSD_kernel__)
-     return MSE_SERIAL | MSE_BUS | MSE_PS2 | MSE_AUTO | MSE_MISC;
- #else
-     return MSE_SERIAL | MSE_BUS | MSE_PS2 | MSE_XPS2 | MSE_AUTO;
-@@ -120,7 +120,7 @@
-  * main "mouse" driver.
-  */
- static const char *miscNames[] = {
--#if defined(__FreeBSD__)
-+#if defined(__FreeBSD__) || defined(__FreeBSD_kernel__)
- 	"SysMouse",
- #endif
- 	NULL
-@@ -149,7 +149,7 @@
- static const char *
- DefaultProtocol(void)
- {
--#if defined(__FreeBSD__)
-+#if defined(__FreeBSD__) || defined(__FreeBSD_kernel__)
-     return "Auto";
- #elif defined(__OpenBSD__) && defined(WSCONS_SUPPORT)
-     return "WSMouse";
-@@ -158,7 +158,7 @@
- #endif
- }
- 
--#if defined(__FreeBSD__) && defined(MOUSE_PROTO_SYSMOUSE)
-+#if (defined(__FreeBSD__) || defined(__FreeBSD_kernel__)) && defined(MOUSE_PROTO_SYSMOUSE)
- static struct {
- 	int dproto;
- 	const char *name;
-@@ -227,7 +227,7 @@
-     mode.rate = rate > 0 ? rate : -1;
-     mode.resolution = res > 0 ? res : -1;
-     mode.accelfactor = -1;
--#if defined(__FreeBSD__)
-+#if defined(__FreeBSD__) || defined(__FreeBSD_kernel__)
-     if (pMse->autoProbe ||
- 	(protocol && xf86NameCmp(protocol, "SysMouse") == 0)) {
- 	/*
-@@ -245,7 +245,7 @@
- }
- #endif
- 
--#if defined(__FreeBSD__)
-+#if defined(__FreeBSD__) || defined(__FreeBSD_kernel__)
- 
- #define MOUSED_PID_FILE "/var/run/moused.pid"
- 
-@@ -769,7 +769,7 @@
-     p->BuiltinNames = BuiltinNames;
-     p->DefaultProtocol = DefaultProtocol;
-     p->CheckProtocol = CheckProtocol;
--#if defined(__FreeBSD__) && defined(MOUSE_PROTO_SYSMOUSE)
-+#if (defined(__FreeBSD__) || defined(__FreeBSD_kernel__)) && defined(MOUSE_PROTO_SYSMOUSE)
-     p->SetupAuto = SetupAuto;
-     p->SetPS2Res = SetSysMouseRes;
-     p->SetBMRes = SetSysMouseRes;
-@@ -779,7 +779,7 @@
-     p->SetupAuto = SetupAuto;
-     p->SetMiscRes = SetMouseRes;
- #endif
--#if defined(__FreeBSD__) || defined(__OpenBSD__)
-+#if defined(__FreeBSD__) || defined(__FreeBSD_kernel__) || defined(__OpenBSD__)
-     p->FindDevice = FindDevice;
- #endif
-     p->PreInit = bsdMousePreInit;
-Index: xc/programs/Xserver/hw/xfree86/os-support/bsd/drm/Imakefile
-===================================================================
---- xc/programs/Xserver/hw/xfree86/os-support/bsd/drm/Imakefile.orig	2005-05-08 23:21:29.000000000 -0400
-+++ xc/programs/Xserver/hw/xfree86/os-support/bsd/drm/Imakefile	2005-07-30 17:19:00.000000000 -0400
-@@ -14,7 +14,7 @@
- MTRR_DEFINES = -DHAS_MTRR_SUPPORT
- #endif
- 
--#if defined(FreeBSDArchitecture)
-+#if defined(KFreeBSDArchitecture)
- COMPATSRC = xf86drmCompat.c
- COMPATOBJ = xf86drmCompat.o
- OS_SUBDIR = freebsd
-Index: xc/programs/Xserver/hw/xfree86/os-support/bsd/i386_video.c
-===================================================================
---- xc/programs/Xserver/hw/xfree86/os-support/bsd/i386_video.c.orig	2005-05-08 23:21:31.000000000 -0400
-+++ xc/programs/Xserver/hw/xfree86/os-support/bsd/i386_video.c	2005-07-30 17:19:00.000000000 -0400
-@@ -30,6 +30,9 @@
- #include "xf86.h"
- #include "xf86Priv.h"
- 
-+#include <errno.h>
-+#include <sys/mman.h>
-+
- #ifdef HAS_MTRR_SUPPORT
- #ifndef __NetBSD__
- #include <sys/types.h>
-Index: xc/programs/Xserver/hw/xfree86/os-support/bus/Imakefile
-===================================================================
---- xc/programs/Xserver/hw/xfree86/os-support/bus/Imakefile.orig	2005-07-30 17:13:23.000000000 -0400
-+++ xc/programs/Xserver/hw/xfree86/os-support/bus/Imakefile	2005-07-30 17:19:00.000000000 -0400
-@@ -81,7 +81,7 @@
- PCIDRVRSRC = ix86Pci.c linuxPci.c
- PCIDRVROBJ = ix86Pci.o linuxPci.o
- 
--#elif defined(FreeBSDArchitecture) && \
-+#elif defined(KFreeBSDArchitecture) && \
- 	(defined(AlphaArchitecture) || defined(AMD64Architecture))
- 
- XCOMM generic FreeBSD PCI driver (using /dev/pci)
-@@ -89,7 +89,7 @@
- PCIDRVRSRC = freebsdPci.c
- PCIDRVROBJ = freebsdPci.o
- 
--#elif defined(FreeBSDArchitecture) && defined(Sparc64Architecture)
-+#elif defined(KFreeBSDArchitecture) && defined(Sparc64Architecture)
- 
- XCOMM Sparc SBUS & PCI drivers
- 
-Index: xc/programs/Xserver/hw/xfree86/os-support/linux/drm/xf86drm.c
-===================================================================
---- xc/programs/Xserver/hw/xfree86/os-support/linux/drm/xf86drm.c.orig	2005-05-08 23:21:21.000000000 -0400
-+++ xc/programs/Xserver/hw/xfree86/os-support/linux/drm/xf86drm.c	2005-07-30 17:19:00.000000000 -0400
-@@ -86,7 +86,7 @@
- 
- #include "xf86drm.h"
- 
--#ifdef __FreeBSD__
-+#if defined(__FreeBSD__) || defined(__FreeBSD_kernel__)
- #define DRM_MAJOR 145
- #endif
- 
-Index: xc/programs/Xserver/hw/xfree86/os-support/linux/drm/xf86drmCompat.c
-===================================================================
---- xc/programs/Xserver/hw/xfree86/os-support/linux/drm/xf86drmCompat.c.orig	2005-05-08 23:21:21.000000000 -0400
-+++ xc/programs/Xserver/hw/xfree86/os-support/linux/drm/xf86drmCompat.c	2005-07-30 17:19:00.000000000 -0400
-@@ -78,7 +78,7 @@
- #include "r128_drm.h"
- #include <inttypes.h>		/* for int64_t & friends */
- #include "radeon_drm.h"
--#ifndef __FreeBSD__
-+#if !defined(__FreeBSD__) && !defined(__FreeBSD_kernel__)
- #include "sis_drm.h"
- #include "i810_drm.h"
- #include "i830_drm.h"
-@@ -89,7 +89,7 @@
-  * extensions used before XFree86 4.3.
-  */
- 
--#ifndef __FreeBSD__
-+#if !defined(__FreeBSD__) && !defined(__FreeBSD_kernel__)
- /* I810 */
- 
- Bool drmI810CleanupDma(int driSubFD)
-@@ -134,7 +134,7 @@
-    }
-    return 1; /* TRUE */
- }
--#endif /* __FreeBSD__ */
-+#endif /* __FreeBSD_kernel__ */
- 
- /* Mga */
- 
-@@ -1013,7 +1013,7 @@
-    }
- }
- 
--#ifndef __FreeBSD__
-+#if !defined(__FreeBSD__) && !defined(__FreeBSD_kernel__)
- /* SiS */
- 
- Bool drmSiSAgpInit(int driSubFD, int offset, int size)
-@@ -1072,7 +1072,7 @@
-    }
-    return 1; /* TRUE */
- }
--#endif /* __FreeBSD__ */
-+#endif /* __FreeBSD_kernel__ */
- 
- /* WARNING: Do not change, or add, anything to this file.  It is only provided
-  * for binary backwards compatability with the old driver specific DRM
-Index: xc/programs/Xserver/hw/xfree86/os-support/linux/lnx_agp.c
-===================================================================
---- xc/programs/Xserver/hw/xfree86/os-support/linux/lnx_agp.c.orig	2005-05-08 23:21:22.000000000 -0400
-+++ xc/programs/Xserver/hw/xfree86/os-support/linux/lnx_agp.c	2005-07-30 17:19:00.000000000 -0400
-@@ -18,7 +18,7 @@
- #if defined(linux)
- #include <asm/ioctl.h>
- #include <linux/agpgart.h>
--#elif defined(__FreeBSD__) || defined(__NetBSD__) || defined(__OpenBSD__)
-+#elif defined(__FreeBSD_kernel__) || defined(__NetBSD__) || defined(__OpenBSD__)
- #include <sys/ioctl.h>
- #include <sys/agpio.h>
- #endif
-Index: xc/programs/Xserver/hw/xfree86/os-support/xf86_OSlib.h
-===================================================================
---- xc/programs/Xserver/hw/xfree86/os-support/xf86_OSlib.h.orig	2005-05-08 23:21:32.000000000 -0400
-+++ xc/programs/Xserver/hw/xfree86/os-support/xf86_OSlib.h	2005-07-30 17:19:00.000000000 -0400
-@@ -335,12 +335,24 @@
- #endif /* DGUX && SVR4 */
- 
- /**************************************************************************/
--/* Linux                                                                  */
-+/* Linux or Glibc-based system                                            */
- /**************************************************************************/
--#if defined(linux)
-+#if defined(__linux__) || defined(__GLIBC__)
- # include <sys/ioctl.h>
- # include <signal.h>
--# include <termio.h>
-+# include <stdlib.h>
-+# include <sys/types.h>
-+# include <assert.h>
-+
-+#ifdef __GNU__ /* GNU/Hurd */
-+# define USE_OSMOUSE
-+#endif
-+
-+# ifdef __linux__
-+#  include <termio.h>
-+# else /* __GLIBC__ */
-+#  include <termios.h>
-+# endif
- # ifdef __sparc__
- #  include <sys/param.h>
- # endif
-@@ -349,20 +361,21 @@
- 
- # include <sys/stat.h>
- 
--# define HAS_USL_VTS
- # include <sys/mman.h>
--# include <sys/kd.h>
--# include <sys/vt.h>
--# define LDGMAP GIO_SCRNMAP
--# define LDSMAP PIO_SCRNMAP
--# define LDNMAP LDSMAP
--
--# define CLEARDTR_SUPPORT
--# define USE_VT_SYSREQ
-+# ifdef __linux__
-+#  define HAS_USL_VTS
-+#  include <sys/kd.h>
-+#  include <sys/vt.h>
-+#  define LDGMAP GIO_SCRNMAP
-+#  define LDSMAP PIO_SCRNMAP
-+#  define LDNMAP LDSMAP
-+#  define CLEARDTR_SUPPORT
-+#  define USE_VT_SYSREQ
-+# endif
- 
- # define POSIX_TTY
- 
--#endif /* linux */
-+#endif /* __linux__ || __GLIBC__ */
- 
- /**************************************************************************/
- /* LynxOS AT                                                              */
-@@ -422,6 +435,30 @@
- 
- # include <errno.h>
- 
-+# include <sys/types.h>
-+# include <sys/mman.h>
-+# include <sys/stat.h>
-+
-+# if defined(__bsdi__)
-+#  include <sys/param.h>
-+# if (_BSDI_VERSION < 199510)
-+#  include <i386/isa/vgaioctl.h>
-+# endif
-+# endif /* __bsdi__ */
-+
-+#endif /* CSRG_BASED */
-+
-+/**************************************************************************/
-+/* Kernel of *BSD                                                         */
-+/**************************************************************************/
-+#if defined(__FreeBSD__) || defined(__FreeBSD_kernel__) || \
-+ defined(__NetBSD__) || defined(__OpenBSD__) || defined(__bsdi__)
-+
-+# include <sys/param.h>
-+# if defined(__FreeBSD_version) && !defined(__FreeBSD_kernel_version)
-+#  define __FreeBSD_kernel_version __FreeBSD_version
-+# endif
-+
- # if !defined(LINKKIT)
-   /* Don't need this stuff for the Link Kit */
- #  if defined(__bsdi__)
-@@ -443,9 +480,8 @@
- #    if defined(__NetBSD__) || defined(__OpenBSD__)
- #     include <machine/console.h>
- #    else
--#     if defined(__FreeBSD__)
--#        include <osreldate.h>
--#        if __FreeBSD_version >= 410000
-+#     if defined(__FreeBSD__) || defined(__FreeBSD_kernel__)
-+#        if (__FreeBSD_kernel_version >= 410000)
- #          include <sys/consio.h>
- #          include <sys/kbio.h>
- #        else
-@@ -459,7 +495,7 @@
- #   if defined(PCVT_SUPPORT)
- #    if !defined(SYSCONS_SUPPORT)
-       /* no syscons, so include pcvt specific header file */
--#     if defined(__FreeBSD__)
-+#     if defined(__FreeBSD__) || defined(__FreeBSD_kernel__)
- #      include <machine/pcvt_ioctl.h>
- #     else
- #      if defined(__NetBSD__) || defined(__OpenBSD__)
-@@ -469,7 +505,7 @@
- #      else
- #       include <sys/pcvt_ioctl.h>
- #      endif /* __NetBSD__ */
--#     endif /* __FreeBSD__ || __OpenBSD__ */
-+#     endif /* __FreeBSD_kernel__ || __OpenBSD__ */
- #    else /* pcvt and syscons: hard-code the ID magic */
- #     define VGAPCVTID _IOWR('V',113, struct pcvtid)
-       struct pcvtid {
-@@ -482,9 +518,8 @@
- #    include <dev/wscons/wsconsio.h>
- #    include <dev/wscons/wsdisplay_usl_io.h>
- #   endif /* WSCONS_SUPPORT */
--#   if defined(__FreeBSD__)
--#    include <osreldate.h>
--#    if __FreeBSD_version >= 500013
-+#   if defined(__FreeBSD__) || defined(__FreeBSD_kernel__)
-+#    if (__FreeBSD_kernel_version >= 500013)
- #     include <sys/mouse.h>
- #    else
- #     undef MOUSE_GETINFO
-@@ -523,17 +558,6 @@
- #  endif /* __bsdi__ */
- # endif /* !LINKKIT */
- 
--# include <sys/types.h>
--# include <sys/mman.h>
--# include <sys/stat.h>
--
--# if defined(__bsdi__)
--#  include <sys/param.h>
--# if (_BSDI_VERSION < 199510)
--#  include <i386/isa/vgaioctl.h>
--# endif
--# endif /* __bsdi__ */
--
- #if defined(USE_I386_IOPL) || defined(USE_AMD64_IOPL)
- #include <machine/sysarch.h>
- #endif
-@@ -544,7 +568,8 @@
- #  define USE_VT_SYSREQ
- # endif
- 
--#endif /* CSRG_BASED */
-+#endif
-+/* __FreeBSD_kernel__ || __NetBSD__ || __OpenBSD__ || __bsdi__ */
- 
- /**************************************************************************/
- /* OS/2                                                                   */
-@@ -654,25 +679,6 @@
- #endif
- 
- /**************************************************************************/
--/* GNU/Hurd								  */
--/**************************************************************************/
--#if defined(__GNU__)
--
--#include <stdlib.h>
--#include <sys/types.h>
--#include <errno.h>
--#include <signal.h>
--#include <sys/ioctl.h>
--#include <termios.h>
--#include <sys/stat.h>
--#include <assert.h>
--
--#define POSIX_TTY
--#define USE_OSMOUSE
--
--#endif /* __GNU__ */
--
--/**************************************************************************/
- /* IRIX                                                                   */
- /**************************************************************************/
- #if defined(sgi)
-Index: xc/programs/xdm/config/Imakefile
-===================================================================
---- xc/programs/xdm/config/Imakefile.orig	2005-07-30 17:13:08.000000000 -0400
-+++ xc/programs/xdm/config/Imakefile	2005-07-30 17:19:00.000000000 -0400
-@@ -10,7 +10,7 @@
- 
- all:: Xservers.ws xdm-config Xservers Xresources
- 
--#if (defined(i386Architecture) || defined(AMD64Architecture)) && (defined(KNetBSDArchitecture) || defined(KOpenBSDArchitecture))
-+#if (defined(i386Architecture) || defined(AMD64Architecture)) && (defined(NetBSDArchitecture) || defined(OpenBSDArchitecture))
- DEFAULTVT=vt05
- #endif
- 
-Index: xc/programs/xload/get_load.c
-===================================================================
---- xc/programs/xload/get_load.c.orig	2005-05-08 23:29:19.000000000 -0400
-+++ xc/programs/xload/get_load.c	2005-07-30 17:19:00.000000000 -0400
-@@ -406,7 +406,7 @@
- }
- #else /* not KVM_ROUTINES */
- 
--#ifdef linux
-+#if defined(linux) || defined(__FreeBSD_kernel__)
- 
- void InitLoadPoint()
- {
-Index: xc/util/memleak/Imakefile
-===================================================================
---- xc/util/memleak/Imakefile.orig	2005-05-08 23:41:31.000000000 -0400
-+++ xc/util/memleak/Imakefile	2005-07-30 17:19:00.000000000 -0400
-@@ -42,7 +42,7 @@
- GRA_SRCS = getreti386.c stackbottom.c
- #endif
- 
--#ifdef LinuxArchitecture
-+#if defined(LinuxArchitecture) || defined(__GLIBC__)
- #ifdef i386Architecture
- #define HasGetReturnAddress	YES
- #define TopOfStack 0xbffff800
-Index: xc/programs/Xserver/Xprint/etc/init.d/Imakefile
-===================================================================
---- xc/programs/Xserver/Xprint/etc/init.d/Imakefile.orig	2005-05-08 23:19:55.000000000 -0400
-+++ xc/programs/Xserver/Xprint/etc/init.d/Imakefile	2005-07-30 17:19:00.000000000 -0400
-@@ -55,7 +55,7 @@
- #endif /* defined(SunArchitecture) && (OSMajorVersion > 4) */
- 
- XCOMM Create startup/shutdown links in /etc/init.d/ for Linux
--#if defined(LinuxArchitecture)
-+#if defined(LinuxArchitecture) || (LinuxDistribution == LinuxDebian)
- # if (LinuxDistribution == LinuxSuSE) || \
-      (LinuxDistribution == LinuxDebian) || \
-      (LinuxDistribution == LinuxUnknown)
-Index: xc/programs/Xserver/Xprint/etc/Xsession.d/Imakefile
-===================================================================
---- xc/programs/Xserver/Xprint/etc/Xsession.d/Imakefile.orig	2005-05-08 23:19:55.000000000 -0400
-+++ xc/programs/Xserver/Xprint/etc/Xsession.d/Imakefile	2005-07-30 17:19:00.000000000 -0400
-@@ -18,7 +18,7 @@
- XCOMM Install xdm startup glue for Xprint on Linux. Note that not all Linux
- XCOMM platforms have /etc/X11/Xsession.d/ and/or /etc/X11/xinit/xinitrc.d
- XCOMM (see http://xprint.freedesktop.org/cgi-bin/bugzilla/show_bug.cgi?id=182)
--#if defined(LinuxArchitecture)
-+#if defined(LinuxArchitecture) || (LinuxDistribution == LinuxDebian)
- InstallNamedProg(cde_xsessiond_xprint.sh,92xprint-xpserverlist.sh,$(ETCDIR)/X11/Xsession.d)
- InstallNamedProg(cde_xsessiond_xprint.sh,92xprint-xpserverlist.sh,$(ETCDIR)/X11/xinit/xinitrc.d)
- #endif
diff -u xorg-x11-6.9.0.dfsg.1/debian/patches/series xorg-x11-6.9.0.dfsg.1/debian/patches/series
--- xorg-x11-6.9.0.dfsg.1/debian/patches/series
+++ xorg-x11-6.9.0.dfsg.1/debian/patches/series
@@ -99,7 +99,9 @@
 netbsd/842_netbsd_NetBSD.cf_fixes.diff -p0
 netbsd/843_netbsd_no_shared_OldX_lib.diff -p0
 netbsd/844_netbsd_no_kbd_mode_command.diff -p0
+freebsd/001_gnu-kbsd.diff -p0
 freebsd/002_gnu-kbsd_wacom.diff -p0
+freebsd/004_gnu-kbsd_sock_un.diff -p0
 debian/900_debian_config.diff -p0
 debian/902_debian_startx_manpage.diff -p0
 debian/903_debian_system.twmrc.diff -p0
diff -u xorg-x11-6.9.0.dfsg.1/debian/MANIFEST.kfreebsd-i386.in xorg-x11-6.9.0.dfsg.1/debian/MANIFEST.kfreebsd-i386.in
--- xorg-x11-6.9.0.dfsg.1/debian/MANIFEST.kfreebsd-i386.in
+++ xorg-x11-6.9.0.dfsg.1/debian/MANIFEST.kfreebsd-i386.in
@@ -15,8 +15,6 @@
 etc/X11/app-defaults/Clock-color
 etc/X11/app-defaults/Editres
 etc/X11/app-defaults/Editres-color
-etc/X11/app-defaults/KOI8RXTerm
-etc/X11/app-defaults/UXTerm
 etc/X11/app-defaults/Viewres
 etc/X11/app-defaults/XCalc
 etc/X11/app-defaults/XCalc-color
@@ -31,8 +29,6 @@
 etc/X11/app-defaults/XMore
 etc/X11/app-defaults/XOrgCfg
 etc/X11/app-defaults/XSm
-etc/X11/app-defaults/XTerm
-etc/X11/app-defaults/XTerm-color
 etc/X11/app-defaults/Xditview
 etc/X11/app-defaults/Xditview-chrtr
 etc/X11/app-defaults/Xedit
@@ -93,11 +89,12 @@
 etc/X11/xkb/compat/basic
 etc/X11/xkb/compat/complete
 etc/X11/xkb/compat/default
-etc/X11/xkb/compat/group_led
 etc/X11/xkb/compat/iso9995
 etc/X11/xkb/compat/japan
 etc/X11/xkb/compat/keypad
-etc/X11/xkb/compat/leds
+etc/X11/xkb/compat/ledcaps
+etc/X11/xkb/compat/lednum
+etc/X11/xkb/compat/ledscroll
 etc/X11/xkb/compat/misc
 etc/X11/xkb/compat/mousekeys
 etc/X11/xkb/compat/norepeat
@@ -226,6 +223,7 @@
 etc/X11/xkb/symbols/by
 etc/X11/xkb/symbols/ca
 etc/X11/xkb/symbols/ca_enhanced
+etc/X11/xkb/symbols/capslock
 etc/X11/xkb/symbols/compose
 etc/X11/xkb/symbols/ctrl
 etc/X11/xkb/symbols/cz
@@ -244,7 +242,9 @@
 etc/X11/xkb/symbols/el
 etc/X11/xkb/symbols/en_US
 etc/X11/xkb/symbols/es
+etc/X11/xkb/symbols/eurosign
 etc/X11/xkb/symbols/fi
+etc/X11/xkb/symbols/fo
 etc/X11/xkb/symbols/fr
 etc/X11/xkb/symbols/fr_CH
 etc/X11/xkb/symbols/fujitsu/jp
@@ -306,89 +306,69 @@
 etc/X11/xkb/symbols/ori
 etc/X11/xkb/symbols/pc/al
 etc/X11/xkb/symbols/pc/am
-etc/X11/xkb/symbols/pc/ar
+etc/X11/xkb/symbols/pc/ara
+etc/X11/xkb/symbols/pc/az
+etc/X11/xkb/symbols/pc/ba
+etc/X11/xkb/symbols/pc/bd
 etc/X11/xkb/symbols/pc/be
-etc/X11/xkb/symbols/pc/ben
 etc/X11/xkb/symbols/pc/bg
 etc/X11/xkb/symbols/pc/br
+etc/X11/xkb/symbols/pc/bt
 etc/X11/xkb/symbols/pc/by
 etc/X11/xkb/symbols/pc/ca
 etc/X11/xkb/symbols/pc/ch
 etc/X11/xkb/symbols/pc/cz
-etc/X11/xkb/symbols/pc/cz_qwerty
 etc/X11/xkb/symbols/pc/de
-etc/X11/xkb/symbols/pc/dev
 etc/X11/xkb/symbols/pc/dk
-etc/X11/xkb/symbols/pc/dvorak
-etc/X11/xkb/symbols/pc/dz
 etc/X11/xkb/symbols/pc/ee
-etc/X11/xkb/symbols/pc/el
-etc/X11/xkb/symbols/pc/en_US
 etc/X11/xkb/symbols/pc/es
 etc/X11/xkb/symbols/pc/fi
+etc/X11/xkb/symbols/pc/fo
 etc/X11/xkb/symbols/pc/fr
-etc/X11/xkb/symbols/pc/fr-latin9
 etc/X11/xkb/symbols/pc/gb
-etc/X11/xkb/symbols/pc/ge_la
-etc/X11/xkb/symbols/pc/ge_ru
-etc/X11/xkb/symbols/pc/guj
-etc/X11/xkb/symbols/pc/gur
+etc/X11/xkb/symbols/pc/ge
+etc/X11/xkb/symbols/pc/gr
 etc/X11/xkb/symbols/pc/hr
 etc/X11/xkb/symbols/pc/hu
 etc/X11/xkb/symbols/pc/ie
 etc/X11/xkb/symbols/pc/il
-etc/X11/xkb/symbols/pc/il_phonetic
+etc/X11/xkb/symbols/pc/in
 etc/X11/xkb/symbols/pc/ir
 etc/X11/xkb/symbols/pc/is
 etc/X11/xkb/symbols/pc/it
-etc/X11/xkb/symbols/pc/iu
 etc/X11/xkb/symbols/pc/jp
-etc/X11/xkb/symbols/pc/kan
+etc/X11/xkb/symbols/pc/kg
 etc/X11/xkb/symbols/pc/la
+etc/X11/xkb/symbols/pc/latam
 etc/X11/xkb/symbols/pc/latin
-etc/X11/xkb/symbols/pc/lo
+etc/X11/xkb/symbols/pc/lk
 etc/X11/xkb/symbols/pc/lt
 etc/X11/xkb/symbols/pc/lv
-etc/X11/xkb/symbols/pc/mk
-etc/X11/xkb/symbols/pc/ml
+etc/X11/xkb/symbols/pc/mao
+etc/X11/xkb/symbols/pc/mkd
 etc/X11/xkb/symbols/pc/mm
 etc/X11/xkb/symbols/pc/mn
 etc/X11/xkb/symbols/pc/mt
-etc/X11/xkb/symbols/pc/mt_us
 etc/X11/xkb/symbols/pc/nl
 etc/X11/xkb/symbols/pc/no
-etc/X11/xkb/symbols/pc/ogham
-etc/X11/xkb/symbols/pc/ori
 etc/X11/xkb/symbols/pc/pc
+etc/X11/xkb/symbols/pc/pk
 etc/X11/xkb/symbols/pc/pl
-etc/X11/xkb/symbols/pc/pl2
 etc/X11/xkb/symbols/pc/pt
 etc/X11/xkb/symbols/pc/ro
 etc/X11/xkb/symbols/pc/ru
-etc/X11/xkb/symbols/pc/sapmi
 etc/X11/xkb/symbols/pc/se
-etc/X11/xkb/symbols/pc/se_FI
-etc/X11/xkb/symbols/pc/se_NO
-etc/X11/xkb/symbols/pc/se_SE
 etc/X11/xkb/symbols/pc/si
 etc/X11/xkb/symbols/pc/sk
-etc/X11/xkb/symbols/pc/sk_qwerty
-etc/X11/xkb/symbols/pc/sr
-etc/X11/xkb/symbols/pc/syr
-etc/X11/xkb/symbols/pc/syr_phonetic
-etc/X11/xkb/symbols/pc/tel
+etc/X11/xkb/symbols/pc/srp
+etc/X11/xkb/symbols/pc/sy
 etc/X11/xkb/symbols/pc/th
-etc/X11/xkb/symbols/pc/th_pat
-etc/X11/xkb/symbols/pc/th_tis
 etc/X11/xkb/symbols/pc/tj
-etc/X11/xkb/symbols/pc/tml
 etc/X11/xkb/symbols/pc/tr
 etc/X11/xkb/symbols/pc/ua
 etc/X11/xkb/symbols/pc/us
-etc/X11/xkb/symbols/pc/us_intl
 etc/X11/xkb/symbols/pc/uz
 etc/X11/xkb/symbols/pc/vn
-etc/X11/xkb/symbols/pc/yu
 etc/X11/xkb/symbols/pc104
 etc/X11/xkb/symbols/pl
 etc/X11/xkb/symbols/pl2
@@ -452,7 +432,6 @@
 usr/X11R6/bin/Xmark
 usr/X11R6/bin/Xnest
 usr/X11R6/bin/Xorg
-usr/X11R6/bin/Xorg-debug
 usr/X11R6/bin/Xvfb
 usr/X11R6/bin/appres
 usr/X11R6/bin/atobm
@@ -467,8 +446,6 @@
 usr/X11R6/bin/cxpm
 usr/X11R6/bin/dga
 usr/X11R6/bin/dmxtodmx
-usr/X11R6/bin/dpsexec
-usr/X11R6/bin/dpsinfo
 usr/X11R6/bin/editres
 usr/X11R6/bin/fslsfonts
 usr/X11R6/bin/fstobdf
@@ -482,15 +459,12 @@
 usr/X11R6/bin/ico
 usr/X11R6/bin/imake
 usr/X11R6/bin/ioport
-usr/X11R6/bin/koi8rxterm
 usr/X11R6/bin/lbxproxy
 usr/X11R6/bin/listres
 usr/X11R6/bin/lndir
 usr/X11R6/bin/luit
-usr/X11R6/bin/lxterm
 usr/X11R6/bin/makedepend
 usr/X11R6/bin/makeg
-usr/X11R6/bin/makepsres
 usr/X11R6/bin/makestrs
 usr/X11R6/bin/mergelib
 usr/X11R6/bin/mkcfm
@@ -503,8 +477,6 @@
 usr/X11R6/bin/oclock
 usr/X11R6/bin/pcitweak
 usr/X11R6/bin/proxymngr
-usr/X11R6/bin/pswrap
-usr/X11R6/bin/resize
 usr/X11R6/bin/revpath
 usr/X11R6/bin/rstart
 usr/X11R6/bin/rstartd
@@ -517,15 +489,14 @@
 usr/X11R6/bin/smproxy
 usr/X11R6/bin/startx
 usr/X11R6/bin/sxpm
-usr/X11R6/bin/texteroids
 usr/X11R6/bin/twm
 usr/X11R6/bin/ucs2any
-usr/X11R6/bin/uxterm
 usr/X11R6/bin/vdltodmx
 usr/X11R6/bin/viewres
 usr/X11R6/bin/x11perf
 usr/X11R6/bin/x11perfcomp
 usr/X11R6/bin/xauth
+usr/X11R6/bin/xauth_switch_to_sun-des-1
 usr/X11R6/bin/xbiff
 usr/X11R6/bin/xcalc
 usr/X11R6/bin/xclipboard
@@ -534,9 +505,11 @@
 usr/X11R6/bin/xconsole
 usr/X11R6/bin/xcursorgen
 usr/X11R6/bin/xcutsel
+usr/X11R6/bin/xdbedizzy
 usr/X11R6/bin/xditview
 usr/X11R6/bin/xdm
 usr/X11R6/bin/xdmxconfig
+usr/X11R6/bin/xdpr
 usr/X11R6/bin/xdpyinfo
 usr/X11R6/bin/xdriinfo
 usr/X11R6/bin/xedit
@@ -575,6 +548,7 @@
 usr/X11R6/bin/xorgconfig
 usr/X11R6/bin/xphelloworld
 usr/X11R6/bin/xplsprinters
+usr/X11R6/bin/xpr
 usr/X11R6/bin/xprehashprinterlist
 usr/X11R6/bin/xprop
 usr/X11R6/bin/xpsimplehelloworld
@@ -588,7 +562,6 @@
 usr/X11R6/bin/xsetroot
 usr/X11R6/bin/xsm
 usr/X11R6/bin/xstdcmap
-usr/X11R6/bin/xterm
 usr/X11R6/bin/xtrapchar
 usr/X11R6/bin/xtrapin
 usr/X11R6/bin/xtrapinfo
@@ -601,32 +574,6 @@
 usr/X11R6/bin/xwd
 usr/X11R6/bin/xwininfo
 usr/X11R6/bin/xwud
-usr/X11R6/include/DPS/ColorSB.h
-usr/X11R6/include/DPS/ColorSBP.h
-usr/X11R6/include/DPS/DPSScrollW.h
-usr/X11R6/include/DPS/DPSScrollWP.h
-usr/X11R6/include/DPS/FontCreatP.h
-usr/X11R6/include/DPS/FontCreato.h
-usr/X11R6/include/DPS/FontSB.h
-usr/X11R6/include/DPS/FontSBP.h
-usr/X11R6/include/DPS/FontSamplP.h
-usr/X11R6/include/DPS/FontSample.h
-usr/X11R6/include/DPS/PSres.h
-usr/X11R6/include/DPS/XDPS.h
-usr/X11R6/include/DPS/XDPSlib.h
-usr/X11R6/include/DPS/XDPSproto.h
-usr/X11R6/include/DPS/dpsNXargs.h
-usr/X11R6/include/DPS/dpsXclient.h
-usr/X11R6/include/DPS/dpsXcommon.h
-usr/X11R6/include/DPS/dpsXpreview.h
-usr/X11R6/include/DPS/dpsXshare.h
-usr/X11R6/include/DPS/dpsXuserpath.h
-usr/X11R6/include/DPS/dpsclient.h
-usr/X11R6/include/DPS/dpsconfig.h
-usr/X11R6/include/DPS/dpsexcept.h
-usr/X11R6/include/DPS/dpsfriends.h
-usr/X11R6/include/DPS/dpsops.h
-usr/X11R6/include/DPS/psops.h
 usr/X11R6/include/GL/GLwDrawA.h
 usr/X11R6/include/GL/GLwDrawAP.h
 usr/X11R6/include/GL/GLwMDrawA.h
@@ -641,35 +588,50 @@
 usr/X11R6/include/GL/glxproto.h
 usr/X11R6/include/GL/glxtokens.h
 usr/X11R6/include/GL/osmesa.h
+usr/X11R6/include/X11/CallbackI.h
 usr/X11R6/include/X11/Composite.h
 usr/X11R6/include/X11/CompositeP.h
 usr/X11R6/include/X11/ConstrainP.h
 usr/X11R6/include/X11/Constraint.h
+usr/X11R6/include/X11/ConvertI.h
 usr/X11R6/include/X11/Core.h
 usr/X11R6/include/X11/CoreP.h
+usr/X11R6/include/X11/CreateI.h
 usr/X11R6/include/X11/DECkeysym.h
+usr/X11R6/include/X11/EventI.h
 usr/X11R6/include/X11/HPkeysym.h
+usr/X11R6/include/X11/HookObjI.h
 usr/X11R6/include/X11/ICE/ICE.h
 usr/X11R6/include/X11/ICE/ICEconn.h
 usr/X11R6/include/X11/ICE/ICElib.h
 usr/X11R6/include/X11/ICE/ICEmsg.h
 usr/X11R6/include/X11/ICE/ICEproto.h
 usr/X11R6/include/X11/ICE/ICEutil.h
+usr/X11R6/include/X11/ImUtil.h
+usr/X11R6/include/X11/InitialI.h
 usr/X11R6/include/X11/Intrinsic.h
+usr/X11R6/include/X11/IntrinsicI.h
 usr/X11R6/include/X11/IntrinsicP.h
 usr/X11R6/include/X11/Object.h
 usr/X11R6/include/X11/ObjectP.h
 usr/X11R6/include/X11/PM/PM.h
 usr/X11R6/include/X11/PM/PMproto.h
+usr/X11R6/include/X11/PassivGraI.h
 usr/X11R6/include/X11/RectObj.h
 usr/X11R6/include/X11/RectObjP.h
+usr/X11R6/include/X11/ResourceI.h
 usr/X11R6/include/X11/SM/SM.h
 usr/X11R6/include/X11/SM/SMlib.h
 usr/X11R6/include/X11/SM/SMproto.h
+usr/X11R6/include/X11/SelectionI.h
 usr/X11R6/include/X11/Shell.h
+usr/X11R6/include/X11/ShellI.h
 usr/X11R6/include/X11/ShellP.h
 usr/X11R6/include/X11/StringDefs.h
 usr/X11R6/include/X11/Sunkeysym.h
+usr/X11R6/include/X11/ThreadsI.h
+usr/X11R6/include/X11/TranslateI.h
+usr/X11R6/include/X11/VarargsI.h
 usr/X11R6/include/X11/Vendor.h
 usr/X11R6/include/X11/VendorP.h
 usr/X11R6/include/X11/X.h
@@ -760,6 +722,7 @@
 usr/X11R6/include/X11/Xfuncproto.h
 usr/X11R6/include/X11/Xfuncs.h
 usr/X11R6/include/X11/Xlib.h
+usr/X11R6/include/X11/XlibConf.h
 usr/X11R6/include/X11/Xlibint.h
 usr/X11R6/include/X11/Xlocale.h
 usr/X11R6/include/X11/Xmd.h
@@ -793,6 +756,7 @@
 usr/X11R6/include/X11/XprintUtil/xprintutil.h
 usr/X11R6/include/X11/Xproto.h
 usr/X11R6/include/X11/Xprotostr.h
+usr/X11R6/include/X11/Xregion.h
 usr/X11R6/include/X11/Xresource.h
 usr/X11R6/include/X11/Xthreads.h
 usr/X11R6/include/X11/Xutil.h
@@ -979,6 +943,7 @@
 usr/X11R6/include/X11/extensions/shmstr.h
 usr/X11R6/include/X11/extensions/sync.h
 usr/X11R6/include/X11/extensions/syncstr.h
+usr/X11R6/include/X11/extensions/vldXvMC.h
 usr/X11R6/include/X11/extensions/xcmiscstr.h
 usr/X11R6/include/X11/extensions/xevieplaceholder.h
 usr/X11R6/include/X11/extensions/xf86bigfont.h
@@ -1007,10 +972,27 @@
 usr/X11R6/include/X11/fonts/FS.h
 usr/X11R6/include/X11/fonts/FSlib.h
 usr/X11R6/include/X11/fonts/FSproto.h
+usr/X11R6/include/X11/fonts/bdfint.h
+usr/X11R6/include/X11/fonts/bitmap.h
+usr/X11R6/include/X11/fonts/bufio.h
+usr/X11R6/include/X11/fonts/fntfil.h
+usr/X11R6/include/X11/fonts/fntfilio.h
+usr/X11R6/include/X11/fonts/fntfilst.h
+usr/X11R6/include/X11/fonts/font.h
 usr/X11R6/include/X11/fonts/fontenc.h
+usr/X11R6/include/X11/fonts/fontencc.h
+usr/X11R6/include/X11/fonts/fontmisc.h
+usr/X11R6/include/X11/fonts/fontmod.h
+usr/X11R6/include/X11/fonts/fontshow.h
+usr/X11R6/include/X11/fonts/fontstruct.h
+usr/X11R6/include/X11/fonts/fontutil.h
+usr/X11R6/include/X11/fonts/fontxlfd.h
 usr/X11R6/include/X11/fonts/fsmasks.h
+usr/X11R6/include/X11/fonts/pcf.h
 usr/X11R6/include/X11/keysym.h
 usr/X11R6/include/X11/keysymdef.h
+usr/X11R6/include/X11/misc.h
+usr/X11R6/include/X11/os.h
 usr/X11R6/include/X11/pixmaps/card.xpm
 usr/X11R6/include/X11/pixmaps/computer.xpm
 usr/X11R6/include/X11/pixmaps/keyboard.xpm
@@ -1026,6 +1008,7 @@
 usr/X11R6/lib/X11/Xcms.txt
 usr/X11R6/lib/X11/config/Amoeba.cf
 usr/X11R6/lib/X11/config/DGUX.cf
+usr/X11R6/lib/X11/config/DragonFly.cf
 usr/X11R6/lib/X11/config/FreeBSD.cf
 usr/X11R6/lib/X11/config/Imake.cf
 usr/X11R6/lib/X11/config/Imake.rules
@@ -1085,6 +1068,9 @@
 usr/X11R6/lib/X11/config/lynx.cf
 usr/X11R6/lib/X11/config/macII.cf
 usr/X11R6/lib/X11/config/mach.cf
+usr/X11R6/lib/X11/config/mingw.cf
+usr/X11R6/lib/X11/config/mingw.rules
+usr/X11R6/lib/X11/config/mingw.tmpl
 usr/X11R6/lib/X11/config/minix.cf
 usr/X11R6/lib/X11/config/moto.cf
 usr/X11R6/lib/X11/config/ncr.cf
@@ -1168,12 +1154,11 @@
 usr/X11R6/lib/X11/doc/RELNOTES
 usr/X11R6/lib/X11/doc/Versions
 usr/X11R6/lib/X11/doc/VideoBoard98
+usr/X11R6/lib/X11/doc/html/Xprint_FAQ.html
 usr/X11R6/lib/X11/etc/Xinstall.sh
 usr/X11R6/lib/X11/etc/sun.termcap
 usr/X11R6/lib/X11/etc/sun.terminfo
 usr/X11R6/lib/X11/etc/xmodmap.std
-usr/X11R6/lib/X11/etc/xterm.termcap
-usr/X11R6/lib/X11/etc/xterm.terminfo
 usr/X11R6/lib/X11/fonts/util/map-ISO8859-1
 usr/X11R6/lib/X11/fonts/util/map-ISO8859-10
 usr/X11R6/lib/X11/fonts/util/map-ISO8859-11
@@ -1447,13 +1432,21 @@
 usr/X11R6/lib/X11/locale/vi_VN.viscii/XLC_LOCALE
 usr/X11R6/lib/X11/locale/zh_CN.UTF-8/XI18N_OBJS
 usr/X11R6/lib/X11/locale/zh_CN.UTF-8/XLC_LOCALE
+usr/X11R6/lib/X11/locale/zh_CN.gb18030/Compose
+usr/X11R6/lib/X11/locale/zh_CN.gb18030/XI18N_OBJS
+usr/X11R6/lib/X11/locale/zh_CN.gb18030/XLC_LOCALE
 usr/X11R6/lib/X11/locale/zh_CN.gbk/Compose
 usr/X11R6/lib/X11/locale/zh_CN.gbk/XI18N_OBJS
 usr/X11R6/lib/X11/locale/zh_CN.gbk/XLC_LOCALE
 usr/X11R6/lib/X11/locale/zh_CN/Compose
 usr/X11R6/lib/X11/locale/zh_CN/XI18N_OBJS
 usr/X11R6/lib/X11/locale/zh_CN/XLC_LOCALE
+usr/X11R6/lib/X11/locale/zh_HK.UTF-8/XI18N_OBJS
+usr/X11R6/lib/X11/locale/zh_HK.UTF-8/XLC_LOCALE
+usr/X11R6/lib/X11/locale/zh_HK.big5/Compose
+usr/X11R6/lib/X11/locale/zh_HK.big5/XI18N_OBJS
 usr/X11R6/lib/X11/locale/zh_HK.big5/XLC_LOCALE
+usr/X11R6/lib/X11/locale/zh_HK.big5hkscs/Compose
 usr/X11R6/lib/X11/locale/zh_HK.big5hkscs/XI18N_OBJS
 usr/X11R6/lib/X11/locale/zh_HK.big5hkscs/XLC_LOCALE
 usr/X11R6/lib/X11/locale/zh_TW.UTF-8/XI18N_OBJS
@@ -1485,6 +1478,7 @@
 usr/X11R6/lib/X11/xedit/lisp/syntax.lsp
 usr/X11R6/lib/X11/xedit/lisp/xedit.lsp
 usr/X11R6/lib/X11/xman.help
+usr/X11R6/lib/X11/xorg.conf.eg
 usr/X11R6/lib/libFS.a
 usr/X11R6/lib/libFS.so.6.0
 usr/X11R6/lib/libGL.a
@@ -1494,7 +1488,7 @@
 usr/X11R6/lib/libGLw.a
 usr/X11R6/lib/libGLw_pic.a
 usr/X11R6/lib/libICE.a
-usr/X11R6/lib/libICE.so.6.3
+usr/X11R6/lib/libICE.so.6.4
 usr/X11R6/lib/libOSMesa.a
 usr/X11R6/lib/libOSMesa.so.4.0
 usr/X11R6/lib/libSM.a
@@ -1564,22 +1558,15 @@
 usr/X11R6/lib/libXxf86vm.so.1.0
 usr/X11R6/lib/libdmx.a
 usr/X11R6/lib/libdmx.so.1.0
-usr/X11R6/lib/libdps.a
-usr/X11R6/lib/libdps.so.1.0
-usr/X11R6/lib/libdpstk.a
-usr/X11R6/lib/libdpstk.so.1.0
 usr/X11R6/lib/libfntstubs.a
 usr/X11R6/lib/libfontenc.a
 usr/X11R6/lib/libfontenc_pic.a
-usr/X11R6/lib/libpsres.a
-usr/X11R6/lib/libpsres.so.1.0
 usr/X11R6/lib/libxf86config.a
 usr/X11R6/lib/libxf86config_pic.a
 usr/X11R6/lib/libxkbfile.a
 usr/X11R6/lib/libxkbfile.so.1.0
 usr/X11R6/lib/libxkbui.a
 usr/X11R6/lib/libxkbui.so.1.0
-usr/X11R6/lib/modules/dri/gamma_dri.so
 usr/X11R6/lib/modules/dri/i810_dri.so
 usr/X11R6/lib/modules/dri/i915_dri.so
 usr/X11R6/lib/modules/dri/mga_dri.so
@@ -1587,104 +1574,111 @@
 usr/X11R6/lib/modules/dri/r200_dri.so
 usr/X11R6/lib/modules/dri/radeon_dri.so
 usr/X11R6/lib/modules/dri/sis_dri.so
-usr/X11R6/lib/modules/drivers/apm_drv.o
-usr/X11R6/lib/modules/drivers/ark_drv.o
-usr/X11R6/lib/modules/drivers/ati_drv.o
-usr/X11R6/lib/modules/drivers/atimisc_drv.o
-usr/X11R6/lib/modules/drivers/chips_drv.o
-usr/X11R6/lib/modules/drivers/cirrus_alpine_drv.o
-usr/X11R6/lib/modules/drivers/cirrus_drv.o
-usr/X11R6/lib/modules/drivers/cirrus_laguna_drv.o
-usr/X11R6/lib/modules/drivers/cyrix_drv.o
-usr/X11R6/lib/modules/drivers/dummy_drv.o
-usr/X11R6/lib/modules/drivers/glint_drv.o
-usr/X11R6/lib/modules/drivers/i128_drv.o
-usr/X11R6/lib/modules/drivers/i740_drv.o
-usr/X11R6/lib/modules/drivers/i810_drv.o
-usr/X11R6/lib/modules/drivers/imstt_drv.o
-usr/X11R6/lib/modules/drivers/mga_drv.o
-usr/X11R6/lib/modules/drivers/neomagic_drv.o
-usr/X11R6/lib/modules/drivers/newport_drv.o
-usr/X11R6/lib/modules/drivers/nsc_drv.o
-usr/X11R6/lib/modules/drivers/nv_drv.o
-usr/X11R6/lib/modules/drivers/r128_drv.o
-usr/X11R6/lib/modules/drivers/radeon_drv.o
-usr/X11R6/lib/modules/drivers/rendition_drv.o
-usr/X11R6/lib/modules/drivers/riva128_drv.o
-usr/X11R6/lib/modules/drivers/s3_drv.o
-usr/X11R6/lib/modules/drivers/s3virge_drv.o
-usr/X11R6/lib/modules/drivers/savage_drv.o
-usr/X11R6/lib/modules/drivers/siliconmotion_drv.o
-usr/X11R6/lib/modules/drivers/sis_drv.o
-usr/X11R6/lib/modules/drivers/tdfx_drv.o
-usr/X11R6/lib/modules/drivers/tga_drv.o
-usr/X11R6/lib/modules/drivers/trident_drv.o
-usr/X11R6/lib/modules/drivers/tseng_drv.o
-usr/X11R6/lib/modules/drivers/vesa_drv.o
-usr/X11R6/lib/modules/drivers/vga_drv.o
-usr/X11R6/lib/modules/drivers/via_drv.o
-usr/X11R6/lib/modules/drivers/vmware_drv.o
-usr/X11R6/lib/modules/extensions/libGLcore.a
-usr/X11R6/lib/modules/extensions/libdbe.a
-usr/X11R6/lib/modules/extensions/libdri.a
-usr/X11R6/lib/modules/extensions/libextmod.a
-usr/X11R6/lib/modules/extensions/libglx.a
-usr/X11R6/lib/modules/extensions/librecord.a
-usr/X11R6/lib/modules/extensions/libxtrap.a
-usr/X11R6/lib/modules/fonts/libbitmap.a
-usr/X11R6/lib/modules/fonts/libfreetype.a
-usr/X11R6/lib/modules/fonts/libtype1.a
-usr/X11R6/lib/modules/freebsd/libdrm.a
-usr/X11R6/lib/modules/input/acecad_drv.o
-usr/X11R6/lib/modules/input/calcomp_drv.o
-usr/X11R6/lib/modules/input/citron_drv.o
-usr/X11R6/lib/modules/input/digitaledge_drv.o
-usr/X11R6/lib/modules/input/dmc_drv.o
-usr/X11R6/lib/modules/input/dynapro_drv.o
-usr/X11R6/lib/modules/input/elographics_drv.o
-usr/X11R6/lib/modules/input/fpit_drv.o
-usr/X11R6/lib/modules/input/hyperpen_drv.o
-usr/X11R6/lib/modules/input/js_x_drv.o
-usr/X11R6/lib/modules/input/kbd_drv.o
-usr/X11R6/lib/modules/input/keyboard_drv.o
-usr/X11R6/lib/modules/input/magellan_drv.o
-usr/X11R6/lib/modules/input/microtouch_drv.o
-usr/X11R6/lib/modules/input/mouse_drv.o
-usr/X11R6/lib/modules/input/mutouch_drv.o
-usr/X11R6/lib/modules/input/palmax_drv.o
-usr/X11R6/lib/modules/input/penmount_drv.o
-usr/X11R6/lib/modules/input/spaceorb_drv.o
-usr/X11R6/lib/modules/input/summa_drv.o
-usr/X11R6/lib/modules/input/tek4957_drv.o
-usr/X11R6/lib/modules/input/void_drv.o
-usr/X11R6/lib/modules/input/wacom_drv.o
-usr/X11R6/lib/modules/libafb.a
-usr/X11R6/lib/modules/libcfb.a
-usr/X11R6/lib/modules/libcfb16.a
-usr/X11R6/lib/modules/libcfb24.a
-usr/X11R6/lib/modules/libcfb32.a
-usr/X11R6/lib/modules/libcw.a
-usr/X11R6/lib/modules/libdamage.a
-usr/X11R6/lib/modules/libddc.a
-usr/X11R6/lib/modules/libfb.a
-usr/X11R6/lib/modules/libi2c.a
-usr/X11R6/lib/modules/libint10.a
-usr/X11R6/lib/modules/liblayer.a
-usr/X11R6/lib/modules/libmfb.a
-usr/X11R6/lib/modules/libpcidata.a
-usr/X11R6/lib/modules/librac.a
-usr/X11R6/lib/modules/libramdac.a
-usr/X11R6/lib/modules/libscanpci.a
-usr/X11R6/lib/modules/libshadow.a
-usr/X11R6/lib/modules/libshadowfb.a
-usr/X11R6/lib/modules/libvbe.a
-usr/X11R6/lib/modules/libvgahw.a
-usr/X11R6/lib/modules/libxaa.a
-usr/X11R6/lib/modules/libxf1bpp.a
-usr/X11R6/lib/modules/libxf24_32bpp.a
-usr/X11R6/lib/modules/libxf4bpp.a
-usr/X11R6/lib/modules/libxf8_16bpp.a
-usr/X11R6/lib/modules/libxf8_32bpp.a
+usr/X11R6/lib/modules/drivers/apm_drv.so
+usr/X11R6/lib/modules/drivers/ark_drv.so
+usr/X11R6/lib/modules/drivers/ati_drv.so
+usr/X11R6/lib/modules/drivers/atimisc_drv.so
+usr/X11R6/lib/modules/drivers/chips_drv.so
+usr/X11R6/lib/modules/drivers/cirrus_alpine_drv.so
+usr/X11R6/lib/modules/drivers/cirrus_drv.so
+usr/X11R6/lib/modules/drivers/cirrus_laguna_drv.so
+usr/X11R6/lib/modules/drivers/cyrix_drv.so
+usr/X11R6/lib/modules/drivers/dummy_drv.so
+usr/X11R6/lib/modules/drivers/glint_drv.so
+usr/X11R6/lib/modules/drivers/i128_drv.so
+usr/X11R6/lib/modules/drivers/i740_drv.so
+usr/X11R6/lib/modules/drivers/i810_drv.so
+usr/X11R6/lib/modules/drivers/imstt_drv.so
+usr/X11R6/lib/modules/drivers/mga_drv.so
+usr/X11R6/lib/modules/drivers/neomagic_drv.so
+usr/X11R6/lib/modules/drivers/newport_drv.so
+usr/X11R6/lib/modules/drivers/nsc_drv.so
+usr/X11R6/lib/modules/drivers/nv_drv.so
+usr/X11R6/lib/modules/drivers/r128_drv.so
+usr/X11R6/lib/modules/drivers/radeon_drv.so
+usr/X11R6/lib/modules/drivers/rendition_drv.so
+usr/X11R6/lib/modules/drivers/riva128_drv.so
+usr/X11R6/lib/modules/drivers/s3_drv.so
+usr/X11R6/lib/modules/drivers/s3virge_drv.so
+usr/X11R6/lib/modules/drivers/savage_drv.so
+usr/X11R6/lib/modules/drivers/siliconmotion_drv.so
+usr/X11R6/lib/modules/drivers/sis_drv.so
+usr/X11R6/lib/modules/drivers/tdfx_drv.so
+usr/X11R6/lib/modules/drivers/tga_drv.so
+usr/X11R6/lib/modules/drivers/trident_drv.so
+usr/X11R6/lib/modules/drivers/tseng_drv.so
+usr/X11R6/lib/modules/drivers/vesa_drv.so
+usr/X11R6/lib/modules/drivers/vga_drv.so
+usr/X11R6/lib/modules/drivers/via_drv.so
+usr/X11R6/lib/modules/drivers/vmware_drv.so
+usr/X11R6/lib/modules/extensions/libGLcore.so
+usr/X11R6/lib/modules/extensions/libdbe.so
+usr/X11R6/lib/modules/extensions/libdri.so
+usr/X11R6/lib/modules/extensions/libextmod.so
+usr/X11R6/lib/modules/extensions/libglx.so
+usr/X11R6/lib/modules/extensions/librecord.so
+usr/X11R6/lib/modules/extensions/libxtrap.so
+usr/X11R6/lib/modules/fonts/libbitmap.so
+usr/X11R6/lib/modules/fonts/libfreetype.so
+usr/X11R6/lib/modules/fonts/libtype1.so
+usr/X11R6/lib/modules/freebsd/libdrm.so
+usr/X11R6/lib/modules/input/acecad_drv.so
+usr/X11R6/lib/modules/input/calcomp_drv.so
+usr/X11R6/lib/modules/input/citron_drv.so
+usr/X11R6/lib/modules/input/digitaledge_drv.so
+usr/X11R6/lib/modules/input/dmc_drv.so
+usr/X11R6/lib/modules/input/dynapro_drv.so
+usr/X11R6/lib/modules/input/elographics_drv.so
+usr/X11R6/lib/modules/input/fpit_drv.so
+usr/X11R6/lib/modules/input/hyperpen_drv.so
+usr/X11R6/lib/modules/input/js_x_drv.so
+usr/X11R6/lib/modules/input/kbd_drv.so
+usr/X11R6/lib/modules/input/keyboard_drv.so
+usr/X11R6/lib/modules/input/magellan_drv.so
+usr/X11R6/lib/modules/input/microtouch_drv.so
+usr/X11R6/lib/modules/input/mouse_drv.so
+usr/X11R6/lib/modules/input/mutouch_drv.so
+usr/X11R6/lib/modules/input/palmax_drv.so
+usr/X11R6/lib/modules/input/penmount_drv.so
+usr/X11R6/lib/modules/input/spaceorb_drv.so
+usr/X11R6/lib/modules/input/summa_drv.so
+usr/X11R6/lib/modules/input/tek4957_drv.so
+usr/X11R6/lib/modules/input/void_drv.so
+usr/X11R6/lib/modules/input/wacom_drv.so
+usr/X11R6/lib/modules/libafb.so
+usr/X11R6/lib/modules/libcfb.so
+usr/X11R6/lib/modules/libcfb16.so
+usr/X11R6/lib/modules/libcfb32.so
+usr/X11R6/lib/modules/libddc.so
+usr/X11R6/lib/modules/libexa.so
+usr/X11R6/lib/modules/libfb.so
+usr/X11R6/lib/modules/libi2c.so
+usr/X11R6/lib/modules/libint10.so
+usr/X11R6/lib/modules/liblayer.so
+usr/X11R6/lib/modules/libmfb.so
+usr/X11R6/lib/modules/libpcidata.so
+usr/X11R6/lib/modules/librac.so
+usr/X11R6/lib/modules/libramdac.so
+usr/X11R6/lib/modules/libscanpci.so
+usr/X11R6/lib/modules/libshadow.so
+usr/X11R6/lib/modules/libshadowfb.so
+usr/X11R6/lib/modules/libvbe.so
+usr/X11R6/lib/modules/libvgahw.so
+usr/X11R6/lib/modules/libxaa.so
+usr/X11R6/lib/modules/libxf1bpp.so
+usr/X11R6/lib/modules/libxf4bpp.so
+usr/X11R6/lib/modules/libxf8_16bpp.so
+usr/X11R6/lib/modules/libxf8_32bpp.so
+usr/X11R6/lib/modules/multimedia/bt829_drv.so
+usr/X11R6/lib/modules/multimedia/fi1236_drv.so
+usr/X11R6/lib/modules/multimedia/msp3430_drv.so
+usr/X11R6/lib/modules/multimedia/tda8425_drv.so
+usr/X11R6/lib/modules/multimedia/tda9850_drv.so
+usr/X11R6/lib/modules/multimedia/tda9885_drv.so
+usr/X11R6/lib/modules/multimedia/theatre200_drv.so
+usr/X11R6/lib/modules/multimedia/theatre_detect_drv.so
+usr/X11R6/lib/modules/multimedia/theatre_drv.so
+usr/X11R6/lib/modules/multimedia/uda1380_drv.so
 usr/X11R6/lib/pkgconfig/xcomposite.pc
 usr/X11R6/lib/pkgconfig/xdamage.pc
 usr/X11R6/lib/pkgconfig/xevie.pc
@@ -1708,8 +1702,6 @@
 usr/X11R6/man/man1/cxpm.1x
 usr/X11R6/man/man1/dga.1x
 usr/X11R6/man/man1/dmxtodmx.1x
-usr/X11R6/man/man1/dpsexec.1x
-usr/X11R6/man/man1/dpsinfo.1x
 usr/X11R6/man/man1/dumpkeymap.1x
 usr/X11R6/man/man1/editres.1x
 usr/X11R6/man/man1/fslsfonts.1x
@@ -1722,15 +1714,12 @@
 usr/X11R6/man/man1/iceauth.1x
 usr/X11R6/man/man1/ico.1x
 usr/X11R6/man/man1/imake.1x
-usr/X11R6/man/man1/koi8rxterm.1x
 usr/X11R6/man/man1/lbxproxy.1x
 usr/X11R6/man/man1/listres.1x
 usr/X11R6/man/man1/lndir.1x
 usr/X11R6/man/man1/luit.1x
-usr/X11R6/man/man1/lxterm.1x
 usr/X11R6/man/man1/makedepend.1x
 usr/X11R6/man/man1/makeg.1x
-usr/X11R6/man/man1/makepsres.1x
 usr/X11R6/man/man1/makestrs.1x
 usr/X11R6/man/man1/mergelib.1x
 usr/X11R6/man/man1/mkcfm.1x
@@ -1741,8 +1730,6 @@
 usr/X11R6/man/man1/oclock.1x
 usr/X11R6/man/man1/pcitweak.1x
 usr/X11R6/man/man1/proxymngr.1x
-usr/X11R6/man/man1/pswrap.1x
-usr/X11R6/man/man1/resize.1x
 usr/X11R6/man/man1/revpath.1x
 usr/X11R6/man/man1/rstart.1x
 usr/X11R6/man/man1/rstartd.1x
@@ -1754,10 +1741,8 @@
 usr/X11R6/man/man1/smproxy.1x
 usr/X11R6/man/man1/startx.1x
 usr/X11R6/man/man1/sxpm.1x
-usr/X11R6/man/man1/texteroids.1x
 usr/X11R6/man/man1/twm.1x
 usr/X11R6/man/man1/ucs2any.1x
-usr/X11R6/man/man1/uxterm.1x
 usr/X11R6/man/man1/vdltodmx.1x
 usr/X11R6/man/man1/viewres.1x
 usr/X11R6/man/man1/x11perf.1x
@@ -1771,9 +1756,11 @@
 usr/X11R6/man/man1/xconsole.1x
 usr/X11R6/man/man1/xcursorgen.1x
 usr/X11R6/man/man1/xcutsel.1x
+usr/X11R6/man/man1/xdbedizzy.1x
 usr/X11R6/man/man1/xditview.1x
 usr/X11R6/man/man1/xdm.1x
 usr/X11R6/man/man1/xdmxconfig.1x
+usr/X11R6/man/man1/xdpr.1x
 usr/X11R6/man/man1/xdpyinfo.1x
 usr/X11R6/man/man1/xdriinfo.1x
 usr/X11R6/man/man1/xedit.1x
@@ -1809,6 +1796,7 @@
 usr/X11R6/man/man1/xorgconfig.1x
 usr/X11R6/man/man1/xphelloworld.1x
 usr/X11R6/man/man1/xplsprinters.1x
+usr/X11R6/man/man1/xpr.1x
 usr/X11R6/man/man1/xprehashprinterlist.1x
 usr/X11R6/man/man1/xprop.1x
 usr/X11R6/man/man1/xpsimplehelloworld.1x
@@ -1822,7 +1810,6 @@
 usr/X11R6/man/man1/xsetroot.1x
 usr/X11R6/man/man1/xsm.1x
 usr/X11R6/man/man1/xstdcmap.1x
-usr/X11R6/man/man1/xterm.1x
 usr/X11R6/man/man1/xtrap.1x
 usr/X11R6/man/man1/xtrapchar.1x
 usr/X11R6/man/man1/xtrapin.1x
@@ -1865,6 +1852,15 @@
 usr/X11R6/man/man3/DMXRemoveInput.3x
 usr/X11R6/man/man3/DMXRemoveScreen.3x
 usr/X11R6/man/man3/DMXSync.3x
+usr/X11R6/man/man3/DPMSCapable.3x
+usr/X11R6/man/man3/DPMSDisable.3x
+usr/X11R6/man/man3/DPMSEnable.3x
+usr/X11R6/man/man3/DPMSForceLevel.3x
+usr/X11R6/man/man3/DPMSGetTimeouts.3x
+usr/X11R6/man/man3/DPMSGetVersion.3x
+usr/X11R6/man/man3/DPMSInfo.3x
+usr/X11R6/man/man3/DPMSQueryExtension.3x
+usr/X11R6/man/man3/DPMSSetTimeouts.3x
 usr/X11R6/man/man3/DefaultColormap.3x
 usr/X11R6/man/man3/DefaultColormapOfScreen.3x
 usr/X11R6/man/man3/DefaultDepth.3x
@@ -1905,7 +1901,7 @@
 usr/X11R6/man/man3/IsFunctionKey.3x
 usr/X11R6/man/man3/IsKeypadKey.3x
 usr/X11R6/man/man3/IsMiscFunctionKey.3x
-usr/X11R6/man/man3/IsModiferKey.3x
+usr/X11R6/man/man3/IsModifierKey.3x
 usr/X11R6/man/man3/IsPFKey.3x
 usr/X11R6/man/man3/IsPrivateKeypadKey.3x
 usr/X11R6/man/man3/LastKnownRequestProcessed.3x
@@ -2085,6 +2081,15 @@
 usr/X11R6/man/man3/XExtendedMaxRequestSize.3x
 usr/X11R6/man/man3/XExtentsOfFontSet.3x
 usr/X11R6/man/man3/XF86DGA.3x
+usr/X11R6/man/man3/XF86Misc.3x
+usr/X11R6/man/man3/XF86MiscGetKbdSettings.3x
+usr/X11R6/man/man3/XF86MiscGetMouseSettings.3x
+usr/X11R6/man/man3/XF86MiscGetSaver.3x
+usr/X11R6/man/man3/XF86MiscQueryExtension.3x
+usr/X11R6/man/man3/XF86MiscQueryVersion.3x
+usr/X11R6/man/man3/XF86MiscSetKbdSettings.3x
+usr/X11R6/man/man3/XF86MiscSetMouseSettings.3x
+usr/X11R6/man/man3/XF86MiscSetSaver.3x
 usr/X11R6/man/man3/XF86VidMode.3x
 usr/X11R6/man/man3/XF86VidModeDeleteModeLine.3x
 usr/X11R6/man/man3/XF86VidModeGetAllModeLines.3x
@@ -2130,6 +2135,7 @@
 usr/X11R6/man/man3/XFreeColors.3x
 usr/X11R6/man/man3/XFreeCursor.3x
 usr/X11R6/man/man3/XFreeDeviceList.3x
+usr/X11R6/man/man3/XFreeExtensionList.3x
 usr/X11R6/man/man3/XFreeFont.3x
 usr/X11R6/man/man3/XFreeFontInfo.3x
 usr/X11R6/man/man3/XFreeFontNames.3x
@@ -2224,6 +2230,7 @@
 usr/X11R6/man/man3/XKeysymToString.3x
 usr/X11R6/man/man3/XKillClient.3x
 usr/X11R6/man/man3/XListDepths.3x
+usr/X11R6/man/man3/XListExtensions.3x
 usr/X11R6/man/man3/XListFonts.3x
 usr/X11R6/man/man3/XListFontsWithInfo.3x
 usr/X11R6/man/man3/XListHosts.3x
@@ -2285,12 +2292,29 @@
 usr/X11R6/man/man3/XQueryColor.3x
 usr/X11R6/man/man3/XQueryColors.3x
 usr/X11R6/man/man3/XQueryDeviceState.3x
+usr/X11R6/man/man3/XQueryExtension.3x
 usr/X11R6/man/man3/XQueryFont.3x
 usr/X11R6/man/man3/XQueryKeymap.3x
 usr/X11R6/man/man3/XQueryPointer.3x
 usr/X11R6/man/man3/XQueryTextExtents.3x
 usr/X11R6/man/man3/XQueryTextExtents16.3x
 usr/X11R6/man/man3/XQueryTree.3x
+usr/X11R6/man/man3/XRRConfig.3x
+usr/X11R6/man/man3/XRRConfigCurrentConfiguration.3x
+usr/X11R6/man/man3/XRRConfigCurrentRate.3x
+usr/X11R6/man/man3/XRRConfigRates.3x
+usr/X11R6/man/man3/XRRConfigRotations.3x
+usr/X11R6/man/man3/XRRConfigSizes.3x
+usr/X11R6/man/man3/XRRConfigTimes.3x
+usr/X11R6/man/man3/XRRFreeScreenConfigInfo.3x
+usr/X11R6/man/man3/XRRGetScreenInfo.3x
+usr/X11R6/man/man3/XRRQueryExtension.3x
+usr/X11R6/man/man3/XRRQueryVersion.3x
+usr/X11R6/man/man3/XRRRootToScreen.3x
+usr/X11R6/man/man3/XRRScreenConfig.3x
+usr/X11R6/man/man3/XRRSelectInput.3x
+usr/X11R6/man/man3/XRRSetScreenConfig.3x
+usr/X11R6/man/man3/XRRSetScreenConfigAndRate.3x
 usr/X11R6/man/man3/XRaiseWindow.3x
 usr/X11R6/man/man3/XReadBitmapFile.3x
 usr/X11R6/man/man3/XReadBitmapFileData.3x
@@ -2529,6 +2553,9 @@
 usr/X11R6/man/man3/XcmsTekHVCQueryMaxVC.3x
 usr/X11R6/man/man3/XcmsTekHVCQueryMaxVSamples.3x
 usr/X11R6/man/man3/XcmsTekHVCQueryMinV.3x
+usr/X11R6/man/man3/XcupGetReservedColormapEntries.3x
+usr/X11R6/man/man3/XcupQueryVersion.3x
+usr/X11R6/man/man3/XcupStoreColors.3x
 usr/X11R6/man/man3/XdbeAllocateBackBufferName.3x
 usr/X11R6/man/man3/XdbeBeginIdiom.3x
 usr/X11R6/man/man3/XdbeDeallocateBackBufferName.3x
@@ -2542,6 +2569,11 @@
 usr/X11R6/man/man3/XeviQueryExtension.3x
 usr/X11R6/man/man3/XeviQueryVersion.3x
 usr/X11R6/man/man3/Xevie.3x
+usr/X11R6/man/man3/XevieEnd.3x
+usr/X11R6/man/man3/XevieQueryVersion.3x
+usr/X11R6/man/man3/XevieSelectInput.3x
+usr/X11R6/man/man3/XevieSendEvent.3x
+usr/X11R6/man/man3/XevieStart.3x
 usr/X11R6/man/man3/Xfixes.3x
 usr/X11R6/man/man3/Xfontcache.3x
 usr/X11R6/man/man3/XmbDrawImageString.3x
@@ -2643,6 +2675,7 @@
 usr/X11R6/man/man3/XtAddRawEventHandler.3x
 usr/X11R6/man/man3/XtAddTimeOut.3x
 usr/X11R6/man/man3/XtAddTimeout.3x
+usr/X11R6/man/man3/XtAddWorkProc.3x
 usr/X11R6/man/man3/XtAllocateGC.3x
 usr/X11R6/man/man3/XtAppAddActionHook.3x
 usr/X11R6/man/man3/XtAppAddActions.3x
diff -u xorg-x11-6.9.0.dfsg.1/debian/xserver-xorg.install.kfreebsd-i386 xorg-x11-6.9.0.dfsg.1/debian/xserver-xorg.install.kfreebsd-i386
--- xorg-x11-6.9.0.dfsg.1/debian/xserver-xorg.install.kfreebsd-i386
+++ xorg-x11-6.9.0.dfsg.1/debian/xserver-xorg.install.kfreebsd-i386
@@ -76,11 +76,9 @@
 usr/X11R6/lib/modules/libafb.so
 usr/X11R6/lib/modules/libcfb.so
 usr/X11R6/lib/modules/libcfb16.so
-usr/X11R6/lib/modules/libcfb24.so
 usr/X11R6/lib/modules/libcfb32.so
-usr/X11R6/lib/modules/libcw.so
-usr/X11R6/lib/modules/libdamage.so
 usr/X11R6/lib/modules/libddc.so
+usr/X11R6/lib/modules/libexa.so
 usr/X11R6/lib/modules/libfb.so
 usr/X11R6/lib/modules/libi2c.so
 usr/X11R6/lib/modules/libint10.so
@@ -96,12 +94,20 @@
 usr/X11R6/lib/modules/libvgahw.so
 usr/X11R6/lib/modules/libxaa.so
 usr/X11R6/lib/modules/libxf1bpp.so
-usr/X11R6/lib/modules/libxf24_32bpp.so
 usr/X11R6/lib/modules/libxf4bpp.so
 usr/X11R6/lib/modules/libxf8_16bpp.so
 usr/X11R6/lib/modules/libxf8_32bpp.so
+usr/X11R6/lib/modules/multimedia/bt829_drv.so
+usr/X11R6/lib/modules/multimedia/fi1236_drv.so
+usr/X11R6/lib/modules/multimedia/msp3430_drv.so
+usr/X11R6/lib/modules/multimedia/tda8425_drv.so
+usr/X11R6/lib/modules/multimedia/tda9850_drv.so
+usr/X11R6/lib/modules/multimedia/tda9885_drv.so
+usr/X11R6/lib/modules/multimedia/theatre200_drv.so
+usr/X11R6/lib/modules/multimedia/theatre_detect_drv.so
+usr/X11R6/lib/modules/multimedia/theatre_drv.so
+usr/X11R6/lib/modules/multimedia/uda1380_drv.so
 usr/X11R6/lib/modules/freebsd/libdrm.so
-usr/X11R6/lib/modules/libint10.so
 usr/X11R6/man/man1/Xorg.1x
 usr/X11R6/man/man1/gtf.1x
 usr/X11R6/man/man4/aiptek.4x
diff -u xorg-x11-6.9.0.dfsg.1/debian/xlibmesa-dri.install.kfreebsd-i386 xorg-x11-6.9.0.dfsg.1/debian/xlibmesa-dri.install.kfreebsd-i386
--- xorg-x11-6.9.0.dfsg.1/debian/xlibmesa-dri.install.kfreebsd-i386
+++ xorg-x11-6.9.0.dfsg.1/debian/xlibmesa-dri.install.kfreebsd-i386
@@ -1,4 +1,3 @@
-usr/X11R6/lib/modules/dri/gamma_dri.so
 usr/X11R6/lib/modules/dri/i810_dri.so
 usr/X11R6/lib/modules/dri/i915_dri.so
 usr/X11R6/lib/modules/dri/mga_dri.so
--- xorg-x11-6.9.0.dfsg.1.orig/debian/patches/freebsd/004_gnu-kbsd_sock_un.diff
+++ xorg-x11-6.9.0.dfsg.1/debian/patches/freebsd/004_gnu-kbsd_sock_un.diff
@@ -0,0 +1,44 @@
+Index: xc/lib/dps/csconndi.c
+===================================================================
+--- xc/lib/dps/csconndi.c.orig	2006-01-09 19:56:33.483548000 +0100
++++ xc/lib/dps/csconndi.c	2006-01-09 20:00:52.000000000 +0100
+@@ -506,7 +506,7 @@
+     sprintf (unaddr.sun_path, "%s_%d", CSDPS_UNIX_PATH, port);
+ 
+     addr = (struct sockaddr *) &unaddr;
+-    addrlen = strlen(unaddr.sun_path) + sizeof(unaddr.sun_family);
++    addrlen = strlen(unaddr.sun_path) + offsetof(struct sockaddr_un, sun_path);
+ 
+     /*
+      * Open the network connection.
+Index: xc/lib/xtrans/Xtranssock.c
+===================================================================
+--- xc/lib/xtrans/Xtranssock.c.orig	2006-01-09 19:57:04.000000000 +0100
++++ xc/lib/xtrans/Xtranssock.c	2006-01-09 20:00:52.000000000 +0100
+@@ -1111,7 +1111,7 @@
+     sockname.sun_len = strlen(sockname.sun_path);
+     namelen = SUN_LEN(&sockname);
+ #else
+-    namelen = strlen(sockname.sun_path) + sizeof(sockname.sun_family);
++    namelen = strlen(sockname.sun_path) + offsetof(struct sockaddr_un, sun_path);
+ #endif
+ 
+     unlink (sockname.sun_path);
+@@ -2001,7 +2001,7 @@
+     sockname.sun_len = strlen (sockname.sun_path);
+     namelen = SUN_LEN (&sockname);
+ #else
+-    namelen = strlen (sockname.sun_path) + sizeof (sockname.sun_family);
++    namelen = strlen (sockname.sun_path) + offsetof(struct sockaddr_un, sun_path);
+ #endif
+ 
+ 
+@@ -2015,7 +2015,7 @@
+ 	return TRANS_CONNECT_FAILED;
+     }
+     old_namelen = strlen (old_sockname.sun_path) +
+-	sizeof (old_sockname.sun_family);
++    	offsetof(struct sockaddr_un, sun_path);
+ #endif
+ 
+ 
