Author: aurel32
Status: in BTS

--- kdesdk-3.4.2.orig/debian/patches/kfreebsd.diff
+++ kdesdk-3.4.2/debian/patches/kfreebsd.diff
@@ -0,0 +1,82 @@
+--- kdesdk/admin/libtool.m4.in	23 Mar 2005 16:07:03 -0000
++++ kdesdk/admin/libtool.m4.in	13 Apr 2005 05:18:05 -0000
+@@ -1273,7 +1273,7 @@ freebsd1*)
+   dynamic_linker=no
+   ;;
+ 
+-freebsd*-gnu*)
++kfreebsd*-gnu*)
+   version_type=linux
+   need_lib_prefix=no
+   need_version=no
+@@ -2119,7 +2119,7 @@ darwin* | rhapsody*)
+   lt_cv_deplibs_check_method=pass_all
+   ;;
+ 
+-freebsd*)
++freebsd* | kfreebsd*-gnu)
+   if echo __ELF__ | $CC -E - | grep __ELF__ > /dev/null; then
+     case $host_cpu in
+     i*86 )
+@@ -2953,7 +2953,7 @@ case $host_os in
+   freebsd-elf*)
+     _LT_AC_TAGVAR(archive_cmds_need_lc, $1)=no
+     ;;
+-  freebsd*)
++  freebsd* | kfreebsd*-gnu)
+     # FreeBSD 3 and later use GNU C++ and GNU ld with standard ELF
+     # conventions
+     _LT_AC_TAGVAR(ld_shlibs, $1)=yes
+@@ -4599,7 +4599,7 @@ AC_MSG_CHECKING([for $compiler option to
+ 	    ;;
+ 	esac
+ 	;;
+-      freebsd*)
++      freebsd* | kfreebsd*-gnu)
+ 	# FreeBSD uses GNU C++
+ 	;;
+       hpux9* | hpux10* | hpux11*)
+@@ -5409,7 +5409,7 @@ EOF
+       ;;
+ 
+     # FreeBSD 3 and greater uses gcc -shared to do shared libraries.
+-    freebsd*)
++    freebsd* | kfreebsd*-gnu)
+       _LT_AC_TAGVAR(archive_cmds, $1)='$CC -shared -o $lib $compiler_flags $libobjs $deplibs'
+       _LT_AC_TAGVAR(hardcode_libdir_flag_spec, $1)='-R$libdir'
+       _LT_AC_TAGVAR(hardcode_direct, $1)=yes
+--- kdesdk/admin/ltmain.sh	12 Dec 2004 19:19:25 -0000
++++ kdesdk/admin/ltmain.sh	13 Apr 2005 05:18:05 -0000
+@@ -1276,9 +1276,6 @@ EOF
+ 	    # These systems don't actually have a C or math library (as such)
+ 	    continue
+ 	    ;;
+-	  *-*-freebsd*-gnu*)
+-	    # prevent being parsed by the freebsd regexp below
+-	    ;;
+ 	  *-*-mingw* | *-*-os2*)
+ 	    # These systems don't actually have a C library (as such)
+ 	    test "X$arg" = "X-lc" && continue
+@@ -1294,9 +1291,6 @@ EOF
+ 	  esac
+ 	elif test "X$arg" = "X-lc_r"; then
+ 	 case $host in
+-	 *-*-freebsd*-gnu*)
+-	   # prevent being parsed by the freebsd regexp below
+-	   ;;
+ 	 *-*-openbsd*)
+ 	   # Do not include libc_r directly, use -pthread flag.
+ 	   continue
+@@ -3181,12 +3175,6 @@ EOF
+ 	  *-*-netbsd*)
+ 	    # Don't link with libc until the a.out ld.so is fixed.
+ 	    ;;
+-	  *-*-freebsd*-gnu*)
+-	    # Prevent $arg from being parsed by the freebsd regexp below.
+-	    if test "$build_libtool_need_lc" = "yes"; then
+-	      deplibs="$deplibs -lc"
+-	    fi
+-	    ;;
+ 	  *-*-openbsd* | *-*-freebsd*)
+ 	    # Do not include libc due to us having libc/libc_r.
+ 	    test "X$arg" = "X-lc" && continue
