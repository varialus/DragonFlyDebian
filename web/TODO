TODO
====

This is the TODO list for GNU/kFreeBSD. If you want to work on any of this,
_please_ send us a mail to ask about it first (glibc-bsd-devel).
It's likely that work is already started and we can give you more details on
the particular issue.

I'd be nice if tasks and subtasks were sorted by priority.

 - The gateway command in /etc/network/interfaces, which is dessigned to be a
   per-interface setup, is being mapped to a generic routing setup.  This is
   because of route.real backend semantics and is not easy to fix.

   The result is that the following command:

   auto ed0
   iface ed0 inet static
        [...]
        gateway 1.2.3.4

   Is mapped to:

	route add -net 0.0.0.0 1.2.3.4  # for ifup
	route -q flush  # for ifdown

  This shouldn't concern you unless you have more than one interface requiring
  gateway setup.

 - Glibc
	- Update to the current glibc in sid (2.3.5)
	- Sync with current CVS. (merge into upstream, etc).

 - GCC
	- Port boehm-gc so we can enable java etc.

 - Binutils
	- The ld.so problem (see #246825) is not fixed in upstream.  We have
	  a patch in the bug that is acceptable for debian, but not for
	  upstream. Aurelien Jarno fix the kernel instead, but glibc and
	  binutils have to be rebuilt before getting rid of that patch.
	- Pass "make check".

 - FreeBSD
	- Merge patches from freebsd-buildutils and kfreebsd6 into upstream.

	- freebsd-utils. This is a hacked package built from staticaly-linked
	  binaries. It'll eventualy be rewriten semi-portably and replaced
	  (mount, ifconfig, etc). This is a long-term transition.

 - libkvm is ported badly.  It still has some dummy stubs that need replacing
   with decent code.

 - GDB is ported in upstream, but it doesn't work properly.  Maybe it will
   work when we fix libkvm.  As a workaround, we use freebsd-gdb package
   instead.

 - KDE is working well on GNU/kFreeBSD but most of the packages that provides
   libraries need a libtool update. The KDE team has modified the standard
   libtool file so this version has to be patched.
   A bug report has been filed (see http://bugs.kde.org/show_bug.cgi?id=103758)
   but the patch still hasn't been merged.

 - GRUB
	- Fix userspace emulator to work on kFreeBSD-based systems (currently
	fails when attempting to write into the device)
	- Fix kfreebsd loader so we can boot directly the kernel and not need
	  the FreeBSD loader.  (The debian package has a patch by Guillem
	  which does this, but doesn't work reliably enough to merge it yet).

 - d-i.
   Otavio Salvador is preparing for work on it (discussing dessign stuff with
   the other d-i people).

   Colin Watson has also been working on de-Linuxificating d-i (for the Hurd).

 - xterm fails to run because it's using unsupported ioctls.

 - Package Glibc for the FreeBSD ports collection.

 - type-handling is obsolete and deprecated now. There's a pending patch for
   dpkg that will solve what this tried to solve in a clean way. Please stop
   using type-handling.

 - lipthread2 is still used by a few packages. They should be rebuilt on a system
   without libpthread2.

 - It'd help if we had a Debian package of ossalsalib (aka libsalsa).  This
   library emulates alsa's libasound so that applications written for alsa can
   also be used on GNU/kFreeBSD.  This is specialy useful for packages that
   enable alsa support unconditionaly and FTBFS for us. See RFP #294143 for
   details.

 - Add a Debian GNU/kFreeBSD image for Qemu to FreeOSZoo (http://free.oszoo.org/).

 - Integrate the most we can from dmesg, swap{on,off} and {u,}mount wrapper
   scripts into FreeBSD upstream (some parts will be impossible due to CLI
   conflict)

 - debootstrap is broken.  There's a patch in svn, but the main reason is that
   it doesn't support fetching from two separate repositories, and also gnuab is
   not fully compatible with the official Debian archive.  This will improve
   when the port is added officialy.

 - Port debtakeover (so we can migrate a FreeBSD system to Debian GNU/kFreeBSD).
   This requires a working debootstrap (see above).

     http://www.hadrons.org/~guillem/debian/debtakeover/

 - Make a patch for kFreeBSD to honor Linux swap signature when activating swap
   partitions (currently it would activate them, but trash the signature).
   There's code to do that in [hurd]/sutils/swapon.c, but if you use this code
   note that it's GPLed.  GPL code can be accepted in kFreeBSD upstream if they
   find it useful enough, but it would go into separate gnu/ directories, and be
   disabled by default.

 - It seems that, for some reason, ELF binaries in Debian GNU/Linux have their
   e_ident[EI_OSABI] value set to ELFOSABI_NONE instead of ELFOSABI_LINUX.  You
   can check with readelf (in binutils) or freebsd-brandelf (in
   freebsd5-buildutils).  As a consequence, kFreeBSD refuses to run them when
   using Linux ABI emulation.

   UPDATE: it seems this is actualy done on purpose by upstream.  the kernel
   identifies a Linux binary when it requests to be loaded by ld-linux.so.
   Strange, but it doesn't really work AFAIK.

 - Port bsd-airtools and package it for Debian.  bsd-airtools is provides a
   complete toolset for wireless 802.11b auditing.   It contains a bsd-based
   WEP cracking application, a curses based AP detection application, etc.

     http://www.dachb0den.com/projects/bsd-airtools.html

 - See http://bugs.debian.org/kfreebsd-5 for the list of kernel bugs we've
   identified (or wishlist requests).

Social work (dealing with maintainers)
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

There's a lot of effort in this port that requires social work rather than
hacking skills, in the area of dealing with maintainers.

 - e2fsprogs transition.  e2fsprogs contains utilities for ext2fs handling
   which we don't normaly use (in fact, the kernel doesn't support using ext2fs
   as /).  However, this package is Essential: yes because it is needed for the
   generic parts like fsck frontend and badblocks checking utility.

   It should be split in two parts.  The transition is not trivial but there is
   already a patch and proposed course of action.  See bug #111651.

 - List of conflictive bugs, requiring someone with social skills to help:

   procps: #290719, #291458

 - Another task you could do to help is reviewing patches from our subversion
   repository (see http://glibc-bsd.alioth.debian.org/patches/).

   Note that patches in upstream-only/ and debian-only/ directories contain
   patches that are only applicable to upstream and debian, respectively.

   Each patch should have a note in its header describing (at least) its
   current status.  If there isn't, someone should find out what it is (check
   the BTS, read changelogs, verify if it is merged, etc) and either add it,
   move the patch to one of the *-only directories (if partialy merged), or
   remove it (if totaly merged).

   The status for most patches is "in BTS".  For each of these, you can help us
   by looking at the bug log and see what is left to be done.  If the
   maintainer has been unresponsive for some time after we sent the patch (e.g.
   a few months), it might help to send a friendly reminder.

Big beasts
~~~~~~~~~~

These are presumably somewhere in the libc implementation and are the most
hard to debug from this list.

Look at the bugs/ directory for test cases.  Good luck!
