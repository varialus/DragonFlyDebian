diff -ur lib.old/libcam/Makefile lib/libcam/Makefile
--- lib.old/libcam/Makefile	2004-02-05 23:44:22.000000000 +0100
+++ lib/libcam/Makefile	2005-08-13 11:29:33.000000000 +0200
@@ -1,12 +1,12 @@
 # $FreeBSD: src/lib/libcam/Makefile,v 1.12 2004/02/05 22:44:22 ru Exp $
 
 LIB=		cam
-SHLIBDIR?=	/lib
+SHLIB_MAJOR=    0
+SHLIBDIR?=	/usr/lib
 SRCS=		camlib.c scsi_cmdparse.c scsi_all.c scsi_da.c scsi_sa.c cam.c
 INCS=		camlib.h
 
-DPADD=		${LIBSBUF}
-LDADD=		-lsbuf
+LDADD=		-L../libsbuf/ -lbsd -lsbuf
 
 MAN=		cam.3 cam_cdbparse.3
 
@@ -34,9 +34,11 @@
 		cam_cdbparse.3 csio_encode_visit.3 \
 		cam_cdbparse.3 buff_encode_visit.3
 
-.PATH:		${.CURDIR}/../../sys/cam/scsi ${.CURDIR}/../../sys/cam
+KERNEL=		${.CURDIR}/../kernel
 
-SDIR=		${.CURDIR}/../../sys
+.PATH:		${KERNEL}/sys/cam/scsi ${KERNEL}/sys/cam
+
+SDIR=		${KERNEL}/sys
 CFLAGS+=	-I${.CURDIR} -I${SDIR}
 
 .include <bsd.lib.mk>
diff -ur lib.old/libcam/camlib.c lib/libcam/camlib.c
--- lib.old/libcam/camlib.c	2004-07-29 17:35:45.000000000 +0200
+++ lib/libcam/camlib.c	2005-08-15 08:23:38.000000000 +0200
@@ -24,10 +24,12 @@
  */
 
 #include <sys/cdefs.h>
-__FBSDID("$FreeBSD: src/lib/libcam/camlib.c,v 1.12 2004/07/29 15:35:45 scottl Exp $");
 
 #include <sys/types.h>
 #include <sys/param.h>
+#ifndef __FreeBSD__
+#include <bsd/bsd.h>		/* strlcpy */
+#endif
 #include <stdio.h>
 #include <stdlib.h>
 #include <string.h>
diff -ur lib.old/libcam/camlib.h lib/libcam/camlib.h
--- lib.old/libcam/camlib.h	2002-04-24 01:58:20.000000000 +0200
+++ lib/libcam/camlib.h	2005-08-13 11:06:04.000000000 +0200
@@ -64,6 +64,10 @@
 #ifndef _CAMLIB_H
 #define _CAMLIB_H
 
+#ifndef __FreeBSD__
+#include <bsd/bsd.h>
+#endif
+
 #include <sys/cdefs.h>
 #include <sys/param.h>
 
