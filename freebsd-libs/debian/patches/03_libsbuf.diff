---
 lib/libsbuf/Makefile |    1 +
 sys/kern/subr_sbuf.c |    1 +
 sys/sys/sbuf.h       |    9 ++++-----
 3 files changed, 6 insertions(+), 5 deletions(-)

--- a/lib/libsbuf/Makefile
+++ b/lib/libsbuf/Makefile
@@ -4,6 +4,7 @@ LIB=	sbuf
 SHLIBDIR?= /lib
 SRCS=	subr_sbuf.c 
 WARNS?= 2
+CFLAGS+= -I${.CURDIR}/../../sys
 
 .PATH:	${.CURDIR}/../../sys/kern
 
--- a/sys/sys/sbuf.h
+++ b/sys/sys/sbuf.h
@@ -31,7 +31,8 @@
 #ifndef _SYS_SBUF_H_
 #define	_SYS_SBUF_H_
 
-#include <sys/_types.h>
+#include <sys/types.h>
+#include <stdarg.h>
 
 /*
  * Structure definition
@@ -64,10 +65,8 @@ int		 sbuf_bcat(struct sbuf *, const voi
 int		 sbuf_bcpy(struct sbuf *, const void *, size_t);
 int		 sbuf_cat(struct sbuf *, const char *);
 int		 sbuf_cpy(struct sbuf *, const char *);
-int		 sbuf_printf(struct sbuf *, const char *, ...)
-	__printflike(2, 3);
-int		 sbuf_vprintf(struct sbuf *, const char *, __va_list)
-	__printflike(2, 0);
+int		 sbuf_printf(struct sbuf *, const char *, ...);
+int		 sbuf_vprintf(struct sbuf *, const char *, va_list);
 int		 sbuf_putc(struct sbuf *, int);
 int		 sbuf_trim(struct sbuf *);
 int		 sbuf_overflowed(struct sbuf *);
