--- a/usr.bin/kdump/Makefile
+++ b/usr.bin/kdump/Makefile
@@ -11,9 +11,9 @@
 CLEANFILES=	ioctl.c kdump_subr.c
 
 ioctl.c: mkioctls
-	sh ${.CURDIR}/mkioctls /usr/include > ${.TARGET}
+	sh ${.CURDIR}/mkioctls /usr/include /usr/include/*-kfreebsd-gnu > ${.TARGET}
 
 kdump_subr.c: mksubr
-	sh ${.CURDIR}/mksubr /usr/include > ${.TARGET}
+	sh ${.CURDIR}/mksubr /usr/include /usr/include/*-kfreebsd-gnu > ${.TARGET}
 
 .include <bsd.prog.mk>
--- a/usr.bin/kdump/mkioctls
+++ b/usr.bin/kdump/mkioctls
@@ -15,21 +15,23 @@
 	echo "usage: sh $0 [-s] include-dir"
 	exit 1
 fi
+include_dirs="$*"
 
 LC_ALL=C; export LC_ALL
 
 # Build a list of headers that have ioctls in them.
 # XXX should we use an ANSI cpp?
 ioctl_includes=`
-	cd $1
-	find -H -s * -name '*.h' |
+	for include_dir in $include_dirs ; do \
+	cd $include_dir
+	find -H -s * -name '*.h' ; done |
 		xargs egrep -l \
 '^#[ 	]*define[ 	]+[A-Za-z_][A-Za-z0-9_]*[ 	]+_IO[^a-z0-9_]' |
 		awk '{printf("#include <%s>\\\\n", $1)}'
 `
 
 awk -v x="$ioctl_includes" 'BEGIN {print x}' |
-	gcc -E -I$1 -dM -DCOMPAT_43TTY - |
+	gcc -E -dM -DCOMPAT_43TTY - |
 	awk -v ioctl_includes="$ioctl_includes" -v use_switch="$use_switch" '
 BEGIN {
 	print "/* XXX obnoxious prerequisites. */"
--- a/usr.bin/kdump/mksubr
+++ b/usr.bin/kdump/mksubr
@@ -27,7 +27,7 @@
 	echo "usage: sh $0 include-dir"
 	exit 1
 fi
-include_dir=$1
+include_dirs="$*"
 
 #
 # Automatically generates a C function that will print out the
@@ -50,8 +50,9 @@
 {
 	int	or = 0;
 _EOF_
+	for include_dir in $include_dirs ; do if test -e $include_dir/$file ; then \
 	egrep "^#[[:space:]]*define[[:space:]]+"${grep}"[[:space:]]*" \
-		$include_dir/$file | \
+		$include_dir/$file ; fi ; done | \
 	awk '{ for (i = 1; i <= NF; i++) \
 		if ($i ~ /define/) \
 			break; \
@@ -84,8 +85,9 @@
 {
 	switch (arg) {
 _EOF_
+	for include_dir in $include_dirs ; do if test -e $include_dir/$file ; then \
 	egrep "^#[[:space:]]*define[[:space:]]+"${grep}"[[:space:]]*" \
-		$include_dir/$file | \
+		$include_dir/$file ; fi ; done | \
 	awk '{ for (i = 1; i <= NF; i++) \
 		if ($i ~ /define/) \
 			break; \
@@ -116,8 +118,9 @@
 $name (int arg)
 {
 _EOF_
+	for include_dir in $include_dirs ; do if test -e $include_dir/$file ; then \
 	egrep "^#[[:space:]]*define[[:space:]]+"${grep}"[[:space:]]*" \
-		$include_dir/$file | \
+		$include_dir/$file ; fi ; done | \
 	awk '{ printf "\t"; \
 		if (NR > 1) \
 			printf "else " ; \
@@ -395,8 +398,9 @@
 {
 	switch (cmd) {
 _EOF_
+	for include_dir in $include_dirs ; do if test -e $include_dir/$file ; then \
 egrep "^#[[:space:]]*define[[:space:]]+F_[A-Z]+[[:space:]]+[0-9]+[[:space:]]*" \
-	$include_dir/sys/fcntl.h | \
+	$include_dir/sys/fcntl.h ; fi ; done | \
 	awk 'BEGIN { o=0 } { for (i = 1; i <= NF; i++) \
 		if ($i ~ /define/) \
 			break; \
@@ -444,8 +448,9 @@
 {
 	switch (func) {
 _EOF_
+	for include_dir in $include_dirs ; do if test -e $include_dir/$file ; then \
 egrep "^#[[:space:]]*define[[:space:]]+RTP_[A-Z]+[[:space:]]+[0-9]+[[:space:]]*" \
-	$include_dir/sys/rtprio.h | grep -v RTP_PRIO | \
+	$include_dir/sys/rtprio.h ; fi ; done | grep -v RTP_PRIO | \
 	awk '{ for (i = 1; i <= NF; i++) \
 		if ($i ~ /define/) \
 			break; \
@@ -474,7 +479,8 @@
 		return;
 	}
 _EOF_
-egrep "^#[[:space:]]*define[[:space:]]+MSG_[A-Z]*" $include_dir/bits/socket.h | \
+	for include_dir in $include_dirs ; do if test -e $include_dir/$file ; then \
+egrep "^#[[:space:]]*define[[:space:]]+MSG_[A-Z]*" $include_dir/bits/socket.h ; fi ; done | \
 	awk '{ for (i = 1; i <= NF; i++) \
 		if ($i ~ /define/) \
 			break; \
