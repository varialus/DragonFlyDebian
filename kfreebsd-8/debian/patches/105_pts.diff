
fix leak of the vnodes
http://lists.freebsd.org/pipermail/freebsd-hackers/2010-April/031433.html

--- a/sys/kern/tty_pts.c
+++ b/sys/kern/tty_pts.c
@@ -589,6 +589,9 @@
 	tty_lock(tp);
 	tty_rel_gone(tp);
 
+	if (fp->f_vnode != NULL)
+		return (vnops.fo_close(fp, td));
+			
 	return (0);
 }
 
