--- src.orig/sys/netinet/ip.h
+++ src/sys/netinet/ip.h
@@ -67,7 +67,7 @@
 	u_char	ip_p;			/* protocol */
 	u_short	ip_sum;			/* checksum */
 	struct	in_addr ip_src,ip_dst;	/* source and dest address */
-} __packed __aligned(4);
+}  __attribute__((__packed__)) __attribute__((__aligned__(4)));
 
 #define	IP_MAXPACKET	65535		/* maximum packet size */
 
