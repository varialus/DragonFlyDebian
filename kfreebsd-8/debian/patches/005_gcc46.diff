--- a/sys/conf/kern.pre.mk
+++ b/sys/conf/kern.pre.mk
@@ -37,6 +37,9 @@
 . if !empty(COPTFLAGS:M-O[23s]) && empty(COPTFLAGS:M-fno-strict-aliasing)
 COPTFLAGS+= -fno-strict-aliasing
 . endif
+. if !empty(COPTFLAGS:M-O[23s]) && empty(COPTFLAGS:M-fno-gcse)
+COPTFLAGS+= -fno-gcse
+. endif
 .endif
 .if !defined(NO_CPU_COPTFLAGS)
 . if ${CC} == "icc"
--- a/sys/conf/kmod.mk
+++ b/sys/conf/kmod.mk
@@ -79,6 +79,9 @@
 . if !empty(CFLAGS:M-O[23s]) && empty(CFLAGS:M-fno-strict-aliasing)
 CFLAGS+=	-fno-strict-aliasing
 . endif
+. if !empty(CFLAGS:M-O[23s]) && empty(CFLAGS:M-fno-gcse)
+CFLAGS+=	-fno-gcse
+. endif
 WERROR?=	-Werror
 .endif
 CFLAGS+=	${WERROR}
