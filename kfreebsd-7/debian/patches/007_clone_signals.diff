Index: sys/kern/kern_fork.c
===================================================================
--- sys/kern/kern_fork.c.orig	2006-03-19 00:37:36.000000000 +0100
+++ sys/kern/kern_fork.c	2006-06-24 17:33:20.000000000 +0200
@@ -517,7 +517,11 @@
 		p2->p_sigacts = newsigacts;
 	}
 	if (flags & RFLINUXTHPN) 
-	        p2->p_sigparent = SIGUSR1;
+	{
+		int sig;
+		sig = RFTHPNSIGNUM(flags);
+	        p2->p_sigparent = sig ? sig : SIGUSR1;
+	}
 	else
 	        p2->p_sigparent = SIGCHLD;
 
Index: sys/sys/unistd.h
===================================================================
--- sys/sys/unistd.h.orig	2005-01-07 03:29:24.000000000 +0100
+++ sys/sys/unistd.h	2006-06-24 17:33:20.000000000 +0200
@@ -173,6 +173,10 @@
 #define	RFHIGHPID	(1<<18)	/* use a pid higher then 10 (idleproc) */
 #define	RFPPWAIT	(1<<31)	/* parent sleeps until child exits (vfork) */
 #define	RFKERNELONLY	(RFSTOPPED | RFHIGHPID | RFPPWAIT)
+#define RFTHPNSHIFT	24	/* reserve bits 24-30 */
+#define RFTHPNMASK	0x7F    /* for compatibility with linuxthreads/clone()   */
+				/* allow to specify  "clone exit parent notification" signal */
+#define RFTHPNSIGNUM(flags)	(((flags) >> RFTHPNSHIFT) & RFTHPNMASK)
 
 #endif /* __BSD_VISIBLE */
 
